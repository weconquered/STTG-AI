四轴控制器 http://www.cdle.net 外观图:四轴脱机运动控制器说明手册v0.5.8 2015‐08‐13   www.cdle.net 黄二
四轴控制器 http://www.cdle.net   www.cdle.net 黄二
四轴控制器 http://www.cdle.net 接口模拟图 所需电源为稳定直压 12V,电流应大于 1A,本控制器工作电流在于 300MA‐800MA 左右 在接入电源时,务必分清正负端!!!!!!!!!!!!!!!!!!模拟图所示的”5V 输出”是指输出的电源,此电流可提供 500MA 左右的电流给外部器件使!!!! www.cdle.net 黄二
四轴控制器http://www.cdle.net 支持的G指令表1    指令 参数 功能  备注  G00 X.Y.Z.A. 机台快速移动 按机台的最大速度进  行快速移动  G01 X.Y.Z.A.F. 加工运行 加工速度受所给定的 F 值限定   G02 X.Y.Z.A.F. 顺时针圆加工    G03 X.Y.Z.A.F. 逆时针圆加工   G04 P 延时 受P值的影响   G17 (X,Y)坐标系平面     G18 (X,Z)坐标系平面     G19 (Y,Z)坐标系平面        G28    XYZA 回机械原点 可单独控制也可组合  P1X*Y*Z*A* 赋值给当前坐标   P2X*Y*Z*A* 当前坐标加上所给的 值   P3XYZA 有条件回机械原点 只有开机后才有效,回 过机械原点后,再调用 此功能无效   G54  工件坐标 1 记忆工件坐标原点与机械原点的偏移量值   G55  工件坐标 2 记忆工件坐标原点与机械原点的偏移量值   G56  工件坐标 3 记忆工件坐标原点与机械原点的偏移量值   G57  工件坐标 4 记忆工件坐标原点与机械原点的偏移量值   G58  工件坐标 5 记忆工件坐标原点与机械原点的偏移量值   G59  工件坐标 6 记忆工件坐标原点与机械原点的偏移量值   G80  钻孔指令结束    G81 X.Y.Z.R.F 钻孔指令 通用钻孔   G82 X.Y.Z.R.P.F 钻孔指令 低部停留时间可控  G83 X.Y.Z.R.I.F  钻孔指令  排销钻孔                        www.cdle.net 黄二
四轴控制器http://www.cdle.net 支持的G指令表2    指令 参数 功能  备注   G90  绝对值尺寸 默认   G91  增量值尺寸            支持的 M 指令表    指令 参数 功能  备注  M00  暂停指令 直到按启动键继续   M03  主轴正转 受延时参数的影响   M04  主轴反转 受延时参数的影响   M05  主轴停止    M07  喷雾开启 受延时参数的影响   M08  冷却开启 受延时参数的影响   M09  同时关闭 M07M08    M30    总程序停止    M47     循环指令   返回第一行运行           www.cdle.net 黄二
四轴控制器http://www.cdle.net 一: 安全须知   在使用本控制系统前,请您仔细阅读本手册后再进行相关的操作。仔细阅读本操作说明书,以及用户安全须知,使用者应该做相应保护,采取必 要的安全防护措施,方可进行操作。   对于重型机械,容易引发人身安全事故的设备,不可使用本控制器。初次进行操作的操作者,应在了解相应功能的正确使用方法后,方可进行相应的 操作,对于不熟悉的功能或参数,严禁随意操作或更改系统参数。系统的检修: 当系统出现不正常的情况,需检修相应的连接线或插座连接处时,应先切断系统电源。再进行必要的检修。 未进行严格培训的操作人员或未得到本工作室授权的单位或个人,不能打开控制系统进行维修操作,改装,修理等行为。 其它事项:本说明书如有与系统功能不符、不详尽处,以系统软件功能为准。 控制系统功能改变或完善(升级),恕不另行通知。如果用户有其他需求,请与本工作室联系。二: 概述本工作室最新研制的“运动控制器”采用高性能 32 位 Cpu,配备液晶显示器, 人性化的窗口式人机界面,存储器采用外接 TF 卡,存储空间大于 2G,工作电压与控制电压 才用隔离方式,轻触式操作键盘。该系统具有可靠性高,精度高,噪音小,操作方便等 特点。本控制器可以四轴联动,有多微线段前瞻控制算法,可实现四轴直线插补与四轴 多微多线段连续插补,并有断行续雕控制。简单、清晰的参数给您的操作带来方便和快捷。输入/输出的设置功能可方便您 的使用和维修。主要功能: 参数设置:可设置与加工、操作有关的各个控制参数,使加工效果达到最佳状态。 手动操作:可实现手动、点动、回程序零、回机械零、坐标清零等操作。 程序管理:可对程序进行新建、删除、修改、读入、保存、自动加工, 连续、暂停等功能。   外部手动:可定义多种外部手动功能,以方便使用   自由选择输入功能:使有限输入口可实现各种用户需求    系统组成   数控系统主要由以下几部分组成:高性能、高速度 32 位 ARM CPU液晶显示器(分辨率:320×240)输入/输出(16 路光电隔离 10MA 输入,15+1 路光电隔离下拉罐流 500MA 输出) www.cdle.net 黄二
四轴控制器http://www.cdle.net 用户加工程序存储器可以实现在 TF 卡任意存储技术指标最小数据单位 0.0001mm常规精度为 正负 2PP 量极连继直线拐角精度 是拐角弓高的 4 分之一最大数据尺寸 ±99999.999mm最高脉冲输出频率 50KHz (四轴可同时 50KHZ)控制轴数 4 轴(X,Y,Z,A)联动轴数 4 轴联动并具有四轴多微多线段前瞻插补控制外观及面板 :外形尺寸:长 163mm,宽 115mm,厚 50mm 开孔尺寸: 157*93mm www.cdle.net 黄二
四轴控制器http://www.cdle.net 开机画面 对于 HDSD(TF),会因卡 的问题,并不能完全认识,请更 换其它的卡再读取!在存入 TF 卡中的文件与文件夹的总数量大于50 个后不给予显示!!!!!!(注:)因为系统对于 TF 卡数据 要求极为严格,固对一般低端卡(山 寨卡)会有所排斥,请更换其它正品 卡再读取!!!  www.cdle.net 黄二
四轴控制器http://www.cdle.net 面板快徢键 ⊙ 为“原点操作”(请注意配置脚,电平与使能)面板快徢键 ¢ 为“坐标清除操作”面板快徢键 ¤ “手动点动”“返回参考点” Z 轴升到安全高度, 其它所有轴再回到指定的位置,Z 轴再 回指定位置,(在机械原点上可以设定 此点)“返回原点” Z 轴升到安全高度,XY 轴退 回到原点,Z 轴再退回到原点.“返回机械原点” :Z 轴退到机械原点,Y 轴 退到机械原点,Y 轴退到机械原点, (请注意配置脚,电平与使能) “对刀” Z 轴下降(或升高),当碰到探针,停 止运行后清 Z 轴坐标为对刀器偏移值,并 Z 轴抬刀得弹回高,此过程结束.X 轴单轴清零Y 轴单轴清零Z 轴单轴清零A 轴单轴清零 全轴清零退出 功跟字意所示一样  “手动”恢复手动 “1mm”:当选取时后按对应的方向键,会 移动相应的长度(增量移动方式)如想移动一个具体的长度,可以在输入 筐输入具体的数字,(只能按”OK”后变成 黄筐才能输入,返回变绿有效),按相应的 www.cdle.net 黄二
四轴控制器http://www.cdle.net 轴方向键,即可.对应 X+X‐Y+Y‐Z+Z‐A+A‐都有效面板快徢键 XY ZA 为“直接坐标操作”“运行到到” 对应的轴会直接运行所指定的坐标中.“更变坐标” :对应的轴会直接变成所设定的数(此操作为不可逆,请慎重操作)面板快徢键 S 为“主轴操作” 输入筐可填入转数,此参数的最       高值在主机设定中可设置。  面板快徢键 F 为“手动给进速度操作”示筐中的 D 的值是手动给进速度。  www.cdle.net 黄二
四轴控制器 http://www.cdle.net  面板快徢键 G为“工件坐 标系操作”选定 G*,可以选取坐件坐标系, 需要配合机械坐标来操作。点击” 机台配置” 如下,后点击”电机参数”进入如下画面字意解释:脉冲当量: 单位长度所需的脉冲个数,(每一毫米所需的脉冲量)支持浮点输入最高速度: 此电机所能运行的最高速度(毫米/分钟),当输入超过系统所能达到的 最大值时,会按系统所能达到的最大值的为准. 理想值为最大值的 70%超过最大值的 70%会提示红色警告加速度: 电机所能运行的最高加速度.此值过小会严重影响多微线段的拐角速度  脉冲电平: 此值为 0 有效。方向电平: 脉冲宽度:1 或 0,高电平有效,还是低电平有效,由驱动器决定的,多数的驱动器1 或 0 高电平有效,还是低电平有效 ,改变此会改变运行方向 脉冲有效的输出时间,只为一个量值,正常下可以取 0. www.cdle.net 黄二
四轴控制器 http://www.cdle.net 数值如下:T =4.3 微秒+0.43*N(所选取的数)注意版本 V0.5.8 15_6_26 之后的版本。脉冲当量 = 步进电机驱动细分数×(360/步进电机步进角度)/丝杆螺距 例: 步进角度=1.8 丝杆螺距 = 5mm 细分 = 8脉冲当量 = 8*(360/1.8)/5 = 320最高速度值: 要按照电机的能力最终确定,以不失步为原则,取最大速度值的70%,留 30%余量给电机(步进电机的特性). T 加速度表如下:加速度值的最终确定按电 机的最大所能容忍的加速 度值的 70%为宜,保留 30% 突变值给电机,才能保证 电机不会失步(步进电机 的特性).脉冲电平与脉冲宽 度的关系(注:实际宽度是给定宽度加系统默认度)  方向电平:当方向电平为 1 是在轴正运行时,输 出为高电平,反运行为低电平当方向电平为 0 是在轴正运行时,输 出为低电平,反运行为高电平关于 IO 接口电平设定说明: www.cdle.net 黄二
四轴控制器 http://www.cdle.net 开始运行,回原点,全轴清零,暂停,回机械原点 1 接成常开(按下去导通,红灯变灯),设电平为 0。2 接成常闭(接下去断开,黑灯变红灯),设电平为 1。(防干扰最强) 急停:接好开关线后,让开关处于弹出状态,看“测试灯” 如果灯是红色,设电平为 0. 如果灯是黑色,设电平为 1.注: 弹出状态是工作状态,压入自锁是急停状态。限位输入:1, 接成常开(碰到限位时导通,红灯变黑灯),设电平为 1. 2, 接成常闭(碰到限位时断开,黑红变红灯),设电平为 0.机械原点:1,接成常开(碰到限位时导通,红灯变黑灯),设电平为 1. 2,接成常闭(碰到限位时断开,黑红变红灯),设电平为 0. ”打开文件”在显示栏中出现文件名,此文件名格式为标 准的 8_3 格式8 个字符名,3 个后缀当显示中文时能有四个中文名,3 个 后缀,大于四个将不给全名显示,用~N 代替旋动高级功能键,或上下功能 键能翻页显示点击高级功能键的中间键或”OK”键 可以选取文件,进入如下界面此时可以打开文件,或返回文件选择 (重新选取),或退出到主界面点击”打开此文件”进入该文件内容显 示如下   www.cdle.net 黄二
四轴控制器http://www.cdle.net  现在可以浏览文件内容了,点击高级功能 键中间键,或 OK 键可以调出始下子菜单的界面: ”开始运行”可以选取是否从第一行开始,或 N 行开 始,或指向 N 行进行显示,也可以直接返回文件 选择重新选取文件扣选筐选定输入筐后,可以输入所需要 的行数,输入后选”指向选取行”就可以直接跳 跃到指定的行数,如对于超大,超多行,所用耗时 间也会跟着变大!!如果输入的行数大于文件本身的行数, 此时会指向文件的最尾端.点击:“从第一行始始”,”从选取行开始”这两项 都会跳出到主界面来, 到此打开文件完毕.并把 主键功有交给主界面区.就可以直接开始运行了!,如果在此之前 有断点过,并且没更改过文件,此时会跳出一个 窗口如下:第一项为安全高度,安全高度的作用:在 当前头具的位置要移动到加工位置时会提起 刀具,此高度就是安全高度,也可以看做 Z 轴的 所在高度  www.cdle.net 黄二
四轴控制器 http://www.cdle.net 用扣选筐选定后可以更改这个值,也可以在高级功能里更改默认安全高度.“续点运行” :断点在 N 点至 N+1 之间点时,续点运行后会直接从 N 点开始,其中会 重复 N 至 N+1 点之间已加工过的轨迹,并接入未完成的轨迹.“续点前运行” :断行 N 点至 N+1 之间点时,续点前运行后会直接从 N+1 开始, 会丢弃 N 至 N+1 行的加工轨迹,请多加注意.“退出” 放弃本次运行.(注: 当断点续接运行行数超大时,因为要从头找出坐标系与续点,会有一定运算时间,TF 卡的读写速度会影响当前的运算速度.在左上角 会指示运行数)“限位输入” “机械原点”使能: 是否选定限位功能脚位: 对于选定限位功能后,所对应的输入脚位(可选取 1‐16)电平: 输入高电平有效,还是低电平有效. (下面详述)使能: 是否选定限位功能脚位: 对于选定限位功能后,所对应的 输入脚位(可选取 1‐16)电平: 输入高电平有效,还是低电平的 效, (下面详述)方向: 返回至机械时 XYZ 方向,可正可 负返回速度: 返回至机械时与对刀时的速 度参考点:(下面详述)  www.cdle.net 黄二
四轴控制器 http://www.cdle.net 以上的输入脚位对应着控制器的 16 个输入端,可以任意指定是那个脚位做为当前 限位输入“文件管理”点击”文件管理”所进入左边图示的文件列表 界面,可以添加新文件,删除文件,修改文件.点击所扣选筐指定的文件后会进入如下界 面:“编缉此文件”:可以编辑所选定的文件 “返回文件选择”: 重新选取文件 “新建文件” :新建一个文件 “删除文件”:删除选定的文件 “添加新的文件夹”: 建新的文件夹 “返回主界面”: 直接退回到主界面  新建文件与删除文件界面: www.cdle.net 黄二
四轴控制器http://www.cdle.net   “编缉此文件”  “编缉此行”对选定的行进行编缉 “插入行” ,”删除此行”控制器面板上的相应键,输入所需的 G 代码,后按”OK”键,保存返回,(前端是旧的参数行),面板修键中有” ←”可以 对输入出错的字符进行退位修改. www.cdle.net 黄二
四轴控制器http://www.cdle.net  “主轴控制”在所选取行的前端插入空行如图: “删除此行”,会删除指定行“返回行选择”返回 G 指令行再重新选定 “返回文件选择”返回文件列表界面注: 如果文件最后一条指令没能 运行到,请在文件最后加入一行空 行!!!!!!!!!!!M03,M04,M05M03 顺时针运行: 此时关闭 M04 对应的脚 位并开启 M03 对应的脚位M04 逆时针运行: 此时关闭 M03 对应的脚 位并开启 M04 对应的脚位M05 会同时关闭 M03,M04 的脚 M07,M08,M09M07: 开启对应的脚位,不会影响 M08M08: 开启对应的脚位,不会影响 M07M09: 会同时关闭 M07,M08 的脚位 延时: 启开 M03,M04,M07,M08 所用时间. PWM 的位脚是固定为 16 脚,如开启这个脚位,对应于 OUT 输出应改去除,不然会因两者同时控制而冲突!!!!!!!!!!!!!!!!! PWM 频率: 是指输出的频率Max S: 是指最大 S 对应于最大频率 占空比 = S(G 指令给定的值)/(MAX S)                   如有需要控制复位时机台使能的请配置如  www.cdle.net 黄二
四轴控制器 http://www.cdle.net 下:当出现 RESET 灯闪动时,相应配置的脚位会输出相应的电平 可用这个来控制四轴的使能端,或机台工作提示G 指令码参数: 精确停止: 打开 CVL 控制,CVL 控制: 拐角长度限制如下图所示G1 分辩率:是指最 G01 最小长度,这是算法的限定,用户可以用默认值:0.0001 安全高度:是指暂停,或回原点,回参考点,Z 轴抬高的安全高度。 对刀偏移:对刀后 Z 轴清 0 后偏置上这个值,这个值主要是用于对刀器高度的调整. 对刀弹回:对刀后,Z 轴停止后,会按照这个值离开对刀器,方便拿走对刀器。G2/G3超差:指手工计算或其它计算后输入G02/G03.是因为计算精度问题, 使之圆弧圆心跟给定的值不一致,此刻, 有一个容错值,系统会根据给定的参数, 重新计算最理想的圆心坐标,详述可见 G02/G03说明弦长: 系统拟合生成段弧形时的弧形 弦长,详述请见 G 指令码说明 www.cdle.net 黄二
四轴控制器 http://www.cdle.net  操作功能:高 级 在待机时(没有运行加工)进行调速: 按住停止键不放 www.cdle.net 黄二
四轴控制器 http://www.cdle.net (黑四方键),同时再旋动高级功能键,就可以直接调节运行 速度百份比,在主屏幕上可以看到速度百份比(I:100‐1)显示.在加工运行中,直接旋动高级功能键,可以调整运行速 度的百份比, 在主屏幕上可以看到速度百份比(I:100‐1)显 示.在待机时(没有运行加工)进行调速: 按住停止键不 放(黑四方键),同时按压高级功能键的中间键可以切换主轴 转数与运行速度的调整。运行时可以直接按压中间键进行 调整如图:   www.cdle.net 黄二
四轴控制器 http://www.cdle.net 特定功能:(工厂模式下)1:打开 F1,F2,F3,F4,F5 手动控制 OUT1‐5 功能,指定密码为:033501开启,033500 关闭。 2:软限位基于工件坐标,MODE:1(默认)。密码为:085601.软限位基于机械坐标,MODE:0 密码为:085600. 3,系统参数初始化 : 密码为:100001. 4,机台系统参数存于 TF 卡中:密码为:001001。TF 卡中的数据弹回机台内:密码为:001000。 5,改变返回机械原点轴顺序模式:密码为:83156**,0ZXYZ,1ZAXY,2ZYXA,3XYZA,4XZYA,5YXZA,6YZXA,7AZXY,8AZYX, 9AXYZ,*ZXYA(默认)。 www.cdle.net 黄二
四轴控制器 http://www.cdle.net G 指令解读 G00:格式:G0X..Y..Z...A轴快速移动,G0 用于快速定位刀具,没有对工件进行加工。可以在几个轴上同时 执行快速移动,由此产生一线性轨迹(点到点)如图。机床数据中规定每个坐标轴快速移 动速度的最大值,一个坐标轴运行时就以此速度快速移动。如果快速移动同时在两个轴 上执行,则移动速度为两个轴合成的矢量速度。用 G0 快速移动时在地址 F 编程的进给 率无效。会按系统每轴的最大值合成矢量速度运行.走四方案例: G0X0Y0Z0G0X10 G0Y10 G0X0 G0Y0G01:格式 G1X..Y..Z..A..F..刀具以直线从起始点移动到目标点,以 F 下编程的进给速度运行。所有的坐标轴 可同时运行。G1 一直有效,直到被其它的指令取代。本控制器支持多微多线段前瞻控制插补算法,即一条以上的线段会按连续插补算 法计算轨迹,实现了光滑平稳过度,并会在前瞻法尽可能地提高运行速度.  www.cdle.net 黄二
四轴控制器 http://www.cdle.net  红色轨迹是实际运行中的轨迹,F 为加工速度.在 G 参数中 精确停止与 CVL 可以限定拐角长度。对于铣床铣边角特别适应。也 可以在生成 G 指令的软件上对此这行限定。画四方案例: G0X0Y0Z0 X10F1200 Y10X0 Y0 www.cdle.net 黄二
四轴控制器http://www.cdle.net G02 G03:格式: (1) G02X..Y..Z..R..F.. (2) G02X..Y..Z..I..J..K..F格式: (1) G03X..Y..Z..R..F.. (2) G03X..Y..Z..I..J..K..FG02 顺圆,G03 逆圆(半径法) (圆心法) (半径法) (圆心法) G02(G03)X..Y..Z..I..J..K..F..G17(X,Y)坐标系平面(默 认平面)G18(X,Z)坐标系平面 G19(Y,Z)坐标系平面圆心法:X,Y,Z 表示终点坐标,F 加工 速度I 表示圆弧起点到圆心的 距离在 X 轴上的投影J 表示圆弧起点到圆心的 距离在 Y 轴上的投影K 表示圆弧起点到圆心的 距离在 Z 轴上的投影I,J,K 的方向与 XYZ 轴的正 负方向相对应 参数的合法性(以 XY 平面): www.cdle.net 黄二
四轴控制器 http://www.cdle.net 圆心法可以直接求出半径 R= sqrt(i^2+j^2) 如果起点与终点的直线长度大于 2R 则 不可能成圆弧出错提示.当上面条件成立后,系统会重新计算最合理的圆心坐标,当与实 际上给定的圆心坐标有一定偏差,叫做超差值,如果此偏差值大于系统给定的超差值时就 提示出错,在系统中可以设定此超差值的大小,方便更快速地输入参数.(注:实际所能构成圆弧的圆心与输入圆心之间的差值叫超差值,此超 差最大值可以设定,可以更宽地容忍参数输入限定) G02(G03)X..Y..Z..R..F..案例:GOX0Y0Z0G1Z‐1F1200Y10X20 G02X30Y20I10J0 G1X80Y0X0 G0X0Y0Z5半径法:X,Y,Z 表示终点坐标,F 加工速 度R 表示圆弧半径F 加工速度 在已知圆弧的起点和终点的情况下,用半径编程,按几何作图会 现现两段圆弧,一个大圆弧一个小 圆弧,为了不致产生歧义,规定 R>0 是小圆弧,R<0 是大圆弧对于整圆,因终点与起点相重 合,用 R 编程,会有无数解,无法定义 圆心位置,所以只能用圆心坐标编 程法.例:GOX0Y0Z0   www.cdle.net 黄二
弦长:四轴控制器http://www.cdle.net G1Z‐1F1200 Y10X20 G02X30Y20R10 G1X80Y0X0 G0X0Y0Z5给定 G02,G03 系统计算参数 合化性后会对圆弧进行分解拟合成 多微线段,此多微线段的成形尺度 为弦长,可以在系统中设定此长度, 参考值为(0.1mm‐5mm)注: 因系统有前瞻多微多线 段插补算,固此弦长不可取过份短 小,当有必要取过份短小时,加工速 度一定要有所调低!!!G17(X,Y)坐标系平面(默认平面) G18(X,Z)坐标系平面 G19(Y,Z)坐标系平面 G04(暂停,延时)  www.cdle.net 黄二
四轴控制器 http://www.cdle.net 格式: G04P..通过在两个程序段之间插入一个 G4 程序段,可以使加工中断给定的时间 P 后缀是毫秒,最小为 500ms+P*案例: (延时 1 秒)G0X0Y0G1Z-1F1200 G1X20Y20 G04P1000 G1X40Y40 G0Z5 G0X0Y0G90(默认):绝对尺寸G91:增量尺寸G90 和 G91 指令分别对应这绝对位置数据输入和增量位置数据输入。其中 G90 表 示坐标系中目标点的坐标尺寸,G91 表示待运行的位移量。G90/G91 适用于所有坐标轴。 这两个指令不决定到终点位置的轨迹,轨迹由 G 功能组中的其它 G 功能指令决定(G0, G1 G2,G3...)。 程序启动后 G90 适用于所有坐标轴,并且一直有效,直到在后面 的程序段中有 G91 出现特定的 G 指令:G54 G55 G56 G57 G58 G59(工件坐标系)格式: G54 G55 G56 G57 G58 G59可以选择 6 个不同的工作坐标 它是基于机械原点来计算工件的坐标偏移量使用条件:1 装备机械原点2 开机回过一次机械原点(可以配合 G28P3 调用一次回机械原点)主界面上 G54 由红变黄 上面两条件成立后,当每轴清零后会自动记忆当前原点与机械机原点的偏移值并存储. 如果上次有过记忆过坐标系,当回机械原点后,会弹回上次记忆的坐标系值。 www.cdle.net 黄二
四轴控制器http://www.cdle.net G54~ 59 图解 G28: (坐标与回机械原点操作)格式(四种模式): G28XYZAG28 P1X*Y*Z*A*G28 P2X*Y*Z*A* G28 P3XYZAG28XYZA 执行此命令后会自动回机械原点,X,Y,Z,A可以单独写入,如以下都合法1: G28X (表示回 X 机械原点) 2: G28XY (表示回 XY 机械原点) 3: G28ZG28Y (两条组合指令有先有后,表示会先执行 Z 机械原点,后回 Y 机械原点) G28P1X*Y*Z*A* 执行此命令后,会把 X,Y,Z,A 轴对应的数值赋值给当前坐标。案例: www.cdle.net 黄二
四轴控制器http://www.cdle.net 比如当前坐标:X100 Y100 Z50 A0 代码中执行 G28P1X200Y500Z10A20X:200 Y:500 Z:10 A:20则当前坐标值会变成:G28P2X*Y*Z*A*执行此命令后,会把 X,Y,Z,A 轴对应的数值赋值加上当 前坐标轴的值,如*给负数,会执行减法运算。案例:比如当前坐标: X200 Y300 Z400 A500代码中执行 G28P2X‐20Y‐500Z60A520X:180 Y:‐200 Z:460 A:1020G28P3XYZA则当前坐标值会变成:此指令只有开机,并没手动回机械原点,才有效,即 G54 显示为红色才会有效。 如执行过回机械原点,再执行此条指令会无效。案例:(开机没回过机械原点)1: G28P3XX 轴会自动回机械原点。2: G28P3YY 轴会自动回机械原点。3: 可以 N 条 G28P3XYZA 组合(开机有回过机械原点)1: G28P3X无效2: G28P3Y无效(说明:此指令主要用于有工作坐标系,并且建立了机械原点与工件从标系的关系, 断电后重新启动运行,防止因没回机械原点,而产生失误。)G81: (钻孔指令)格式: G81X..Y..Z..R..F..X,Y 表示终点坐标, Z 表示加工时的深度 F 加工速度, www.cdle.net 黄二
四轴控制器 http://www.cdle.net R 表示开始的开工平面(安全高度),并表示返回后的 Z 终点案例: (在坐标(20,0),(20,20),(0,20),(0,0)钻四个深度为 5 的孔,安全平面为 2,速度为 200)G0X0Y0Z5 G81X20Y0R2Z‐5F200 G81X20Y20R2Z‐5F200 G81X0Y20R2Z‐5F200 G81X0Y0R2Z‐5F200 G0X0Y0Z5G82: (钻孔指令)格式: G82X..Y..Z..R..P..F..X,Y 表示终点坐标, Z 表示加工时的深度,S 表示在孔底停留时间(单位毫秒) F 加工速度,R 表示开始的开工平面,并表示返回后的 Z 终  www.cdle.net 黄二
四轴控制器 http://www.cdle.net  点:案例: (在坐标(20,0),(20,20),(0,20),(0,0)钻四个深度为 5 的孔,安全平面为2,并在孔底停留 1 秒,速度为 200) G0X0Y0Z5G82X20Y0R2Z‐5P1000F200 G82X20Y20R2Z‐5 P1000F200 G82X0Y20R2Z‐5 P1000F200 G82X0Y0R2Z‐5P1000F200 G0X0Y0Z5G83: (固定循环钻孔指令)格式: G83X..Y..Z..R..I..F..X,Y 表示终点坐标, Z 表示加工时的深度,I 表示每次下降的位移量,当加工至 I 深度后 并会进行退削动作,F 加工速度,R 表示开始的开工平面,并表示返回后的 Z 终点: www.cdle.net 黄二
四轴控制器 http://www.cdle.net  案例: (在坐标(20,0),(20,20),(0,20),(0,0)钻四个深度为 5 的孔,安全平面为 2,每次下降深度 I 为 1,有退刀动作,速度为 200)G0X0Y0Z5 G83X20Y0R2Z‐5I1F200 G83X20Y20R2Z‐5 I1F200 G83X0Y20R2Z‐5 I1F200 G83X0Y0R2Z‐5 I1F200 G0X0Y0Z5 www.cdle.net 黄二
四轴控制器 http://www.cdle.net M 指令:M00: 暂停指令,并会在屏幕中提示“PAUSE“,直到按启动键继续。M03: 先关闭反转信号,再开主轴正转,开启时会受延时参数的影响, M04: 先关闭正转信号,再开主轴反转,开启时会受延时参数的影响 M05:主轴停止,至关闭 M03,M04. M07:喷雾开启,开启时会受延时参数的影响 M08:冷却开启,开启时会受延时参数的影响M09:同时关闭 M07,M08;M30: 加工结束,之后不再调用。直接退出。 M47:返回到第一行,旋环不停加工。直到按停止或暂停急停才退出。 www.cdle.net 黄二
四轴控制器 http://www.cdle.net 特定的 M 指令:本控制器用特定的 M 指令做一些高级控制M47 返回第一行重新开始,可在程序的最后加入循环不停 输出控制 M 指令(M1**,M2**)M101 对应 OUT_1 输出高电平(虚高, 方便不同电压接上拉电阻)M102 对应 OUT_2 输出高电平(虚高, 方便不同电压接上拉电阻)M103 对应 OUT_3 输出高电平(虚高, 方便不同电压接上拉电阻)M104 对应 OUT_4 输出高电平(虚高, 方便不同电压接上拉电阻)M105 对应 OUT_5 输出高电平(虚高, 方便不同电压接上拉电阻)M106 对应 OUT_6 输出高电平(虚高, 方便不同电压接上拉电阻)M107 对应 OUT_7 输出高电平(虚高, 方便不同电压接上拉电阻)M108 对应 OUT_8 输出高电平(虚高, 方便不同电压接上拉电阻)M109 对应 OUT_9 输出高电平(虚高, 方便不同电压接上拉电阻)M110 对应 OUT_10 输出高电平(虚高, 方便不同电压接上拉电阻)M111 对应 OUT_11 输出高电平(虚高, 方便不同电压接上拉电阻)M112 对应 OUT_12 输出高电平(虚高, 方便不同电压接上拉电阻)M113 对应 OUT_13 输出高电平(虚高, 方便不同电压接上拉电阻)M114 对应 OUT_14 输出高电平(虚高, 方便不同电压接上拉电阻)M115 对应 OUT_15 输出高电平(虚高, 方便不同电压接上拉电阻)M116 因逻辑性容易混淆,故放弃对 OUT_16 输出控制M201 对应 OUT_1 输出低电平(灌流 500ma 至地)M202 对应 OUT_2 输出低电平(灌流 500ma 至地)M203 对应 OUT_3 输出低电平(灌流 500ma 至地)M204 对应 OUT_4 输出低电平(灌流 500ma 至地)M205 对应 OUT_5 输出低电平(灌流 500ma 至地)M206 对应 OUT_6 输出低电平(灌流 500ma 至地)M207 对应 OUT_7 输出低电平(灌流 500ma 至地)M208 对应 OUT_8 输出低电平(灌流 500ma 至地)M209 对应 OUT_9 输出低电平(灌流 500ma 至地)M210 对应 OUT_10 输出低电平(灌流 500ma 至地)M211 对应 OUT_11 输出低电平(灌流 500ma 至地)M212 对应 OUT_12 输出低电平(灌流 500ma 至地)M213 对应 OUT_13 输出低电平(灌流 500ma 至地)M214 对应 OUT_14 输出低电平(灌流 500ma 至地)M215 对应 OUT_15 输出低电平(灌流 500ma 至地)M216 因逻辑性容易混淆,故放弃对 OUT_16 输出控制 www.cdle.net 黄二
四轴控制器 http://www.cdle.net 输入判断 M 指令(M3**,M4**)M301 对应输入端 INTPU_1 M302 对应输入端 INTPU_2 M303 对应输入端 INTPU_3 M304 对应输入端 INTPU_4 M305 对应输入端 INTPU_5 M306 对应输入端 INTPU_6 M307 对应输入端 INTPU_7 M308 对应输入端 INTPU_8 M309 对应输入端 INTPU_9 M310 对应输入端 INTPU_10 M311 对应输入端 INTPU_11 M312 对应输入端 INTPU_12 M313 对应输入端 INTPU_13 M314 对应输入端 INTPU_14 M315 对应输入端 INTPU_15 M316 对应输入端 INTPU_16判断是低电平执行下一行,否侧一直等待 判断是低电平执行下一行,否侧一直等待 判断是低电平执行下一行,否侧一直等待 判断是低电平执行下一行,否侧一直等待 判断是低电平执行下一行,否侧一直等待 判断是低电平执行下一行,否侧一直等待 判断是低电平执行下一行,否侧一直等待 判断是低电平执行下一行,否侧一直等待 判断是低电平执行下一行,否侧一直等待 判断是低电平执行下一行,否侧一直等待 判断是低电平执行下一行,否侧一直等待 判断是低电平执行下一行,否侧一直等待 判断是低电平执行下一行,否侧一直等待 判断是低电平执行下一行,否侧一直等待 判断是低电平执行下一行,否侧一直等待 判断是低电平执行下一行,否侧一直等待M401 对应输入端 INTPU_1 判断是高电平执行下一行,否侧一直等待 M402 对应输入端 INTPU_2 判断是高电平执行下一行,否侧一直等待 M403 对应输入端 INTPU_3 判断是高电平执行下一行,否侧一直等待 M404 对应输入端 INTPU_4 判断是高电平执行下一行,否侧一直等待 M405 对应输入端 INTPU_5 判断是高电平执行下一行,否侧一直等待 M406 对应输入端 INTPU_6 判断是高电平执行下一行,否侧一直等待 M407 对应输入端 INTPU_7 判断是高电平执行下一行,否侧一直等待 M408 对应输入端 INTPU_8 判断是高电平执行下一行,否侧一直等待 M409 对应输入端 INTPU_9 判断是高电平执行下一行,否侧一直等待 M410 对应输入端 INTPU_10 判断是高电平执行下一行,否侧一直等待 M411 对应输入端 INTPU_11 判断是高电平执行下一行,否侧一直等待 M412 对应输入端 INTPU_12 判断是高电平执行下一行,否侧一直等待 M413 对应输入端 INTPU_13 判断是高电平执行下一行,否侧一直等待 M414 对应输入端 INTPU_14 判断是高电平执行下一行,否侧一直等待 M415 对应输入端 INTPU_15 判断是高电平执行下一行,否侧一直等待 M416 对应输入端 INTPU_16 判断是高电平执行下一行,否侧一直等待注: 对 M3**,M4** IO 输入口,作了 30 毫秒的防抖输入限制! www.cdle.net 黄二
四轴控制器 http://www.cdle.net G,M 指令组合案例:1 工程目标: 启动开关触发后,X 轴控制工作移动速度为 600,至第一个指定位置 A 点后,输出一个动作给气动 A,”2 秒,后半闭返回,1 秒,再移动工作速度为 600 至 B 点,再输 出一个动给气动 B,2 秒,后关闭返回,1 秒,再移动工作速度为 1200 返回到 A 点,等待启动 并关触发........如图:A 点的位置为原点,B 点为 500MM,C 点为 1000MM接好 X 轴控制所有的电路,与接一个输入开关到输入口 1 作为启动按钮,并接好两路 气动单元A,B到输出口1,2, A接1,B接2 序程指令如下: G1X500F600 M101 G4P2000M201 G4P1000 G1X1000F600 M102 G4P2000 M202 G4P1000 G1X0F1200 M301M47 (回车或空车)(把工件移动到 500 位置) (打开气动 A)(延时 2 秒) (关闭气动 A 返回 )(延时 1 秒) (把工作移动到 1000 位置)(打开气动 B) (延时 2 秒)(关闭气动 B 返回) (延时 1 秒) (把工作移动到 0 位置)(等待启动键触发)(返回第一行重新开台 注:最后一行最后要加入回车) www.cdle.net 黄二
四轴控制器 http://www.cdle.net 本控制器雕刻出来的浮雕图片:   www.cdle.net 黄二
四轴控制器 http://www.cdle.net    www.cdle.net 黄二
四轴控制器 http://www.cdle.net    www.cdle.net 黄二
四轴控制器 http://www.cdle.net    www.cdle.net 黄二
四轴控制器 http://www.cdle.net    www.cdle.net 黄二