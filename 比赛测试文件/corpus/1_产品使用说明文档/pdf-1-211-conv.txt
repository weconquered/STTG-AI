       可编程控制器  Nano使用说明书对应模块: TOYOPUC-Nano CPU PW2I-22 I-12 SWO-29 O-28(开发中) O-19 O-18(开发中) O-12IO-329 IO-328(开发中) SL8BS6BS4BS(TUC-6941) (TUV-6942)(TUK-6948) (TUK-1006) (TUK-6965)(TUK-6947) (TUK-1010) (TUK-1009) (TUK-1008) (TUK-1007) (TUK-6952) (TUK-1005) (TUU-6955) (TUR-6943) (TUR-6966) (TUR-6967)           
  TOYOPUC-Nano系列   1. 系统构成1  2. 设置与布线2  3. 初始设定3  4. 试运行4  5. 异常警报5  6. 维护6  7. 规格7  8. CPU 功能8  9. 链接功能9  10. 显示器10  11. 工具11  资料资资                                      
前言此次承蒙购买本公司的可编程序控制器,谨表衷心感谢。 本书为以下产品的使用说明书。TOYOPUC-Nano CPU PW2I-22I-12SWO-29 O-28(开发中) O-19 O-18(开发中) O-12IO-329 IO-328(开发中) SL8BS6BS4BS(TUC-6941) (TUV-6942) (TUK-6948) (TUK-1006) (TUK-6965) (TUK-6947) (TUK-1010) (TUK-1009) (TUK-1008) (TUK-1007) (TUK-6952)(TUK-1005) (TUU-6955) (TUR-6943) (TUR-6966) (TUR-6967) 为了保证您能安全操作本产品,必须通读本使用说明书以及相关的使用说明书。另外,阅读后请妥善保管 并随身携带,以便能在需要时调阅。 希望您将本使用说明书交给最终需要者。 产品规格可能会由于改良而进行更改,恕不另行通知。 按照外汇以及国际贸易管理法规定,将符合战略物资等(或者劳务)的产品出口到日本国外时,需要得到 日本政府的出口许可。 在本产品的保修期内由于本公司的责任造成的质量问题,将根据本公司的判断进行修理或者更换。除上述 责任以外,本公司对本产品造成的直接或者间接的伤害的其他责任概不负责。关于著作权、商标EtherCAT 为 Beckhoff Automation GmbH 的注册商标。EtherNet/IP 为 ODVA(Open DeviceNet Vendor Association) 的注册商标。 Ethernet 及以太网为富士施乐株式会社的注册商标。DeviceNet 为 ODVA(Open DeviceNet Vendor Association) 的注册商标。 MODBUS 为 Schneider Electric 的注册商标。 除此之外,本文中的公司名称、产品名称为各公司的商标或注册商标。    i
 安全使用注意事项  进行安装、运转、保养、检察之前必须阅读本使用说明书,并且必须正确使用。请在熟悉机器知  识、安全信息和所有注意事项之后再进行使用。本使用说明书将安全注意事项的等级分为「警告」「注意」2 种。 错误使用时会造成使用者死亡或重伤的危险状态。           错误使用时会造成使用者受伤或者造成物品损坏的危险状态。    □ 请勿在接通电源的状态下分解组件或触摸组件内部,有触电的危险。 否则可能会触电。□ 接通电源时请不要触摸端子部。 否则可能会触电。□ 请在设备、机械的周期停止状态下进行 PC 运转过程中的写入。(RUN 时写入)  操作错误可能导致机器损坏或者受伤。□ 关于锂电池的使用,请认真阅读本说明书中的 《锂电池使用注意事 项》。如果错误使用,会造成液体外漏、过热、起火、破裂,可能损 坏机器,人员受伤。□ 安全相关信号和异常停止电路等,考虑到故障保险的问题,请使用外 部信号,而不要依靠本系统。 ii
   □ 请在本使用说明书中记载的一般规格的环境下使用。□ 请不要在接通电源的状态下进行设置作业、配线作业。带有端子台的产品也请不要进行装卸。□ 请不要直接触摸模组内部的电子电路。否则可能会由于静电破坏模组。□ 请不要在模组的装卸、运输等过程中,将本模组掉落到地板等上。否 则将导致误动作。□ 装置出现故障时,请与本公司联系。客户请不要自行拆解模组。否则 可能导致本公司无法正确进行故障解析。□ 保管和运输注意事项1. 本模组请按照使用说明书中记载的一般规格进行保管。但环境温度必须保持在−20°C~+60°C 之间。2. 请勿将其直接放置在导电性物体之上。3. 电子设备容易受到结露的影响,因此,请使用干燥剂等,以避免 结露。□ 请勿在强磁场中使用。另外,请勿将会产生磁力的物体靠近产品。有 时会导致存储器内的数据发生变化及引起故障。iii
使用说明书修改记录 使用说明书的修改记号标记在封面记载的使用说明书号码的一部分中。使用说明书编号T-1000 * NN:日文,E:英文 系列号码     修改记号              修改记号   修改日期   修改内容        1         2015 年 9 月     暂定版    2 2015 年 9 月 暂定版 2 版追加了 1.4.2 PW2 接线端子的说明     3     2015 年 10 月    正式版    4    2016 年 5 月  4版链接功能修改 资1.外形尺寸图 修正    5 2016 年 8 月 追加了 SW, IO-329, SL, 6BS, 4BS 的说明 8章 勘误9章 勘误     6     2016 年 8 月    1章 勘误 2章 勘误 9章 勘误    7 2016 年 9 月 1章 勘误2章 勘误5章 勘误7章 勘误8章 勘误9章 勘误在 12 章中追加了限制事项     8     2017 年 2 月     追加了 IO-328,I-12,O-28,O-19,O-18,O-12 的说明 (IO-328、O-28、O-18 正在开发)  iv
相关使用说明书的结构      使用说明书编号          名称        概要     T-A65*N PCwin2 就编程工具——PCwin2 的使用方法,及 FB 程序 库的编辑方法进行说明。     T-315*N  PC10/3 系列 程序库   就程序库功能的内容、设定、使用方法进行说明。     T-325*N  事件监视器功能   就事件监视器功能的内容、设定、使用方法进行说明。     T-350*N   SFC 程序篇   就 SFC 程序的用语及编制方法进行说明。 v
 ̇前言 ̇安全使用注意事项 ̇使用说明书修改记录 ̇相关使用说明书的结构1 系统构成 .............................................................................................................................................................. 1-11.1 概要 .......................................................................................................................................................... 1-11.2 主要特征 ................................................................................................................................................... 1-11.3 系统构成 ................................................................................................................................................... 1-21.4 系统构成设备列表..................................................................................................................................... 1-31.5 各部分的名称和功能 ................................................................................................................................. 1-52 设置与布线........................................................................................................................................................... 2-12.1 设置 .......................................................................................................................................................... 2-12.2 布线 .......................................................................................................................................................... 2-43 初始设定 .............................................................................................................................................................. 3-1 3.1 CPU 出厂时的设定 ................................................................................................................................... 3-1 3.2 CPU 的设定方法....................................................................................................................................... 3-34 试运行.................................................................................................................................................................. 4-1 4.1 运行时的确认事项..................................................................................................................................... 4-15 异常警报 .............................................................................................................................................................. 5-15.1 5.2 5.3 5.4 5.5 5.66 维护 6.16.27 规格7.1 7.2 7.3 7.4 7.5 7.6 7.7 7.8 7.9 7.108 CPU 8.18.2 8.3 8.4 8.5 8.6 8.7 8.8 8.9CPU 的异常警报 ....................................................................................................................................... 5-1 计算机链路的异常报警 ........................................................................................................................... 5-49 PC 链路异常警报 .................................................................................................................................... 5-53 FL-net 的异常警报 .................................................................................................................................. 5-62 以太网的异常警报................................................................................................................................... 5-69 FL 遥控器的异常报警 ............................................................................................................................. 5-82................................................................................................................................................................... 6-1 更換电池................................................................................................................................................... 6-1 维护检查................................................................................................................................................... 6-4................................................................................................................................................................... 7-1 一般规格................................................................................................................................................... 7-1 CPU 模块规格 .......................................................................................................................................... 7-2 电源模块的规格 ........................................................................................................................................ 7-4 输入模块规格............................................................................................................................................ 7-5 输出模块规格............................................................................................................................................ 7-8 输入输出模块规格................................................................................................................................... 7-16 I/O 电源状态监视器功能 ......................................................................................................................... 7-22 短路诊断功能.......................................................................................................................................... 7-24 选择器模块规格 ...................................................................................................................................... 7-31 基板规格................................................................................................................................................. 7-31功能 ............................................................................................................................................................. 8-1 CPU 工作模式 .......................................................................................................................................... 8-1 用户存储器的结构................................................................................................................................... 8-12 变址功能与间接地址 ............................................................................................................................... 8-40 指令 ........................................................................................................................................................ 8-54 设备情报存储器 .....................................................................................................................................8-115 备份功能................................................................................................................................................8-116 RUN 中写入 .......................................................................................................................................... 8-122 程序库功能 ........................................................................................................................................... 8-124 SFC ...................................................................................................................................................... 8-1249 链路功能 .............................................................................................................................................................. 9-19.1 设定链路参数............................................................................................................................................ 9-19.2 内置计算机链路功能 ................................................................................................................................. 9-29.3 内置 PC 链路功能 ..................................................................................................................................... 9-79.4 内置 FL-net 功能 ..................................................................................................................................... 9-259.5 内置以太网功能 ...................................................................................................................................... 9-499.6 SN-I/F 功能 ............................................................................................................................................. 9-699.7 内置 FL 远程 M 功能 ............................................................................................................................... 9-709.8 内置标准 MODBUS-RTU(从机)功能................................................................................................ 9-899.9 EtherCAT 功能........................................................................................................................................ 9-93目录C-1
9.10 EtherNet/IP 功能..................................................................................................................................... 9-9410 显示器................................................................................................................................................................ 10-110.111 工具 11.111.2STATUS 显示器 ...................................................................................................................................... 10-1 ................................................................................................................................................................. 11-1 I/O 操作面板 ............................................................................................................................................11-1 I/O 检查(输出用) .................................................................................................................................11-212 限制事项 ............................................................................................................................................................ 12-113 BUS-EX 功能 ..................................................................................................................................................... 13-113.1 Nano-CPU BUS-EX 功能........................................................................................................................ 13-113.2 与连接 PC10P 系列时的不同点 .............................................................................................................. 13-213.3 BUS-EX 功能规格................................................................................................................................... 13-313.4 与 Plus BUS-EX 的连接.......................................................................................................................... 13-413.5 与 BUS-EXP 的连接 ............................................................................................................................... 13-813.6 PCwin2 中的设定方法............................................................................................................................. 13-913.7 Plus BUS-EX 状态通告..........................................................................................................................13-11資料 1.資料 1-1. CPU 模块 .......................................................................................................................................... 资 1-1資料 1-2. TOYOPUC-Nano AAA ...................................................................................................................... 资 1-1資料 1-3.电源模块、输入输出模块、特殊模块、通信模块...............................................................................资 1-2資料 1-4. 主板................................................................................................................................................... 资 1-4外形尺寸图..............................................................................................................................................资 1-1C-2
1 系统构成1.1 概要TOYOPUC-Nano 系列是经全新基础设计,由以往的产品——PC10G 演化而来的新型 PLC。与以往的产 品相比,实现了基本指令速度的高速化、无电池化、程序容量及设备信息存储器的增大、机体的小型化及 对于 DIN 轨道安装的对应、丰富的通信功能的安装、其他各种功能的提高。1.2 主要特征(1) 通过CPU的高速化和大容量化、丰富的通信功能及其他的功能提高,可实现多种处理。• 基于基本指令处理速度 0.96 ns/指令(最快)的高速运算• 程序容量 540 kw 的大容量存储器• 丰富的内置链接- FL-net / FL 远程 M / Ethernet / EtherCAT(选择式) 2 端口(注 1)- PC 链接/计算机链接/ MODBUS / SIO / SN-I/F (选择式) 2 端口 (注 2)• 可通过 USB 存储器进行程序的读出/写入• 内置扩展总线(BUS-EX)- 可通过 TOYOPUC BUS-EXP 来活用现有设备(PC2J/3J/10 系列的模块)- 还可通过 TOYOPUC-Plus BUS-EX 来对应基板型 PLC Plus 系列的各种模块• 增设 I/O BUS- 通过增设总线电缆的长配线化(基板间 最大 100 m),提高设备设计的自由度• 通过无电池设计,免去了定期维护(注 3)• 搭载设备容量 8 Mbyte 的存储器- 由以往 PC10G 产品的 4 Mbyte 容量倍增(2) 通过模块的高功能化,简化了计划性维护及异常的预防和检出。 电源模块• 通过输入电压、电流、周围温度的测量功能来掌握设备的信息• 通过模块寿命诊断来提高可维护性• 通过电源 ON/OFF 及发生电压骤降等时的日志及定期日志功能,实现异常的早期检出输出模块• 可通过输出短路检测功能,特定短路地址。有助于缩短设备的 MTTR。全体• 通过端子台的无螺丝化,提高布线作业性和可维护性(3) 通过机体的小型化,除了有助于控制盘的小型化,还能对应在DIN轨道上进行的组装。注1: EtherCAT 仅可使用 L1 端口。 EtherNet/IP 功能未对应。注2: SN-I/F 仅可使用 L3 端口。注3: 需要长时间使用内置时钟时,可使用作为选项的蓄电池。不使用蓄电池时,内置时钟的备用时间为 10 天。 1-1 1
 1.3 系统构成表示基于 TOYOPUC-Nano 系列的系统构成的一个示例。PW2主板8BS/6BS/4BS FL-net等其他工DMEthernetUSBUSB 存储器 (无电脑下的读出/写入)CPU 模块 电源模块个人电脑(周边装置 PCwin2)各种 I/O、通信、特殊模块主板PW2选择器SL各种 I/O、通信、特殊模块 (凡例)TUV-6942TUK-6965TUU-6954RUN2 24V 0V (NA)L2NS L3L(+) L(-)PW2 PWRSTATUSTOYOPUC-Nano2ET STATUSTUU-6949STATUSLEDIO-329TUK-6952SW2ML STATUSDL增设 I/O 总线生产指示 TOYOPUC 安全 PLCTUV-6942RUN1 RUN2 24V 0V (NA)IN CH5 CH6 CH7 CH8(NA)CH4 CH5 CH6 CH7 CH8(NA)24V 0VV+ V-I+ I- ←CH1-8E1 E2 ZR ER V 5V A+ A V 5V B+B V 5V C+ C E1 E2 ZR ER P0 P1 P2 P3 P4 P5 PW CMPWR STATUSRUN STATUS ERRTUU-6955 TUK-6975RACKNo. CH1CH2RUNERRSTATUSTUK-6976CH1 CH2RUNERRSTATUS RUN CH1 CH2φA φAφB φBφC φCERR ERRTUK-6974V 5V A+ A V 5V B+ B V 5VUSB OPTUC-6941USB OP PUSHSTATUSBATTERYRUN E/A W BUS -EXTXDRXDTXD L1 RXD TXD L2 RXDSTATUSTUU-6956MS NS ERRMS L1 NSPCwinL168AC L2DE 232CBUS-EX RUN1MSL2422 L1422I/O BUSSG FG L(+) L(-) SG FG L4FL1232C L2PW2 SL AD DA CTPWR CPU/S CH3 CH4SLOTCH3 SLOT C+ CSLOTSLOT3SLOT4SLOT5SLOT6SLOT7OUTV+ I+ CMSD←CH1-800-1FL1 422L1+ L1+ L1- L1- 0V 0V FG FG L2+ L2+ L2- L2- 0V 0V FGFG1-2DISPSELOFF↔ON 0L100-1F20-3F20-3FL2 1422 START L22PUSH3 232C L1-TX L1-RX L1 L1-CS L1-RSPWR CPU/S SLOT SLOT SLOT SLOT SLOT SLOT SLOT SLOTRESET 4 232C L2-TX L2-RX V+扩展总线(BUS-EX) PC-LinkSN-I/F通过扩展总线来对应以往产品(PC10 用 BUS-EXP、Plus BUS-EX)5 7 9 BL2-RSCAL2 L 2-CSN-H DRAIN CAN-L V-:模块名称 :通信名称
1.4 系统构成设备列表 下表中表示系统构成设备列表  机器    名称          规格         规格      CPU TOYOPUC- Nano  TUC-6941 程序存储器 540 k 字(含 FB、标准、用户程序库) 内置通信端口(L1~L4:从任意一个功能中进行选择的选择式)(注 1)L1:FL-net/Ethernet/FL 远程 M/EtherCAT 主机 L2:FL-net/Ethernet/FL 远程 M L3:PC-LINK/CMP-LINK/MODBUS/SIO/SN-I/F L4:PC-LINK/CMP-LINK/MODBUS/SIO增设总线(I/O BUS):1 端口 扩展总线(BUS-EX):1 端口  电源    PW2     TUV-6942   输入额定 DC24 V输出额定 DC3.3 V、最大 7.5 A 输入        I-22       TUK-6948      32 点、DC24 V 5 mA 数字输入模块 无螺丝端子台   I-12  TUK-1006 16 点、DC24 V 5 mA 数字输入模块 无螺丝端子台   SW     TUK-6965   16 点开关输入模块 输出           O-29       TUK-6947      32 点晶体管 数字输出模块、正公共端子、0.5 A/点、2 A/8 点   O-28    TUK-1010    32 点晶体管 数字输出模块、负公共端子、0.5 A/点、2 A/8 点   O-19  TUK-1009 16 点晶体管 数字输出模块、正公共端子、1.0 A/点、4 A/8 点   O-18       TUK-1008      16 点晶体管 数字输出模块、负公共端子、1.0 A/点、4 A/8 点   O-12    TUK-1007    16 点 继电器接点输出模块 DC24 V 2A/点、5 A/8 点    输入输出   IO-329    TUK-6952    64 点数字输入输出混合模块输入 32 点 DC24 V 5 mA、负公共端子、16 点/公共端子 输出 32 点 晶体管输出、正公共端子、0.3 A/点、2 A/16 点   IO-328  TUK-1005 64 点数字输入输出混合模块输入 32 点 DC24 V 5 mA、正公共端子、16 点/公共端子 输出 32 点 晶体管输出、负公共端子、0.3 A/点、2 A/16 点  选择器    SL     TUU-6955   基板增设用模块 主板        8BS     TUR-6943   8 插槽基板模块   6BS       TUR-6966      6 插槽基板模块   4BS    TUR-6967    4 插槽基板模块   通信 (注 2)      2ET    TUU-6949    FL-net/Ethernet/FL 远程 M/EtherNet/IP/EtherCAT 主机 兼用端口:2 端口   2ML  TUU-6954 PC-LINK/CMP-LINK/MODBUS-RTU/SIO 兼用端口:2 端口 但是,RS-422 作为 4 线式,仅可使用 1 端口   DL       TUU-6956      DeviceNet 基准的主机/从机兼用模块  1-3
  机器    名称          规格         规格      特殊(注 2)       CT  TUK-6974 2ch 高速计数器模块输入信号电平DC 5/ 12/ 24 V / 差动 RS-422 最大计数速度 DC 输入时 200 kbps / 差动输入时 8 Mbps   AD       TUK-6975      8ch 模拟输入模块(电压/电流输入选择式) 电压输入范围:−10~10 V、0~10 V、0~5 V、1~5 V 电流输入范围:0~20 mA、4~20 mA   DA  TUK-6976 8ch 模拟输出模块(电压/电流输出选择式) 电压输出范围:−10~10 V、0~10 V、0~5 V、1~5 V 电流输出范围:0~20 mA、4~20 mA   Nano-AAA      TUK-6987    大数据解析模块 注1: EtherCAT 主机仅可使用 L1 端口。 EtherNet/IP 功能未对应。注2: 关于通信、特殊模块的使用方法,请参照各自的使用说明书。注3: CPU 与电脑(周边装置)的 USB 端口之间的连接请使用与 SUB2.0 标准对应的 USB 电缆。 推荐 USB 电缆:ELECOM 株式会社制 U2C-BN**BK* 详细内容请参照“2.2.6.2 USB 连接前的确认事项”。)注4: 是内置时钟的长时间后备用可选购电池。CPU 在出厂时未配备蓄电池。不使用蓄电池时,内置时钟的备用时间为 10 天。  机器    名称          规格         规格      编程 PCwin2   TJB-6983  SFC 对应程序设计软件(日语) CD-ROM 版 (注 3)   机器    名称          规格         规格      电池(选购件 TOYOPUC- Nano 电池   TUP-6990  TOYOPUC-Nano CPU 内置时钟长期后备用电池(注 4) 1-4
 1.5 各部分的名称和功能 1.5.1 TOYOPUC-NanoCPU(7) USB 开关(8) USB 存储器端口(9) L1 通信用连接器 (10) L2 通信用连接器(11) 增设总线连接器(右侧面图)(正面图)TOYOPUC-NanoUSB OPTUC-6941USB OP PUSHMS L1NSMS L2NSI/O BUSSTATUSBATTERYSTART PUSHRESET PCwinBUS-EXL3L(+) L(-) SG FG L(+) L(-) SG FG L4RUN E/A W BUS -EX(1) 显示器(2) 电池连接用端子(3) 复位/起动开关(4) 周边装置用 USB 端口(5) 扩展总线(BUS-EX) (6) L3、L4 通信用端子1-5(12) 端口L3RS-422/232C 切换开关(13) 端口L4RS-422/232C 切换开关(14) 端口L3SN-IF 终端电阻设定开关
          No.名称内容          (1)显示器显示 CPU 的状态。        RUN 灯表示正在执行顺序程序。与电源组件的 RUN 继电器输出 连锁。        E/A发生重度、轻度异常、警报时亮灯        W写入闪存中时亮灯        BUS-EX表示与扩展总线的通信状态。        STATUS显示状态RUN: 圆点呈 8 字形旋转 严重・ 轻度异常、报警: 用代码显示状态        USB OP表示 USB OP 端口的状态。            (2)电池连接用端子是连接可选电池的端子。          (3)复位/起动开关将开关扳至“RESET”侧,则 CPU 处于复位状态,OFF 外部输出和内部继电器, 停止程序运行。在停止程序运行状态下将开关扳至“STRAT”侧,则开始执行程序。 通过停止信号停止外围装置运行时不开始执行程序。 而且,为了防止误操作,只有在按下,且 7 段 LED 的圆点变为亮灯状态后,操 作才会有效。          (4)周边装置用 USB 端口是与周边装置进行通信时,与 PC 连接的端口。用 USB(Fullspeed:12 Mbps) 进行高速通信。          (5)扩展总线(BUS-EX)与扩展模块连接的 USB mini-B 母连接器          (6)L3、L4 通信用端子是串行通信用的无螺丝端子台。L3: 从 PC 链接、计算机连接、SIO、SN-I/F 中选择 L4: 从 PC 链接、计算机连接、SIO 中选择          (7)USB 开关未定          (8)USB 存储器用端子是连接 USB 存储器用的 USB A 母连接器。          (9)L1 通信用连接器通过从 FL-net、Ethernet、FL 远程 M、EtherCAT(注)中选择的通信功能进行 通信。          (10)L2 通信用连接器通过从 FL-net、Ethernet、FL 远程 M 中选择的通信功能进行通信。(注)          (11)增设总线用连接器是与选择器模块 SL 的输入端口连接用的带 LED 的 RJ45 母连接器。          (12)端口 L3RS-422/232C 切换开关是将 L3 的通信标准设定为 RS-422 或 232C 的开关。 左侧为 RS-422,右侧为 RS-232C。422 ⇔ 232C L3             (13)端口 L4RS-422/232C 切换开关是将 L4 的通信标准设定为 RS-422 或 RS-232C 的开关。 左侧为 RS-422,右侧为 RS-232C。422 ⇔ 232C L4             (14)端口 L3SN-IF 终端电阻设定开关在 L3 中选择 SN-IF 时为 ON,是使 SN-IF 的终端电阻为有效的开关。选择 PC 链接、计算机链接、SIO 时,请置于 OFF。LTON OFF     注: EtherCAT 仅可使用 L1 端口。 EtherNet/IP 功能未对应。1-6
 1.5.2 PW2(电源模块DC24V输入)No. (1)名称内容(2)端子台STATUS是连接 RUN 继电器输出、DC24 V 电源的无螺丝端子台。显示器显示 PW2 的状态。 表示输入电压的电压值。PWR20.4V以下: 橙色 20.4~28.8 V: 绿色 28.8~31.2 V: 橙色 31.2V以上: 红色 发生电压骤降: 灭灯 显示 PW2 模块的状态。 正常: 绿色 异常: 红色 寿命下降: 橙色PW2PWRSTATUS TUV-6942RUN1RUN224V0V(1) 显示器(NA(NA)RUN1 RUN2是 RUN 继电器输出部。与 CPU-RUN 信号同 步进行开闭。CPU-RUN:闭,CPU-RUN 以外:开24 V0V(NA) 未使用1-7(2) 端子台DC24 V 电源输入部(DC20.4~28.8 V)
1.5.3 I-22 (32 点数字输入)   (1) 显示器(2) 端子台              No.名称0~7内容          (1)显示器在输入端子上加载电压时亮灯,不加载电压时灭灯。       LED 的行端子的对应       最上段       第2列8~F       第3列10~17       最下段18~1F               (2)端子台是连接输入端子与公共端子的无螺丝端子台。  1-8
 1.5.4I-12 (16 点数字输入)No. (1)(2)名称                 内容在输入端子上加载电压时亮灯,不加载电压时灭灯。LED 的行 端子的对应 最上段 0~7 第2列 8~F是连接输入端子与公共端子的无螺丝端子台。显示器端子台I-12TUK-100601 23 45 67 C1 C1 89 AB CD EF C2 C2(1) 显示器1-9(2) 端子台
1.5.5 SW(开关输入)                        SW                                             TUK-6965OFF↔ON 01 23 45 67 89 AB CD EF                                          (1) 显示器(2) 开关      No. 名称   内容    (1) 显示器 是显示开关输入状态的 LED。 开关为 ON 时亮灯,OFF 时灭灯。  (2) 开关    是 16 点的开关。   1-10
1.5.6 O-29(32 点数字输出、正公共端子)   (1) 显示器(2) 端子台              No.名称内容          (1)显示器输出端子为 ON 时亮灯,OFF 时灭灯。       LED 的行端子的对应       最上段0~7       第2列8~F       第3列10~17       最下段18~1F               (2)端子台是连接输出端子与公共端子的无螺丝端子台。  1-11
 1.5.7O-28(32 点数字输出、负公共端子)No. (1)(2)名称内容 输出端子为 ON 时亮灯,OFF 时灭灯。显示器端子台LED 的行 最上段 第2列 第3列 最下段端子的对应0~7 8~F 10~17 18~1FO-28TUK-101001 23 45 67 C1 C1 89 AB CD EF C2 C2 10 11 12 13 14 15 16 17 C3 C3 18 19 1A 1B 1C 1D 1E 1F C4 PW(1) 显示器(2) 端子台是连接输出端子与公共端子的无螺丝端子台。1-12
 1.5.8O-19 (16 点数字输出、正公共端子)No. (1)(2)名称内容 输出端子为 ON 时亮灯,OFF 时灭灯。LED 的行 端子的对应 最上段 0~7 第2列 8~F是连接输出端子与公共端子的无螺丝端子台。显示器端子台O-19TUK-100901 23 45 67 C1 C1 89 AB CD EF C2 PW(1) 显示器1-13(2) 端子台
 1.5.9O-18 (16 点数字输出、负公共端子)No. (1)(2)名称内容 输出端子为 ON 时亮灯,OFF 时灭灯。LED 的行 端子的对应 最上段 0~7 第2列 8~F是连接输出端子与公共端子的无螺丝端子台。显示器端子台O-18TUK-10080 1 23 45 67 C1 C1 89 AB CD EF C2 PW(1) 显示器1-14(2) 端子台
 1.5.10O-12(16 点继电器接点输出)No. (1)(2)名称内容 输出端子为 ON 时亮灯,OFF 时灭灯。LED 的行 端子的对应 最上段 0~7 第2列 8~F是连接输出端子与公共端子的无螺丝端子台。显示器端子台O-12TUK-1007DC24V/2A(1) 显示器01 23 45 67 C1 P1 89 AB CD EF C2 P2(2) 端子台1-15
1.5.11 I/O-329 (32 点/ 32 点数字输入输出、正公共端子) (1) 显示器(2) LED 切换开关 (3) 连接器           No.     名称    内容    (1) 显示器 亮灯:正在向输入中加载电压,或输出端子为 ON 时 灭灯:未向输入中加载电压,或输出为 OFF 时    LED 的行     端子的对应    LED 切换开关在上面时   LED 切换开关在下面时    最上段   0~7   20~27    第2列     8~F     28~2F    第3列 10~17 30~37    最下段      18~1F     38~3F       (2)  LED 切换开关   是将显示器的显示内容切换为各 32 点的开关。     (3)   连接器   是连接输入端子与公共端子的连接器。 1-16
 1.5.12I/O-328 (32 点/ 32 点数字输入输出、负公共端子) IO-328No. (1)(2) (3)名称 显示器LED 切换开关 连接器内容 亮灯:正在向输入中加载电压,或输出端子为 ON 时灭灯:未向输入中加载电压,或输出为 OFF 时TUK-100500-1F DISPSEL20-3F(1) 显示器(2) LED 切换开关 (3) 连接器00-1F20-3FLED 的行端子的对应LED 切换开关在上面时 0~78~F10~1718~1FLED 切换开关在下面时 20~2728~2F30~37最上段 第2列 第 3 列 最下段38~3F 是将显示器的显示内容切换为各 32 点的开关。是连接输入端子与公共端子的连接器。1-17
 1.5.13 SL(选择器) 正面左侧面SLTUU-6955RACK No.INOUTRUN ERR(1) 显示器(2) 机架 No.开关(3) 增设总线输入连接器 (4) 增设总线输出连接器(5) 设定开关(SW2) (不需变更)SW2SW2全部为 OFFNo.(1) 显示器(2) 机架 No.开关(3) 增设总线输入连接器(4) 增设总线输出连接器(5) 设定开关(SW2) (不可变更)内容名称显示模块与通信的状态。 是设定机架 No.用的旋转开关。是增设总线的输入端口——带 LED 的 RJ45 母连接器。与 CPU 模块的 I/O BUS 端 口,或其他 SL 模块的输出端口连接起来使用。是增设总线的输出端口——带 LED 的 RJ45 母连接器。与其他 SL 模块的输入端口 连接。本模块为网络的最终端时,本端口什么也不连接。SW2-1~4 在出厂状态下全部设定在 OFF 上。 用于系统程序维护,本开关绝对不可变更。1-18
1.5.14 8BS(8 插槽基板) 是拥有8个(SLOT0~7)I/O插槽的基板。(4) SLOT0 (6) SLOT2 (8) SLOT4 (10) SLOT6        (2) PW(1) FG 端子(3) CPU/SLPWR CPU/SL(5) SLOT1(7) SLOT3(9) SLOT5(11) SLOT7SLOT7               SLOT0SLOT1 SLOT2 SLOT3 SLOT4 SLOT5 SLOT6                    No.名称内容          (1)FG 端子是连接 FG 配线的端子。          (2)PW是安装电源模块(PW2)的插槽。          (3)CPU/SL是安装 CPU、SL 的插槽。            (4)SLOT0在 CPU/SL 上安装 CPU 时,由 CPU 占用          (5)SLOT1         (6)SLOT2         (7)SLOT3是安装输入、输出、输入输出、通信、特殊模块的插槽。         (8)SLOT4         (9)SLOT5         (10)SLOT6         (11)SLOT7    1-19
 1.5.15 6BS(6 插槽基板) 是拥有6个(SLOT0~5)I/O插槽的基板。No.(1) FG 端子(2) PW(3) CPU/SL(4) SLOT0(5) SLOT1(6) SLOT2(7) SLOT3(8) SLOT4(9) SLOT5名称(2) PW(1) FG 端子(3) CPU/SL(5) SLOT1SLOT0 SLOT1 SLOT2(7) SLOT3(9) SLOT5SLOT5PWRCPU/SLSLOT3SLOT4内容(4) SLOT0 (6) SLOT2 (8) SLOT4是连接 FG 配线的端子。是安装电源模块(PW2)的插槽。是安装 CPU、SL 的插槽。在 CPU/SL 上安装 CPU 时,由 CPU 占用1-20是安装输入、输出、输入输出、通信、特殊模块的插槽。
 1.5.16 4BS(4 插槽基板)是拥有 4 个(SLOT0~3)I/O 插槽的基板。No.(1) FG 端子(2) PW(3) CPU/SL(4) SLOT0(5) SLOT1(6) SLOT2(7) SLOT3是连接 FG 配线的端子。是安装电源模块(PW2)的插槽。是安装 CPU、SL 的插槽。在CPU/SL上安装CPU时,由CPU 占用(2) PW(1) FG 端子名称(3) CPU/SLPWR CPU/SL(5) SLOT1(4) SLOT0 (6) SLOT2(7) SLOT3SLOT3内容         是安装输入、输出、输入输出、通信、特殊模         块的插槽。1-21SLOT0 SLOT1SLOT2
2 设置与布线 介绍安装及布线的方法、注意事项。2.1 设置2.1.1 设置环境    安装时,要避免以下环境。(1) 周围温度超过 0~55°C 范围的场所(2) 周围湿度超过 10~95%RH 范围的场所(3) 因急剧的温度变化而产生凝水的场所(4) 有腐蚀性气体、可燃性气体的场所(5) 尘埃、铁粉等有导电性的粉末、油烟、盐分、有机溶剂多的场所(6) 产生强电场、强磁场的场所(7) 日光直射的场所(8) 直接受到震动、冲击的场所使用环境如上所述时,请将其收纳于密闭的控制盘内等,保证设置环境具备良好条件。控制盘的门请不要 一直敞开着。此外,使用控制盘内的风扇等时,应设置在风无法直接吹到的位置。 被风直接吹到的部分会大量附着尘埃等,有时会招致预料之外的事态,因此请多加注意。 2-1 2
 2.1.2 (1)安装注意事项 为了方便通风及更换模块,模块上部及下部要与建筑物、零件相隔 50 mm以上。min. 50 mmmin. 50 mm(2) 竖向安装及水平方向的安装,在使用时会使模块难以通过,要绝对避免。竖直安装(不可)min.50 mmmin.50 mm水平方向安装(不可)2-2
2.1.3各模块的安装(1) 向主板上安装的方法1. 将固定齿脚插入主板固定孔内。2. 压下模块进行安装,直到发出咔嚓声响为止。 检查齿角是否确实插入了主板,机架是否确实插入。请注意,如果没有彻底固定,会造成错误动 作。请注意,如果没有彻底固定,会造成错误动作。而且,各模块请务必用螺丝固定在基板上。螺丝固定部位(2) 模块的拆卸方法1. 卸下模块主板的固定螺丝。2. 将模块上部的钩子向下推到底。3. 按住钩子,以模块下部为支点,向身体方向拉,从主板上卸下。          2-3
2.2 布线2.2.1TOYOPUC总体布线的注意事项 介绍铺设电源线或输入输出线、通信线等时的注意事项。此外,在配线过程中及配线后不要粗暴地按压端子台、连接器等。否则可能导致配线脱落、断线、接触不 良或机器损坏。(1) PC 本体(电源模块)的电源与输入输出设备及主体电路设备要分离进行布线。 主电源                     主电路 电源 电源 电源输入输出设备 主电路机器(2) 线路之间及线路与地面之间要使用低干扰的电缆。干扰多时,请连接绝缘变压器。绝缘变压器(3) 输入输出信号线要尽量远离高电压、大电流的主线路线(最少分离 100 mm 以上)。同时要尽量避免 平行布线。(4) DC24 V 的输入输出线应与 AC100 V 的线分开。PC 输入输出                                    PC 本体 增设机架                    PC 本体         2-4输入输 出设备
(5) 端子台、推荐电线规格 端子台为无螺丝连接器。仅将棒形端子压在电缆末端覆膜剥离后的部位,并将棒形端子插入连接器的 电线插入口内即可夹紧。拆除电缆时,请在用小型一字起子压住橙色拉杆上部的状态下将电缆拆下。    模块名称 (信道 No.) 端子台 (PHOENIX CONTACT 公司制)  推荐电线规格  PW2 FKC 2,5/ 5-ST-5,08-LR 0.75 mm2(相当 AWG19) 1.25 mm2(相当 AWG16)  TOYOPUC-Nano (L3/L4) DFMC 1,5/4-ST-3,5-LR 0.5 mm2(相当 AWG21) 0.75 mm2(相当 AWG19)  I-22, O-28, O-29 DFMC 1,5/20-ST-3,5-LR 0.5 mm2(相当 AWG21) 0.75 mm2(相当 AWG19)  I-12, O-12, O-18, O-19,  DFMC 1,5/20-ST-3,5-LR 0.5 mm2(相当 AWG21) 0.75 mm2(相当 AWG19)          模块名称 (信道 No.) 推荐端子台(注)  推荐电线规格  IO-328, IO-329 FCN-367J040-AU/FW(富士通元件株式会社制)  扁平带状电线(间距 1.27mm) 绞合线 相当 AWG28单线 相当 AWG30  注: 产品中未配备。(6) 压接端子最好使用以下产品。其他公司也有相当的产品,作为例子,写了 PHOENIX CONTACT 公司的产品。 裸线容易发生晶须导致的短路,因此,请务必使用带有绝缘套管的棒形端子。   生产厂家    电线规格 型号   产品编号     电线种类 mm2  AWG   (例)PHOENIX CONTACT 公司       通常电线   0.5  21AI 0,5-10 WH  3201275 0.75  19AI0,75-10GY  3201288 1.25  16AI1,5-10BK  3200195 MTW 电线 0.5  20AI0,75-10GY  3201288 魏德米勒公司 MTW 电线 0.75  18H1.0/16  9025950000  专用压接工具 CRIMPFOX ZA3 或 CRIMPFOX UD63 或 PHOENIX CONTACT 公司 推荐品          注: 棒形端子上套有防短路标记管。(7) 输入输出信号线在控制面板内和控制面板外均应与动力线路在不同的电缆插槽中布线。采用配管式布线时,确保给配管做好 D 型设置接地。(8) 不得不在同一电缆插槽中布线时,要使用全面密封的电缆,密封端要连接到主板模块的FG端子或控制盘的接地块上。(9) 输出模块烧损保护 输出模块中内置了用于烧损保护的保险丝。请务必在额定值内使用。保险丝熔断时,不可仅更换保险 丝,所以请以模块单位进行更换。关于各输出模块的保护功能,请参阅“7 章 规格”。(10) 在CPU模块前面50mm以内不要设强电线。2-5
(11) FG 连接FG 安装在各基板的左端。安装增设的机架时,FG 请以一点进行接地。在进行 D 型接地的接地块使 用 2 mm2 以上的电线从各主板进行直接配线。1 次配线(D 型接地)    控制盘    FG     FG主板主板        2-6接地块
2.2.2电源模块的布线 0.75 或 1.25 mm2 扭绞线 RUN1 RUN1               RUN224 V IN0VRUN20.75 或 1.25 mm2 扭绞线 24 V0V向顺序控制电路DC20.4~28.8 V(PW2)                      * 端子台上的配线请务必使用带有绝缘套管的棒形端子。    正确连接例DC24 V (PW2)I/O 电缆不良连接例DC24 V (PW2)DC24 V (PW2)                                     CPU 机架增设 I/O 机架    CPU 机架增设 I/O 机架      2-7I/O 电缆增设 I/O 机架使用另设电源。
 2.2.3PC 链接、计算机链接、MODBUS、SIO、SN-I/F 的布线(1)PC 链接、计算机链接、MODBUS 的 2 线式和 SIO 的配线 如下所示,请分别连接在各端子上。功能链接参数链路 No. 支架号 PC10 模式时隙号 端子名称模式L(+) L3 L()内容通信+通信通信 0 V(屏蔽内壳) FG(屏蔽外壳)L3PC链路 SG计算机链路MODBUS SIO 模块任意 内置FGL(+) 通信+ L() 通信注: 变更计算机链接的通信标准时,请用TOYOPUC-Nano右侧的开关进行设定。左侧为RS-422,右 侧为 RS-232C。USB OPTUC-6941USB OP PUSHMS L1 NS MS L2 NSI/O BUS(a) 推荐电缆 中国电线工业(株)STATUSBATTERYSTART PUSHRESET PCwinBUS-EXL3L(+) L(-) SG FG L(+) L(-) SG FG L4RUN E/A W BUS -EX生产厂家TOYOPUC-Nano(TOYOPUC-Nano 右侧面图)端口 L3 RS-422/232C 切 换开关端口 L4RS-422/232C 切换 开关规格 备注UL2464-2SB 220 AWG 注1: 必须在切断电源的状态下进行连接。NanoL4 L4 SG 通信 0 V(屏蔽内壳) FG FG(屏蔽外壳)O-VCTF-SS 2C0.75 mm2UL2464-DSS 2C20AWG 双重屏蔽仓茂电工(株)注2: 必须按从模块到模块的顺序依次进行配线,不得进行多向配线。注3: 为了避免因外部噪声导致误动作,应避免使通信电缆平行接近动力线等高压、强电流线。2-8
(b) 布线图PC 链接、MODBUS 的布线图以下是表示 PC 链接时的例子,有关 MODBUS 的部分同上。 ・・・+++ + --- - 0V0V0V 0V FGFGFG FG    PC 链路 主局PC 链路 子局 1PC 链路 子局 2              最大 1 km 计算机链接布线图 +++ + --- - 0V0V0V 0V FGFGFG FG・・・              SIO 布线图最大 1 kmTXD RXD0V FGTXD RXD 0V FGPC 链路 子局 n    高位计算 机计算机链 接0局子局 1计算机链 接1局子局 1计算机链 接n局子局 1  高位 计算机 主局SIO子局              最大 15 m2-9
 (2) SN-I/F 的配线 注 1) 如下所示,请分别连接在各端子上。 推荐电缆与(1)相同。功能 端子名称L (+) SN-I/F L ()SG注1: 仅 L3(标准)。不做链接参数的设定时,为 SN-I/F。注2: 请将 TOYOPUC-Nano 右侧的终端电阻开关设定在 LT-ON 侧。左侧为 ON,右侧为 OFF。不使用 SN-I/F 时,请设定在 OFF 上。注3: 请将 TOYOPUC-Nano 右侧的 RS-422/232C 切换开关设定在 RS-422 侧 左侧为 RS-422,右侧为 RS-232C。(L3 端子放大图)USB OPTUC-6941USB OP PUSHMS L1 NS MS L2 NSI/O BUSSTATUSBATTERYSTART PUSHRESET PCwinBUS-EXL3L(+) L(-) SG FG L(+) L(-) SG FG L4RUN E/A W BUS -EX(TOYOPUC-Nano 正面图) TOYOPUC-Nano(TOYOPUC-Nano 右侧面图)端口 L3 RS-422/232C 切换开关端口 L3SN-I/F 终端电阻 开关注4: 作为 SN-1/F 使用时,不要将屏蔽外壳连接到 TOYOPUC-Nano 侧和 TOYOPUC-PCS 侧。 (a) 布线图TOYOPUC TOYOPUC--Nano--0 V 最大 3 m 0 V安全 PLC ++2-10内容 通信+通信通信 0 V(屏蔽内壳)
 2.2.4 FL-net / Ethernet / FL 远程 M / EtherCAT /增设 IO BUS 的配线注意: TOYOPUC-NanoCPU内置端口中的EtherNet/IP功能的使用未对应。2.2.4.1 布线所需的外部机器建构 FL-net /Ethernet / FL 遥控器 M / EtherCAT 系统需要以下外部机器。外部机器请客户准备。通信机器应使用符合 IEEE802.3 规格规定的产品。(1) 指定LAN电缆FL-net / Ethernet / FL 远程 M / EtherCAT 及增设 IO BUS 中使用的指定 LAN 电缆 ASSY(类别 5e 相当品)如下所示。TUV-6942RUN1 RUN2 24V 0V (NA)USB OPTUC-6941USB OP PUSHMS L1 NS MS L2 NSI/O BUSSTATUSBATTERYSTART PUSHRESET PCwinBUS-EXL3L(+) L(-) SG FG L(+) L(-) SG FG L4STATUS LEDL1L2L1 L2指定直线电缆或交叉电缆使用中继时,全长请控制在 100 m 以下。分类 种类制造商型号FLG-S-***(80 m 时:FLG-S-800)FLG-X-002电缆长度 0.1 m~100 m 0.2 m电缆 ASSY 制造商 (株)进和、(株)KOM、 日合通信电线(株)指定 LAN 电缆 注:直线电缆 交叉变换用电缆PW2 PWR STATUSTOYOPUC-Nano2ETRUN STATUS TXDE/AWBUS-EX TUU-6949 RXD 通信电缆要避免与动力线等高压强电线平行接近布线。 为防止发生连接器接触不良,请勿进行电缆的末端加工(模块化插头的再加工)。(2) 指定HUB分类 口数(3) EtherCAT 分支从机分类 口数产品名称FE-SWH05捷太格特型号TCU-64145 口 8 口SW-HUB注: HUB应接地。详细内容参见FE-SWH05/08的使用说明书(t-759n)。EtherCAT分支从机3 口 6 口产品名称EC-03JS EC-06JS捷太格特型号TCU-6925 TCU-69262.2.4.2 Ethernet/Fl-net/FL远程M的配线 与相对的节点进行 1 对 1 连接时FE-SWH08TCU-6415TOYOPUC-Nano / 2ET 与对方节点用直线电缆或交叉电缆连接。2-11
 经过 HUB 连接的时候FL-net / Ethernet / FL 远程 M 时,可通过 HUB 作为中继进行连接。 EtherCAT 时,通过专用的分支从机作为中继进行连接。请勿将 FL-net /Ethernet/ FL 远程 M / EtherCAT 混合用于同系统的网络中。FL 远程 M 时的构成例TOYOPUC-Nano CPU/ 2ET (FL 远程 M)和 HUB 之间、及 HUB 和 HUB 之间,可用直线电缆或交叉TUV-6942RUN1 RUN2 24V 0V (NA)USB OPTUC-6941USB OP PUSHSTATUSBATTERYSTART PUSHRESET PCwinL1 L2主机-HUB 之间: 最长 100 mHUB-HUB之间: 最长 100 mPW2 PWR STATUSTOYOPUC-Nano2ETRUN STATUS TXDE/AWBUS-EX TUU-6949 RXDDC 24 VHUB-从机之间: 最长 100 mTUV-6942RUN1 RUN2 24V 0V (NA)USB OPTUC-6941USB OP PUSHMS L1 NS MS L2 NS I/O BUSSTATUSBATTERYSTART PUSHRESET PCwinBUS-EXL3L(+) L(-) SG FG L(+) L(-) SG FG L4STATUS LEDL1L2L1 L2节点-HUB 之间: 最长 100 mHUB-HUB 之间: 最长 100 mPW2 PWR STATUSTOYOPUC-Nano2ETRUN STATUS TXDE/AWBUS-EX TUU-6949 RXDDC 24 VHUB-节点之间: 最长 100 m电缆进行连接。为了电缆共通化,建议使用直线电缆进行敷设。MSL1NSMS BUS-EX L2STATUS LEDL1L2NSI/O BUSL3L(+) L(-) SG FG L(+) L(-) SG FG L4* 指定的HUB和FRMT为自动协议。自动协商模式之间相互连接时,将达到100Mbps。2-12FRMT FRMT单元用电源DC24 V(IO 电源与通讯电源要分开使用) TOYOPUC-Nano CPU/ 2ET (FL-net / Ethernet)和 HUB 之间、及 HUB 和 HUB 之间,可用直线电缆FL-net / Ethernet 时的构成例 或交叉电缆进行连接。为了电缆共通化,建议使用直线电缆进行敷设。I/O 用电源 DC24 V
 2.2.4.3EtherCAT 的配线 (与对象节点 1 对 1 连接时)TOYOPUC-Nano CPU / 2ET 与对方局之间请用直线电缆进行连接。TUV-6942RUN1 RUN2 24V 0V (NA)USB OPTUC-6941USB OP PUSHMS L1 NS MS L2 NS I/O BUSSTATUSBATTERYSTART PUSHRESET PCwinBUS-EXL3L(+) L(-) SG FG L(+) L(-) SG FG L4STATUS LEDL1L2L1 L2EtherCAT 从机等PW2 PWR STATUSTOYOPUC-Nano2ETRUN STATUS TXDE/AWBUS-EX TUU-6949 RXD将分支从机作为中继进行连接时全长(直线电缆)请控制 在 100 m 以下。EtherCAT 时的构成例TOYOPUC-Nano CPU/ 2ET (EtherCAT)与分支从机之间,及分支从机与分支从机之间请用直线电缆 进行连接。TUV-6942RUN1 RUN2 24V 0V (NA)START PUSHRESET PCwinBUS-EXL3L(+) L(-) SG FG L(+) L(-) SG FG L4L2PW2 PWR STATUSTOYOPUC-Nano USB OP STATUSTUC-6941USB OP BATTERY PUSHRUN E/A WBUS -EX2ET STATUS TXDTUU-6949 RXD L1STATUS LED分支从机-从机之间: 最长 100 mDC 24 V分支从机-从机之间: 最长 100 m单元用电源DC24 VI/O 用电源 DC24 VMS L1 NS MS L2 NS I/O BUSL1L2主机-分支从机之间: 最长 100 m2-13(I/O 电源与通讯电源要分开使用)
2.2.4.4增设I/O BUS的配线TOYOPUC-Nano CPU 与选择器模块(SL)之间,及 SL 与 SL 之间请用直线 LAN 电缆进行连接。增设 I/O BUS 中请勿混入其他网络。CPU-SL 之间请连接 CPU 的 I/O BUS 端口和 SL 的 IN 端口。SL-SL 之间请从 OUT 端口连接到另一个 SL 的 IN 端口。CPU 机架(机架 No.0)上最多可增设 7 个机架(机架 No.1~7)。 电缆无需按机架 No.的顺序进行连接。各机架之间最长请控制在 100 m。    机架 No.0 (CPU)CPU-SL 之间: 最长 100 m机架 No.1 SL-SL 之间:最长 100 m 机架 No.2SL-SL 之间: 最长 100 m机架 No.3 SL-SL 之间:最长 100 m 机架 No.4SL-SL 之间: 最长 100 m机架 No.5 SL-SL 之间:最长 100 m 机架 No.6SL-SL 之间: 最长 100 m机架 No.7SL 之间是从“OUT”连接“IN”上  总长度 700 m 无需按机架 No.顺序进行 连接    从 CPU 的“I/O BUS”连接到 SL 的 “IN”上                                     2-14
2.2.5电缆施工铺设 进行电缆施工时请注意以下几点。(1) 拉拽电缆时切勿施加过大的力。   × 因过度拉抻而拉长  (2) 固定部分的弯曲半径应为电缆外径的 4 倍以上。 电缆外形的 4 倍     ×  2-15弯曲半径低于电缆外径的 2 倍
(3) 固定电缆时不要用电缆束带等将其拧得过紧。 电缆被压扁×(4) 请勿使电缆产生扭曲或扭结。 所谓扭结,是指电缆在成为环状的状态下用力牵拉后折曲为锐角,并将导致特性不良。一旦产生扭结  后,即使外观上恢复原状,电缆特性也不会完全恢复。电缆产生了扭结×(5) 尽可能不要进行多余部分的处理。 卷缠直径小及卷缠次数过多的话,有可能同色对的电缆之间会发生过程的串音,引起故障。 串音是指传送信号漏到其它传送路。               ××2-16
(6) 包好电缆远离噪声源。请尽可能地使通信电缆和 HUB(中枢)远离焊接设备或发动机的动力线、大电流的电源电缆等干扰源。(7) 应使用金属套管进行屏蔽。无法采用 6 中所示方法时应使用金属套管等对通信电缆,HUB(集线器)进行屏蔽。 噪声源      通信电缆         HUB通信电缆HUB 存放箱(金属制) 套管(金属制)           2-17噪声源  
2.2.62.2.6.1对PLC与电脑进行USB连接时的注意事项在电脑使用 AC 电源过程中,在 PLC 上连接了 USB 电缆的状态下,绝对不可以进行插拔电脑侧 USB 电缆的行为。另外,用 USB 电缆连接 PLC 和电脑时,请事先确认 2.2.6.2,并按 2.2.6.3 的连接步骤进行 USB 连接。 采用其他方法连接 USB 电缆时, PLC 的 USB 端口有时会发生故障。PLC的USB端口故障原因如果电脑的 AC 电源及屏蔽不进行接地,因为以下的理由,PLC 的 USB 端口有时会发生故障。PLC 的USB 端口发生故障时,虽然与 PCwin2 的通信将无法进行,但 PLC 的动作等其他功能将会正常工作。 (1) 连接 USB 电缆时,会因为 AC 适配器或来自电脑的漏电流,在 USB 电缆的连接器金属部分和 PLC的 USB 连接器金属部分之间产生电位差,所以在连接时,PLC 的 USB 端口有时会发生故障。 USB 连接器的金属部分     AC 插头(三芯) 插座AC 适配电脑 PLCUSB 电缆 电位差   DC 电缆漏电流电位差屏蔽  器   FG                                          FG               电       接地接地极未接地 AC 插头(两芯)屏蔽位差 接地线未接地PLC 有发生故 接地 障的可能性               接地线未接地接地         (2) 由于电脑的屏蔽与 USB 的 0V(信号 GND)是根据电脑的种类来连接,所以有时会因为 USB 电缆内 的屏蔽线断线及电脑的 USB 连接器金属部分和 USB 电缆的连接器金属部分接触不良,导致电脑的 AC 电源漏电流潜行到 PLC,造成 PLC 的 USB 端口发生故障。  电脑Vbus DC 电缆                 D+漏电流屏蔽PLC  D- 0VFGD 0FG                           屏蔽线断线  金属部分接触不良 电位差     Vbus USB 电缆 D+V接地(FG)       -              存在着因漏电流 的潜行而导致 PLC 发生故障 的可能性。           2-18
2.2.6.2USB连接前的确认事项进行 USB 连接之前,请确认以下事项。(1) 使用前请确认 USB 电缆屏蔽线的导通状态。请勿使用屏蔽线已断线的 USB 电缆。 屏蔽线的导通确认方法USB 电缆*请轻轻地弯曲电缆,确认导通状况。           金属部分之间的电阻值 应在数Ω以下     (2) 请确认电脑侧的 USB 连接器金属部分与电缆侧的连接器金属部分是否处于导通状态。为确认是否确 实处于接触状态,请上下、左右、前后轻轻地活动连接器部分,确认导通状况。即使只有瞬间有非导 通的情况,也请勿使用该端口。 USB 连接器金属部分的导通确认方法 电脑 USB 连接器屏蔽*请上下、左右、前后轻轻地活动,确认导通状况。 USB 电缆                        电脑机箱或其他连接器金属部分与 USB 电缆的连接器金 属部分之间的电阻值应在数Ω以下。  (3) 为减少因电脑漏电流而引起的 USB 端口故障,USB 电缆请使用下述的本公司推荐产品。    USB 电缆    形状        生产厂家      型号     长度           ELECOM(株)              U2C-BN07BK          0.7 m A(公)-B(公)型 *RoHS 标准的产品              U2C-BN10BK       1.0 m    U2C-BN15BK  1.5 m   U2C-BN20BK     2.0 m   U2C-BN30BK       3.0 m    U2C-BN50BK    5.0 m    USB2-FS05    0.5 m      A(公)-B(公)型         USB2-FS15  1.5 m   USB2-FS3       3.0 m  2-19
(4) USB 中继电缆请使用下述的推荐产品。而且,使用中继电缆时,请遵守以下注意事项。    种类         生产厂家       型号      长度            形状     USB 中继电缆   HARTING(株)  09454521910    0.5 m   B(母)-B(公)型    注意: 根据 USB 的规格,电缆的最大长度定为 5 m。 使用中继接头延长电缆时,总延长距离不得超过 5 m。     正确连接例       × NG 例      控制盘内USB 中继 电缆 0.5 m中继接头USB 电缆 3m     DM      PCwin    PLC          控制盘内USB 中继 电缆 0.5 mUSB 电缆 5m     DM      PCwin  PLC           2-20
 2.2.6.3PLC 与电脑的 USB 电缆连接步骤请按下述(1)~(4)的其中一个步骤来连接 USB 电缆。 (1) 电脑的AC电源插头为三芯(带接地极)时AC 插头(三芯) *接地极应接地插座接地AC 适配器AC 适配器 接地AC 插头(两芯)接地线USB 电缆 PW2 PWR STATUSTOYOPUC-Nano插座TUV-6942RUN1 RUN2 24V 0V (NA)USB OPTUC-6941USB OP PUSHMS L1 NS MS L2 NS I/O BUSSTATUSBATTERYSTART PUSHRESET PCwinBUS-EXL3L(+) L(-) SG FG L(+) L(-) SG FG L4RUN E/A W BUS -EX 将 USB 电缆连接到 PLC 上的顺序 将 USB 电缆从 PLC 上拔下的顺序 (2) 电脑的AC电源插头有接地线时将接地线接地*应与 AC 供电电源的接地为同一个接地将 USB 电缆连接到 PLC 上的顺序 将 USB 电缆从 PLC 上拔下的顺序 2-21电脑电脑PLCUSB 电缆 TUV-6942RUN1 RUN2 24V 0V (NA)USB OPTUC-6941USB OP PUSHMS L1 NS MS L2 NS I/O BUSSTATUSBATTERYSTART PUSHRESET PCwinBUS-EXL3L(+) L(-) SG FG L(+) L(-) SG FG L4RUN E/A WBUS -EXPLCPW2 PWR STATUSTOYOPUC-Nano
 (3) 电脑的AC电源插头为两芯,且没有接地线时电脑PLCUSB 电缆 PW2PWR STATUSTOYOPUC-NanoAC 插头(两芯)AC 适配器USB OPTUC-6941USB OP PUSHMS L1 NS MS L2 NS I/O BUSSTATUS RUN E/A WBUS -EXBATTERYSTART PUSHRESET PCwinBUS-EXL3L(+) L(-) SG FG L(+) L(-) SG FG L4插座将电脑的屏蔽接地*应与 AC 供电电源的接地为同一个接地TUV-6942RUN1 RUN2 24V 0V (NA)接地电脑侧 串行端口等将 USB 电缆连接到 PLC 上的顺序 将 USB 电缆从 PLC 上拔下的顺序 (4) 以蓄电池供电来使用电脑时(不使用AC电源时) 不必对电脑进行接地,直接即可使用。电脑TOYOPUC-NanoUSB 电缆 PW2 PWR STATUSTUV-6942RUN1 RUN2 24V 0V (NA)USB OPTUC-6941USB OP PUSHMS L1 NS MS L2 NSI/O BUSSTATUSBATTERYSTART PUSHRESET PCwinBUS-EXL3L(+) L(-) SG FG L(+) L(-) SG FG L4RUN E/A W BUS -EX将 USB 电缆连接到 PLC 上的顺序 将 USB 电缆从 PLC 上拔下的顺序 PLC2-22连接到固定螺丝部 接地线
3 初始设定3.1 CPU出厂时的设定 3.1.1 程序与参数CPU 出厂时,设定为以下状态。  程序CPU 动作模式的初始设定为“Nano 模式”。  参数在参数的 CPU 设定中写入了下表中的设定值。   项目    设定值      程序名称  项目  (空白) CPU 工作模式      CPU 工作模式      Nano   闪存器[Kbyte]  0 错误时的 RUN 状态设定           I/O 表对照异常      停止   整体扫描超时  停止   数据异常    停止   用户存储器自动恢复无效      继续执行   蓄电池(可选)  无  扫描超时       CPU1[ms]      100   CPU2[ms]  100   CPU3[ms]     1003-1 3
3.1.2 蓄电池内置时钟使用超级电容器作为后备,需要长时间的后备时,作为选项,可使用蓄电池。CPU 在出厂时未配备蓄电池。由于用户程序(顺控程序与参数)、数据存储器、设备信息存储器内容(注释等)保存在停电时内容也会 被保留的非易失性存储器中,所以即使在没有蓄电池的状态下,也能保留内容。在 TOYOPUC-Nano 中追加蓄电池时,请在参数的 CPU 设定中,将蓄电池(可选)设定在“being(有)” 上。在拆下蓄电池的状态下,请设定在“nothing(无)”上。   3-2
3.2 3.2.1CPU的设定方法 CPU工作模式的设定首先通过外围装置设定 CPU 工作模式。CPU 的工作模式有 PC10 模式,并可根据需要,选择程序容量。CPU 工作模式与程序容量、数据容量的关系补充:闪存器用于初始化存储在闪存存储器中的数据时向 RAM 上的闪存器转发数据,然后在 RAM 上的闪 存器上使用。此时可通过与“EB 区域”相同的命令直接指定。但向闪存存储器本身写入数据时需要专 用命令。即使向闪存器中写入通常的命令,也需要切断电源或重新启动 CPU 才能返回原来的闪存存 储器中的内容。注意: 如果变更工作模式,迄今为止的顺序程序和数据将会失去。另外,在 PC10 模式下,作为 CPU 工作模式可以通过参数来选择程序 2、3 的执行与否以及与 RUN 信号的连锁。     模式         程序容量 KW 基本区域数据容量 KW       扩充区域数据容量 KW      PRG.1    PRG.2   PRG.3    PRG.1     PRG.2   PRG.3       继电器寄 存器   数据       缓冲区       PC10 模式      60   60   60   32       32    32       16       128       256           120     60     0    180    0   0    项目     选择值   程序执行*1      程序 1  有效[执行](固定)    程序 2  有效/无效[执行/非执行]    程序 3    有效/无效[执行/非执行]     RUN 信号连锁*2    程序 1 连锁(固定)    程序 2  连锁/非连锁    程序 3  连锁/非连锁*1 程序 2、3 可以通过参数设定选择程序的执行。 如果选择了无效,应用程序(程序 2 或程序 3)将不执行。*2 程序 2、3 可以通过参数选择与 RUN 信号的连锁。 选择了连锁的程序停止后,连锁的 RUN 信号 OFF,所有程序停止。3-3
3.2.2 设定链路参数时的支架号、时隙号TOYOPUC-Nano 作为通信端口,拥有 L1~L4 等 4 个端口。进行链接参数设定时的支架号及时隙号请按 照下表设定。链路号可以任意设定。不使用内置链路时不必进行本项设定。将 L3(标准)作为 SN-I/F 使用时,不需进行链接参数的设定。  可选择的通信功能       链路号       支架号     时隙号   模块名称        PC10模式     Nano模式   EthernetFL-netFL 远程 M EtherCAT-M (注 1)  任意内置  L1 L1 以太网(32 端口) FL-netFL 远程 M EtherCAT-M  Ethernet FL-netFL 远程 M     任意   内置     L2     L2     以太网(32 端口) FL-netFL 远程 M   PC-LINK CMP-LINK MODBUSSIOSN-I/F (注 2)  任意内置  L3 L3 PC 链路 计算机链路 MODBUS SIO 模块  PC-LINK CMP-LINK MODBUS SIO     任意   内置     L4     L4     PC 链路 计算机链路 MODBUS SIO 模块  注1: EtherCAT 主机仅可使用 L1 端口。 EtherNet/IP 功能未对应。注2: 如果不在 L3(标准)中设定链接参数,则会成为 SN-I/F。作为 SN-I/F 使用时应将 L3 的终端开关 置于 ON 位置。不作为 SN-I/F 使用时应将其置于 OFF 位置。3-4
3.2.3 程序的编制顺序请参照 PCwin2 的使用说明书。3.2.4 参数的设定方法请参照 PCwin2 的使用说明书。3-5
4 试运行4.1 运行时的确认事项 寄存器设定• 是否进行了寄存器清零? 参数设定• 参数设定是否正确? 电池*1• 是否确实连接了电池接插件?• 电池是否进行了充分的充电?  时间设定• 是否进行了内装时钟的时间设定? 模块安装• 是否确实安装了各模块? • 固定螺丝有无切实紧固。 端子台的配线• 各端子电线的连接是否正确? • 电线尺寸是否正确?• 端子螺栓是否松动?*1 仅使用电池时 4-1 4
5 异常警报5.1 5.1.1CPU的异常警报 异常级别异常级别可大致分为以下几类。警报 ··········· 继续运行 系统没有马上停机,但其故障状态若继续的话,系统将会出现停机异常。RUN 灯及运行状态监视器的 RUN 显示仍正常。 特殊继电器 V003 启动。轻度异常 ····· 继续运行 主要是用户程序或用户设定引起的异常,即使不马上停止顺序程序的执行,也不会对系统造成重大影响的异常。RUN 灯及 RUN 接点均照常(ON)。 特殊继电器 V002 启动。重度异常 ····· 停止运行 主要是系统硬件引起的异常,是系统难以继续运行的异常。顺序程序的执行被停止,RUN 灯熄灭,RUN 接点 OFF。特殊继电器 V001 启动。重度异常时,输出将保留。需使输出为 OFF 时,请在外部硬盘上使输出的公共部分为 OFF。 5-1 5
5.1.2 异常显示(1) CPU 发生异常时,E/A 灯(红色)亮灯。(2) 信息显示器 在信息显示器为“运行状态监视器”模式的情况下,显示错误代码。(2-1) 运行过程中的报警代码显示例如 发生应用命令(错误代码 71)7 显示 不显示 1 显示 不显示 (0.7 秒) (0.1 秒) (0.7 秒) (2 秒)(2-2) 在扩展功能执行过程中显示(强制 ON/OFF,跟踪扫描单位)强制输出 跟踪扫描单位 强制输入(ON/OFF) 注意: 报警时不显示。                                  5-2
 5.1.3 异常显示一览表电源 电池存储器停电 0013CPU003D- 004C- 004D- 004E- 004F-*: 0~3 0=1~3=系统方面的异常程序方面的异常表示对应的程序号码。00AF  -: 亮灯 : 熄灯异常项目 错误代码 LED 灯 错误解除 POWER RUN E/A 重新接通电源 复位电池电压降低 程序存储器和数校验错误 附属信息和数校验错误 未定义指令 CPU间USB断线 CPU间USB刷新停止 无内置 Ethernet 用 MAC_ID 无电源模块应答0022    -0*21    0*23    0*24   0010- 0011- 0012    - - 0014- 0015     -CPU 间 USB VBUS 异常USB存储器用5V电源异常 0016-特殊继电器VC1 V01 VF0 V03 VC2 V01 VC2 V01 VC9 V01 - - - - - - - - - - - - - - VC0 V01-- -VC0 V01- - - - - - - - - - - - VC0 V01 VF5 V03 VC2 V01 VC0 V01 VC2 V03/: 由参数的“发生故障时的运转状态”决定。左侧为 出厂时的设定。002A-  - - -蓄电池安装异常系统管理处理器异常顺序处理字处理器异常系统RAM异常系统中断异常输入输出端口异常CPU软件异常I/O总线异常BUS-EX连接异常增设机架异常基板用总线异常系统内存不足RTC异常 00A3- 系统程序异常 00A6   顺序RAM异常 00A9   系统参数报警 00AA- 备用存储器写入错误 00AB     数据异常 00AD  /   未确认数据异常 00AE- 时钟未设定0035    0036   (0032) 0039   (003C)    (00A0)    ---- VCA V01  VC2 V01/02 - VCB V03 - VF5 V035-3-  
                异常项目 使用 I/O 机架 FI/O 支架号重复 I/O 地址重叠 I/O 电源停电输入输出 I/O 表对照异常 I/O模块异常I/O模块报警I/O 模块参数异常 I/O 地址设定异常输入输出总线 I/O 地址总线奇偶校验错误 事件监控器错误扫描超时 应用指令错误 1 用户程序存储溢出 无 END 指令无 START 指令 主控制错误用户程序 应用指令错误 2(特殊模块用) FOR-NEXT 错误RET 错误RETI 错误 程序库调用错误 PRG、END 执行 标签表错误 变址错误错误代码 LED 灯 错误解除 POWER RUN E/A 重新接通电源 复位特殊继电器VC8 V01 VC8 V01 VC8 V01 VC1 V01                         0041   0045   0046   0047  0048 /  004A0043   004B   0042   0049   0044   0*29   0*31 /  0*71 /  0*72   0*73   0*74   0*75   0*78 /  0*79   0*7A   0*7B   0*7C /  0*7D   0*76   0*7F  /  - - - - - - - -                VE0V01/02                                             VC7 V01 VC7 V03 VC5 V01 VC8 V01 VC3 V01 VC2 V01                                                        VE1*1VE2*2 VC9*3 V01 VC9*3 V01 VC9*3 V01 VC9*3 V01V01/02 V02/01                                                      VE2 *2 VC9*3 V01 VC9*3 V01 VC9*3 V01V02/01                                    VE2*2 VC9*3 V01 VC6*4 V01V02/01                           VE2*2 VC6*4 V01V02/01          用户设定 参数设定值异常 0*77                 : 亮灯 : 熄灯/(/): 由参数的“发生故障时的运转状态”决 定。左侧为出厂时的设定。 *1 程序 1~3:VE8~VEA *2 各程序的特殊继电器*3 程序 1~3:VD0~VD2 *4 程序 1~3:VD8~VDA*: 0~30= 系统方面的异常1~3= 程序方面的异常 表示对应的程序号码。5-4
   异常项目       错误代码        LED 灯    错误解除  特殊继电器       POWER    RUN  E/A 重新接通电源     复位     特殊模块           特殊模块参数异常  0082                 VC5   V01   特殊模块数溢出    0088            -    VC8   V01   特殊模块异常    0*84                VC4   V01   链接参数异常  0*85                -   V03   链路模块分配异常    0089                        VF2     V03   链路通信异常   0*86                -   V03      *: 0~30= 系统方面的异常1~3= 程序方面的异常 表示对应的程序号码。: 亮灯 : 熄灯/: 由参数的“发生故障时的运转状态”决定。左侧为 出厂时的设定。5-5
5.1.4 输出错误信息用特殊寄存器检出异常时,将错误代码、错误相关信息及错误检出时刻保存在错误信息保存用特殊寄存器中。由于此寄 存器是 64 段移动寄存器结构,可以记忆 64 次异常。异常达到 65 次以上时,将从最初保存的错误信息开 始依次消失(参照下述内容)。在该寄存器存储的异常信息可由外围装置(PCwin2 等)读取。 另外,可在信息显示器的“错误监视器”模式中确认错误信息。通过履历清除,该寄存器将被清零。HL        异常 0       异常 1       ·       ·       ·       ·       异常 62       异常 63        程序 No     异常代码    相关信息 2 相关信息 1     相关信息 4   相关信息 3     相关信息 6      相关信息 5    相关信息 8 相关信息 7     时刻(分)   时刻(秒)     时刻(日)      时刻(时)    时刻(年)   时刻(月)  S1000 S1000S1008 S1001· S1002· S1003· S1004· S1005S11F0 S1006 S11F8 S1007注1: 错误相关信息以 16 进制数保存。 注2: 储存内置时钟的当前时刻。数据为 BCD 码,2 个字节表示 1 位数。 年份数据显示为公历年的最后 2 位。这些寄存器里保存的信息在异常恢复后也不被清除。 需要清零时,请通过外围装置(PCwin2 等)向寄存器写入“0000”。 5-6
5.1.5错误 代码0010 00110012 0013 0014 0015 0016 0*21 0022 0*230*240029 002A 0*31 0032 0035 00360039003C 003D 0041 0042 0043错误相关信息(S1000~S11FF) 根据异常的内容,可以有效查找异常原因及异常部位的信息,作为“错误相关信息”被存储(用 16 进制存储)。* 程序计数器(步号)的相关信息分 4 段显示。(在以往的 S200~S24F 中为 2 级)        错误内容   错误相关信息     备注   1         2       3   4        5      6   7       8           CPU 间 USB 断线   -    -    -  -   -   -  -   -       CPU 间 USB 刷新停 止 -  - --  - --  -    无内置 Ethernet 用 MAC_ID     -       -      -   -     -     -   -      -         停电 -  - --  - --  -    无电源模块应答   机架编 号     -   - -    -   - -     -      CPU 间 USB VBUS 异常     -       -      -   -     -     -   -      -         USB 存储器用 5V 电 源异常   -    -    -  -   -   -  -   -       程序存储器和数校 验错误 区域划 分*  - --  - --  - *1:顺序   电池电压降低     -       -      -   -     -     -   -      -         附属信息和数校验 错误   区域划 分*    -    -  -   -   -  -   -    *1:参数   未定义指令 程序计 数器低 位  程序计 数器低 位 程序计 数器高 位程序计 数器高 位  - --  -    事件监控器错误     2       和数数 据      和数计 算值   -     -     -   -      -         蓄电池安装异常 -  - --  - --  -    扫描超时     分类*       -      -   -     -     -   -      -      *1:初始 2:主要 3:全体   系统 RAM 异常 -  - --  - --  - *1:系统 RAM   系统管理处理器异 常     -       -      -   -     -     -   -      -         顺序处理字 处理器 异常   -    -    -  -   -   -  -   -       系统中断异常 分类*  - --  - --  - *0~7:INTO~7FF: NMI   输入输出端口异常     -       -      -   -     -     -   -      -         CPU 软件异常 -  - --  - --  -    使用 I/O 机架 F     -       -      -   -     -     -   -      -         I/O 模块参数异常   机架编 号    插槽编 号    -  -   -   -  -   -       I/O 模块异常   机架编 号    插槽编 号    -  -   -    -  -   -    保险丝断等                            5-7
      错误 代码        错误内容 错误相关信息     备注   1         2       3   4        5      6   7       8             0044 I/O 地址总线奇偶校 验错误 机架编 号  - --  - --  -      0045    I/O 支架号重复    -       -      -   -     -     -   -      -          0046I/O 地址重叠 机架编 号 (1)  机架编 号 (2) --  - --  -      0047    I/O 电源停电    -       -      -   -     -     -   -      -          0048I/O 表对照异常 机架编 号  插槽编 号 登记数 据安装模 块  - --  -      0049 I/O 地址设定异常   机架编 号     -   - -    -   - -     -        004B    I/O 模块报警    机架编 号       插槽编 号      -   -     -     -   -      -          0046I/O 地址重叠 机架编 号(1)  机架编 号(2) --  - --  -      004C I/O 总线异常   -     -   - -    -   - -     -        004D    BUS-EX 连接异常    Ver 高位       Ver 低位      -   -     -     -   -      -          004E增设机架异常 支架号  0/1 --  - --  -      004F    基板用总线异常    支架号       -      -   -     -     -   -      -          0*71应用指令错误 1 程序计 数器低 位  程序计 数器低 位 程序计 数器高 位程序计 数器高 位  串行号 码低位 串行号 码高位-  -      0*72    用户程序存储溢出    -       -      -   -     -     -   -      -          0*73无 END 指令 -  - --  - --  -      0*74    无 START 指令    -       -      -   -     -     -   -      -          0*75   主控制错误  分类*    MC 号    MCR 号  -   -   -  -   -    *1:嵌套溢出 2:号码不 一致、3:无 MCR4:无 MC    0*76标签表错误 分类*(1)  分类*(2) 标识号 码低位标识号 码高位  - --  - *1-1:转移、2:调用、 3:中断、4:START、 5:扩展标签 2-1:无标签、2:不一致 3:号码外     0*77    参数设定值异常    参数号 码       -      -   -     -     -   -      -          0*78   应用指令错误 2  程序计 数器低 位    程序计 数器低 位    程序计 数器高 位  程序计 数器高 位   串行号 码低位   串行号 码高位  -   -    与特殊模块的 I/O 异常    0*79FOR-NEXT 错误 分类*  - 程序计 数器低 位程序计 数器低 位  程序计 数器高 位 程序计 数器高 位-  - *1:无 NEXT 2:无 FOR、 3: 嵌套溢出 4:地址异常     0*7A    RET 错误    分类*       -      程序计 数器低 位   程序计 数器低 位     程序计 数器高 位      程序计 数器高 位   -      -      *1:无 RET 2:无 CALL  5-8
 错误 代码0*7B错误相关信息123456780*7C错误内容RETI 错误程序库调用错误 (调不出程序库)程序计 程序计 数器低 数器低程序计 程序计备注 *1 1:无 RETI2:无中断*2 无 RETI 时,中断 级别*1 1:没有指定为程序库 可用状态 2:程序库已在执行中3:标签号码超过范围4:无标签指令- 5:标签号码不一致6:无 SYS415 7:非可用程序号码8:不是可用的动作模 式。*2A:FB 程序库, B:用户 程序库, C:标准程序库无 END 或 RET、RETI 指令0084 特殊模块异常 0*85链接参数异常0086链路通信异常分类* 号 链接编 -号链接编 - 号号 - -- - -- - -- - -- - -- - - - - - - - - - - - - - -- - -- -0088特殊模块数溢出 - -0089 链路模块分配异常 机架编 插槽编 号号- - -- - - - - -00A0程序溢出00A3 RTC异常00A6 系统程序异常分类* - 分类* - 分类* -- - -00A9顺序RAM异常 - -00AA 系统参数报警 分类* -00AB备用存储器写入错 - - 误- *1:ROM 2:RAM - - -分类*1 -分类*1 分类*2数器高 数器高 - - 位*2 位 位*2 位*2读取部 读取部 程序计 程序计 数器低 数器低读取部 读取部 程序计 程序计 - 数器高 数器高(程序库内线路故障)0*7D执行PRG、END - - - - -程序计 程序计 程序计 程序计0*7F 变址错误 数器低 数器低 数器高 数器高 -位位位位0082特殊模块参数异常机架编插槽编- - - 号号- - -- - -- - -- - -位位位位机架编 插槽编*1:ALM- 2:CPU 检测、3:I/O 模块检测标识号 标识号 - 码低位 码高位- -00AD数据异常 -------- 00AE未确认数据异常 - - - - - - - - 00AF时钟未设定 --------5-9- -- 无链路参数设定- -- -- - - - -- *1:I/F、2:备用- *1:ROM 2:RAM
5.1.6 CPU的异常处理本章在使用 TOYOPUC-Nano 的设备不正常工作时,帮助用户找出其原因,迅速进行处理。在阅读本章之前,请熟读本使用说明书的其他各项及程序设计手册,掌握 TOYOPUC-Nano 的功能以及 编程的方法。 异常原因的种类 被控制系统异常动作(一般是指停止)的主要原因可以大致分为以下几个部位。(1) 输入输出设备(限位开关、螺线管阀等)的故障。(2) 控制线路(程序)不良。(3) TOYOPUC 的故障(a) 输入输出模块的故障。(b) CPU 模块的故障。本章对(2)及(3)进行说明。 故障查找(1) 首先需要确认的事项。(a) 同时发生多项异常? 根据存放错误信息的寄存器数据确认发生故障时间时,有时会在同一时间发生几项异常。这时,        要从最先发生的异常开始进行故障检查。(b) 确认错误相关情报。 利用外围装置确认错误相关情报、错误发生时间,以作为故障查找的参考信息。(2) 故障查找的方法请参考 5.1.7. 异常显示与推测原因或者 5.1.8. 异常检查流程图,分析原因。根据这些原因进行故障检查仍不能恢复时,请确认有无 CPU 模块、I/O 模块的安装不当及 I/O 电缆的 连接不当。如果仍然不能恢复,请更换 CPU 模块、选择器模块、电源模块、I/O 模块、I/O 电缆、底板。 5-10错误履历的新旧 错误0 新错误63 旧  
 CPU模块的更换顺序如果故障检查的结果需要更换 CPU 模块,请按照以下顺序进行更换作业。1) 从 TOYOPUC-Nano 模块留下程序+参数、寄存器(根据需要,还有其他数据)的备份。2) 切断电源。3) 卸下 TOYOPUC-Nano 模块的线路,取出 TOYOPUC-Nano 模块。4) 准备新的 TOYOPUC-Nano 模块,连接蓄电池*1,设定开关。5) 安装新的 TOYOPUC-Nano 模块,将线路复原。6) 打开电源。7) 将在 1)留下的程序+参数、寄存器(根据需要,还有其他数据)的备份写入新的 TOYOPUC-Nano 模块。8) 设定时刻。*1 仅使用电池时。  5-11
5.1.7 异常显示与推测原因      错误 代码          名称         内容      主要推测原因        排除方法        10 CPU 间 USB 断线 CPU 间 USB 的断线异常(1) 输入了严重的外部噪音。 (2) CPU模块的故障。  (1) 重新接入电源 (2) 更换CPU模块    11   CPU 间 USB 刷新停止   CPU 间 USB 刷新的停止异常 (1) 输入了严重的外部噪音。 (2) CPU模块的故障。     (1) 重新接入电源 (2) 更换CPU模块    12     无内置 Ethernet 用 MAC_ID     内置 Ethernet 用 MAC_ID 未写入   (1) 内置Ethernet用MAC_ID未写入      (1) 更换为已写入内置Ethernet用MAC_ID的 CPU 模块     13 停电 CPU 处的 5 V 电源电压降低。(1) AC输入电压超出额定范围。 (2) 电源模块的故障。(3) AC电源瞬间停电。  (1) 将输入电压设为额定值。 (2) 更换电源模块。(3) 复位、启动或重新加电。    14   无电源模块应答   无法从电源模块接收数据 (1) 输入了严重的外部噪音。 (2) PWR模块的故障(3) CPU模块的故障     (1) 重新接入电源 (2) 更换PWR模块 (3) 更换CPU模块    15   CPU 间 USB VBUS 异 常   CPU 间 USB VBUS 中未进行 5 V 输入 (1) 输入了严重的外部噪音。 (2) CPU模块的故障。     (1) 重新接入电源 (2) 更换CPU模块    16     USB存储器用 5V电 源异常     USB 存储器用 5 V 电源电压下降。   (1) 输入了严重的外部噪音。 (2) CPU模块的故障。      (1) 重新接入电源 (2) 更换CPU模块     21 程序存储器和数校验错 误 程序区的数据与和数校验数据不一致。(1) 由于严重的外部噪音等影响,程序存储器被改 写。(2) 存储器元件的故障。  (1) 重新写入程序。 (2) 更换CPU模块    22     电池电压降低     存储器备用锂电池的电压降低。   (1) 锂电池过期。 (2) 锂电池未连接。      (1) 更换锂电池。 (2) 连接锂电池。     23    附属信息和数校验错误   参数区的数据与和数校验数据不一致。  (1) 由于严重的外部噪音等影响,程序存储器被改 写。(2) 存储器元件的故障。   (1) 重新写入参数。 (2) 更换CPU模块   5-1
      错误 代码          名称         内容        主要推测原因        排除方法        24 未定义指令 顺序程序执行过程中发现未定义指令。(1) 程序员在写入程序过程中连接电缆脱落,处理 中断。(2) 通过计算机链路写入程序时,出现未定义指 令。(3) 由于严重的外部噪音等影响,程序存储器被改 写。(4) 存储器元件的故障。  (1) 重新写入程序。(2) 修改程序后重新写入。 (3) 重新写入程序。(4) 更换CPU模块    29   事件监控器错误   事件监控器数据异常 (1) 对未写入事件监控器数据的CPU使用了事件 监控器启动命令[SYS 400](2) 使用了设定数据不正确的事件监控器。     (1) 请删除程序中的事件监控器启动命令[SYS400],在 CPU 中写入程序。或者正确设定事件监控器设定数据,将事件监 控器数据写入 CPU。(2) 请正确设定事件监控器设定数据,将事件监控 器数据写入 CPU。    2A     蓄电池安装异常     参数设定内容与蓄电池实际安装不一致   (1) 参数设定内容不同 (2) 蓄电池未安装      (1) 重新设定参数(2) 确认蓄电池有无安装     31   扫描超时   顺序程序的执行时间超过参数设定的扫描时间定时器值。  (1) 参数的扫描时间定时器值不适当。 (2) 顺序程序的处理时间过长。(3) 顺序程序中有无限循环结构。   (1) 将扫描时间定时器的值设为适当的值。 (2) 修改顺序程序。(3) 修改顺序程序。     32 系统 RAM 异常 写入系统 RAM 的数据不能正确读取。(1) 由于严重的外部噪音等影响,系统RAM被改 写。(2) CPU模块的故障。  (1) 复位、启动或重新加电。 (2) 更换CPU模块    35   系统管理处理器异常   系统管理处理器的处理时间超长。 (1) 由于严重的外部噪音等影响,系统管理处理器 失控。(2) CPU模块的故障。     (1) 复位、启动或重新加电。 (2) 更换CPU模块    36     字处理器异常     应用指令运算用的字处理器的处理时间超长。   (1) 由于严重的外部噪音等影响,字处理处理程序 发生动作错误。(2) CPU模块的故障。      (1) 复位、启动或重新加电。 (2) 更换CPU模块     39 系统中断异常 对系统管理处理器输入了原因不明的中断要求。(1) 输入了严重的外部噪音。 (2) CPU模块安装不当。  (1) 复位、启动或重新加电。 (2) 切实安装CPU模块。    3C     输入输出端口异常     系统管理处理器的输入输出端口数据不正确   (1) CPU模块的故障      (1) 更换CPU模块     3D    CPU 软件异常   CPU 软件已中止。  (1) 输入了严重的外部噪音。 (2) CPU模块的故障。   (1) 重新接入电源 (2) 更换CPU模块   5-1
      错误 代码          名称         内容        主要推测原因        排除方法        42 I/O 模块参数异常 I/O 模块内的占有点数参数为异常值。(1) I/O模块安装不当。 (2) I/O模块故障。(3) 主板模块故障。  (1) 切实安装I/O模块。 (2) 更换I/O模块。(3) 更换主板模块。    43     I/O 模块异常     占有输出模块或者 I/O 地址的高功能单位(高速计 数器等)发生异常。   (1) 发生输出模块保险丝断裂。 (2) 高功能模块发生异常。      (1) 更换保险丝。(2) 请参照各模块的使用说明书,排除异常。     44 I/O 地址总线奇偶校验 错误 在选择模块发现地址总线的奇偶校验错误。(1) I/O电缆连接不当。(2) I/O电缆断线。(3) 由于严重的外部噪音影响,地址数据发生变 化。  (1) 切实连接I/O电缆。(2) 更换I/O电缆。(3) 复位、启动或重新加电。    45   I/O 支架号重复   I/O 电源模块上的机架编号选择开关的设定为“0” 或“8”以上,或与其他机架重复。 (1) 设定错误。     (1) 不要重复设定支架号选择开关。    46     I/O 地址重叠     1 个 I/O 支架占用的地址区域与其他 I/O 支架占用 的地址区域之间有重叠。   (1) 选择模块上的I/O地址选择开关的设定错误。      (1) 正确设定I/O地址选择开关。     47 I/O 电源停电 增设 I/O 支架侧的 5 V 电源电压下降。(1) 电源模块的AC输入电压超过额定范围。(2) 设置在主板上的I/O模块消耗电流过大。(3) 增设I/O支架部的电源模块故障。(4) 尽管接通了CPU支架部的电源,增设I/O支  架部的电源仍然没有接通。(5) 只有增设I/O支架侧发现AC输入的瞬间停 电。(6) 增设I/O支架侧没有安装电源模块,也没有进 行 5V 线路布线。  (1) 将输入电压设定为额定输入电压。(2) 将设置在主板上的I/O模块的总体消耗电源  设定在额定输出电流以内。(3) 更换电源模块。(4) 将CPU电源部分与I/O电源部分设为同一系统。(5) 复位、启动或重新加电。(6) 在增设I/O支架侧安装电源模块,或者进行5V 线路布线。    48   I/O 表对照异常     作为参数设定的 I/O 模块安装状态与实际安装状 态不一致。   (1) 参数的设定错误。(2) CPU、选择器或者I/O模块安装不当。 (3) 安装了错误的I/O模块。(4) 选择器模块的支架号设定错误。(5) I/O电缆安装不当。     (1) 正确设定参数。(2) 切实安装模块。(3) 安装正确I/O模块。 (4) 正确设定支架号。 (5) 切实安装I/O电缆。        4A    49      I/O 地址设定异常     I/O 地址的设定超过规定值   (1) I/O地址的分配超过“1FF”。(2) 选择模块上的I/O地址选择开关的故障。      (1) 变更I/O地址分配。 (2) 更换选择器模块。   5-1
      错误 代码          名称         内容        主要推测原因        排除方法        4B I/O 模块报警 占有输出模块或者 I/O 地址的高功能单位(高速计 数器等)发生异常。(1) 发生输出模块保险丝断裂。 (2) 高功能模块发生异常。  (1) 更换保险丝。(2) 请参照各模块的使用说明书,排除异常。    4C   I/O 总线异常   I/O 总线的设定、连接顺序、断线异常 (1) I/O模块与实际安装的模块不一致 (2) I/O总线的电缆连接顺序不同(3) 电缆断线     (1) 确认I/O模块与实际安装的模块是否一致。 (2) 确认电缆的连接顺序(3) 更换电缆。    4D     BUS-EX 连接异常     BUS-EX 的连接异常   (1) BUS-EX不是Nano对应品      (1) 将BUS-EX更换为Nano对应品。     4E   增设机架异常   增设机架的电缆异常、增设机架内存在硬件异常的模块。  (1) 电缆连接不当(2) 增设机架内存在硬件异常的模块。   (1) 确认电缆的连接情况。(2) 解除增设机架内模块的硬件异常。     4F 基板用总线异常 基板用 CAN 总线的异常(1) 输入了严重的外部噪音。 (2) 主板模块故障。(3) CPU模块的故障  (1) 重新接入电源 (2) 更换主板模块。 (3) 更换CPU模块    71   应用指令错误 1   应用指令的运算域值或运算结果超出规定范围。 (1) 应用指令的运算域值或运算结果超出规定范 围。(2) 运算数据的形式不同。(BCD、BIN)     (1) 修改顺序程序。(2) 修改顺序程序或者数据。    72     用户程序存储溢出     顺序程序用的存储区域不够。(子程序、中断用存储)   (1) 子程序内调用自己本身。      (1) 修改顺序程序。     73 无 END 指令 在 2 次执行 START 指令之间没有执行 END 指令。(1) 顺序程序中没有END指令。(2) 顺序程序中有2个以上START指令。 (3) 程序结构为跳过END指令。  (1) 追加END指令。(2) 将START指令改为1个。 (3) 修改顺序程序。    74   无 START 指令   没有执行 START 指令便执行了 END 指令。 (1) 顺序程序中没有START指令。 (2) 程序结构为跳过START指令。     (1) 追加START指令。 (2) 修改顺序程序。    75   主控制错误   MC 指令或者 MCR 指令的使用方法有误。 (1) 主控制的嵌套超过16层。(2) MC指令或MCR指令不成对。     (1) 将嵌套设为16层以内。(2) 成对使用MC指令和MCR指令。    76     标签表错误     指定的去处无 LABEL 指令。   (1) 有JMP指令,没有所去之处的LABEL指令。 (2) 有CALL指令,没有所去之处的LABEL指令。      (1) 修改顺序程序。 (2) 修改顺序程序。     77                    参数设定值异常           参数的设定值超出规定范围。          (1) 因外部噪音太大等的影响,参数存储器被改 写。(2) 用计算机链路写入参数时,写入了规定范围外 的数据。   (1) 重新写入参数。 (2) 重新写入参数。                   5-1
      错误 代码          名称         内容        主要推测原因        排除方法        78   应用指令错误 2   对特殊 I/O 模块的应用指令不能正常执行。  (1) 对没有安装该特殊I/O模块的插槽执行了应 用指令。(2) 特殊I/O模块异常。   (1) 安装特殊I/O模块。 (2) 更换特殊I/O模块。     79 FOR-NEXT 错误 FOR-NEXT 指令或 FOR-NEXT 指令的使用方法 有误。(1) 有FOR指令或FORN指令,没有NEXT指 令。(2) 有NEXT指令,没有FOR指令或FORN指 令。(3) FOR-NEXT指令或FORN-NEXT指令的嵌套 超过 128 层。  (1) FOR指令或FORN指令与NEXT指令成对使 用。(2) FOR指令或FORN指令与NEXT指令成对使 用。(3) 将嵌套设为128层以内。    7A   RET 错误   CALL 指令或 RET 指令的使用方法有误。 (1) 有CALL指令,没有对应的RET指令。 (2) 有RET指令,没有对应的CALL指令。     (1) 成对使用CALL指令和RET指令。 (2) 成对使用CALL指令和RET指令。    7B     RETI 错误     顺序中断程序的结构有误。   (1) 顺序中断程序的最后没有RETI指令。(2) 顺序中断程序以外的部分使用了RETI指令。      (1) 追加END指令。(2) 追加RET或RETI指令。     7C     程序库调用错误  FB(程序库)的使用方法有误。 FB 程序库有误。(1) 没有指定为程序库可用状态(2) 程序库已经在执行(从程序库中调用了程序) (3) 标签号码超过范围(4) 无标签指令(5) 标签号码不一致(6) 无SYS415(7) 不是可用程序号码(8) 不是可用的动作模式。(1) FB程序库的顺序线路出错。  修改顺序程序。       7D     执行 PRG、END     执行了 PEND 指令。   (1) 顺序程序中没有END指令。(2) 子例程中无RET或RETI指令。      (1) 追加END指令。(2) 追加RET或RETI指令。     7F 变址错误 变址寄存器无法正常运行。(1) 没有设定变址寄存器,却运行了变址相关的应 用指令,或者使用了变址寄存器。(2) 区域外:偏移中使用了多个标识符,或者标识 符相同,使用了不连续的地址。(3) 定时器指令中使用了变址寄存器。  (1) 请修改顺序程序。    82      特殊模块参数异常     特殊模块内的存储器容量参数为异常值。   (1) 特殊模块安装不当。 (2) 特殊模块故障。(3) 主板的故障。      (1) 切实安装特殊模块。 (2) 更换特殊模块。(3) 更换主板。    5-1
      错误 代码          名称         内容        主要推测原因        排除方法        84 特殊模块异常 特殊模块发生异常。(1) 特殊模块发生异常。(2) CPU或选择器模块或特殊模块安装不当。(3) 有机架No开关的特殊模块的开关设定不恰 当  (1) 参照特殊模块的使用说明书,排除异常。 (2) 正确安装。(3) 修改机架No开关,避免重复。    85   链接参数异常   链路参数异常 (1) 链路参数的设定有误。     (1) 修改链路参数。    86     链路通信异常     链路模块的通信发生异常。   (1) 链路模块的通信发生异常。      (1) 参照各链路模块的使用说明书,排除异常。     88   特殊模块数溢出   特殊模块数超过 8 个。  (1) 特殊模块的使用个数超过8个。   (1) 减少特殊模块的使用个数。     89 链路模块分配异常 链路模块分配参数(链路参数中最开始的 4 字节) 出现异常。(1) 链路模块分配参数出现异常。  (1) 修改链路模块分配参数。    A0   程序溢出   系统内存不足 (1) 系统内存不足(2) CPU模块的故障。     (1) 请将顺序程序写入CPU。然后复位、启动或 再次接通电源。(2) 更换CPU模块    A3   RTC 异常   RTC 发生了异常。 (1) 由于严重的外部噪音影响,引起错误动作。 (2) CPU模块的故障。     (1) 复位、启动或重新加电。 (2) 更换CPU模块    A6     系统程序异常     系统程序发生异常。   (1) 由于严重的外部噪音影响,系统程序被破坏。 (2) CPU模块的故障。      (1) 复位、启动或重新加电。 (2) 更换CPU模块     A9 顺序 RAM 异常 顺序 RAM 发生异常。(1) 由于严重的外部噪音影响,顺序RAM的数据 被破坏。(2) CPU模块的故障。  (1) 复位、启动或重新加电。 (2) 更换CPU模块    AA   系统参数报警   实施了参数复原。 (1) 由于严重的外部噪音影响,引起错误动作。 (2) CPU模块的故障。     (1) 复位、启动或重新加电。 (2) 更换CPU模块    AB   备用存储器写入错误   备用存储器发生了写入错误。 (1) 由于严重的外部噪音影响,引起错误动作。 (2) CPU模块的故障。     (1) 复位、启动或重新加电。 (2) 更换CPU模块    AD     数据异常     实施了顺序程序、数据存储器的复原。   (1) 由于严重的外部噪音影响,数据消失。      (1) 确认恢复数据后,复位、启动或重新加电。     AE   未确认数据异常   发生数据异常时,未确认异常。  (1) 未进行确认操作。   (1) 通过外围设备确认数据。(2) 打开程序1用的特殊继电器“V5E”。    AF 时钟未设定  内部配备时钟未设定。 (1) 未进行设定操作。(2) 后备用电容器发生了放电。 (3) 蓄电池放电。   (1) 通过外围设备设定内部时钟。5-1
5.1.8 异常检查流程图 检查开始电源灯亮NY    Y           错码 13 N复位·启动Y恢复NRUN 灯亮 N有错误显示YAYD              输入电源 电压检查             NYN结束NY程序中有 STOP 指令 NYY     额定输入电压          输入电压请在额定范    围内    检查    检查主板上各模块的耗    电情况        额定输出电压YN恢复N靠外围装置进行 STOP 操作N靠链路进行 STOP 操作N         更换电源模块 检查更换 CPU 模块         设置在主板上的 CPU 以下的全部模 块耗电应在额定输 出电流以下 恢复Y结束Y结束解除 STOP 后,再启 动或者再接通电源查找使用 STOP 指令 的原由,修改程序       更换 CPU 模块           更换主板5-18
 YNA   有报警显示    B    START/END 指令的程 序位置是否合适YN修改 START/END 指 令的程序位置    I/O 地址分配是否正确?检查参数及选择模块(SL)的标题地址开关 N参数 OK 修改参数 Y              标题地址开关 OK YN修正开关设定    判断循环线图、电气回路图出现异常输出是在 ON 处还是在 OFF 处     异常输出灯和周边监视器结果一致Y 异常输出灯和 上述判断一致N是否满足条件NFNYN更换输出模块N           输出灯 ON Y     用监视器查看是否满足电气回路图的输入条件       Y输出端子和 COM 短路时, 外部设备 ONY Y更换输出模块输出端子的进线脱落时, 外部机器 ONN                   E外部机器 不良5-19外部机器 不良
  EF   检查是否是电气回路  图的程序        程序OKY更换输出模块恢复N影响NNY             Y恢复修改程序一致N更换输入模块恢复N更换选择模块(SL)YN更换 I/O 电缆YN更换主板比较未满足条件的输入灯和外围监视器    结果 外部机器 不良  Y   Y           结束   结束   检查是否有双倍输出 检查             结束    修改程序    布线故障1. I/O 电缆接触不好或断开 → (接好 I/O 电缆) (更换 I/O 电缆)2. 主板不良→ (更换主板)3. CPU 模块不良→ (更换 CPU 模块)  恢复      结束结束YN     恢复       5-20更换 CPU 模块
 B      确认存储错误信息用的特殊寄存器的错码Y 错码 22Y 错码 ADN错码AAY N           N错码 31N2231487178858689YA3ADAAYAEYAF     Y            错码48Y N错码 AE N错码 AF N更换 CPU 模块             Y 错码 71      N     Y 错码 78   N   Y 错码 85   N   Y 错码 86   N   Y 错码 89   N错码 A3 N          5-21
  DG      错码 21 N错码 23 N错码 24 N错码 31 NY 错码 43Y43444546YY      212324Y31NY N YY错码 44            Y N 错码 45         Y N 错码 46        Y 错码 47 NN  错码 32 错码 35323539474849YYY72       Y N错码 48 N             错码 39 NY错码49Y N         Y NN 错码 3C错码 4B错码 71 N错码 72 NH      错码 41 Y N3C41424B71           Y N   错码 42        G5-22
  HI    YY7475Y76Y77YY错码7FY N7F    错码 73 N错码 74 N错码 75 N错码 76 N错码 77 N错码 78 N错码 79 N错码 7AN 7A N AB       73错码 82 YN 82             YY84Y88YA0YA6                                              78错码 84 N错码 88 N错码 A0 N错码 A6 N            79错码 A9 YN A9  YY    错码 AB            错码 7B N错码 7D NIY7BY7D错码 AD N更换 CPU 模块。 N恢复Y结束YAD                          5-231. 择器模块(SL)不良 2. 主板不良3. I/O 电缆不良更换各部分
  21 程序存储器 24 奇偶错误未定义指令         N使用了没有后援的  应用指令Y   23参数是否改写Y 复位·启动       从外围装置读取 程序    N复位·启动N附属信息和数 校验错误复位·启动YN更换 CPU 模块 程序是否改写*1YN                恢复  YN        结束恢复Y结束       复位·启动  YN更换 CPU 模块   恢复         结束恢复         结束从外围装置读取参 数 从外围装置正确写入的程序 从外围装置正确写入的程序   *1 依据相关错误信息,知道发生异常的地址。5-24
   RTC 异常 系统程序异常 顺序 RAM 异常 备用存储器写入错误A3 32 A6 35 A9 36 AB 39系统 RAM 异常* 系统管理处理器异常* 字处理器异常 系统中断异常 输入输出端口异常22是否已接好锂电池N接好锂电池YN更换锂电池Y结束                                3C      Y  该错误是否屡次发生N复位·启动YY                恢复N结束恢复             结束 N切实安装好是否安装好 CPU•选择器模块(SL) •I/O 模块•I/O 电缆Y更换 CPU 模块Y             恢复N更换 CPU 模块            恢复N结束       1. 择器模块(SL)不良2. 主板不良3. I/O 电缆不良4. I/O 模块不良5. 通信模块不良6. 电源模块不良 * 错误代码 35、32 时,再次接通电源5-25
 46 I/O 地址重叠 检查各支架占用的     NY  各支架的占用地址有重复      修改地址设定,不要使地址重复    恢复N*1Y结束结束Y结束结束         更换 CPU 模块Y    恢复N       更换选择模块(SL)    恢复N       更换 I/O 电缆Y    恢复N更换主板*1 从错误相关信息得知支架号         5-26
 45I/O 支架号重复     NY  支架号重复   修改设定,使之不重复 Y N结束结束结束结束  恢复       更换 CPU 模块 Y N  恢复      更换选择模块(SL) Y N  恢复       更换 I/O 电缆 Y N更换主板  恢复       5-27
  47I/O 电源停电Y(注)増設多个 I/O 支架时,检查选择模块(SL)的电源 LED 灯灭的支架      增设 I/O 支架 电源模块N5 V、0 V 布线是否 ok N正确进行 5V、0V 布线YNNY更换选择模块(SL)Y更换 CPU 模块Y更换 I/O 电缆Y恢复N更换主板       YCPU 支架的电源要比增设 I/O 支架的电源先接通N额定输入电压Y额定输出电流Y恢复N        复位·启动 恢复   Y N          检查増設 I/O 支架側电源模块的 输入电源电压检查将 CPU 机架電源和増設 的 I/O 机架電源做成同一 系统 结束     恢复N额定输入电压Y额定输出电流YN结束              输入电压请在额 定范围内  检查电源模块的输入电源电压检查增设 I/O 支架的 I/O 模块的 消耗电流                  检查 CPU 支架及增设 I/O 支架的 I/O 模块的耗电电流更换増設 I/O 支架側的电 源模块将设置在增设 I/O 支架侧 主板上的 I/O 模块的耗电 电流限制在输出电流以下 输入电压请在 额定范围内              Y N结束结束结束结束        恢复N       摘掉 5 V、0 V 布线,在增设 I/O 支架上追加电源模块     恢复N                 5-28
 48I/O 表对照异常依据错误相关信息,可得知异常的支架号、时隙号Y正确设定支架 No. Y安装正确的模块       从外围装置读出 I/O 模块种类的参数 电源电压检查   参数与实际安装状态不同NCPU 模块是否切实安装 YY       N正确安装 CPU 模块 N选择模块的支架 No.设定与参数不一样N安装了错误的模块N修改参数切实安装 I/O 电缆切实安装 I/O 模块结束结束结束结束                选择模块(SL)是否切实安装 正确安装 Y            I/O 电缆是否切实安装 YNY       I/O 模块的安装不完整 N依据错误信息,更换异常的模块Y更换 CPU 模块YY更换 I/O 电缆Y           恢复N          恢复N更换选择模块(SL)          恢复N          恢复N更换主板       5-29
     43 4BI/O 模块异常 42 I/O 模块报警I/O 模块参数异常YY除去异物结束Y结束结束             参考该模块使用说明书,检 查是否有异常依据错误相关信息,确认哪个模块      异常I/O 模块的安装 不完整N   依据错误相关信息或 I/O 模块的“ALM”灯, 确认哪个模块异常      I/O 模块与主板连接的 接线盒内有异物N更换 I/O 模块 模块? 恢复 NYY结束 有异常 N   异常模块是输出 模块?Y Y保险丝断开N                   异常模块是输入Y N     更换保险丝   N       更换该模块    更换 CPU 模块      恢复恢复更换主板Y N    NN                更换 CPU 模块 Y恢复N更换主板恢复N更换 I/O 电缆Y          恢复切实安装 I/O 模 块  参考该模块使用说明书,检 查是否有异常         结束Y更换 I/O 电缆              结束  5-30
  44 I/O 地址奇偶校验错31 扫描超时         Y该错误是否屡次发生N复位·启动Y恢复N 结束            NY修改扫描时间超时值   扫描时间不够                YNY N结束YY 与该支架之间的 I/O 电缆连接是否正确恢复               切实连接 I/O 电缆Y更换与该机架连接的 I/O 电缆用外围装置读取程序      恢复N程序为循环的N                  Y更换该机架的选择模块(SL)结束结束结束结束同一个扫描内执行多  个应用命令N更换 CPU 模块  恢复N             修改程序    恢复N更换该支架的主板YY           恢复N更换 CPU 模块       5-31外围装置读取扫描时间超时值参数 依据错误相关信息或选择模块(SL)“ERR”灯,确认哪个 支架异常
 71 应用指令错误 1 YPC10 模式? N          错误相关信息(S1000~S11FF) (检测出异常的步号用 16 进制表示) 1:(步号低位)2:(步号低位)3:(步号高位) 4:(步号高位) 5:(序列号低位) 6:(序列号低位) 7:(序列号高位) 8:(序列号高位) 错误相关信息(S200~S24F) (检测出异常的步号用 16 进制表示) 1:(步号低位)2:(步号高位)3:(序列号低位) 4:(序列号高位) 将错误相关信息的数据转换为 10 进制数 4321(10 进制) (步号为 10 进制)              将错误相关信息的数据转换为 10 进制数 2:(步号高位) 1:(步号低位)  (16 进制)     (10 进制) (步号为 10 进制) 显示外围装置步号指定回路   (1) 回路显示中显示的应用指令的操作値(数据 范围、数据数等)超出规定范围(2) 运算数据形式不同(BCD、BIN 等)参考编程手册中記載的应用指令禁止事项,修改回路5-32
 72 用户程序 存储溢出外围装置读取顺序程序AD 数据异常 AE未确认数据异常                   NYN确认恢复数据YN修改数据将V5E做成ON。 复位·启动结束   使用子例程    OK           子例程内自己可调用Y修改程序Y结束                  恢复N         更换 CPU 模块AF 时钟未设定在外围装置设定时钟结束          5-33
  73 无 END 指令 外围装置读取顺序程序74 无 START 指令 外围装置读取顺序程序            NN YY追加 END 指令 追加 START 指令 YY恢复 恢复 N结束 N结束有 2 个以上 N 将 START 指令 START 指令 做成转移程序构造YY修改程序YY恢复 恢复 N结束 N结束更换 CPU 模块  无 END 指令无 START 指令                              N            做成 1 个 START 指令                     NY 将 END 指令做成 转移程序构造     修改程序Y结束    恢复N更换 CPU 模块       5-34
  75 主控制错误 外围装置读取顺序程序N78 应用指令错误 2 依据相关错误信息得知异常的应用指令           NY  没有与应用命令对应的   特殊模块      主控制嵌套超过 16 层*1安装该特殊模块     Y嵌套做成 16 层以内 恢复N恢复Y结束         YN            结束 N应用命令的运算域、  数据错误Y    NY MC 指令与 MCR 指令不成对    *1更换該特殊模块      修改程序,使 MC 指令与 MCR 指令成对   修改应用指令的运算域和数据  更换 CPU 模块YYY   恢复N更换 CPU 模块结束结束结束           恢复N更换 I/O 电缆           恢复N更换主板       5-35
  79 FOR-NEXT 错误 外围装置读取顺序程序N7A RET 错误 外围装置读取顺序程序N YY            N FOR 指令或 FORN 指令与CALL 指令与 RET 指令不成对      NEXT 指令不成对*1Y结束 FOR-NEXT 或FORN-NEXT 的 嵌套超过 128 层*1将嵌套做成 128 层以内 Y*1Y结束         修改程序,使 FOR 指令或 FORN 指 令与 NEXT 指令成对       恢复N恢复N更换 CPU 模块*1 参考错误相关信息                Y         恢复N更换 CPU 模块结束       5-36修改程序,使 CALL 指令与 RET 指 令成对
 RETI 错误 外围装置读取顺序程序NN7B      中断程序的最后是不是 RETI 指令 *1追加 RETI 指令Y恢复N Y         结束   中断程序的最后以外的地方是 RETI 指令*1Y删除 RETI 指令Y恢复N更换 CPU 模块*1 参考错误相关信息结束              5-37
  7D PRG、END 执行 外围装置读取顺序程序NN无 END 指令 YY追加 END 指令76 标签表错误 外围装置读取顺序程序结束*1Y结束Y              没有对应 JMP 指令 的 LABEL 指令     *1            Y恢复 Y      N将 END 指令做成转移 程序构造Y修改程序Y结束恢复N    结束     N  N没有对应 CALL 指令的   LABEL 指令             恢复NY恢复N             N子例程中无 RET 指令 Y追加 RET 指令      重新写入程序和参数        恢复Y N结束        恢复N 结束更换 CPU 模块更换 CPU 模块*1 参考错误相关信息          5-38修改成 JMP 指令和 LABEL 指令对 应的程序 修改成 CALL 指令和 LABEL 指令对 应的程序
        N参数值在规定范围外Y修改参数值进行写入恢复N更换 CPU 模块49 I/O 地址设定异常I/O 地址分配超过了“1FF” Y N更换选择模块(SL) YY77 参数设定异常 外围装置读取顺序程序                                    结束恢复N结束结束Y结束  更换 CPU 模块Y      恢复N      顺序更换 I/O 电缆    恢复N更换主板      5-39根据错误相关信息,确认哪个模块异常 设定 I/O 地址的分配不要 超过“1FF”
 88特殊模块数溢出    检查特殊模块的 使用数量  N特殊模块的使用数量超过 24 块Y恢复N更换 CPU 模块Y结束Y结束      减少特殊模块的使用数 量 Y结束             恢复N      更换选择模块(SL)    恢复N更换主板      5-40
  82 特殊模块参数异常84 特殊模块异常 2        根据错误相关信息,确认哪个模      块异常依据错误相关信息或特殊模块的异常  显示,确认哪个模块异常   N特殊模块的安装不 完整Y切实安装特殊模块    参考该模块使用说明书,检查是否有       异常     Y N有异常 Y N     参照该模块使用说明书,   排除异常 有异常        恢复NY结束检查 CPU 模块、选择模块(SL)、I/O 模块、特 殊模块、I/O 电缆的安装状态        N切实安装好Y      与特殊模块的 主板连接时,连接部位中 进入了异物Y除去异物更换 CPU 模块                恢复恢复Y N 结束          N更换特殊模块恢复Y结束结束N按顺序更换选择模块(SL)        恢复N更换主板YY结束结束                  恢复N顺序更换 I/O 电缆      5-41
  85 链接参数异常修改该模块的链路参数89 链路模块分配异常修改该模块的链路参数        依据相关错误信息,确认哪  个通信模块异常依据相关错误信息,确认哪  个通信模块异常       86链路通信异常AA 系统参数 报警          依据相关错误信息,确认哪  个通信模块异常    参考该通信模块的使用说  明书,排除异常Y该错误是否屡次发生N 复位·启动Y          恢复N更换 CPU 模块结束         5-42
 29事件监控器错误    7CY 错码 71   程序库调用错误   Y  使用了事件监控器功能N  确认在错误 7C 前有无发生应用指 令错误 71 或 78。 如有发生则为“程序库内线路错误”。   删除程序中的事件监控器启动命令 [SYS 400],在 CPU 中写入程序。 或者正确设定事件监控器设定数据,将 事件监控器数据写入 CPU。    N错码 78 N71Y78              正确设定事件监控器设定数据, 将事件监控器数据写入 CPU。 依据错误相关信息,确认是以下哪个类型。同时请确认 程序库的种类(FB 程序库、用户程序库、标准程序库)(1) 没有指定为程序库可用状态(2) 程序库已经在执行(从程序库中调用了程序) (3) 标签号码超过范围(4) 无标签指令(5) 标签号码不一致(6) 无SYS415(7) 不是可用程序号码(8) 不是可用的动作模式。  针对对象程序库修改顺序程序,排除(1)~(8)各项内容。 此外,可能使用了不恰当的程序库。请确认写入的程序库, 写入正确的程序库。5-43
 7F 变址错误 YPC10 模式? N           错误相关信息(S1000~S11FF) (检测出异常的步号用 16 进制表示) 1:(步号低位)2:(步号低位)3:(步号高位) 4:(步号高位) 5:(序列号低位) 6:(序列号低位) 7:(序列号高位) 8:(序列号高位) 错误相关信息(S200~S24F) (检测出异常的步号用 16 进制表示) 1:(步号低位)2:(步号高位)3:(序列号低位) 4:(序列号高位) 将错误相关信息的数据转换为 10 进制数 4321(10 进制) (步号为 10 进制)              将错误相关信息的数据转换为 10 进制数 2:(步号高位) 1:(步号低位)  (16 进制)     (10 进制) (步号为 10 进制) 显示外围装置步号指定回路   A0 程序溢出Y结束    (1) 没有设定变址寄存器,却运行了变址相关的应用指 令,或者使用了变址寄存器。(2) 区域外:偏移中使用了多个标识符,或者标识符相 同,使用了不连续的地址。(3) 定时器指令中使用了变址寄存器。本手册的“变址寄存器”中记载了使用方法,参考并修改 回路     恢复N更换 CPU 模块     5-44请将顺序程序写入 CPU。然后复位、启动或 再次接通电源。
5.1.9I/O模块的故障分析 以下说明输入线路、输出线路的故障内容及其处置方法。(1) 异常内容的探明方法 输出模块的输出负荷未 ON 时(LS1)X000 X001 例)(LS2) Y020            输出负荷未 ON 输出模块的动作显示 LED 是否亮灯 YY020      NNNON器是否 ON      输出状态监视  Y保险丝是否折断N 输出模块的  外部供给 电源是否连接Y是否加上了负荷用  电源的电压YOFF输入模块动作 N 显示 LED 是否亮灯Y       更换输出模块的保 险丝         0V 与 COM 端子之间的  更换保险丝后又熔 断输入模块的输入 电压多少 V          输入模块不良     N Y     N YI/O 地址的分配 参数是否正确 是否在输出 模块的规格范围内     变更输出继电器 的号码,让负荷同 时打开最大电流 进入规格以内连接外部供给电 源 确认输入信号 的 OFF 确认负荷同时打开最大时的冲电流 检查负荷用电源的布线,使电源复位修改参数     检查负荷的布线及负荷,复位0V 电源的电压是否加上了负荷用     负荷用供给电 源电压值输出模块不良请联系本公司      检查负荷的布线及负荷,复位检查外部布线及外部输入机器,复位    注1: 当输出模块的保险丝熔断时,CPU 所输出的故障代码为 “43”。注2: 运行状态 LED 是光电耦合器,是靠绝缘后的内部线路亮灯,所以即使加了外部输入端子电压,如果不提供 DC5V 的电源电压,也不能亮灯。IN COM动作显示 LED     输入线路光电耦合器绝缘输出线路DC5V               5-45
(2) 输入线路的故障及其对策            现象原因对策            例 1)输入信号未 OFF。在输入模块的端子之间放入分泄电阻,让外部 机器的漏泄电流分流,减少对输入模块的输入 电流。           AC 输入 模块采用小的输入电流<输入模块 OFF 电流>或者 漏泄电流。         *分泄电阻~                         例 2)输入信号未 OFF。与动力线平行布线,其结果是过大的噪音连续 进入,输入模块内的噪音排除线路也无法排 除。与动力线分离。  2 线式传感器(非接触式开关、光电开关)、有 LED 的限位开关的漏泄电流      漏泄电流DC 输入 模块   5-46
前页有*记号的分泄电阻的决定方式 输入机器INCOMIN COM设输入机器 OFF 时的电流为 I,此时端子和公用之间的电压 V 为 V=I×3.4kΩ(输入电阻),这个 V 如果不能满足 OFF 电压 7.2 V 以下便不能 OFF。因此,要连接分泄电阻,降低 输入阻抗。I=机器的漏泄电流(mA) R=分泄电阻值(kΩ) W=分泄电阻的 W 数(W)            电流 I                                      分泄电阻的值只要端子与公用之间电压 V 为 7.2 V 以下即可,所以,根据3.4×R—————〔kΩ〕× I ≤ 7.2〔V〕3.4+R24.5R ≤ —————〔kΩ〕3.4×I−7.2电阻的 W 数为,根据(24〔V〕)2 W ≥ ———————× 2(余地) W ≥ ————— 〔W〕R(kΩ) 1.15R例如:漏泄电流为 5 mA 时根据24.5R ≤ ————————3.4×I−7.2 R ≤ 2.5〔kΩ〕R = 2.4 kΩ。分泄电阻的 W 数根据1.15W ≥ —————〔W〕RW ≥ 0.48〔W〕1W = —— 〔W〕25-47
(3) 输出线路的故障及其对策          现象  原因     对策    例 1) 输出晶体管被破 坏白炽灯泡的突入电流OUT COML+−               开灯的瞬间,有时会流入 10 倍以上的突入电 流。  为了控制突入电流,送白炽灯泡额定电流的 1/3~1/5 左右的暗电流。     OUT COM(−)输出模块(−)COM L+−               暗电流           例 2)     连接了诱导性负荷时,输出模块的保险丝熔断。  因为连接在同一保险丝上的负荷同时起动时,这个起动电流的合计大幅超过保险丝额定值。     同时起动的负荷的起动电流合计不要超过保险丝额定值。    例 3)  输出晶体管被破 坏在检查输出信号线布线时,其他电源强行对负 荷增加了电压其他电+ E2+ E                 负荷                        不要采用下述检查方法。即使关闭了 E1 的输 入电压,如左图所示,仍有电流流动的电源。  5-48
5.2计算机链路的异常报警在内置式计算机链路不能对于高位计算机发送的指令正常返回响应情况下,内置式计算机链路以无应答或 者异常应答的形式处理。(1) 无应答 在以下情况下,内置式计算机链路不进行响应。• 不能在接收数据内检测开始代码“::”。 • 不能在接收数据内检测指令代码“?”。• 不能在接收数据内检测结束代码“CR”。 • 局号码与本局不同。• 不能正确检测响应时间(RI)。 (2) 异常应答在检测出了附表 1 错误代码表中所示的内容异常时,对高位计算机发送以下格式的响应。16 进制 2 位错误代码 : : AD (H) AD (L) % R I EC (H) EC (L) SC (H) SC (L) C R  5.2.1 无应答时    No.   推定原因    处置   1通信速率的设定错误  根据高位计算机的通信速率,设定内置式计算机链 路的通信速率。    2   高位计算机的通信数据格式不同。    正确核对高位计算机的通信数据形式。   3内置式计算机链路的局号设定与高位计算机的局号指定不同。  使内置式计算机链路的局号设定一致,或修改高位 计算机指令内的局号指示。    4 通信电缆的连接错误及断线。   检查通信电缆的极性以及有无断线。    5   高位计算机的指令数据的开始代码中没有“:”,“:”。    在指令前面加上“:”,“:”。   6高位计算机的指令数据中没有结束代码“CR”。  在指令最后加上“CR”。    7   未进行高位计算机通信线路的收发转换。    在高位计算机发出指令后,切换到接收状态。  5-49
5.2.2异常应答时(1) 错误代码 01(2) 错误代码 03(3) 错误代码 05(4) 错误代码 0A(5) 错误代码 0D(6) 错误代码 0E(7) 错误代码 13(8) 错误代码 20     No      推定原因    处置   1    高位计算机的指令数据内的格式不正确。   修改指令的格式。       No      推定原因    处置   1    高位计算机的指令数据内的地址指定不正确。   修改指令内的地址指定。       No      推定原因    处置   1    高位计算机的指令数据内的数据传送数超过了 0 或 256 字节。   修改指令内的传输字节数。       No      推定原因    处置   1  通信数据因噪音等遭到破坏。  确认通信电缆是否确实连接,以及通信电缆是否和强电线过于接近。     No   推定原因  处置     1      高位计算机创建的和数校验数据有误。    修改和数校验数据。   2    通信数据因噪音等遭到破坏。   确认通信电缆是否确实连接,以及通信电缆是否和强电线过于接近。       No      推定原因    处置   1  没有利用“EWR”指令执行写入许可设定或重新 开始许可设定便进行写入或允许扫描重新开 始。  先利用“EWR”指令设定写入许可或扫描重新开始许可后,再 进行写入或重新开始扫描。     No   推定原因  处置     1      与 TOYOPUC-CPU 的接口异常    检查内置式计算机链路与 CPU 之间是否切实连接。   2 内置式计算机链路异常 执行复位·启动。执行后,如果内置式计算机链路表面的 LED 灯仍然同样显示时,更换内置式计算机链路。     3      链接参数异常    确认链路参数的设定。       No   推定原因  处置     1      高位计算机的指令数据的通信指令异常。    检查通信指令。  5-50
(9) 错误代码 21     No      推定原因    处置   1  正在进行 CPU 复位输入处理  重新发送指令。(10) 错误代码 22(11) 错误代码 31(12) 错误代码 32(13) 错误代码 34(14) 错误代码 35(15) 错误代码 36(16) 错误代码 38(17) 错误代码 39     No      推定原因    处置   1  没用“RDA”指令进行地址的设定,就执行了 “RDM”指令。  在“RDM”指令进行读出之前,用“RDA”指令设定地址。     No      推定原因    处置   1  顺序程序执行中想要写入程序。  在通过“HLT”指令,“PSC”指令等,停止了顺序程序执行后, 进行程序写入。     No   推定原因   处置     1      没有通过“RUN”指令进行停止释放扫描。     通过“RUN”指令进行扫描停止释放后,执行“STA”指令。    2  正在由程序等的外围装置输出扫描停止指令(停止)。  在释放外围装置发出的扫描停止指令(停止)后,执行“STA” 指令。      No      推定原因     处置    1    禁止了顺序程序以及附属信息的读出写入。   允许在外围装置等进行顺序程序,以及附帯信息的读出写入。       No   推定原因   处置     1      没有执行权。     用限定执行权的装置,解除限定设定。       No   推定原因   处置     1      设有执行权的限定。     用限定执行权的装置,解除限定设定。       No   推定原因   处置     1      E2PROM 有写入互锁     解除 E2PROM 的写入互锁。       No   推定原因   处置     1      I/O 分配参数发生变更。     将 CPU 复位·启动。  5-51
(18) 错误代码 3C     No      推定原因     处置    1  CPU 的硬件异常  检查 CPU 侧的动作。 (19) 错误代码 3D(20) 错误代码 3F5.2.3 其他情况(1) 从内置式计算机链路到高位计算机的响应格式不正确。(2) 直接接收了高位计算机作为指令发出的数据。(3) 高位计算机侧发生了和数校验错误。     No      推定原因     处置    1  由外围装置或者其他的链路同时写入了顺序程序及付帯信息。  重新写入。      No      推定原因     处置    1  顺序程序中没有用定时、器计数器等指定的设备地址。  确认设备地址。      No      推定原因     处置    1    在某局发送响应中,他局也发出了响应。   重新评估到高位计算机各局的指令发送定时。    2  内置式计算机链路发出响应后,高位计算机可以接收信息。  根据高位计算机的处理速率设定响应时间。      No      推定原因     处置    1    不进行高位计算机通信线路的收发转换。   在高位计算机侧进行线路控制。       No      推定原因     处置    1    通信数据因噪音等遭到破坏   确认通信电缆是否切实连接,以及通信电缆是否和强电线过于接近。  5-52
5.3PC链路异常警报如果在 PC 链路检测出异常,就对 CPU 通知异常。在 CPU 显示异常信息的同时,设定特殊继电器,CPU异常信息输出用寄存器以及链路异常信息用特殊寄存器。5.3.1 异常显示(1) 链路相关特殊继电器    地址     内容       VA1 VA5 VA9 VAD VB1 VB5 VB9 VBD 链路1 参数异常链路2 参数异常链路3 参数异常链路4 参数异常链路5 参数异常链路6 参数异常链路7 参数异常链路8 参数异常    VA2 VA6 VAA VAE VB2 VB6 VBA VBE   链路1 通信异常链路2 通信异常链路3 通信异常链路4 通信异常链路5 通信异常链路6 通信异常链路7 通信异常链路8 通信异常    VC4     特殊模块异常(通信模块故障)    VC8 I/O 构成异常 (安装 25 个以上通信模块)    VF2     特殊模块分配异常(链路参数的支架 No.、时隙 No.、链路模块名称与安装状态不同。)  5-53
(2) 链路错误代码链路错误代码存储在 CPU 的特殊寄存器。CPU(链路) 存储错误信息的 CPU 错码 特殊寄存器的地址S3×0 S3×1S3×0 S3×185 S3×0 (01)S3×1)      左记地址的内容 错误内容    处置         异常 等级                1001   (链路参数异常) 设定未进行 BCD。  (主·子)检查并修改链路参数的内容。检查设定。                       警报                                0082    1001     (链路参数异常) 主/子的设定不是 0,1。  (主·子)  0083    1001     (链路参数异常) 传输字节数的合计大于 65 字节。(主·子      0085    1001   (链路参数异常) 超出了通信区域的最后地址。 (主·子)    0086    1001     (链路参数异常) 链路区域和实际 I/O 重叠。      0087    1001   平均每 1 局的发送点数超过 48 字节。      0088    子局地址 (62~70)    10*0     (和子局的*局的连接顺序错误) 子局发来的接收数据有垂直奇偶。(主)      检查子局*局是否连 接,以及电源接通顺 序。检查设定。 检查通信线的布线                                       警报                                      00D0    子局地址 (62~70)    10*0 (和子局的*局的连接顺序错误) 子局发出否定响应。(主)          00D1    子局地址 (62~70)    10*0   (和子局的*局的连接顺序错误) 接收到意外的地址数据。(主)        00D2    期待的地址数据    接收数据    10*0   (和子局的*局的连接顺序错误) 子局*局没有响应(主)        00D3    子局地址 (62~70)    10*0   (和子局的*局的连接顺序错误) 子局发来的接收数据有水平奇偶。(主)        00D6    子局地址 (62~70)    10*0     (和子局的*局的连接顺序错误) 子局没有发送水平奇偶数据。(主)       00D8    子局地址 (62~70)         85 (01)85 (01)         S3×0 (01) S3×1S3×0 (01) S3×1 S3×0 85 S3×1 (01) S3×2S3×0 86 S3×1(*0) S3×2(L)S3×0 86 S3×1(*0)86 (*0)85   85               S3×0 S3×1(L) S3×2(H) S3×0     86 S3×1 (*0) S3×2(L)S3×0 86 S3×1 (*0) S3×2S3×0链路 No.代码表。              S3×1 (*0) S3×286表中的×表示进入了发生错误的 PC 链路的链路 No.的代码。        链路号码    1     2   3      4    5     6   7     8   ×(链路 No.代码)   1   3   5   7   9   B  D   F  注意1: *标记表示子局的局号。5-54
        左记地址的内容 错误内容    处置         异常 等级                10*1在子局的*局,主局和子局设定的输入输 出字节数不同。(主·子)       检查链路参数的内 容。                    警报                00D7    子局地址 (62~70)    接收数据 (主→子的字节数)    接收数据 (子→主的字节数    自局设定数据 (主→子的字节数)    自局设定数据 (子→主的字节数    10*2 有未在连接顺序中设定的子局的*局的 应答。(主)     检查子局的链路参数内容。           警报          00D9    子局地址 (62~70)    10*9(未进行子局的*局之间的连接顺序。) 在 1 台的子局设定了多个局时,尽管有 未完成连接顺序的局,还是开始了普通 顺序。(子)       检查主局的链路参数的内容。                  警报            00D4    通信选择标记 (1~7 局)    通信选择标记 (8~15 局)    连接顺序完成标记 (1~7 局)    连接顺序完成标记 (8~15 局)    1008 尽管连接顺序结束后过了 10 秒,也没开 始普通顺序。 (子   请检查主局的错误 代码。       警报          00D5    10*4 (和子局的*局的通常顺序错误) 接收数据存在垂直奇偶错误。(主)    检查子局的*局的布 线是否脱落。                           警报                            00E8    子局地址 (62~70)    10*4   (和子局的*局的通常顺序错误) 子局*发出否定响应。(主)          00E1    子局地址 (62~70)    10*4   (和子局的*局的通常顺序错误) 接收到意外的地址数据。(主)        00E2    期待的地址 (62~70)    接收的地址    10*4   (和子局的*局的通常顺序错误) 子局的*局没有响应。(主)         00E3    子局地址 (62~70)CPU(链路) 存储错误信息的 CPU 错码 特殊寄存器的地址S3×0 S3×1(L) S3×2(H) (L)S3×3(H)S3×4(L)S3×0 86 S3×1(*2) S3×2(L)S3×0 S3×1(L) S3×286 (H) (*9)(L) S3×3(H)         86 (*1) ))            86 S3×0 (08)S3×1)S3×0 86 S3×1    (*4)86 S3×1    (*4)86 (*4)S3×2(L) S3×0 S3×2(L)S3×0 S3×1(L) S3×2(H) S3×0               86 S3×1   (*4)表中的×表示进入了发生错误的 PC 链路的链路 No.的代码。链路 No.代码表注1: *标记表示子局的局号。S3×2(L)     链路 No.    1     2   3      4    5     6   7     8   ×(链路 No.代码)   1   3   5   7   9   B  D   F  5-55
     CPU(链路) 错码    存储错误信息的 CPU 特殊寄存器的地址    左记地址的内容 错误内容    处置          异常 等级         86 (*4)        S3×0          10*4 (和子局的*局的通常顺序错误)子局的*局接收的水平奇偶有奇偶错误。(主)    检查子局的*局的布 线是否脱落。          警报               S3×1      00E7   S3×2  子局地址 (62~70)     86 (*4)     S3×0    10*4   (和子局的*局的通常顺序错误) 子局*没有发送水平奇偶数据。(主)       S3×1      00E6   S3×2  子局地址 (62~70)   86 (07)     S3×0    1007 主局未发过来普通顺序的数据(子)  请检查主局的错误代 码。       警报       S3×1      00E4      89         链路参数的支架 No.、时隙 No.、链路模 块名称设定错误   检查并修改链路参数的内容。      警报     84        模块的硬件异常。与 CPU 模块间接口异常。  重新加电或 CPU 的 复位启动 SW 的操 作。仍然出现异常时 请更换链路模块。   警报   表中的×表示进入了发生错误的 PC 链路的链路 No.的代码。 注1: 链路 No.代码表注2: 表中的子局地址如下所示。,  链路号码      1    2      3    4     5   6      7      8   ×(链路 No.代码)   1   3   5   7   9  B   D    F                子局地址子局 No.子局地址子局 No.                  62子局 16A子局 9                  63子局 26B子局 10                  64子局 36C子局 11                  65子局 46D子局 12                  66子局 56E子局 13                  67子局 66F子局 14                  68子局 770子局 15               69子局 8   注3: *标记表示子局的局号。5-56
(3) 链接错误信息输出用特殊寄存器链路错误代码为 8 段移动寄存器构成,可以记忆 8 次异常。如果超过 8 次,则从最初的数据开始删 除。              链路号错误存储地址地址内容               1S310 ~ S31FS3×0错误代码               2S330 ~ S33F                         3S350 ~ S35FS3×1 S3×2 S3×3 S3×4            错误详细内容             4S370 ~ S37F                         5S390 ~ S39F                          6S3B0 ~ S3BFS3×5 S3×6 S3×7 S3×8 S3×9 S3×A S3×B错误代码存储1 新 23456 7旧             7S3D0 ~ S3DF                         8S3F0 ~ S3FF                  注: 表中的×表示进入了发生错误的 PC 链路的链路No的代码。 链路 No 代码表(4) 分离子局的异常报警 分离指定的子局在由于电源中断等原因,而不能对主局进行应答时,不成为通信异常。因此,通信区 域的各种数据为 OFF 不变,并且也不存储通信错误代码。  链路号     1     2   3    4    5   6    7   8  ×(链路 No.代码)   1   3  5   7   9  B   D   F  5-57
5.3.2PC链路异常确认流程图 开始     无 有S3×0 =1001S3×1 发生异常    A=10*4 =1007 BCDEFGH=0083 =0085~88          =10*0 =10*1=10*2 =10*9 =1008                      =0082      利用 BCD 重新设定链 路参数代码。注: 表中的×表示进入了发生错误的 PC 链路的链路 No.的代码。 链路 No 代码表注: *标志表示子局的局号。重新指定主局/子局。(1) 链路区域(2) 确认链路点数(字节数)是否正确。  链路号      1    2      3    4      5    6     7    8  ×(链路 No.代码)   1   3   5   7   9   B   D   F  5-58
  ABY       确认有无分离→将分离寄存器设 为 0。和子局之间的连接顺序中发生通信异常      重新接通主局电源 恢复N结束分离寄存器 一览表结束 N 发生异常Y             更换模块  结束   (1) 子局电源是否接通 → 接通子局电源(2) 子局的局号是否正确 → 将子局的局号正确设定。 (3) 通信速度(波特率)是否正确 → 设定正确的波特率。(4) 布线是否正确 → 正确布线。     链路号分离寄存器恢复N结束Y结束  1 S31C 2 S33C 3 S35C 4 S37C 5 S39C 6 S3BC 7 S3DC 8 S3FC     更换模块  5-59
  CE     在子局 n,主局和子局的输入输出字节 数不同。→设定正确的链路参数。 D    (1) 主局链路参数是否正确 → 重新设定正确的主局链路参数。 (2) 子局的局号是否正确 → 将子局的局号正确设定。    恢复N结束Y结束      更换模块   5-60
  FH    连接顺序结束后,普通顺序不开始。   G      恢复N结束Y结束      5-61主局没有发送普通顺序。 确认主局是否正常 与子局之间普通顺序的通信异常 子局电源是否接通 → 接通子局电源子 布线是否正确 → 正确布线 重新接通电源 更换模块
5.4FL-net的异常警报FL-net 检测出异常时,在 E/A LED 中显示异常的同时,向 CPU 发出异常警报。CPU 将按照该异常内容来设置特殊继电器、错误信息输出用特殊寄存器、链接错误信息输出用特殊寄存 器。5.4.1 错误代码FL-net 检测到异常时,将向 CPU 发出异常警报,并将异常的详细代码保存在 S3×0 地址之后。通信非正常进行时,首先确认此错误代码。错误代码的确认方法请参考“5.4.2.2(2) 特殊寄存器 (4)链路错 误信息输出用特殊寄存器”。     错误 代码      错误内容     原因和处理方法    E5 链接参数未设定 未设定链路参数时,请设定。已完成链路参数设定时,请确认链路参数设定的支架 No.或时隙 No.是否与实际安 装位置一致。      E6      链接参数异常     链路参数有误。参考下一章,读取链路错误信息特殊寄存器进行对应处理。    E7 节点号码重复 在参加 FL-net 通信前,与自节点节点号码相同的其它节点已经参加通信的情况下 发生。请按自节点或者其他节点的链路参数设定确认节点号码是否正确。       E8      共用内存发送区域地址重复(继电器链路)   在 FL-net 的数据链路通信中,各节点通过共享数据的虚拟内存空间“共用内存”进行数据的发送接收。必须使各节点与其它节点不重复,设定共用内存上的发送区域。但是在自节点参 加通信时,如果自节点发送区域的一部分或者全部重复的区域里存在发送数据的 其它节点,就出现 E8(继电器链路区域的重复)或者 E9(寄存器链路区域的重复)错 误。同一网络中有 FL 远程设备混入时,请断开与 FL-net 的网络连接。请参考“9.7.10.1 (4)-6 数据链路的设定”,确认自节点或其他节点的发送区域设定 是否正确。      E9    共用内存发送区域地址重复(寄存器链路)  5-62
     错误 代码      错误内容     原因和处理方法    EA 标记监视超时 令牌监视超时错误在链路参数的“Network(网络)”上设定的令牌监视超出时间内 不能发送自节点的所有数据时发生。 请打开令牌监视超时时间的“AUTO(自动)”复选框或者延长设定时间。      Ed      超出数据寄存器区域     设定超出 CPU 模组的数据寄存器范围的链路区域时,发生此异常。例如 PC2J-CPU 的数据寄存器范围是 D0000~D0FFF,但是如果超出此地址设定 链路区域则出现 Ed 异常。请修改链路区域的地址。    -- -- -- 环回测试异常 FL-net 在电源接通时或者复位/启动时,自动测试数据发送是否正常。测试出错误 时出现“回送测试异常”。回送测试异常时,自动重复测试直至正常,OK 时开始通 信。回送测试异常时,自动重复测试直至正常,OK 时开始通信。请参考“2.4.5 FL-net /以太网/FL 遥控器的布线”确认以下项目。 (1) 模块上是否切实安装LAN电缆的连接器(2) HUB上是否切实安装LAN电缆的连接器(3) LAN电缆有无发生断线或短路(4) HUB上是否切实安装无线电收发器电缆的连接器,是否用固定件锁定(5) 存储使用HUB时HUB之间是否正确连接(6) 无线电收发器上切实安装无线电收发器电缆的连接器,是否用固定件锁定 (7) 收发器电缆有无发生断线或短路(8) 无线电收发器与干线电缆的连接是否存在问题(9) 干线电缆的两端有无连接端接器(10) 干线电缆是否断线或者短路网络的所有 FL-net 模块出现此异常时普遍认为(9)或者(10)的可能性较大       --   等待接收   参加网络的节点不存在时显示。 请确认以下的项目。(1) HUB的电源是否断开(2) 其他节点的电源有无OFF(3) 模块中是否切实安装有LAN电缆的连接器 (4) HUB中是否切实安装有LAN电缆的连接器 LAN 电缆有无断线或者短路     H_    FL-net 硬件异常    可能是因为 Toyopuc-Nano 内置的 FL-net 发生故障。 请交换 Toyopuc-Nano 模块 5-63
5.4.2 CPU的错误显示 5.4.2.1 特殊继电器异常时下述特殊继电器 ON。    地址       内容    VA1 VA5 VA9 VAD VB1 VB5 VB9 VBD 链路 No.1 链路 No.2 链路 No.3 链路 No.4 链路 No.5 链路 No.6 链路 No.7 链路 No.8链路参数异常链路参数异常链路参数异常链路参数异常链路参数异常链路参数异常链路参数异常链路参数异常     VA2 VA6 VAA VAE VB2 VB6 VBA VBE   链路 No.1 通信异常 链路 No.2 通信异常 链路 No.3 通信异常 链路 No.4 通信异常 链路 No.5 通信异常 链路 No.6 通信异常 链路 No.7 通信异常 链路 No.8 通信异常     VC4      特殊模块的异常(通信模块故障)    VC8    I/O 构成异常    VF2   特殊模块的分配异常(链路参数的支架 No、时隙 No.、链路模块名称与安装状态不同)   5-64
5.4.2.2特殊寄存器 特殊寄存器整图    地址      内容    S200|S24F   CPU 错误信息输出用寄存器(注)    S3*0|S3*F FL-net 网络 节点参与状态 显示各节点的通信状态(参加=1/未参加=0)。 请参考“9.7.8 监视功能”。    S3x0|S3xB   链接错误信息输出用寄存器    S3xF     自身节点地址输出用寄存器   上述地址x及*部分由链路No決定。 各链路 No.的*、x 如下表所示。例)链路 No.为 1 时,节点参加状态保存到 S300~S30F,链路错误信息保存到 S310~S31B。注: 特殊寄存器 S200~S24F 和 S3x0~S3xB 中储存的信息在异常恢复后不会被清除。 必须清除时,通过 PCwin2 等向寄存器写入“0000”。上述特殊寄存器地址是在 PC2 兼容模式及 PC3JG 模式(数据区域分割模式)的场合。Ver3.00~的版本中,S200~中储存的异常信息会同时储存在 S1000~。   链接 No.    1    2  3    4   5  6    7    8    *          0        2    4        6      8    A        C      E   x       1      3   5      7     9   B      D     F   5-65
(1) CPU 错误信息输出用寄存器 检出异常时,将错误代码、错误相关信息及错误检出时刻保存在错误信息保存用特殊寄存器中。该寄存器为 8 级(PC10 模式时为 64 级)移位寄存器结构,可存储最大 8 次的异常发生。异常超过 8 次 时,将从最初保存的错误信息开始依次消失。    保存在此寄存器中的错误信息可用周边装置等读出。 CPU错误信息输出用特殊寄存器的内容 地址S200 S20AS214 S21E S228 S232 S23C S246S24F            错误0 信息错误代码           错误1 信息错误相关信息 1(低位),2(高位)          错误2 信息错误相关信息 3(低位),4(高位)          错误3 信息错误检出时刻(秒)          错误4 信息错误检测时刻(分)          错误5 信息错误检测时刻(时)          错误6 信息错误检测时刻(日)          错误7 信息错误检测时刻(月)        错误检测时刻(年)     错误检出时刻(星期)0~6:周日~周六       错误相关信息消失          错误 代码    I/O 监视器的错误讯息    错误内容     相关 1     相关 2     相关 3     相关 4      备注    重 度 异 常   84I/O MODULE ERROR 2 通信模块故障  *分类 机架 编号 插槽 编号 - *2:CPU 检出 1、3:链接检出   警 报        85  LINK PRAM. ERROR   链路参数异常    链路 号   -   -   -        86   LINK ERROR   通信异常     链路 号     -     -     -         89  FUNC. I/O ALARM   链路参数的支架 No.、时隙 No.、模块 名异常    机架 编号   插槽 编号   -   -   VF2 ON   Ver3.00~的版本中,S200~中储存的异常信息会同时储存在 S1000~。 (参考 5.1.4 项 输出错误信息用特殊寄存器)5-66
(2) 链路错误信息输出用特殊寄存器FL-net 一旦检测出异常就向 CPU 发出异常警报。CPU 将在链接错误信息输出用特殊寄存器中保存该 异常内容。链接错误信息输出用特殊寄存器为 8 级移位寄存器结构,最大可存储过往发生的 8 次异常。如果异常 超过 8 次,则从最初保存的错误信息开始消失。保存在此寄存器中的错误信息可用周边装置等读出。  链路错误信息输出用特殊寄存器的内容    链路号码    错误显示地址      1         S310~S31F    2 S330~S33F     3      S350~S35F    4     S370~S37F       5       S390~S39F       6   S3B0~S3BF     7      S3D0~S3DF    8    S3F0~S3FF       地址        MSB 内容 LSB       S3x0            自身节点编号(hex)          错误代码(hex)*1    S3x1 链路参数异常详细代码(hex)*2    S3x2     0000 固定    S3x3     0000 固定      S3x4         软件版本(BCD)*3      S3x5 S3x6 S3x7 S3x8 S3x9 S3xA S3xB             节点号码、错误代码存储 1 新 节点号码、错误代码存储 2 节点号码、错误代码存储 3 节点号码、错误代码存储 4 节点号码、错误代码存储 5 节点号码、错误代码存储 6 节点号码、错误代码存储 7 旧           · · ·       S3xF     自节点地址     *1 和模块前面显示的错误代码相同。*2 只有链路参数异常(错误代码=E6)的情况下。其他错误时 0000 固定。*3 版本 1.23 时,0123(BCD)。注1: x 由链路 No.决定。例如,链路 No.=5 的 FL-net 里,保存错误信息到 S390~S39F。   链接 No.    1   2    3   4  5    6   7    8    x            1        3          5        7      9          B        D        F   5-67
 链路参数异常详细代码链路参数中有异常时,显示器的 FL-net 异常显示中显示“E6”,保存错误代码 E6 到链路错误信息输出用特殊寄存器 S3×0 的同时,向 S3x1 里保存链路参数异常详细代码。 请参考下表,修改链路参数。而且,链接参数的确认请从 CPU 中将参数读出到周边装置之后进行。周边装置内的参数有时会与 CPU 内的参数不一致。此外,在 PCwin2 上设定链路参数后,为了检查外围装置的设定,不能设定异常参数。即便如此,可以认 为在链路参数异常时通过计算机链路等指令,使 CPU 内的链路参数被重写。(0024:除去开关设定异常)     S3*1 的异常 详细代码 (hex)  异常内容 原因     通信 方式        0001     继电器链接区域起始地址异常   • 继电器链路区域起始地址未指定字符            N:N            0002    寄存器链接区域起始地址异常  • 寄存器链接区域起始地址非文字指定    0003    继电器链接发送区域起始地址异常 • 继电器链接发送区域起始地址有异常• 继电器链路发送区域字符数异常• 继电器链接区发送域起始地址非文字指定   0004 寄存器链接发送区域起始地址异常• 寄存器链接发送区域起始地址有异常• 寄存器链接发送区域文字数量有异常• 寄存器链接发送区域起始地址非文字指定     0005     继电器链接区域超出  • 继电器链接区域文字数量有异常• 继电器链接区域起始地址+文字数量有异常• 继电器链接区域顶部与发送区域顶部的识别不一致   0006 超出寄存器链路区域• 寄存器链接区域文字数量有异常• 寄存器链路区域起始地址+字符数异常• 寄存器链路区域起始与发送区域起始的标示不一致     0010  继电器链接接收区域起始地址异常   • 继电器链路区域起始地址未指定字符          1:N           0011     寄存器链接接收区域起始地址异常    • 寄存器链接区域起始地址非文字指定    0012 继电器链接区域超出继电器链路的设定中• 接收字符数异常• 发送区域字符数异常• 接收区域起始地址+发送接收信息字符数异常 • 共用内存地址异常     0013  超出寄存器链路区域 寄存器链路的设定中• 接收字符数异常• 发送区域字符数异常• 接收区域起始地址+发送接收信息字符数异常 • 共用内存地址异常     0014  继电器链接发送公用存储器地址异常   • 继电器链路发送区域的共用内存地址异常     0015     寄存器链接发送公用存储器地址异常    • 寄存器链接发送区域的公用存储器地址有异常    0016 主局节点号码异常 • 主站节点编号为 1~254 以外的数字 • 主站节点编号与自站节点编号相同     0020  网络地址异常 • 网络地址为 0.0.0 或 255.255.255             N:N 1:N 通用                            0021     X、Y 区域重复异常  • 实际 I/O 使用的 XY 区域与链路区域重复   0022    通信方式未设定 • 通信方式不是 N:N 或者 1:N   0023 自节点号码异常• 自站节点编号为 1~254 以外的数字     0024     开关设定异常  • 开关的设定异常   0025 链路参数替代码异常• 链接参数的子代码有异常     0026     标记监视超时异常  • 标记监视超时时间的设定为不足 10 ms   0027    最小允许帧间隔异常  • 最小允许帧间隔的设定不是 1 ms~5 ms 注1: x 由链路 No.决定。   链接 No.    1   2    3  4   5    6   7    8    x            1        3          5      7        9          B        D        F   5-68
5.5 5.5.1(1) (2)(3)(4)以太网的异常警报 异常分类以太网的异常警报分以下几种。硬件异常 ············以太网故障时或与CPU的信息交换无法正常进行时发生。CPU 中发生“特殊模块异常”(错误代码:84)。参考“5.5.2. 硬件异常”。 链路参数异常 ······CPU中设定的链路参数的链路模块名存在异常时发生。CPU 中发生“链路模块分配异常”(错误代码:89)。注)异常仅有链路模块名异常。 通过链路参数的“详细设定”或顺序程序的 SPW 指令写入的 IP 地址等设定数据存在异 常时为(3)通信异常。通信异常 ············通信参数或顺序程序存在异常时发生。CPU 中发生“通信异常”(错误代码:86),在 S3×0 号以后设置详细数据。(×由以太网的链路 No.来确定) 参考“5.5.4. 通信异常”。连接异常···········与对象节点通信上发生错误时发生。若发生连接异常,则在文件内存中设置连接错误 代码,打开连接异常标记。各连接的连接错误代码也可以在监视器区域中读出。(参考 10.9.6. 状态监视器功 能)若发生连接异常,则打开文件内存的连接异常标记,在文件内存中设置连接错误代码。 即使发生连接异常,CPU 也不会发生异常。请参照“5.5.5. 连接异常”。5-69
(5) 线路异常 ············接通电源或复位/启动时,线路未进入可使用状态时的异常。 发生这种情况时,可能是由于下列原因。(1) 通信电缆没有连接,或者接触不良。(2) 通信电缆的对象机器(HUB 或计算机等)没有启动。(3) 使用交叉电缆与 HUB 连接。(4) 使用直线电缆直接连接计算机等终端机器。(5) 电缆断线(6) 以太网故障注: 以太网的 LAN 电缆有直线电缆和交叉电缆 2 种。连接 HUB 时使用直线电缆,1对1直接连接对象机器时使用交叉电缆。(6) 没有初始数据 ······接通电源或复位/启动后,无法从CPU接收IP地址等初始数据时的异常。 发生这种情况时,可能是由于下列原因。(1) 利用顺序程序初始化时,打开文件内存初始要求标记的顺序程序存在错误或者没 有组成程序。(2) 利用链路参数初始化时,没有选择“Initialization based on Link Parameters(根据 链路参数初始化)”。       5-70
5.5.2 硬件异常由于以太网异常或者外围机器故障导致无法正常运行时发生。 CPU 中发生“特殊模块异常”(错误代码:84)。 详细异常代码被保存在 S3×0 号之后,因此请参考下表进行处理。5.5.3 链路参数异常 链路参数的链路模块名存在错误时发生。请将链路模块名设定为“Ethernet(以太网)”。    详细异常代码     原因和处理方法    H―   有可能是以太网异常。 更换 Nano CPU。   5-71
5.5.4 通信异常以太网中设定的通信参数存在错误时,或者使用文件内存方式通信时的发送字节数不在规定范围内时发生。 CPU 中发生错误 86。通过以太网的链路 No.将有错误的详细代码储存到不同 CPU 特殊寄存器如下的地址中。    链接 No. 错误代码   详细数据 1    详细数据 2   详细数据 3    1   S310    S311      S312     S313    2S330 S331  S332 S333    3 S350   S351    S352   S353    4   S370    S371      S372     S373    5  S390  S391    S392   S393    6S3B0 S3B1  S3B2 S3B3    7   S3D0    S3D1      S3D2     S3D3    8  S3F0  S3F1    S3F2   S3F3  参考下页的表进行处理。5-72
 通信异常错误代码表     错误代码    内容     详细数据 1   详细数据 2     详细数据 3     处理方法    0113初始指令中自节点 IP 地址不正确  00000000  0000 确认是否正确设定了自节点 IP 地址。 另外,下列 IP 地址无法设定。• 网络 ID 的所有比特都为 0 或者所有比特为 1• 主机 ID 的所有位数为 0 或所有位数为 1• 子网 ID 的所有比特都为 0 或者所有比特为 1• 最上位字节为 127(7Fh) (参考资料 5)     0114    初始指令中网关 IP 地址不正确     0000   0000     0000     确认是否正确设定了网关 IP 地址。    0115在初始命令中,其他节点 IP 地址为非法  00000000  0000 确认是否正确设定了其他节点 IP 地址。 另外,下列 IP 地址无法设定。• 网络 ID 的所有比特都为 0 或者所有比特为 1• 主机 ID 的所有位数为 0 或所有位数为 1• 子网 ID 的所有比特都为 0 或者所有比特为 1• 最上位字节为 127(7Fh) (参考资料 5)     0116 在初始命令中,其他节点端口 No.(TCP)为非法    0000 0000    0000   确认是否正确设定了其他节点端口 No.。端口 No.必须为 0401h~FFFEh(1025~65534)。     0117    初始指令中协议不正确     0000   0000     0000     确认是否正确设定了协议(TCP:00 或 UDP:01)。    0118   初始指令中模式不正确   0000  0000   0000   确认协议为 TCP 时模式(主动:00/特定对象被动:01/不特定对象被 动:02)是否已经正确地写入到文件内存中。    0119   在初始命令中,自身节点端口 No.(TCP)为非法   0000  0000   0000   确认是否正确设定了自节点端口 No.。端口 No.必须为 0401h~FFFEh(1025~65534)。    011A在初始命令中,其他节点表 No.为非法  00000000  0000 确认是否正确设定了其他节点端口 No.。 另外,请确认指定的表是否通过初始参数的“表使用”设定为“使用”。     011B 初始指令中自节点端口 No.(TCP)重复    0000 0000    0000   确认是否重复设定了自节点端口 No.。     011C    初始指令中自节点端口 No.(UDP)重复     0000   0000     0000     确认是否重复设定了自节点端口 No.。    011D初始指令中重发定时器(数据)值不正确  00000000  0000 确认定时器值是否在规定范围内。     011E    初始指令中重发定时器(SYN、FIN)的定时器值不正确     0000   0000     0000     确认定时器值是否在规定范围内。    011F初始指令中关闭定时器值不正确  00000000  0000 确认定时器值是否在规定范围内。     0120    在初始命令中,数据包生存时间为非法     0000   0000     0000     确认定时器值是否在规定范围内。    0121   初始指令中 IP 构造定时器值不正确   0000  0000   0000    确认定时器值是否在规定范围内。  5-73
     错误代码    内容     详细数据 1   详细数据 2     详细数据 3     处理方法    0125   初始指令中子网掩码不正确   0000  0000   0000   将子网掩码的 1/0 的转点设置为一处。 (参考资料 5)    0126在初始命令中,网关 IP 地址未进行设定  00000000  0000 确认是否设定网关 IP 地址以及自节点 IP 地址和其他节点 IP 地址中是 否有错误。(参考资料 5)     0127    在初始命令中,重传次数为非法     0000   0000     0000     请确认重发次数是否在规定范围内。    0134主动开放命令的其他节点表 No.无效  接线 No.0000  0000 TCP 主动指定的连接中没有设定“其他节点表 No.”的异常。请确认“其 他节点表 No.”是否正确以及指定的表是否被设定为“使用”。     2080 初始数据的响应定时器值异常    0000 0000    0000   确认定时器值是否在规定范围内。     2081    初始数据的无接收计时器值异常     0000   0000     0000     确认定时器值是否在规定范围内。    2082发送数据的传送数异常  接线 No.传输数量  0000 确认发送数据区域首个传送数数据是否为 0 或者是否没有超过 2044 (7FCh),以及传送数据数是否正确写入文件内存。     2085    文件接收结束时 接收确认标记已经打开     接线 No.   0000     0000      确认接收确认标记是否一直处于打开状态。  5-74
5.5.5 连接异常 从对象节点接收的数据有异常等情况时发生。    连接异常发生时使用下列方法发出警报。(1) 通过状态监视器发出警报发生错误时,在 CPU 模块的特殊寄存器的以下区域中储存连接异常代码。错误解除后,储存“00”。 可以通过特殊寄存器进行监视的连接为 1~8。对于 9~32,使用 SPR2 命令,监视状态。       链接 No.连接错误代码保存区域                1S308~S30FS3x8连接 1:连接异常代码               2S328~S32F       3S348~S34F       4S368~S36F       5S388~S38F       6S3A8~S3AF        7S3C8~S3CF  通过外围装置监视该区域,可以读取连接异常代码。(2) 通过文件内存的警报数据储存到文件内存的连接异常代码区域。 为了读出此数据,必须通过顺序程序的 SPR 指令,在 I/O 寄存器上读出数据。另外,连接异常发生时有时会向对象节点发送错误响应。请参考下一页之后的连接异常错误代码表进行处理。5-75S3x9S3xE连接 2:连接异常代码       S3xA连接 3:连接异常代码       S3xB连接 4:连接异常代码       S3xC连接 5:连接异常代码       S3xD连接 6:连接异常代码      连接 7:连接异常代码              8S3E8~S3EFS3xF连接 8:连接异常代码         
5.5.5.1连接异常错误代码表关于表中的符号“(1)~(4), **, ***”• 异常处置内容“(1)~(4)”发生异常时,以太网进行(1)~(4)的指定处理。(1) 连接异常代码写入,连接异常标记打开(2) 连接复位(3) 向对象节点发送错误响应数据(4) 将 RC 设为 10,还原下列错误响应数据。 “80.10.01.00.”(:错误代码)错误代码的内容请参考错误响应数据错误代码表(5.5.5.2)。• 错误响应数据“**,***”通过下列数据发送错误响应数据的帧类型(FT)。 **: 对于文件内存接收的错误响应时,**=E0对于计算机链路指令的错误响应时,**=80***: 接收的帧类型(FT)数据的最高位比特为1的数据5-76
(i) 连接为 TCP 被动时   内容  处置     连接异常 代码  向对象节点发送的错误响应  数据   清除异常的时间   发生异常的原因和处置方法   文件存储器发送 响应数据接收超时  (1)(2)     4002  -   发送请求标志的 OFF   由以太网发送文件内存数据,在初始参数“响应定时器”(默认值:6 秒)期间对象 节点没有做出响应时发生。请确认在对象节点侧文件内存的处理是否正常进行。   文件存储器发送字节数量异常    (1)      4003     -    发送请求标志的 OFF     文件内存的发送字节数出现异常时发生。请确认文件内存发送数据区域的起始传送数。   无法接收传送数部分的数据   (1)(2)(3)   4004    **.05  从对方节点开放   已经接收了文件内存数据或者计算机链路指令时,传送数数据(LL、LH)比实 际发送的数据数多以及数据中断时发生。请确认传送数数据是否正确以及 1 帧 的数据是否已全部发送。   接收数据帧格式异常(FT 异常) (1)(2)(3)  4005 ***.01 从对方节点开放 接收数据的起始数据(FT:帧类型)异常时发生。FT 必须为下列任意一个。FT=00(计算机链接命令),FT=60(文件存储器发送),FT=E0(文件存储 器接收确认响应)   接收数据帧格式异常(RC 异常)  (1)(2)(3)     4005  **.02   从对方节点开放   已经接收了文件内存或计算机链路指令时,接收数据的第 2 个数据(RC:响应 代码)在 00 范围之外时发生。请确认发送数据。   接收数据帧格式异常(传送数异常)  (1)(2)(3)     4005  **.03   从对方节点开放   接收数据的传送数数据(LL、LH)为 0000 以及超出 1274 字节时(计算机链 路指令)或者超出 2044 字节时(文件内存发送)发生。请确认发送数据。   计算机链路指令的处理尚未完成就已经接收了下一个计算机链路指令    (1)(2)(3)      4006     80.06    从对方节点开放     接收计算机链路指令,在回送对其响应之前就已经接收了下一个计算机链路指令时发生。请确认计算机链路发送的时间。   文件内存接收的处理尚未完成就已经接收了下一个文件内存数据。 (1)(2)(3)  4007 E0.07 从对方节点开放 接收文件内存数据,在回送对其响应之前就已经接收了下一个文件内存数据时发生。请确认文件内存数据发送的时间。   中继命令格式异常    (1)(2)(3)      4008     80.04    从对方节点开放     中转指令的传送数或者 ENQ 代码异常时发生。请确认中转指令的内容。   文件内存发送处理过程中连接被复位或者关闭 (1)  4009 - 发送请求标志的 OFF 文件内存发送处理过程中连接被复位或者关闭时发生。   无接收定时器延时    (1)(2)      4010     -    从对方节点开放     超过用初始参数的“无接收定时器”(默认 00:无设定)设定的时间,仍无法接 收对象节点的数据时发生。请检查无接收定时器的设定   因 TCP 重传超时而对连接进行了重置。   (1)(2)   4013    -  从对方节点开放   用初始参数的“复位待机重发次数”指定的次数进行通信重试,也无法从对象节点 接收到接收确认(ACK 信号)时发生。对象节点的电源关闭或电缆断线时发生。 (参考 7-4 章)   通过由相同 IP 地址的其他端口的多重连 接打开要求复位了当前连接   (1)(2)   4014    -   从对方节点开放   如果被 TCP、不特定对象被动打开指定的连接为打开状态,则由其他节点向相 同端口发出打开要求时,复位当前打开的连接。此后如果再有来自其他节点的 打开要求,则打开与此节点的连接。(参考 7-4 章)  5-77
   内容  处置     连接异常 代码  向对象节点发送的错误响应  数据   清除异常的时间   发生异常的原因和处置方法   从对方节点针对文件存储器发送的错误 响应接收[++=响应代码:RC]    (1)(2)      30++     -    发送请求标志的 OFF     发送文件内存数据,从对象处接收的响应代码(RC)不为 00 时发生。请确认 响应数据。   在计算机链接命令处理中,从 J-CPU 中接 收到了 NAK 响应 (3)  - (4) - 接收的计算机链路指令的内容存在某些异常,无法正常处理时发生。请确认计算机链路指令的内容。   上述以外的连接异常   (1)(2)     013+   -   从对方节点开放    从对方节点接收到非法的开放请求、关闭请求时会发生。请确认对方节点的通信程序。 (ii) 连接为 TCP 主动时   内容    处置      连接异常 代码      向对象节点发送的错误响应数据     清除异常的时间     发生异常的原因和处置方法   主动打开失败 (1)  4001 - 开放请求标志的 OFF 无法向对象节点主动打开时发生。请确认线路是否正确连接,对象节点是否启动,自节点与对象节点的 IP 地址的 网络 ID 是否相同(参考资料 5)。   文件存储器发送 响应数据接收超时    (1)(2)      4002      -     发送请求标志的 OFF     由以太网发送文件内存数据,在初始参数“响应定时器”(默认值:6 秒)期间对象 节点没有做出响应时发生。请确认在对象节点侧文件内存的处理是否正常进行。   文件存储器发送字节数量异常   (1)   4003    -   发送请求标志的 OFF   文件内存的发送字节数出现异常时发生。请确认文件内存发送数据区域的起始传送数。   无法接收传送数部分的数据   (1)(2)(3)   4004    **.05   开放请求标志的 OFF   已经接收了文件内存数据或者计算机链路指令时,传送数数据(LL、LH)比实 际发送的数据数多以及数据中断时发生。请确认传送数数据是否正确以及 1 帧 的数据是否已全部发送。   接收数据帧格式异常(FT 异常) (1)(2)(3)  4005 ***.01 开放请求标志的 OFF 接收数据的起始数据(FT:帧类型)异常时发生。FT 必须为下列任意一个。FT=00(计算机链接命令),FT=60(文件存储器发送),FT=E0(文件存储 器接收确认响应)   接收数据帧格式异常(RC 异常)    (1)(2)(3)      4005      **.02     开放请求标志的 OFF     已经接收了文件内存或计算机链路指令时,接收数据的第 2 个数据(RC:响应 代码)在 00 范围之外时发生。请确认发送数据。   接收数据帧格式异常(传送数异常) (1)(2)(3)  4005 **.03 开放请求标志的 OFF 接收数据的传送数数据(LL、LH)为 0000 以及超出 1274 字节时(计算机链 路指令)或者超出 2044 字节时(文件内存发送)发生。请确认发送数据。   计算机链路指令的处理尚未完成就已经接收了下一个计算机链路指令    (1)(2)(3)      4006      80.06     开放请求标志的 OFF     接收计算机链路指令,在回送对其响应之前就已经接收了下一个计算机链路指令时发生。请确认计算机链路发送的时间。   文件内存接收的处理尚未完成就已经接收了下一个文件内存数据。 (1)(2)(3)  4007 E0.07 开放请求标志的 OFF 接收文件内存数据,在回送对其响应之前就已经接收了下一个文件内存数据时发生。请确认文件内存数据发送的时间。   中继命令格式异常    (1)(2)(3)      4008      80.04     开放请求标志的 OFF     中转指令的传送数或者 ENQ 代码异常时发生。请确认中转指令的内容。   文件内存发送处理过程中连接被复位或者关闭   (1)   4009    -   发送请求标志的 OFF   文件内存发送处理过程中连接被复位或者关闭时发生。  5-78
   内容    处置      连接异常 代码      向对象节点发送的错误响应数据     清除异常的时间     发生异常的原因和处置方法   无接收定时器延时 (1)(2)  4010 - 开放请求标志的 OFF 超过用初始参数的“无接收定时器”(默认 00:无设定)设定的时间,仍无法接 收对象节点的数据时发生。请检查无接收定时器的设定   连接被从对方节点关闭    (1)      4011      -     开放请求标志的 OFF     通过主动打开由自节点打开连接后,由对象节点关闭连接时发生。   连接被从对方节点重置   (1)   4012    -   开放请求标志的 OFF   通过主动打开由自节点打开连接后,由对象节点复位连接时发生。   因 TCP 重传超时而对连接进行了重置。 (1)  4013 - 开放请求标志的 OFF 用初始参数的“复位待机重发次数”指定的次数进行通信重试,也无法从对象节点 接收到接收确认(ACK 信号)时发生。对象节点的电源关闭或电缆断线时发生。 (参考 7-4 章)   从对方节点针对文件存储器发送的错误 响应接收[++=响应代码:RC]  (1)(2)     30++   -   发送请求标志的 OFF   发送文件内存数据,从对象处接收的响应代码(RC)不为 00 时发生。请确认 响应数据。   在计算机链接命令处理中,从 J-CPU 中接 收到了 NAK 响应    (3)      -      (4)     -     接收的计算机链路指令的内容存在某些异常,无法正常处理时发生。请确认计算机链路指令的内容。   连续开放  (1)(2)  0132  -  开放请求标志的 OFF  发送处理中,发送完成标志为 OFF,且再次进行发送处理时会发生。发生后, 请重置 CPU 模块。请修改程序,以确保发送请求标志在发送完成或发生连接异 常后为 OFF。 (iii) 连接为 UDP 时   内容    处置   连接异常 代码   向对象节点发送的错误响应数据   清除异常的时间   发生异常的原因和处置方法   文件存储器发送 响应数据接收超时    (1)   4002   -   发送请求标志的 OFF   由以太网发送文件内存数据,在初始参数“响应定时器”(默认值:6 秒)期间对象 节点没有做出响应时发生。请确认在对象节点侧文件内存的处理是否正常进行。   文件存储器发送字节数量异常      (1)     4003     -     发送请求标志的 OFF     文件内存的发送字节数出现异常时发生。请确认文件内存发送数据区域的起始传送数。   无法接收传送数部分的数据  (3)  **.05 - 已经接收了文件内存数据或者计算机链路指令时,传送数数据(LL、LH)比实 际发送的数据数多以及数据中断时发生。请确认传送数数据是否正确以及 1 帧 的数据是否已全部发送。   接收数据帧格式异常(FT 异常)    (3)      ***.01   -   接收数据的起始数据(FT:帧类型)异常时发生。FT 必须为下列任意一个。FT=00(计算机链接命令),FT=60(文件存储器发送),FT=E0(文件存储 器接收确认响应)   接收数据帧格式异常(RC 异常)    (3)      **.02   -   已经接收了文件内存或计算机链路指令时,接收数据的第 2 个数据(RC:响应 代码)在 00 范围之外时发生。请确认发送数据。   接收数据帧格式异常(传送数异常)     (3)       **.03    -    接收数据的传送数数据(LL、LH)为 0000 以及超出 1274 字节时(计算机链 路指令)或者超出 2044 字节时(文件内存发送)发生。请确认发送数据。 5-79
   内容      处置     连接异常 代码     向对象节点发送的错误响应数据     清除异常的时间     发生异常的原因和处置方法   计算机链路指令的处理尚未完成就已经接收了下一个计算机链路指令  (3)  80.06 - 接收计算机链路指令,在回送对其响应之前就已经接收了下一个计算机链路指令时发生。请确认计算机链路发送的时间。   文件内存接收的处理尚未完成就已经接收了下一个文件内存数据。    (3)      E0.07   -   接收文件内存数据,在回送对其响应之前就已经接收了下一个文件内存数据时发生。请确认文件内存数据发送的时间。   中继命令格式异常      (3)          80.04     -     中转指令的传送数或者 ENQ 代码异常时发生。请确认中转指令的内容。   从对方节点针对文件存储器发送的错误 响应接收[++=响应代码:RC]  (1) 30++ - 发送请求标志的 OFF 发送文件内存数据,从对象处接收的响应代码(RC)不为 00 时发生。请确认 响应数据。   在计算机链接命令处理中,从 J-CPU 中接 收到了 NAK 响应     (3)   -    (4)    -    接收的计算机链路指令的内容存在某些异常,无法正常处理时发生。请确认计算机链路指令的内容。 上述内容以外的错误代码被退回时,请重新确认所有指令数据。5-80
5.5.5.2 错误响应数据 错误代码表 计算机链路指令中通过错误响应[80.10.01.00.](:错误代码)或者中转指令的响应,NAK(异常)做出应答时,请参考下表进行指令数据的检查。:错误代码 11202123242526313233343536393C3D3E3F404142435266 70 72 73* 请参照指令(22)执行权限定状态读出或者(23)执行权限定设定。 上述内容以外的错误代码被退回时,请重新确认所有指令数据。       错误内容     CPU 的硬件异常,无法进行处理     中转指令中的固定数据(ENQ)不为“05”     传输数量异常(中继命令中的传输字节数量中有错误)     指令代码不正确     子命令代码为非法     指令格式的数据字节不正确     功能调用的运算数数量为非法     想要在顺序运算过程中禁止写入的区域进行写入,或者想要使用在顺序运算过程中禁止执行的函数调用      在停止持续期间,有禁用的命令发来     不是调试模式却要进行调试函数调用     通过访问禁止设定禁止访问     由于设定了执行权限定,所以不可执行 *     由于通过其他装置设定了执行权限定,所以不可执行 *     进行了 I/O 点数参数、I/O 分配点数参数的写入后,不进行复位便试图开始扫描     在重大故障发生过程中,发出了重大故障中无法执行的指令     执行其他原因的指令过程中处理发生冲突,无法执行     由于正在进行重置,所以命令无法执行     由于处于停止状态,所以命令无法执行     读出、写入指令中地址不在范围内,或者指令的地址+数据数脱离地址范围     字数量或字节数量超出范围     接收到指定范围之外的数据     函数调用的运算域有误     尽管未使用计时器、计数器,却仍然发来了设定值、当前值的读出、写入命令     中转指令指定的链路 No.,局号的链路模块没有应答 (指定的连接模块不存在、电源关闭或者线路异常等)     无法使用中转指令指定的链路 No.的模块 (指定的链路 No.错误,或者链路模块异常)     中转指令指定的链路 No.,局号的链路模块没有应答 (指定的连接模块不存在、电源关闭或者线路异常等)     CPU 内多个中转指令在相同链路模块反复发行,无法进行指令处理。 (请再次发送命令)                             5-81
5.6 FL遥控器的异常报警在 FL 远程中进行异常检测时,将向 FL 远程和 CPU 进行异常通告。在 FL 远程中,采用硬件状态、通信状态的指示灯和信息显示器来进行异常通告。在 CPU 中,采用特殊继电器 、特殊寄存器(错误信息输出用寄存器、链接错误信息输出用寄存器)与信 息显示器来进行异常通告。另外,可用特殊寄存器来确认 FL 远程的通信状态。(1) 硬件状态、通信状态硬件状态、通信状态的各指示灯中分别有绿色和红色的指示灯,通过亮灯/闪烁/熄灯来表示以下的状 态。   灯名称      颜色        状态   状态定义   内容       硬件状态     绿           正常状态  模块正常状态     未设定状态  正在初始化   红           致命故障  硬件异常        轻微故障   链接参数异常   -  没有供给电源 • 没有向主机模块供给电源 • 正在复位• 初期处理开始等待     通信状态         绿           正常状态  网络正常状态        未连接状态   网络正常,但未确立通信状态   红    致命通信异常 网络上检测出不能通信的异常 • 节点地址重复        通信异常   部分子局通信异常     -      网络电源异常   未连接电缆   5-82:亮灯 :闪烁 :熄灯
5.6.1 CPU中的错误通告 (1) 特殊继电器正常时所有局通信中标记 ON,异常时其他标记 ON。    地址     内容      正常      异常    VA0 VA4 VA8 VAC VB0 VB4 VB8 VBC链路 No.1 链路 No.2 链路 No.3 链路 No.4 链路 No.5 链路 No.6 链路 No.7 链路 No.8所有局通信中所有局通信中所有局通信中所有局通信中所有局通信中所有局通信中所有局通信中所有局通信中注)脱离设定后为 0  ON OFF     VA1 VA5 VA9 VAD VB1 VB5 VB9 VBD  链路 No.1 链路 No.2 链路 No.3 链路 No.4 链路 No.5 链路 No.6 链路 No.7 链路 No.8链路参数异常链路参数异常链路参数异常链路参数异常链路参数异常链路参数异常链路参数异常链路参数异常    OFF   ON     VA2 VA6 VAA VAE VB2 VB6 VBA VBE 链路 No.1 通信异常 链路 No.2 通信异常 链路 No.3 通信异常 链路 No.4 通信异常 链路 No.5 通信异常 链路 No.6 通信异常 链路 No.7 通信异常 链路 No.8 通信异常    OFF   ON     VC4    特殊模块的异常(通信模块故障)     OFF     ON    VC8   I/O 构成异常(安装了规定数量以上的通信模块。)   OFF   ON    VF2  特殊模块分配异常(链路参数的支架 No、时隙 No.、链路模块名与安装状态不同。)    OFF   ON   5-83
(2) 特殊寄存器FL 遥控器将异常时及通信状态的信息保存于 PLC 的下列地址中。    地址      内容    S200 S24F             CPU 错误信息输出用寄存器      S3#0 S3#1 S3#2 S3#3 正常子机信息区域 显示各子机的通信状态(正常/异常)。    S3#4   主机状态区域 显示主机和网络的状态。*1    S3#5     软件版本(BCD)    S3#6   标记重发次数    S3#7 标记保持超时次数    S3#8     标记监控超时次数    S3#C S3#F           连接局设定状态      S3*0 S3*B               链接错误信息输出用寄存器      S3*C S3*D S3*E S3*F   分离寄存器    上述地址#及*部分由链路No.决定。 各链路 No.的#、*如下表所示。注: 这些寄存器 S200~S24F 和 S3#0~S3*B 中保存的信息在异常恢复后不会被清除。必须清除时, 请通过 PCwin2 等向寄存器写入“0000”。*1 S3#4 主机状态区域15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0节点地址重复 E7传输异常 D9 对照异常 D6主机通信速度 [0:10M 1:100M]通信准备中 1:通信准备中(加电后到确立通信的期间)公用存储器发送区域重复 异常 E8.E9异常发生中(发生 Bit1,6,7,10 错误) I/O 通信中   链接 No.    1   2    3   4  5    6   7    8    #          0      2        4      6    8        A      C      E   *       1    3       5    7   9      B     D    F                 *       *   *                                *      *   *      *         *         5-84~~~
(3) CPU错误信息输出用寄存器检出异常时,将错误代码、错误相关信息及错误检出时刻保存在错误信息保存用特殊寄存器中。该寄存器 为 8 级(PC10 模式时为 64 级)移位寄存器结构,可存储最大 8 次的异常发生。如果异常超过 8 次,则 从最初保存的错误信息开始消失。  此寄存器保存的错误信息可以通过外围装置等读出。 CPU错误信息输出用特殊寄存器的寄存器内容 地址S200 S20AS214 S21ES228 S232 S23C S246 S24F           错误0 信息错误代码           错误1 信息错误相关信息 1(低位),2(高位)          错误2 信息错误相关信息 3(低位),4(高位)          错误3 信息错误检出时刻(秒)          错误4 信息错误检出时刻(分)          错误5 信息错误检出时刻(时)          错误6 信息错误检出时刻(日)          错误7 信息错误检出时刻(月)        错误检出时刻(年)     错误检测时刻(星期)0~6:日~六     消失  错误相关信息          错误代 码    I/O 监视器的错误信息    错误内容     相关 1     相关 2     相关 3     相关 4      备注   重度 异常      84I/O MODULE ERROR 2 通信模块故障  *分类 机架编 号 插槽编 号 - *2:CPU 检出 1、3:链接检出    88 FUNC. I/O OVER 1  24 个以上通信模块的 安装    -   -   -   -   VC8 ON   警报        85 LINK PRAM. ERROR  链路参数异常    链路号   -   -   -       86   LINK ERROR   通信异常     链路号     -     -     -         89  FUNC. I/O ALARM   链路参数的支架 No.、 时隙 No.、模块名异常    机架编 号   时隙 号   -   -   VF2 ON   注: 与内置 FL 遥控器的错误代码不同。 Ver3.00~的版本中,S200~中储存的异常信息会同时储存在 S1000~。(参考 5.1.4 项 错误信息输出用特殊寄存器)5-85
(4) 错误信息输出用特殊寄存器在内置 FL 遥控器中进行异常检测后,向 CPU 进行异常报警,同时将内置 FL 遥控器的错误代码保存到链 路错误信息输出用特殊寄存器中。该寄存器为 8 级移位寄存器结构,最大可存储 8 次的异常发生。异常超过 8 次时,将从最初保存的错误 信息开始依次消失。 链接错误信息输出用特殊寄存器的寄存器内容    链路号    错误显示地址      1       S310~S31F   2        S330~S33F     3     S350~S35F       6   S3B0~S3BF     7   S3D0~S3DF     8     S3F0~S3FF       地址            MSB 内容 LSB    S3*0        节点地址(HEX)             错误代码(hex)     S3*1      实际输入字节数(HEX)低位   实际输出字节数(HEX)低位         S3*2        输入字节数量(HEX)下位 输出字节数量(HEX)下位节点地址、错误代码存储 1 新 字节地址、错误代码存储 2 节点地址、错误代码存储 3 节点地址、错误代码存储 4 节点地址、错误代码存储 5 节点地址、错误代码存储 6 节点地址、错误代码存储 7 旧                  S3*5 S3*6 S3*7 S3*8 S3*9 S3*A S3*B                注1: *将根据链接 No.确定。注2: S3*1~S3*4 保存对照异常(输入输出字节数不一致)时的输入输出字节数。 S3*1:实际从机的输入输出字节数量 下位 S3*2:链路参数中的输入输出字节设定值 低位例 S3*0 02D6S3*1 0400S3*2 0004从机 02 的对照异常从机02为 输入04字节 输出00字节 在参数中, 输入 00 字节 输出 04 字节   链接 No.    1    2   3  4    5  6    7    8    *            1          3        5      7          9      B          D        F    5-86
 详细错误代码和内置FL遥控器的错误显示                           FL 远程                        错误代码  显示内容    S03*0   S03*1    内容    89  E5    ---   ---    链接参数未设定    85   E7      00F0      00F2    自节点号码重复异常   85ED  00ED 0000 区域超出    85  E6    0021   0000    字节数合计超过限制值    85 E6     0022   0000  有字节数为 0 的局号    85 E6     0023   0000  1 个从机的输入或输出字节数量超过了限制值    85   E6      0025      0000    通信区域超出   85E6  0026 0000 CPU 的输入输出与通信区域重复    85 E6     0027   0000  模块子代码异常    85   E6      0028      0000    模块 No.异常   85E6  0029 0000 最小允许帧间隔异常    85   E6      002A      0000    自身节点编号异常   85E6  002B 0000 网络地址异常    86  E8    E8   0000    共用内存 1 重复异常    86   E9      E9      0000    共用内存 2 重复异常   86EA  EA 0000 标记监视超时异常    86   EB      EB      0000    循环数据读入异常   86  EC   EC    0000   循环数据写入异常   86D6  ##D6 II00 对照异常S03*1 H 实际输入字节数(HEX) S03*1 L 实际输出字节数(HEX) S03*2 H 输入字节数量(HEX) S03*2 L 输出字节数(HEX)    86   D9       ##D9     0000    传输异常     84  H-    ---   ---   其他硬件故障   注1: 特殊寄存器 S3*0 的*部分由链路 No.决定。S3*0 的内容 ##:异常子机的节点地址注2: 主机错误代码的“E0”、“E2”显示在错误状况被解除后,会变为局号的闪烁显示。   链接 No.    1    2   3  4    5  6    7    8    *            1          3        5      7          9      B          D        F   5-87
5.6.2 通信状态内置 FL 遥控器将通信状态输出到特殊寄存器中。(1) 正常从机信息区域是表示各从机的通信正常/异常状态的区域 各从机的状态标志将输出到特殊寄存器 S3#0~3#3 中。 各比特 No.表示节点地址(局号)。MSB LSBS3#0S3#1 S3#2 S3#3 特殊寄存器的#部分由链路No.决定。注1: 在子机为分离指定状态或根据链路参数的设定“通信异常时通信不停止”的情况下,标记仍发挥功能。 (2) 通信状态确认功能    本功能可作为通信线路稳定性的基准。即使发生错误,也不一定就是通信异常。错误多发时,导致通信    异常的可能性会变大。 通信错误信息区域的内容按错误内容(6 种)输出到特殊寄存器 S3#6~S3#8 中。地址#部分由链路 No.决定。• 错误次数最多可以计算到 65535(FFFFh)次。• 错误次数在电源断开及 CPU 复位时被清除。      但是,通信复位并不能清除错误次数。    15     14    13    12    11    10    9    8   7    6    5    4    3    2    1      31         30         29       28       27       26       25       24       23       22       21       20       19       18       17     16  47    46      45    44    43    42    41    40    39    38    37    36    35    34    33    32  63    62    61   60   59   58   57   56   55   54   53   52   51   50   49   48  各比特=1:通信正常状态 各比特=0:通信异常状态(或未使用局) (发生传输异常或对照异常。)   链接 No.    1    2  3    4  5   6    7    8    #        0            2    4            6    8        A            C      E       地址       内容    S3♯6 标记重发次数     S3♯7      标记保持超时次数    S3♯8   标记保持超时次数      链接 No.   1    2  3    4  5    6  7     8   ♯     0       2   4       6   8       A   C       E   5-88
 错误次数保存回路错误次数(错误信息区域)的内容在电源断开及由于通信异常 CPU 复位时被清除。因此,为了保存发生  异常时错误次数的内容,请制作以下所示的顺序线路。例. 以下为发生通信异常时,将子机状况、主机状态、错误次数、发生时刻保存到寄存器的顺序例。 通信异常标志(链接 No.1) VA2T000T000 TMRWBMOV WBMOVK=1.0       1 秒定时器           P***        S3#0 → D0FF0= 0012d S019 → D0FFC= 003d传输子机状况主机状态错误次数发生时刻传输         特殊寄存器的#部分由链路 No.决定。通信异常标记的地址由链路 No.决定。根据上述指令,D0FF0~如下所示。D0FF0 1 2 3 4 5 6 7 8 9 A B C D E   链接 No.    1  2   3    4   5  6    7   8   #       0   2     4       6     8   A       C    E      链接 No.    1   2   3  4    5   6   7    8   通信异常标记       VA2     VA6    VAA   VAE       VB2     VB6     VBA     VBE           正常子机信息区域            主机状态区域            错误次数                    时刻 分、秒 (BCD)    时刻 日、时 (BCD)    时刻 年、月 (BCD)  5-89
(3) 连接站设定信息区域是表示 CPU 的链接参数中设定的从机连接状态的区域。 各子机的状态标记输出到特殊寄存器 S3#C~3#F 中。0 表示主机,各比特 No.表示节点地址(局号)。 MSBS3#CS3#D S3#E S3#F各比特=1:连接 各比特=0:不连接• 特殊寄存器的#部分由链路 No.决定。LSB    15     14    13    12    11    10    9    8   7    6    5    4    3    2    1      31       30    29    28    27    26    25    24    23    22    21    20    19    18    17  16   47         46         45       44       43       42       41       40       39       38       37       36       35       34       33     32  63    62    61   60   59   58   57   56   55   54   53   52   51   50   49   48     链接 No.       1        2          3      4          5     6         7            8    #    0    2  4    6  8   A    C   E   5-90
5.6.3 错误内容与推定原因     特殊寄存 器内容 注)       主机 7 段 显示     错误内容    主要推测原因      排除方法       H_ 硬件异常 CPU 本体发生异常   请检查 CPU 本体的状态及噪音环 境,在此基础上重新接通电源。 若再次发生,请更换 CPU 模块。     0021       E6      字节数量的合计超出了限制值   链接参数异常• CPU 本体的存储器中发生了 异常。             请重新写入正常的参数,并进行重置或电源重新接入。详细内容请参照各 CPU 的使用说 明书。              0022    E6    存在字节数量为 0 的站    0023  E6 1 子机的输入或输出字节数超 过限制值    0024     E6   I/O 指定异常    0025       E6      区域超出    0026  E6 CPU 的输入输出与区域重复    0027       E6      子代码异常    64F0    E7    主机重复     • 2 台以上的主机模块连接在 网络上• FL-net 模块连接在同一网络 上      • 请将其他主机模块从网络上 断开后重新接入电源。• 请将 FL-net 模块从网络上断 开后重新接入电源。      00E8  E8 公用存储器发送区域地址重复(继电器链接)    00E9     E9   公用存储器发送区域地址重复(寄存器链接)    00EB       EB      循环数据读入异常     • FL-net 模块连接到同一网络 中      • 请将 FL-net 模块从网络上断 开后重新接入电源。     00EC    EC    循环数据读入异常    00EA     EA   令牌监视超时  令牌监视超时错误在链路参数的“网络”上设定的令牌监视超时时间内 不能发送自节点的所有数据时发生。请打开令牌监视超时时间的“自动”复选框或者延长设定时间。    5-91
     特殊寄存 器内容       主机 7 段 显示     错误内容    主要推测原因      排除方法     ##D6     D6    对照异常(字节数量不一致)   从机的输入输出字节数量与链接参数的输入输出字节数量有不一致。   请确认所连接的从机输入输出字节数量,并变更链接参数。* 变更子机的节点地址后,请重 新接通子机电源并变更链路 参数。拆下子机后,也需要变更链路参数。    ##D9     D9     传输异常   从机已脱离。   请确认子机连接器的连接是否正确。请确认有无向子机供给电源。确认 HUB 电源。 请确认节点地址的重复。 请确认连接器的布线部中有无断 线或短路的通信线。使用其他公司生产的从机时,请参照该从机的使 用说明书。     00   硬件状态指示灯、通信状态指示灯均亮绿灯,并正常通信,但输入输出数据不正确。  • 存在已指定脱离的子站。• 通信区域重复。• 输入输出地址顺序设定错误 • 顺序程序覆盖通信区域   • 请确认分离寄存器的相应子 局是否设定为 0(无分离指 定)。• 请确认在主机的参数中设定 的通信区域有无与其他链接 模块的通信区域重复。• 请确认主机的参数中设定的 输入输出地址顺序设定是否 正确。• 请确认顺控程序中有无覆盖 通信区域。   # #:异常子机的节点地址5-92
6 维护6.1 更換电池(1) 锂充电电池TOYOPUC-Nano 在内置时钟的后备电源中,作为选项,可使用专用的可充电锂电池(TUP-6990)。每天充电 4 小时,电池就可以处于常有电状态。如果是完全充满的状态,则常温(25°C)下可备用 2 个月以上。检测出电池电压降低时,蓄电池就会报警(错误代码 0022)(特殊继电器 V03 和 VF0 为 ON)。如果充电 8 小时以上仍不能解除蓄电池警报,或者即使充电蓄电池警报也马上出现时,要考虑是否电池的 寿命到期,请更换新的电池。根据使用情况,电池寿命不同,一般是以 5 年为更换的标准。更换时,请务必更换为 TOYOPUC-Nano 专用的电池(TUP-6990)。更换电池应由有专业知识的维护人员 进行。锂充电电池的外观      导线 黑(−)2Pin 接插件导线 红(+)                      CPU 侧接插件   6-1 6
(2) 电池更换顺序    电池更换顺序1) 在周边装置中进行数据备份。2) 准备更换用的电池。3) 切断电源,拆下 TOYOPUC-Nano 前面的电池盖板。4) 从 TOYOPUC-Nano 中取出电池。5) 卸下电池接插件。请不要拔出导线,否则会导致故障。6) 更换新电池。按取出电池时的顺序反向装上。    (注)安装电池接插件时,请注意安装方向。    另外,不要使电池导线露到主板外面。黑 红7) 接通电源,从外围装置确认停止蓄电池报警(特殊继电器:VF0 为 OFF)。8) 关闭电源,在电池更换贴纸上记上日期。注: 更换电池(更换电池顺序 2)~8))需在关闭电源 5 分钟后再进行。 切断电源后的短暂期间,内置时钟由大容量电容器提供后备电源。由于用户程序(顺控程序与参数)、数据存储器、设备信息存储器内容(注释等)保存在停电时内 容也会被保留的非易失性存储器中,所以即使在拆去电池的状态下,存储器内容也不会消失。     6-2电池盖板
      使用锂电池时的注意事项 更换锂电池时,按使用说明书正确实施。锂电池在正常状态下用于本公司产品中时,可放心使用。备品保管时,或将使用过的电池扔掉时,会因使 用不当,使电池液体泄漏、电池发热、着火、破裂,从而对机器造成毁坏,人员受伤。 为防止事故的发生,请一定遵守以下各项。(1) 请不要将电池扔进火中。 (2) 请不要将电池放入水中。 (3) 请不要让电池沾上焊锡。 (4) 请不要加热。(5) 请不要拆开。(6) 请不要接错+和-极。 (7) 请不要加压,使之变形。 (8) 请不要强制放电。(9) 请不要充电。(10) 请不要串联或并联使用。(11) 电池要保管在避开高温、高湿场合,不要有结露。 另外,扔掉时,在注意上述各项的同时,也应注意以下几点,按照不燃物或各自治体的条例等进行处理。(1) 电池不能乱放,为防止短路,应将电池一个一个地放入塑料袋中。 (2) 电池的收装容器请使用绝缘材料。(3) 不能混入其它金属材料(钉子或铁丝等)。(4) 请勿被雨、水淋湿。(5) 不要将电池混入消防条例规定的危险物品中,或放置在危险物品附近。 (6) 不要放置在离火近的地方或高温处。• 该划掉垃圾桶标记仅在欧盟内的国家有效。• 该划掉垃圾桶标记表示在废弃电池及蓄电池时,必须与一般垃圾分别进行处理 的意思。• 在欧盟,对于使用过的电池及蓄电池,有一个分别收集系统,因此,请按照各 地区的规则,正确处理电池及蓄电池。    6-3
6.2 维护检查为保证可编程控制器的长期使用,建议您定期对其进行检查。定期检查时,请实施表 6.2.1 所示的维护检 查项目。检查时,使用检查表以防止漏检,同时对检查结果制作履历进行管理,从而有助于在下一次检查 时或发生故障时进行调查。表 6.2.1 维护检查项目  检查部位        使用年数 检查内容      判定基准          10 年以内      10 年以上           PLC                 整个 PLC         确认 PLC 有无 (1) 污垢 (2) 灰尘 (3) 结露  PLC 无(1) 污垢(2) 灰尘 (3) 结露            确认 PLC 的 LED 亮灯      正常亮灯,无熄灭的 LED          确认 PLC 机箱的破损   罩盖等无变形、破损          确认 PLC 模块的安装状态   模块的基板按照螺丝应没有松动,牢固固定      确认 PLC 的布线连接状态  端子、连接器有无脱开(应切实插入)  电源               输入电压的测量      DC24 V 电源额定电压以内      确认是否因机箱部分发热而变色  机箱顶部应没有变色   CPU              前方面板部分的开关状态      没有破损      连接器松动、端子台松动状态  无松动被锁部分仍保持为锁定状态        电池      购买后长时间(ex.5 年以上)没有 使用     I/O 模块              端子台松动   锁定应未被解除没有发生倾斜                  布线    光纤        芯线的状态   芯线没有破损是否破裂、被夹住、弯曲成半径 10 cm 以下的状态、拉扯    通信电缆   破损、破裂屏蔽层的状态端子台的破损  电缆应没有破损、压扁屏蔽线有无断线屏蔽层有无部分露出端子台有无破损  电源电缆             破损、破裂 端子台的破损      电缆应没有破损、压扁端子台有无破损   * 请根据使用年数,对所示项目实施检查。6-4
6.2.1备品的定期检查将新品作为备品保管时,其不会一直都保持为新品。尤其是电源模块,会随着时间的转移而发生变化,需 要交替使用。此外,建议您定期进行动作确认。这时,建议您从本公司 HP 处获取各模块的生产中止信息, 考虑补充备品。表 6.2.2 为备品的检查项目,表 6.2.3 为模块更换时的注意事项。 表 6.2.2 备品的检查项目   检查部位        经过年数  检查内容         判定基准         10 年以内           10 年以上                 动作确认    确认通电状态下的动作确认作业困难时,请委托本公司进行动作确认和检修 无异常 版本              确认版本不明时,请向本公司确认   支持对象设备的版本             程序数据                 备份数据能否使用   拥有对象设备的最新备份 <PCwin2 中的对应模块> TOYOPUC-Nano 系列    * 请根据经过年数,对所示项目实施检查。表 6.2.3 模块更换时的注意事项     No.         项目     1. 准备好更换模块的使用说明书     2.      备品和待更换装置的型号是否一致    3. 软件版本是否一致     4.   确保有足够放置拆下物品的空间,放置时在下面垫上布、纸以免其弄脏。     5.      拆卸时注意不要让螺丝掉落。十字螺丝刀前端最好带磁。    6. 端子台及连接器的配线要在拆除之前,进行标记管及机箱前面标志的确认。请做好记录以便恢复。(常会发生标记管、信号名称不一致的问题。还会存在无标记管的物品。)     7.   将拆下的物品和更换品依次排列,并将具有设定开关、短路针的物品摆放在一起。     8.      通过目测确认主板连接器和安装侧模块的连接器有无异常。    9.    将具有锁定机构的连接器牢牢锁定。如仍有顾虑,拆卸,然后再重新确认安装。    10. 更换后,在接通电源之前,再次检查布线、连接器等是否有误。     11.   更换 CPU 时,请先准备好备份数据。     12.      拆下的机器和模块按现状保存,以备将来再次使用。    13. 使用尺寸一致的工具。     14.   不要对布线施加蛮力。     15.      必须检查电压。此时,请注意不要因疏忽而发生短路。    16.    使用照明,在明亮环境下作业。  6-5PLC外围装置
7 规格7.1 一般规格          No.项目规格                  1电源PW2:额定 DC24 V(允许范围 DC24 V -15%/+20% (20.4 V~28.8 V)) 应使用符合以下基准的电源。IEC/EN 60950-1, EN 50178 (UL Class 2, SELV)           2耗电量PW2:30 VA 以下(输出最大负荷 7.5 A 时) (关于各模块的消耗电流,请参照各模块的规格。)           3周围温度0 - 55°C           4相对湿度10~95%(但应无结露)           5大气环境应无腐蚀性气体                   抗震频率加速度-振幅扫描次数          6         5~8.7 Hz3.5 mm10 次(1 倍频程/1 分钟)                8.7~150 Hz9.8 m/s2-                  7耐冲击(147m/s2 3方向 各3次)                  项目试验基准试验规格                      静电放电抗扰度EN 61000-4-2大气放电: ±8 [kV] 接触放电: ±4 [kV]               辐射射频电磁场抗扰度EN 61000-4-380% AM (1 kHz)80~1000 [MHz] 10 [V/m] 1.4~2.0 [GHz] 3 [V/m]                    8抗噪音性以欧洲 EMC 指令 EN 61131-2 为准(注 2)EFT/B 抗扰度EN 61000-4-4信号线: ±1 [kV] DC 电源线: ±1 [kV] 7           浪涌抗扰度EN 61000-4-5DC 电源线: DM 0.5 [kV]/ CM 0.5 [kV] I/O 电源线: DM 0.5 [kV]/ CM 0.5 [kV] DC I/O 线: CM 1.0 [kV]通信线: CM 1.0 [kV]               射频电磁场传导抗干扰性(注 1) 上述的一般规格为 TOYOPUC-Nano 共通规格。(注 2) 使装入本机的设备符合 CE 标志时,请务必设置在控制盘内。(注 3) 所谓污染程度,是指在设备的设置环境中,导电性污染(固体、液体、气体)的增加程度。污染 程度 2 是非导电性污染,以及由于结露而发生临时性导电的环境。(注 4) 所谓过电压类别,是指对设备的暂态过电压(脉冲电压)耐受性进行规定的类别。类别 II 的设备 假定由固定设备(电源插座等)供电,暂态过电压的允许值在 50 Vac/dc 以内时为 500 V,在 150 Vac 以内时为 1500 V,在 300 Vac 以内时为 2500 V。7-1EN 61000-4-610 V0.15~80 [MHz] 80% AM (1 kHz)               工频磁场抗扰度试验EN 61000-4-830 [A/m] 50 [Hz], 60 [Hz]               辐射发射的测量CISPR 16-2-310 m 法30~230 [MHz] 40 dB[μV/m] 230~1000 [MHz] 47 dB[μV/m]               9绝缘耐压AC1500 V 1 分钟(AC 外部端子 – 地线之间) DC500 V 1 分钟(DC 外部端子 – 地线之间)           10绝缘电阻DC100 V 10 MΩ以上(外部端子 – 地线之间)           11瞬时停电PW2:瞬时停电容许时间 10 ms 以下、瞬时停电间隔 1 s 以上           12污染程度污染程度 2 以下 符合 IEC 61131-2(注 2)           13过电压类别类别 II 以下 符合 IEC 61131-2(注 3)           14使用标高2000 m 以下           15设置位置设置在控制盘内           16海外基准请从本公司 HP 海外基准对应页面中确认最新的状况。 URL:http://www.jtekt.co.jp/products/toyopuc/csa.html       
7.2 CPU模块规格 7.2.1 基本规格7.2.2 性能规格     No.  项目   规格     1     消耗电流    1220 mA    2 外形尺寸(W × H × D) 55 × 100 × 121 (mm) (TOYOPUC-Nano 标准 2 插槽尺寸)     3   重量   195 g      No.     项目    规格    1 程序模式 存储程序模式参数设定的事件监控器功能     2  程序控制模式   循环演算模式、定期中断功能     3     程序语言    SFC, LD, FBD, ST    4 输入输出控制模式 图像寄存器模式     5  基本指令处理速度   基本指令 0.96 ns/1 指令(最快)     6     基本指令    20 种    7    定时器、计数器指令  23 种    8 应用指令 700 种以上 数据形式:BIN、BCD、带符号 BIN 浮点(单精度、双精度) 容量:字节、文字、双文字     9     变址寄存器    有    10 程序容量 程序库容量 全部加起来 540 K 字(程序 + FB 程序库 + 标准程序库 + 用户程序库)     11     存储器备用电源    通过非易失性存储器(闪存、MRAM、FRAM)进行备份    12 时钟功能 有(超级电容器可备用 10 天,并可在选项中追加电池)     13  外部输入输出点数   4096 点     14     内部输出点数    86016点(4096点 ×3+8192点 +65536点)    15    保持继电器点数  6400点(768点 ×3+4096点)    16 定时器功能 计数器功能 0.1~6553.5 秒/0.01~655.35 秒 0.001~65.535秒/1~65535秒 合计9728点1~65535 (2560 点 × 3 + 2048 点)     17  链路继电器点数   38912 点(10240 点 × 3 + 8192 点)     18     起动·停止检查    11776点(2560点 ×3+4096点)    19 数据寄存器 164 KW(12 KW × 3 + 128 KW) 扩展缓冲寄存器:256 KW 可直接指定 闪存寄存器:4 Mbyte, 闪存存储器(读取专用) 可以以 64 Kbyte 为单位写入     20  链接寄存器   6 KW/16 Bit(2 KW × 3)     21     设备情报存储器    8 Mbyte    22  特殊模块安装个数 通信(链接)模块 MAX24 链接 消耗存储器无个数限制 7-2
7.2.3 内置通信规格     通信端口   通信功能        内置以太网 1(L1)    Ethernet     内置以太网 2(L2)   Ethernet     内置串行 1(L3)   PC-LINK / CMP-LINK / MODBUS / SIO / SN-I/F(选择式)     内置串行 2(L4)      PC-LINK / CMP-LINK / MODBUS / SIO(选择式)    周边装置用 USB 端口 USB Full Speed: 12 Mbps(固定)     USB 存储器端口      USB:High Speed: 480 Mbps、Full Speed: 12 Mbps(自动识别)    增设总线(I/O BUS) EtherCAT 基板的独自通信标准(不可将通常的 EtherCAT 产品连接到增设总线上) Ver. 1.00 以后对应     扩展总线(BUS-EX)      USB:High Speed: 480 Mbps (预定在 Ver. 1.10 以后对应)  7.2.4 I/O总线规格     No.  项目   规格     1     增设电缆长度    机架间 最大 100 m(Cat.5E STP LAN 电缆)    2    机架数量  CPU机架 1台,增设机架 7台(合计 8台)    3 模块数量 CPU 机架(机架 No.0): 最大 7 个 增设机架(机架 No.1~7): 各机架最大 8 个 合计:63 个     4  通信链接数量   最大 24 个链接     5  1 插槽的最大 I/O 点数   64 点     6     I/O 点数    最大 4096 点    7    空插槽  可    8    空插槽的点数设定   默认 32 点(0~64 点)  7.2.5 与周边装置功能的对应     功能   对应     事件监控器      可使用    强制 ON/OFF 可使用     扫描单位追踪      可使用    维护支持    可使用    I/O 记录仪 可使用     测试模式      可使用    生产指示功能    可使用  7-3
7.3 电源模块的规格 7.3.1 性能规格    No.   项目   规格    1     输入电压     DC24 V -15%/+20% (20.4 V~28.8 V)    2 耗电量 30 VA 以下    3   冲击电流   2.5 A 以下    4   额定输出电压   DC3.3 V    5     最大输出电流     7.5 A    6   过电流保护   7.875 A 以上    7 效率 80% (typ)    8     RUN 继电器额定电压/电流     DC24 V / 1 A (max)    9   RUN 继电器输出浪涌抑制 器   C·R (0.01 uF+100 Ω)    10 外形尺寸(W × H × D) 27 × 121 × 100 (mm)(不含突起物)    11     重量     145 g  7.3.2 功能规格    No.   项目   规格    1     断电报警     电源断开时,熄灭 PWR LED。    2 输入电压测量 通过 PWR LED 来表示输入电压。输入电压大于 31.2 V 时亮红灯,31.2 V~28.8 V 或低 于 20.4 V 时亮橙灯,28.8 V~20.4 V 时亮绿灯。    3   输入电流测量   测量输入电流,并保存在特殊寄存器 S033 中。    4   周围温度测量   测量周围温度,并保存在特殊寄存器 S034 中。    5     模块寿命诊断     根据周围温度来诊断模块寿命,模块寿命下降到剩余 30%时,将点亮橙色的 STATUS LED    6 事件日志功能 将电源 ON 时间、电源 OFF 时间、发生电压暂降检出等事件时的日志等保存在内部存储 器中。    7   定期日志功能   将每个小时的输入电压、备用电压、输入电流、周围温度的日志保存在内部存储器中。    8     通电时间     将通电时间的日志保存在内部存储器中。  7-4。
7.4 输入模块规格 7.4.1 性能规格 I-12 (TUK-1006)      名称    规格   DC24 V 数字输入模块   I-12(识别代码:07 h)       线路数    16 点    绝缘方式 光电耦合器绝缘     额定输入电压   DC24 V     额定输入电流      5 mA    使用电压范围 DC18~28.8 V     ON 电压/ON 电流   16.8 V 以下/3.5 mA 以下     OFF 电压/OFF 电流      7.2 V 以上/1.5 mA 以上    输入电阻 约 5 kΩ     响应时间        OFF → ON   1 ms~8 ms(可用 1 ms 单位,在每 8 点上进行设定) 初始值 8 ms    ON → OFF    内部消耗电流      33 mA    公用方式    8 点 1 个公用    动作显示    ON 时 LED 亮灯    极性 无极性(正极公用、负极公用均可使用)     外部连接方法   20 针无螺丝端子台 1 个(端子台附属于模块) 型号:DFMC1,5/10-ST-3,5-LR(菲尼克斯电气)     重量      100 g            外部连接&内部框图           001 2345 67C1 C1 89 AB CD EF C2 C2         内部线路          C1        DC24 V8          F        C2         DC24 V7                                    光电耦合器CPU 方向                  7-5接插件针排列~~
 I-22 (TUK-6948)      名称    规格   DC24 V 输入模块   I-22(识别代码:00 h)     线路数   32 点     绝缘方式      光电耦合器绝缘    额定输入电压 DC24 V     额定输入电流   5 mA     使用电压范围      DC18~28.8 V    ON 电压/ON 电流 16.8 V 以下/3.5 mA 以下     OFF 电压/OFF 电流   7.2 V 以上/1.5 mA 以上     输入电阻   约 5 kΩ     响应时间        OFF → ON 1 ms~8 ms(可用 1 ms 单位,在每 8 点上进行设定) 初始值 8 ms      ON → OFF    内部消耗电流   95 mA     公用方式   8 点 1 个公用     动作显示      ON 时 LED 亮灯    极性 无极性(正极公用、负极公用均可使用)     外部连接方法   40 针无螺丝端子台 1 个(端子台附属于模块) 型号:DFMC1,5/20-ST-3,5-LR(菲尼克斯电气)     重量      120 g                   7外部连接&内部框图    001 234567C1 C1 89 AB CD EF C2 C2 10 11 12 13 14 15 16 17 C3 C3 18 19 1A 1B 1C 1D 1E 1F C4 C4         内部线路                                   DC24 V10                          DC24 VC1 DC24 V8      C2F         17      C3 DC24 V18      1F      C4                                       光电耦合器 CPU 方向                                                   7-6接插件针排列~~~~
  SW (TUK-6965) 名称开关输入模块 SW(识别代码:07h)规格 线路数响应时间内部消耗电流 质量<功能>OFF→ON ON→OFF16 点10ms以下 注1) 10ms以下 注1) 30 mA100 g开关 No.开关 No.模块前面开关的 ON/OFF 状态可以作为直接输入信息放入本模 块指定的地址。地址0 X00 2 X024 X04 6 X068 X08 A X0AC X0C E X0E地址1 X01 3 X035 X05 7 X079 X09 B X0BD X0D F X0F注 1) 注 2)基于周边装置的应答速度的设定,请设定为初始值的“8 ms”。 各输入开关为减少误操作,拉杆的突出部分都控制在最小必要限度内,并不是产品不良。另外,各输入开关中并没有锁定机构,因此,请注意避免错误地操作相邻的开关。功能与开关配置图7-7
7.5 输出模块规格 7.5.1 O-19 (TUK-1009) 性能规格      名称    规格   晶体管输出模块(+)COM   O-19(识别代码:0 Bh)       线路数    16 点    绝缘方式 光电耦合器绝缘     额定负荷电压   DC12 V/24 V     使用负荷电压范围      DC10~28.8 V    最大负荷电流 1.0 A/点、4 A/COM     OFF 时泄漏电流   0.1 mA 以下     ON 时最大电压下降   1.5 V 以下     响应时间        OFF → ON   1 ms 以下    ON → OFF   1 ms 以下  内部消耗电流   134 mA     外部供给电源      DC12/24 V    电涌抑制器    公共端子-输出之间齐纳二极管    过电流保护 2 A(通过热敏开关 FET 保护) 注 1)(在使输出为 OFF 之前,保持保护状态,并通过输出为 ON 进行复原)     短路诊断功能      有(详细内容请参照 7.8 短路诊断功能)    公用方式    8 点 1 个公共端子(C1:0~7 用公共端子,C2:8~F 用公共端子) 注 2)    公共端子保险丝额定 4 A/COM(用于印刷电路板烧损保护,所以不可更换)     动作显示      ON 时 LED 亮灯    外部连接方法 20 针无螺丝端子台 1 个(附属于模块) 型号:DFMC1,5/10-ST-3,5-LR(菲尼克斯电气)     重量      100 g  注 1)注 2)每个输出点的过电流保护虽然是 2 A,但每个公共端子的电流瞬间超过 5 A 时,公共端子上的保 险丝有时会先于通过热敏开关 FET 进行的过电流保护而发挥作用。保险丝工作时,请更换模块。保险丝工作时,I/O 电源状态监视器的相关位数将变为 OFF(详细内容请参照 7.7 I/O 电源状态 监视器功能)。过电流保护动作时,有可能是外部配线发生短路,或负载容量超出了额定值,因 此,请在确认连接设备及配线等之后,再进行复位。公共端子 C1 作为交叉布线用途,端子准备了 2 个引脚。交叉布线时,各公共端子的输入电流请 设定在 4 A 以下。7-8
     外部连接&内部框图                 0 23 45 67C1 C1 89 AB CD EFC2 PW1                 保险丝07 保险丝 C28 FPWC1+−                    内部线路 输出控制短路诊断       热敏开关FET       光电耦合器                              L                     L      注 3) +−                           L            L                      注 3) 使用其他电源时,请勿对公共端子间进行短接。7-9接插件针排列
7.5.2O-18 (TUK-1008) ※开发中      名称    规格   晶体管输出模块( −)COM   O-18(识别代码:0 Ah)     线路数      16 点    绝缘方式 光电耦合器绝缘     额定负荷电压   DC12 V/24 V     使用负荷电压范围   DC10~28.8 V     最大负荷电流      1.0 A/点、4 A/COM    OFF 时泄漏电流 0.1 mA 以下     ON 时最大电压下降   1.5 V 以下   响应时间        OFF → ON     1 ms 以下    ON → OFF   1 ms 以下  内部消耗电流   134 mA     外部供给电源      DC12/24 V    电涌抑制器    公共端子-输出之间齐纳二极管    过电流保护 2 A(通过热敏开关 FET 保护) 注 1)(在使输出为 OFF 之前,保持保护状态,并通过输出为 ON 进行复原)     短路诊断功能   有(详细内容请参照 7.8 短路诊断功能)     公用方式      8 点 1 个公共端子(C1:0~7 用公共端子,C2:8~F 用公共端子) 注 2)    公共端子保险丝额定 4 A/COM(用于印刷电路板烧损保护,所以不可更换)     动作显示      ON 时 LED 亮灯    外部连接方法 20 针无螺丝端子台 1 个(附属于模块) 型号:DFMC1,5/10-ST-3,5-LR(菲尼克斯电气)     重量      100 g  注 1)注 2)每个输出点的过电流保护虽然是 2 A,但每个公共端子的电流瞬间超过 5 A 时,公共端子上的保 险丝有时会先于通过热敏开关 FET 进行的过电流保护而发挥作用。保险丝工作时,请更换模块。保险丝工作时,I/O 电源状态监视器的相关位数将变为 OFF(详细内容请参照 7.7 I/O 电源状态监视器功能)。过电流保护动作时,有可能是外部配线发生短路,或负载容量超出了额定值,因 此,请在确认连接设备及配线等之后,再进行复位。公共端子 C1 作为交叉布线用途,端子准备了 2 个引脚。交叉布线时,各公共端子的输入电流请 设定在 4 A 以下。     (暂定)外部连接&内部方框图                  01 2345 67C1 P1 89 AB CD EF C2 P2                内部线路 短路诊断输出控制      光电耦合器P107         L                热敏开关FET                       L        保险丝F C2−C1 P2              −+ 8        L          L       保险丝               +                       7-10接插件针排列
7.5.3O-29 (TUK-6947)      名称    规格   晶体管输出模块(+)COM   O-29(识别代码:09 h)     线路数   32 点     绝缘方式   光电耦合器绝缘     额定负荷电压      DC12 V/24 V    使用负荷电压范围 DC10~28.8 V     最大负荷电流   0.5 A/点、2 A/COM     OFF 时泄漏电流      0.1 mA 以下    ON 时最大电压下降 1.5 V 以下   响应时间         OFF → ON   1 ms 以下     ON → OFF      1 ms 以下    内部消耗电流 263 mA     外部供给电源      DC12/24 V    电涌抑制器    C-E 间齐纳二极管    过电流保护 2 A(通过热敏开关 FET 保护) 注 1)(在使输出为 OFF 之前,保持保护状态,并通过输出为 ON 进行复原)     短路诊断功能   有(详细内容请参照 7.8 短路诊断功能)     公用方式      8 点 1 个公用    公共端子保险丝额定 4 A/COM(用于印刷电路板烧损保护,所以不可更换)     动作显示      ON 时 LED 亮灯    外部连接方法 40 针无螺丝端子台 1 个(附属于模块) 型号:DFMC1,5/20-ST-3,5-LR(菲尼克斯电气)     重量    200 g 注 1)注 2)每个输出点的过电流保护虽然是 2 A,但每个公共端子的电流瞬间超过 5 A 时,公共端子上的保 险丝有时会先于通过热敏开关 FET 进行的过电流保护而发挥作用。保险丝工作时,请更换模块。 保险丝工作时,I/O 电源状态监视器的相关位数将变为 OFF(详细内容请参照 7.7 I/O 电源状态 监视器功能)。过电流保护动作时,有可能是外部配线发生短路,或负载容量超出了额定值,因 此,请在确认连接设备及配线等之后,再进行复位。公共端子 C1~C3 作为交叉布线用途,端子准备了 2 个引脚。但是,交叉布线时的合计电流请设 定在 4 A 以下。7-11
     外部连接&内部框图                  01 234567C1 C1 89      A CD EFC2 C2 10 11 12 13 14 15 16 17 C3 C3 18 19 1A 1B 1C 1D 1E 1F C4 PWB                    保险丝07C                    内部线路光电耦合器输出控制短路诊断1     +−  热敏开关FET                                  L                     L         注 3) 18 + −  保险丝 C 4                     L         1F PW    L                                    注 3) 使用其他电源时,请勿对公共端子间进行短接。7-12接插件针排列
7.5.4O-28 (TUK-1010) ※开发中      名称    规格   晶体管输出模块(−)COM   O-28(识别代码:08 h)     线路数      32 点    绝缘方式 光电耦合器绝缘     额定负荷电压   DC12 V/24 V     使用负荷电压范围   DC10~28.8 V     最大负荷电流      0.5 A/点、2 A/COM    OFF 时泄漏电流 0.1 mA 以下     ON 时最大电压下降   1.5 V 以下   响应时间        OFF → ON     1 ms 以下    ON → OFF   1 ms 以下    内部消耗电流 244 mA     外部供给电源   DC12/24 V     电涌抑制器      C-E 间齐纳二极管    过电流保护 2 A(通过热敏开关 FET 保护) 注 1)(在使输出为 OFF 之前,保持保护状态,并通过输出为 ON 进行复原)     短路诊断功能   有(详细内容请参照 7.8 短路诊断功能)     公用方式      8 点 1 个公用    公共端子保险丝额定 3.2 A/COM(用于印刷电路板烧损保护,所以不可更换)     动作显示      ON 时 LED 亮灯    外部连接方法 40 针无螺丝端子台 1 个(附属于模块) 型号:DFMC1,5/20-ST-3,5-LR(菲尼克斯电气)     重量      120 g  注 1)注 2)每个输出点的过电流保护虽然是 2 A,但每个公共端子的电流瞬间超过 5 A 时,公共端子上的保 险丝有时会先于通过热敏开关 FET 进行的过电流保护而发挥作用。保险丝工作时,请更换模块。 保险丝工作时,I/O 电源状态监视器的相关位数将变为 OFF(详细内容请参照 7.7 I/O 电源状态 监视器功能)。过电流保护动作时,有可能是外部配线发生短路,或负载容量超出了额定值,因 此,请在确认连接设备及配线等之后,再进行复位。公共端子 C1~C3 作为交叉布线用途,端子准备了 2 个引脚。但是,交叉布线时的合计电流请设 定在 4 A 以下。7-13
     (暂定)外部连接&内部方框图                  01 234567 C1 P1 89      A CD EFC2 P2 10 11 12 13 14 15 16 17 C3 P3 18 19 1A 1B 1C 1D 1E 1FC4 P4B                             内部线路 短路诊断输出控制      光电耦合器FETP107           L               热敏开关                      L         保险丝1F C4−+C1 P4                −+ 18        L           L        保险丝                                      7-14接插件针排列
7.5.5O-12 (TUK-1007)      名称    规格   继电器接点输出模块   O-12(识别代码:0 Ch)     线路数   16 点     绝缘方式      继电器绝缘    额定开关电压额定开关电流 DC24 V 2 A/点、5 A/COM     最小开关负荷      DC5 V 10 mA    最大开闭负载 DC30 V   响应时间        OFF → ON   13 ms 以下(DC 24 V 时)    ON → OFF     13 ms 以下(DC 24 V 时)    继电器寿命 电动的: 电阻负荷感应负载 20 万次以上机械性: 2000 万回以上     最大开关频率   ON 时:1 秒以上 OFF 时:1 秒以上     电涌抑制器   无     内部消耗电流   630 mA     公用方式      8 点 1 个公用    公共端子保险丝额定 6.3 A/COM(用于印刷电路板烧损保护,所以不可更换)     动作显示      ON 时 LED 亮灯    外部连接方法 20 针无螺丝端子台 1 个(附属于模块) 型号:DFMC1,5/10-ST-3,5-LR(菲尼克斯电气)     重量    150 g 注 1)注 2) 注 3)保险丝工作时,I/O 电源状态监视器的相关位数将变为 OFF(详细内容请参照 7.7 I/O 电源状态 监视器功能)。保险丝是不可更换型的,所以请更换模块。进行感应负载开闭时,请使用二极管以用于电涌抑制器。 不使用保险丝熔断功能时,不需进行 P1、P2 的连接。     外部连接&内部框图                  01 2345 67C1 P1 89 AB CD EF C2 P2                   内部线路输出控制短路诊断0 L            ・ ・7             L       C1DC24 VP1                保险丝  保险丝熔断检测 光电耦合器               CPU方向 8C2P2 DC24 V  L      F  L                                  7-15接插件针排列~~
7.6 输入输出模块规格 7.6.1 IO-329 (TUK-6952) 基本规格7.6.1.1 输入  性能规格    No.     项目     规格    1   内部消耗电流   270 mA    2 动作显示 ON 时 LED 亮灯(输入 16 点,输出 16 点合计)32 点依次用开关切换显示    3     外部连接方法     富士通 FCN-360 型 40 针矩形连接器    4    重量   150 g       No.   项目  规格     1   线路数  32 点     2      绝缘方式    光电耦合器绝缘   3    额定输入电压   DC24 V   4 额定输入电流 5 mA     5   使用电压范围  DC18~28.8 V     6      ON 电压/ON 电流    16.8 V 以下/3.5 mA 以下   7 OFF 电压/OFF 电流 7.2 V 以上/1.5 mA 以上     8      输入电阻  约 5 kΩ   9     响应时间      OFF → ON 1-8 ms(可用 1 ms 单位,在每 8 点上进行设定)       ON → OFF        10 公用方式  16 点公用 1 个(COM1, COM3)     11      极性    负公共端子   12    引脚   X00~X0F (COM1), X20~X2F (COM3)   13    同时 ON 点数(24 V 时)   13 点/COM   X000X00F COM1X020X02F COM3+− DC24 V                         +       − DC24 V光电耦合器光电耦合器                                   7-16
7.6.1.2 输出  性能规格     No      项目     规格    1 线路数 32 点     2   绝缘方式   光电耦合器绝缘     3      输出模式     FET 开路漏极输出    4 额定负荷电压 DC24 V     5   使用负荷电压范围   DC21.6~28.8 V     6      最大负荷电流     0.3 A/点 2 A /COM    7 OFF 时泄漏电流 0.1 mA 以下     8      ON 时最大电压下降   1.5 V 以下  9     响应时间     OFF → ON     1 ms 以下     ON → OFF   1 ms 以下     10 电涌抑制器    C-E 间齐纳二极管     11      公用方式     16 点 1 公用(COM2, COM4)    12 公共端子 保险丝额定 4 A /COM 用于模块烧损保护,所以不可更换     13   极性   正公共端子     14      引脚     Y10~Y1F (COM2, PWR2), Y30~Y3F (COM4, PWR4)    15    短路诊断功能   有(详细内容请参照 7.8 短路诊断功能)    16    过电流保护   2 A(通过热敏开关 FET 保护) 注 1)(在使输出为 OFF 之前,保持保护状态,并通过输出为 ON 进行复原)  注 1)每个输出点的过电流保护虽然是 2 A,但每个公共端子的电流瞬间超过 5 A 时,公共端子上的保 险丝有时会先于通过热敏开关 FET 进行的过电流保护而发挥作用。保险丝工作时,请更换模块。保险丝熔断时,I/O 电源状态监视器的相关位数将变为 OFF(详细内容请参照 7.7 I/O 电源状态监视器功能)。过电流保护动作时,有可能是外部配线发生短路,或负载容量超出了额定值,因 此,请在确认连接设备及配线等之后,再进行复位。     保险丝COM 2Y010Y0 1FPWR2 COM 4+− LY03F                         内部线路输出控制短路诊断 热敏开关FET+− L                                  L       光电耦合器                         Y030                    L    PWR4  7-17
7.6.1.3 针排列     针排列   0~1F(正面左侧接插件)     20~3F(正面右侧接插件)                                从模块正面看时                针号码        信号名称      针号码   信号名称      针号码       信号名称     针号码     信号名称    A1     COM2 (+24 V)    B1  PWR2 (0 V)   A1     COM4 (+24 V)   B1   空白    A2  COM2 (+24 V) B2COM1 (0 V)  A2  COM4 (+24 V) B2 COM3 PWR4 (0 V)     A3     COM2 (+24 V)   B3 空白     A3    COM4 (+24 V)   B3   空白     A4     COM2 (+24 V)   B4 空白     A4    COM4 (+24 V)   B4   空白     A5     Y1F   B5 X0F     A5    Y3F   B5   X2F     A6     Y1E   B6 X0E     A6    Y3E   B6   X2E     A7        Y1D      B7   X0D      A7       Y3D     B7     X2D    A8  Y1C B8X0C  A8  Y3C B8 X2C     A9     Y1B   B9 X0B     A9    Y3B   B9   X2B     A10        Y1A      B10   X0A      A10       Y3A     B10     X2A    A11  Y19 B11X09  A11  Y39 B11 X29     A12     Y18   B12 X08     A12    Y38   B12   X28     A13        Y17      B13   X07      A13       Y37     B13     X27    A14  Y16 B14X06  A14  Y36 B14 X26     A15     Y15   B15 X05     A15    Y35   B15   X25     A16        Y14      B16   X04      A16       Y34     B16     X24    A17  Y13 B17X03  A17  Y33 B17 X23     A18     Y12   B18 X02     A18    Y32   B18   X22     A19        Y11      B19   X01      A19       Y31     B19     X21   A20  Y10  B20 X00  A20  Y30 B20  X20 关于公共端子,COM2 为 Y10-1F,COM1 为 X00-0F,COM4 为 Y30-3F,COM3、PWR4 为 X20-2F 的 公共端子及 Y30-3F 的 POWER 端子(0 V)。PWR2 是 Y10-1F 的 POWER 端子(0 V)。作为外部连接用连接器,可使用下述连接器。引脚配置与 PC10 系列的输入输出模块 I/O-329G (THK-6410) 相比,虽然在 20-3F 的 A3、A4 中追加了 COM4 (24 V),但用以往的配线仍然会动作。以往配线时,30-3F 的电流规格为 0.05 A/点 0.8 A/COM。     生产商      型号     规格    富士通元件株式会社    FCN-367J040-AU/FW   40 针方形连接器压接用  7-18
7.6.2 IO-328 (TUK-1005)※开发中 基本规格7.6.2.1 输入  性能规格     No.   项目   规格     1      内部消耗电流     270 mA    2 动作显示 ON 时 LED 亮灯(输入 16 点,输出 16 点合计)32 点依次用开关切换显示     3   外部连接方法   富士通 FCN-360 型 40 针矩形连接器     4    重量    150 g     No.   项目   规格    1   线路数   32 点    2     绝缘方式     光电耦合器绝缘    3 额定输入电压 DC24 V    4   额定输入电流   5 mA    5     使用电压范围     DC18~28.8 V    6   ON 电压/ON 电流   16.8 V 以下/3.5 mA 以下    7 OFF 电压/OFF 电流 7.2 V 以上/1.5 mA 以上    8     输入电阻   约 5 kΩ    9     响应时间      OFF → ON 1-8 ms(可用 1 ms 单位,在每 8 点上进行设定)       ON → OFF       10 公用方式   16 点公用 1 个(COM1, COM3)    11   极性   正公共端子    12     引脚     X00~X0F (COM1), X20~X2F (COM3)    13   同时 ON 点数(24 V 时)   13 点/COM                            −         + DC24 VX000 X00FCOM1+X020 X02F光电耦合器光电耦合器                        COM3+ DC24 V    −         +  7-19
7.6.2.2 输出  性能规格     No.   项目   规格     1   线路数   32 点     2      绝缘方式     光电耦合器绝缘    3    输出模式   FET 开路漏极输出    4 额定负荷电压 DC24 V     5   使用负荷电压范围   DC21.6~26.4 V     6      最大负荷电流     0.3 A/点 2 A /COM    7 OFF 时泄漏电流 0.1 mA 以下     8      ON 时最大电压下降   1.5 V 以下  9     响应时间     OFF → ON     1 ms 以下     ON → OFF   1 ms 以下        10 电涌抑制器 C-E 间齐纳二极管     11   公用方式   16 点 1 公用(COM2, COM4)     12      公共端子 保险丝额定     4 A /COM 用于模块烧损保护,所以不可更换    13 极性 负公共端子     14   引脚   Y10~Y1F (COM2, PWR2), Y30~Y3F (COM4, PWR4)     15      短路诊断功能     有(详细内容请参照 7.8 短路诊断功能)    16    过电流保护   2 A(通过热敏开关 FET 保护) 注 1)(在使输出为 OFF 之前,保持保护状态,并通过输出为 ON 进行复原)  注 1)每个输出点的过电流保护虽然是 2 A,但每个公共端子的电流瞬间超过 5 A 时,公共端子上的保 险丝有时会先于通过热敏开关 FET 进行的过电流保护而发挥作用。保险丝工作时,请更换模块。保险丝熔断时,I/O 电源状态监视器的相关位数将变为 OFF(详细内容请参照 7.7 I/O 电源状态监视器功能)。过电流保护动作时,有可能是外部配线发生短路,或负载容量超出了额定值,因此,请在确认连接设备及配线等之后,再进行复位。PWR2Y010Y01FCOM2−+ PWR4Y030Y03F COM4                 内部线路 短路诊断输出控制光电耦合器             L                   L               热敏开关FET                          保险丝                           L             L              −+  7-20
7.6.2.3针脚阵列(暂定)     针排列   0~1F(正面左侧接插件)     20~3F(正面右侧接插件)                                  从模块正面看时               针号码        信号名称      针号码   信号名称      针号码       信号名称     针号码     信号名称    A1  COM2 (0 V) B1PWR2 (24 V)  A1  COM4 (0 V) B1 PWR4 (24 V)     A2     COM2 (0 V)   B2 COM1 (24 V)     A2    COM4 (0 V)   B2   COM3 (24 V)     A3        COM2 (0 V)      B3   空白      A3       COM4 (0 V)     B3     空白    A4  COM2 (0 V) B4空白  A4  COM4 (0 V) B4 空白     A5     Y1F   B5 X0F     A5    Y3F   B5   X2F     A6        Y1E      B6   X0E      A6       Y3E     B6     X2E    A7  Y1D B7X0D  A7  Y3D B7 X2D     A8     Y1C   B8 X0C     A8    Y3C   B8   X2C     A9        Y1B      B9   X0B      A9       Y3B     B9     X2B    A10  Y1A B10X0A  A10  Y3A B10 X2A     A11     Y19   B11 X09     A11    Y39   B11   X29     A12        Y18      B12   X08      A12       Y38     B12     X28    A13  Y17 B13X07  A13  Y37 B13 X27     A14     Y16   B14 X06     A14    Y36   B14   X26     A15        Y15      B15   X05      A15       Y35     B15     X25    A16  Y14 B16X04  A16  Y34 B16 X24     A17     Y13   B17 X03     A17    Y33   B17   X23     A18        Y12      B18   X02      A18       Y32     B18     X22    A19  Y11 B19X01  A19  Y31 B19 X21     A20      Y10      B20   X00      A20     Y30      B20     X20  关于公共端子,COM2 为 Y10-1F,COM1 为 X00-0F,COM4 为 Y30-3F,COM3、PWR4 为 X20-2F 的 公共端子及 Y30-3F 的 POWER 端子(0 V)。PWR2 是 Y10-1F 的 POWER 端子(0 V)。作为外部连接用连接器,可使用下述连接器。引脚配置与 PC10 系列的输入输出模块 IO-329G (THK-6410) 相比,虽然在 20-3F 的 A3、A4 中追加了 COM4 (24 V),但用以往的配线仍然会动作。以往配线时,30-3F 的电流规格为 0.05 A/点 0.8 A/COM。     生产商   型号   规格     富士通元件株式会社    FCN-367J040-AU/FW    40 针方形连接器压接用 7-21
7.7 I/O电源状态监视器功能输出模块(O-29, O-28, O-12, O-18, O-19)、输入输出模块(IO-329, IO-328)每输出 8 点,I/O 电源状 态就会保存在表 7.7.1 的地址内。另外,各 Bit 的详细内容请参照表 7.7.2。如果在 I/O 电源中输入 24 V,则会在对象 Bit 中记录下“1”。表 7.7.1 I/O 电源状态地址(寄存器)             地址I/O 电源状态信息地址1内容                  支架号H (F~8) L (7~0)支架号H (F~8)L (7~0)                                              GS1D10 0 GS1D11 GS1D12 GS1D13 GS1D14 GS1D15 GS1D16 GS1D17Slot 1 Slot 0GS1D30Slot 1Slot 0                  Slot 3 Slot 2GS1D31Slot 3Slot 2                  Slot 5 Slot 4GS1D32Slot 5Slot 4                  Slot 7 Slot 6GS1D33Slot 7Slot 6                  Slot 9 Slot 8GS1D34Slot 9Slot 8                  Slot B Slot AGS1D35Slot BSlot A                  Slot D Slot CGS1D36Slot DSlot C                  Slot F Slot EGS1D37Slot FSlot E                        GS1D50 2 GS1D51 GS1D52 GS1D53 GS1D54 GS1D55 GS1D56 GS1D57Slot 1 Slot 0GS1D703Slot 1Slot 0                  Slot 3 Slot 2GS1D71Slot 3Slot 2                  Slot 5 Slot 4GS1D72Slot 5Slot 4                  Slot 7 Slot 6GS1D73Slot 7Slot 6                  Slot 9 Slot 8GS1D74Slot 9Slot 8                  Slot B Slot AGS1D75Slot BSlot A                  Slot D Slot CGS1D76Slot DSlot C                  Slot F Slot EGS1D77Slot FSlot E                        GS1D90 4 GS1D91 GS1D92 GS1D93 GS1D94 GS1D95 GS1D96 GS1D97Slot 1 Slot 0GS1DB05Slot 1Slot 0                  Slot 3 Slot 2GS1DB1Slot 3Slot 2                  Slot 5 Slot 4GS1DB2Slot 5Slot 4                  Slot 7 Slot 6GS1DB3Slot 7Slot 6                  Slot 9 Slot 8GS1DB4Slot 9Slot 8                  Slot B Slot AGS1DB5Slot BSlot A                  Slot D Slot CGS1DB6Slot DSlot C                  Slot F Slot EGS1DB7Slot FSlot E                        GS1DD0 6 GS1DD1 GS1DD2 GS1DD3 GS1DD4 GS1DD5 GS1DD6 GS1DD7Slot 1 Slot 0GS1DF07Slot 1Slot 0                  Slot 3 Slot 2GS1DF1Slot 3Slot 2                  Slot 5 Slot 4GS1DF2Slot 5Slot 4                  Slot 7 Slot 6Slot B Slot AGS1DF3Slot 7Slot 6                  Slot 9 Slot 8GS1DF4Slot 9Slot 8                    GS1DF5Slot BSlot A                    Slot D Slot CGS1DF6Slot DSlot C                    Slot F Slot EGS1DF7Slot FSlot E                   表 7.7.2 I/O 电源状态地址(bit)     Bit 7 / F    Bit 6 / E Bit 5 / D    Bit 4 / C Bit 3 / B   Bit 2 / A  Bit 1 / 9     Bit 0 / 8  GS1D***      Y38-3F          Y30-37  Y28-2F           Y20-27  Y18-Y1F       Y10-Y17       Y08-0F        Y00-07 7-22
各输出、输入输出模块的例子如下所示。(以各公共端子的电源状态来表示。) 16 点输出模块(O-18, O-19)的例子(安装在机架 0、插槽 1 中)32 点输出模块(O-28, O-29)的例子(安装在机架 1、插槽 2 中)64 点输入输出模块(IO-329, IO-328)的例子(安装在机架 7、插槽 F 中)I/O 电源状态监视器功能的对应 Ver.如下所示。 输出、输入输出模块 Ver.1.40 以上CPU Ver1.30 以上SL Ver1.10 以上周边装置 PCwin2 Ver. 1.2R03 以上* O-29是从Ver.1.40B开始硬件变更的,所以不能从Ver.1.30以下开始进行版本升级(软件更新)。       Bit7         Bit6         Bit5     Bit4         Bit3     Bit2         Bit1     Bit0       GS1D10H  -    -   -   -  -   -  Y08-0F (C2)   Y00-07 (C1)          Bit7          Bit6           Bit5      Bit4       Bit3         Bit2       Bit1          Bit0    GS1D31L  -    -    -  -   Y18-1F (C4)   Y10-1F (C3)   Y08-0F (C2)    Y00-07 (C1)          Bit7      Bit6   Bit5    Bit4  Bit3    Bit2  Bit1    Bit0  GS1DF7H  Y30-3F (C4)    Y30-3F (C4)   -   -  Y10-1F (C2)   Y10-1F (C2)  -   -    7-23
7.8短路诊断功能输出模块(但是,O-12 除外)、输入输出模块的输出中,具有以下的短路诊断功能。• 输出为 ON 时,检出接地故障引起的过电流的功能• 输出为 OFF 时,检出 I/O 电源和有无短路的功能检出有短路时,记录到表 7.8.1 中记载的寄存器中。 检出短路后,结果将被保留(锁存)。清除短路诊断的结果时,请解除短路状态,并在将 I/O 电源置于OFF 后,再进行短路诊断结果重置(参照 7.8.1)或 CPU 重置。短路诊断功能的对应 Ver.如下所示。输出、输入输出模块 Ver.1.40 以上(O-29 为 Ver.1.40B 以上) CPU Ver1.30 以上SL Ver1.10 以上周边装置 PCwin2 Ver. 1.2R03 以上* O-29是从Ver.1.40B开始硬件变更的,所以不能从Ver.1.30以下开始进行版本升级(软件更新)。 7.8.1 设定方法从 PCwin2 的 I/O 模块设定中选择输出模块(O-18, O-19, O-28, O-29 中的任意一个)。    点击上述红框内的诊断设定。请在希望启用的诊断功能的 bit 上进行勾选。IO-328、IO-329 时,上述设定画面的 00~0F 分别表示 Y010~Y01F,10~1F 分别表示 Y030~Y03F 的 短路诊断功能有效/无效设定。    7-24
7.8.27.8.37.8.4短路诊断功能有无寄存器将内置有短路诊断功能的 I/O 模块所安装的插槽 bit 置于 ON。机架 0 的例子短路诊断结果寄存器(各Slot) 使输出发生短路的 I/O 模块的对象插槽 bit 为 ON。机架 0 的例子短路诊断结果寄存器(各点) 使输出发生短路的点(bit)为 ON。机架 0、插槽 1 的例子短路诊断结果重置寄存器通过使短路诊断结果重置寄存器的相关 bit 为 ON,即可对诊断结果进行重置。 请解除短路状态,并在将 I/O 电源置于 OFF 之后,再执行重置。机架 0 的例子       Bit7   Bit6   Bit5   Bit4   Bit3 Bit2    Bit1  Bit0  GS1D0E           Slot7        Slot6        Slot5        Slot4        Slot3    Slot2           Slot1       Slot0           Bit7   Bit6 Bit5    Bit4 Bit3  Bit2     Bit1   Bit0  GS1D0F           Slot7         Slot6    Slot5           Slot4    Slot3       Slot2           Slot1     Slot0        Bit15    Bit14   ···   Bit1   Bit0  GS1E04      Y00F          Y00E      ···      Y001  Y000  GS1E05   Y01F     Y01E     ···     Y011     Y010   GS1E06 Y02F  Y02E ··· Y021 Y020  GS1E07   Y03F     Y03E     ···     Y031     Y030   7.8.5        Bit7   Bit6   Bit5 Bit4    Bit3  Bit2   Bit1   Bit0  GS1D1F          Slot7       Slot6       Slot5   Slot4           Slot3      Slot2      Slot1     Slot0  7-25
 地址GS1D0E GS1D0F GS1D1F GS1D4E GS1D4F GS1D5F GS1D8E GS1D8F GS1D9F GS1DCE GS1DCF GS1DDF GS1E00 GS1E01 GS1E02 GS1E03 GS1E04 GS1E05 GS1E06 GS1E07 GS1E08 GS1E09 GS1E0A GS1E0B GS1E0C GS1E0D GS1E0E GS1E0F GS1E10 GS1E11 GS1E12 GS1E13 GS1E14 GS1E15 GS1E16 GS1E17 GS1E18 GS1E19 GS1E1A GS1E1B GS1E1C GS1E1D GS1E1E GS1E1F GS1E20 GS1E21 GS1E22 GS1E23 GS1E24 GS1E25 GS1E26 GS1E27 GS1E28 GS1E29 GS1E2A GS1E2B GS1E2C表 7.8.1 机架0机架2 机架4 机架6 机架0短路诊断功能寄存器内容 地址 内容短路诊断功能有无短路诊断结果(各短路诊断结果重置短路诊断功能有无短路诊断结果(各短路诊断结果重置短路诊断功能有无短路诊断结果(各短路诊断结果重置短路诊断功能有无短路诊断结果(各短路诊断结果重置短路诊断结果Slot)Slot)Slot)Slot) Slot 0Slot 1Slot 2Slot 3Slot 4Slot 5Slot 6Slot 7Slot 8Slot 9Slot ASlot BGS1D2E GS1D2F GS1D3F GS1D6E GS1D6F GS1D7F GS1DAE GS1DAF GS1DBF GS1DEE GS1DEF GS1DFF0-F GS1E40 10-1F GS1E41 20-2F GS1E42 30-3F GS1E43 0-F GS1E44 10-1F GS1E45 20-2F GS1E46 30-3F GS1E47 0-F GS1E48 10-1F GS1E49 20-2F GS1E4A 30-3F GS1E4B 0-F GS1E4C 10-1F GS1E4D 20-2F GS1E4E 30-3F GS1E4F 0-F GS1E50 10-1F GS1E51 20-2F GS1E52 30-3F GS1E53 0-F GS1E54 10-1F GS1E55 20-2F GS1E56 30-3F GS1E57 0-F GS1E58 10-1F GS1E59 20-2F GS1E5A 30-3F GS1E5B 0-F GS1E5C 10-1F GS1E5D 20-2F GS1E5E 30-3F GS1E5F 0-F GS1E60 10-1F GS1E61 20-2F GS1E62 30-3F GS1E63 0-F GS1E64 10-1F GS1E65 20-2F GS1E66 30-3F GS1E67 0-F GS1E68 10-1F GS1E69 20-2F GS1E6A 30-3F GS1E6B 0-F GS1E6C机架 1 机架 3 机架 5 机架 7 机架 1短路诊断功能有无短路诊断结果(各短路诊断结果重置短路诊断功能有无短路诊断结果(各短路诊断结果重置短路诊断功能有无短路诊断结果(各短路诊断结果重置短路诊断功能有无短路诊断结果(各短路诊断结果重置短路诊断结果Slot)Slot)Slot)Slot) Slot 0Slot 1Slot 2Slot 3Slot 4Slot 5Slot 6Slot 7Slot 8Slot 9Slot ASlot B0-F 10-1F 20-2F 30-3F 0-F 10-1F 20-2F 30-3F 0-F 10-1F 20-2F 30-3F 0-F 10-1F 20-2F 30-3F 0-F 10-1F 20-2F 30-3F 0-F 10-1F 20-2F 30-3F 0-F 10-1F 20-2F 30-3F 0-F 10-1F 20-2F 30-3F 0-F 10-1F 20-2F 30-3F 0-F 10-1F 20-2F 30-3F 0-F 10-1F 20-2F 30-3F 0-F7-26
 地址 内容 地址 内容GS1E2D GS1E2E GS1E2F GS1E30 GS1E31 GS1E32 GS1E33 GS1E34 GS1E35 GS1E36 GS1E37 GS1E38 GS1E39 GS1E3A GS1E3B GS1E3C GS1E3D GS1E3E GS1E3F GS1E80 GS1E81 GS1E82 GS1E83 GS1E84 GS1E85 GS1E86 GS1E87 GS1E88 GS1E89 GS1E8A GS1E8B GS1E8C GS1E8D GS1E8E GS1E8F GS1E90 GS1E91 GS1E92 GS1E93 GS1E94 GS1E95 GS1E96 GS1E97 GS1E98 GS1E99 GS1E9A GS1E9B GS1E9C GS1E9D GS1E9E GS1E9F GS1EA0 GS1EA1 GS1EA2 GS1EA3 GS1EA4 GS1EA5 GS1EA6 GS1EA7机架 0短路诊断结果Slot B Slot CSlot DSlot ESlot FSlot 0Slot 1Slot 2Slot 3Slot 4Slot 5Slot 6Slot 7Slot 8Slot 910-1F GS1E6D 20-2F GS1E6E 30-3F GS1E6F 0-F GS1E70 10-1F GS1E71 20-2F GS1E72 30-3F GS1E73 0-F GS1E74 10-1F GS1E75 20-2F GS1E76 30-3F GS1E77 0-F GS1E78 10-1F GS1E79 20-2F GS1E7A 30-3F GS1E7B 0-F GS1E7C 10-1F GS1E7D 20-2F GS1E7E 30-3F GS1E7F 0-F GS1EC0 10-1F GS1EC1 20-2F GS1EC2 30-3F GS1EC3 0-F GS1EC4 10-1F GS1EC5 20-2F GS1EC6 30-3F GS1EC7 0-F GS1EC8 10-1F GS1EC9 20-2F GS1ECA 30-3F GS1ECB 0-F GS1ECC 10-1F GS1ECD 20-2F GS1ECE 30-3F GS1ECF 0-F GS1ED0 10-1F GS1ED1 20-2F GS1ED2 30-3F GS1ED3 0-F GS1ED4 10-1F GS1ED5 20-2F GS1ED6 30-3F GS1ED7 0-F GS1ED8 10-1F GS1ED9 20-2F GS1EDA 30-3F GS1EDB 0-F GS1EDC 10-1F GS1EDD 20-2F GS1EDE 30-3F GS1EDF 0-F GS1EE0 10-1F GS1EE1 20-2F GS1EE2 30-3F GS1EE3 0-F GS1EE4 10-1F GS1EE5 20-2F GS1EE6 30-3F GS1EE7机架 1短路诊断结果Slot B Slot CSlot DSlot ESlot FSlot 0Slot 1Slot 2Slot 3Slot 4Slot 5Slot 6Slot 7Slot 8Slot 910-1F 20-2F 30-3F 0-F 10-1F 20-2F 30-3F 0-F 10-1F 20-2F 30-3F 0-F 10-1F 20-2F 30-3F 0-F 10-1F 20-2F 30-3F 0-F 10-1F 20-2F 30-3F 0-F 10-1F 20-2F 30-3F 0-F 10-1F 20-2F 30-3F 0-F 10-1F 20-2F 30-3F 0-F 10-1F 20-2F 30-3F 0-F 10-1F 20-2F 30-3F 0-F 10-1F 20-2F 30-3F 0-F 10-1F 20-2F 30-3F 0-F 10-1F 20-2F 30-3F 0-F 10-1F 20-2F 30-3F机架 2机架 37-27
 地址 内容 地址 内容GS1EA8 GS1EA9 GS1EAA GS1EAB GS1EAC GS1EAD GS1EAE GS1EAF GS1EB0 GS1EB1 GS1EB2 GS1EB3 GS1EB4 GS1EB5 GS1EB6 GS1EB7 GS1EB8 GS1EB9 GS1EBA GS1EBB GS1EBC GS1EBD GS1EBE GS1EBF GS1F00 GS1F01 GS1F02 GS1F03 GS1F04 GS1F05 GS1F06 GS1F07 GS1F08 GS1F09 GS1F0A GS1F0B GS1F0C GS1F0D GS1F0E GS1F0F GS1F10 GS1F11 GS1F12 GS1F13 GS1F14 GS1F15 GS1F16 GS1F17 GS1F18 GS1F19 GS1F1A GS1F1B GS1F1C GS1F1D GS1F1E GS1F1F机架 2短路诊断结果Slot A Slot A Slot BSlot CSlot DSlot ESlot FSlot 0Slot 1Slot 2Slot 3Slot 4Slot 5Slot 6Slot 70-F GS1EE8 10-1F GS1EE9 20-2F GS1EEA 30-3F GS1EEB 0-F GS1EEC 10-1F GS1EED 20-2F GS1EEE 30-3F GS1EEF 0-F GS1EF0 10-1F GS1EF1 20-2F GS1EF2 30-3F GS1EF3 0-F GS1EF4 10-1F GS1EF5 20-2F GS1EF6 30-3F GS1EF7 0-F GS1EF8 10-1F GS1EF9 20-2F GS1EFA 30-3F GS1EFB 0-F GS1EFC 10-1F GS1EFD 20-2F GS1EFE 30-3F GS1EFF 0-F GS1F40 10-1F GS1F41 20-2F GS1F42 30-3F GS1F43 0-F GS1F44 10-1F GS1F45 20-2F GS1F46 30-3F GS1F47 0-F GS1F48 10-1F GS1F49 20-2F GS1F4A 30-3F GS1F4B 0-F GS1F4C 10-1F GS1F4D 20-2F GS1F4E 30-3F GS1F4F 0-F GS1F50 10-1F GS1F51 20-2F GS1F52 30-3F GS1F53 0-F GS1F54 10-1F GS1F55 20-2F GS1F56 30-3F GS1F57 0-F GS1F58 10-1F GS1F59 20-2F GS1F5A 30-3F GS1F5B 0-F GS1F5C 10-1F GS1F5D 20-2F GS1F5E 30-3F GS1F5F机架 3短路诊断结果Slot A Slot A Slot BSlot CSlot DSlot ESlot FSlot 0Slot 1Slot 2Slot 3Slot 4Slot 5Slot 6Slot 70-F 10-1F 20-2F 30-3F 0-F 10-1F 20-2F 30-3F 0-F 10-1F 20-2F 30-3F 0-F 10-1F 20-2F 30-3F 0-F 10-1F 20-2F 30-3F 0-F 10-1F 20-2F 30-3F 0-F 10-1F 20-2F 30-3F 0-F 10-1F 20-2F 30-3F 0-F 10-1F 20-2F 30-3F 0-F 10-1F 20-2F 30-3F 0-F 10-1F 20-2F 30-3F 0-F 10-1F 20-2F 30-3F 0-F 10-1F 20-2F 30-3F 0-F 10-1F 20-2F 30-3F机架 4机架 57-28
 地址 内容 地址 内容GS1F20 GS1F21 GS1F22 GS1F23 GS1F24 GS1F25 GS1F26 GS1F27 GS1F28 GS1F29 GS1F2A GS1F2B GS1F2C GS1F2D GS1F2E GS1F2F GS1F30 GS1F31 GS1F32 GS1F33 GS1F34 GS1F35 GS1F36 GS1F37 GS1F38 GS1F39 GS1F3A GS1F3B GS1F3C GS1F3D GS1F3E GS1F3F GS1F80 GS1F81 GS1F82 GS1F83 GS1F84 GS1F85 GS1F86 GS1F87 GS1F88 GS1F89 GS1F8A GS1F8B GS1F8C GS1F8D GS1F8E GS1F8F GS1F90 GS1F91 GS1F92 GS1F93 GS1F94 GS1F95 GS1F96 GS1F97机架 4短路诊断结果Slot 8Slot 9Slot 9 Slot ASlot BSlot CSlot DSlot ESlot FSlot 0Slot 1Slot 2Slot 3Slot 4Slot 50-F GS1F60 10-1F GS1F61 20-2F GS1F62 30-3F GS1F63 0-F GS1F64 10-1F GS1F65 20-2F GS1F66 30-3F GS1F67 0-F GS1F68 10-1F GS1F69 20-2F GS1F6A 30-3F GS1F6B 0-F GS1F6C 10-1F GS1F6D 20-2F GS1F6E 30-3F GS1F6F 0-F GS1F70 10-1F GS1F71 20-2F GS1F72 30-3F GS1F73 0-F GS1F74 10-1F GS1F75 20-2F GS1F76 30-3F GS1F77 0-F GS1F78 10-1F GS1F79 20-2F GS1F7A 30-3F GS1F7B 0-F GS1F7C 10-1F GS1F7D 20-2F GS1F7E 30-3F GS1F7F 0-F GS1FC0 10-1F GS1FC1 20-2F GS1FC2 30-3F GS1FC3 0-F GS1FC4 10-1F GS1FC5 20-2F GS1FC6 30-3F GS1FC7 0-F GS1FC8 10-1F GS1FC9 20-2F GS1FCA 30-3F GS1FCB 0-F GS1FCC 10-1F GS1FCD 20-2F GS1FCE 30-3F GS1FCF 0-F GS1FD0 10-1F GS1FD1 20-2F GS1FD2 30-3F GS1FD3 0-F GS1FD4 10-1F GS1FD5 20-2F GS1FD6 30-3F GS1FD7机架 5短路诊断结果Slot 8Slot 9Slot 9 Slot ASlot BSlot CSlot DSlot ESlot FSlot 0Slot 1Slot 2Slot 3Slot 4Slot 50-F 10-1F 20-2F 30-3F 0-F 10-1F 20-2F 30-3F 0-F 10-1F 20-2F 30-3F 0-F 10-1F 20-2F 30-3F 0-F 10-1F 20-2F 30-3F 0-F 10-1F 20-2F 30-3F 0-F 10-1F 20-2F 30-3F 0-F 10-1F 20-2F 30-3F 0-F 10-1F 20-2F 30-3F 0-F 10-1F 20-2F 30-3F 0-F 10-1F 20-2F 30-3F 0-F 10-1F 20-2F 30-3F 0-F 10-1F 20-2F 30-3F 0-F 10-1F 20-2F 30-3F机架 6机架 77-29
 地址 内容 地址 内容GS1F98 GS1F99 GS1F9A GS1F9B GS1F9C GS1F9D GS1F9E GS1F9F GS1FA0 GS1FA1 GS1FA2 GS1FA3 GS1FA4 GS1FA5 GS1FA6 GS1FA7 GS1FA8 GS1FA9 GS1FAA GS1FAB GS1FAC GS1FAD GS1FAE GS1FAF GS1FB0 GS1FB1 GS1FB2 GS1FB3 GS1FB4 GS1FB5 GS1FB6 GS1FB7 GS1FB8 GS1FB9 GS1FBA GS1FBB GS1FBC GS1FBD GS1FBE GS1FBF机架 6短路诊断结果Slot 6Slot 7Slot 8Slot 9Slot ASlot BSlot CSlot DSlot ESlot F0-F GS1FD8 10-1F GS1FD9 20-2F GS1FDA 30-3F GS1FDB 0-F GS1FDC 10-1F GS1FDD 20-2F GS1FDE 30-3F GS1FDF 0-F GS1FE0 10-1F GS1FE1 20-2F GS1FE2 30-3F GS1FE3 0-F GS1FE4 10-1F GS1FE5 20-2F GS1FE6 30-3F GS1FE7 0-F GS1FE8 10-1F GS1FE9 20-2F GS1FEA 30-3F GS1FEB 0-F GS1FEC 10-1F GS1FED 20-2F GS1FEE 30-3F GS1FEF 0-F GS1FF0 10-1F GS1FF1 20-2F GS1FF2 30-3F GS1FF3 0-F GS1FF4 10-1F GS1FF5 20-2F GS1FF6 30-3F GS1FF7 0-F GS1FF8 10-1F GS1FF9 20-2F GS1FFA 30-3F GS1FFB 0-F GS1FFC 10-1F GS1FFD 20-2F GS1FFE 30-3F GS1FFF机架 7短路诊断结果Slot 6Slot 7Slot 8Slot 9Slot ASlot BSlot CSlot DSlot ESlot F0-F 10-1F 20-2F 30-3F 0-F 10-1F 20-2F 30-3F 0-F 10-1F 20-2F 30-3F 0-F 10-1F 20-2F 30-3F 0-F 10-1F 20-2F 30-3F 0-F 10-1F 20-2F 30-3F 0-F 10-1F 20-2F 30-3F 0-F 10-1F 20-2F 30-3F 0-F 10-1F 20-2F 30-3F 0-F 10-1F 20-2F 30-3F7-30
7.97.9.1 基本规格选择器模块规格在安装有 TOYOPUC-Nano CPU 的基板之外增设基板(机架)时,将使用选择器模块 SL。     No.   项目   规格     1      消耗电流     290 mA    2 外形尺寸(W × H × D) 27 × 121 × 100 mm(不含突起物)     3    重量    100 g 7.9.2 功能规格    No.   项目   规格    1     通信速度     100 Mbps    2   连接机架数量   CPU 机架 + 最大 7 台增设机架(合计 8 台机架)    3   可安装模块   所有的模块    4 通信规格 EtherCAT 基板的独自通信标准(不可将通常的 EtherCAT 产品连接到增设总线上)    5     协议     本公司专属规格    6 增设电缆长度  机架间 最大 100 m(Cat.5E STP LAN 电缆) 7.10 基板规格基板根据可安装的输入输出模块数量,有 4 插槽基板(4BS)、6 插槽基板(6BS)、8 插槽基板(8BS)等几种基板。CPU 基板与增设基板的任意一个皆可使用。 基板与模块的嵌合部多少会有点左右晃动,这是连接器减震构造的原因,不是产品不良。   规格  项目    8BS     6BS     4BS    TUR-6943   TUR-6966      TUR-6967       输入输出模块、特殊模块、通信模块可安装数量 (注 1)  8个 6个 4个  外形尺寸(W × H × D)(不含突起物)    311.5 × 110 × 12   255.5 × 110 × 12   199.5 × 110 × 12  安装尺寸(W × H mm)    293.5 × 86     237.5 × 86     181.5 × 86     安装孔  φ6 锁眼形孔(M5 螺丝用) 质量(kg)    500 g   415 g    325 g (注 1) 安装 TOYOPUC-Nano CPU 的 CPU 机架(机架 No.0)将占用插槽 1,所以可设置的输入输出 模块数量将减少一个。7-31
8 CPU功能8.1 CPU工作模式CPU 的工作模式有兼容模式, 并可根据需要, 选择程序容量。兼容模式追加了程序容量的选择及闪存寄存器。闪存尺寸:0 ~4096 Kbyte(可以 64 Kbyte 为单位进行设定) (未使用时选择"0"。)CPU 工作模式与程序容量、数据容量的关系另外, 作为 CPU 工作模式可以通过参数来选择程序 2、3 的执行与否以及与 RUN 信号的连锁。*1 程序 2、3 可以通过参数选择程序的执行。 如果选择了无效, 应用程序(程序 2 或程序 3)将不执行。*2 程序 2、3 可以通过参数选择与 RUN 信号的连锁。 选择了连锁的程序停止后, 连锁的 RUN 信号 OFF, 所有程序停止。     模式           程序容量 KW 基本区域数据容量 KW       扩充区域数据容量 KW      PRG.1 PRG.2     PRG.3    PRG.1      PRG.2   PRG.3       继电器寄 存器   数据       缓冲区       兼容模式            60 60         60   32     32   32       16   128       256         120    60     0    180 0   0   项目      选择值     程序执行*1       程序 1    有效[执行](固定)    程序 2 有效/无效[执行/非执行]     程序 3   有效/无效[执行/非执行]     RUN 信号连锁*2         程序 1      连锁(固定)    程序 2 连锁/非连锁     程序 3      连锁/非连锁   8-1 8
8.1.1 程序・数据的分割方式TOYOPUC-Nano 通过设定 CPU 的动作模式, 可以根据需要选择程序容量、数据容量。兼容模式PRG.1程序 1 (60 KW)PRG.2输入输出(0.128 KW)PRG.3      程序 2 (60 KW)程序 3 (60 KW)   基本区域(32 KW)基本区域(32 KW)共享区域(400 KW)基本区域(32 KW) 共享区域闪存器(2048 KW)       程序容量可变 P1: 60 KW P1:120 KW P1:180 KWP2:60 KW P2:60 KW P2: 0 KWP3:60 KW P3: 0 KWP3: 0 KW    8-2与 PCwin2 之间的通信容量可变 0 ~4096 Kbyte(可以 64 Kbyte 为单位进行设定)
8.1.2 8.1.2.1程序的执行 运算处理方法可执行多个程序, 最多可以执行 3 个顺序程序。按程序 1 →程序 2→程序 3→终端处理的顺序执行, 反复进行操作。 程序的个数以及执行/非执行*1 程序 2 和程序 3, 由 CPU 工作模式的参数设定。此外 CPU 工作模式的参数也可以设定程序 2 和程序 3 与 RUN 信号的连锁/非连锁*2。*1 程序 2、3 可以通过参数选择程序的执行。 选择了无效(未执行)的程序(程序 2 或程序 3)不执行。*2 程序 2、3 可以通过参数选择与 RUN 信号之间的连锁。 选择了连锁的程序停止后, 连锁的 RUN 信号 OFF, 所有程序停止。程序的执行顺序(1) 接通电源或复位/启动   更新输入输出数据    PRG.1PRG.3      初始程序*3初始程序*3    STARTSTART      主程序  END主程序 END     LABEL*4LABEL*4   子程序子程序  RETRET       PENDPEND   仅限第 1 扫描*3*3 初始程序是只在接通电源时或复位/启动时执行 1 次的顺序程序。*4 PRG.2    初始程序*3  START    主程序 END   LABEL*4   子程序 RET    PEND    仅限 仅限   第1扫 第1扫 描*3 描*3             CALLRET        :表示子程序的标签号码。每个程序有 1 个子程序 S000~S127 的 128 个, 转移和子程序通用。 可制作 EL0000~EL1023 共 1024 个。      8-3・・・・・・・・・
(2) 程序的执行与非执行程序 2 和程序 3 的执行/非执行, 由 CPU 工作模式的参数设定。选择非执行的程序不执行。执行程序 1~3 执行程序 1、3 执行程序 1、2 只执行程序 1(3) 程序与RUN信号的连锁程序2和程序3可以通过参数选择与RUN信号的连锁。选择了连锁的程序停止后, 连锁的RUN信号OFF,所有程序停止。      PRG.1  执行(固定) PRG.2 执行 PRG.3 执行    终端处理(更新输入输出数   据)   PRG.1  执行(固定)  PRG.2非执行  PRG.3 执行    终端处理(更新输入输出数   据)   PRG.1  执行(固定) PRG.2 执行  PRG.3非执行     终端处理(更新输入输出数   据)   PRG.1  执行(固定)  PRG.2非执行 PRG.3非执行     终端处理(更新输入输出数   据)                               与 RUN 信号的连锁(参数设定)    程序停止时的 RUN 信号状态    程序 1   程序 2 程序 3    程序 1 程序 2    程序 3    连锁(固定)   连锁 连锁    OFF OFF    OFF    连锁(固定)     非连锁   连锁     OFF   继续     OFF    连锁(固定) 连锁非连锁  OFFOFF  继续    连锁(固定)      非连锁   非连锁     OFF   继续     继续  (4) 执行SFC程序在各程序的主程序结束时执行用 SFC 编程的程序。 START   主程序     END8-4SFC 程序 
8.1.2.2 子程序在顺序程序中有几处相同的处理时, 可将该部分汇总在一处作为子程序。如果在程序中有 CALL 命令, 则使用 CALL 命令执行在标签上已指定子程序号码的子程序,用 RET 命令返 回原来的程序处理。处理顺序(1)(5)(2) (4)子程序号码为 S000~S127,也可采用下图所示嵌套(nest)结构。 处理顺序(1)(6) 反复进行以下(2)~(6)的操作(5)(2)(4)(3)         START        CALL S***        CALL S***        END      (6)反复进行以下(2)~(6)的操作 (3)               LABEL S***    子程序    RET              START        CALL S***        END                LABEL S***        CALL S###        RET              LABEL S###        RET 8-5
8.1.2.3中断程序(定期中断)在兼容模式中, 可用 1 ms 单位设定的定期中断为 max4。中断程序以 Label“I0~I3”开始,可以 RETI 命令结束的子程序形式记述 P1,P2,P3 中的任意一个。但是,禁止 在 P1,P2,P3 上翻倍。中断周期可分别在0~65535ms(单位为1ms)范围内进行设定, 它们可通过PCwin2作为参数进行设定。 此时,如果指定为 0 则表明设定为没有中断。允许中断时, 根据其周期, 分别执行具有中断号码I0~I3标签的程序, 用RETI命令返回原来的程序处理。程序 1 程序 2 程序 3   |---[START|---[END|---[PEND]]] |---[START|---[END|---[PEND]]]|---[START|---[END|---[PEND]]]      |---[Label I1 ] |---[RETI ]   |---[Label I0 ] |---[RETI ]|---[Label I2 ] |---[RETI ]               8-6
中断程序的注意事项(1) 可通过应用命令中的 DI、EI、PDI、PEI 命令禁止或允许执行中断程序。(详细内容参见编程手册 T-307。)(2) 由于在接通电源或复位・ 启动时处于禁止执行中断程序的状态(DI 状态), 为了执行中断程序需要先执 行 EI 命令。(3) 中断响应速度:数μs~数 10 μs。但符合下列条件时最长可能延迟至 100 μ, 应予以注意。1) 系统侧的中断处理:数μs~数 10 μs2) 命令执行中:在执行基本命令和应用命令过程中发生中断时, 会在该命令的处理结束后再执行中断程序。因此, 使用块传送命令等处理时间较长的应用用命令等时, 中断响应时间会延迟, 应予 以注意。(特别是在执行特殊模块用命令(SPR、SPW 等)过程中, 有时也有延迟数 100 μs 的 情况。)(4) 中断原因的优先顺序如下所示。如有顺序比执行中的中断程序靠前的中断处于 EI 状态, 则优先处理 该中断。另一方面, 即使顺序比执行中的中断程序靠后的中断处于 EI 状态, 也要等到执行完 RETI 命 令之后再进行处理。前 优先顺序 后        中断等级      64    65     66    67  中断号码   I0   I1   I2   I3  8-7
(5) 即使在执行中断程序过程中也可以处于允许中断状态(EI 状态)。因此, 在执行中断过程中只要到了优 先顺序靠前的中断程序的执行时间就会执行优先顺序靠前的中断程序。 优先顺序  中断程序 I0 中断程序 I1 中断程序 I2 中断程序 I3 主程序时间        中断程序 I2 执 行中断程序 I2 结束  中断程序 I2 执行 过程中,到达优先 顺位较高的 I0 的 执行时间后,就会 执行 I0。中断程序 I0 结束后, 会从中途开始执行I2 余下的程序。  在执行中断程序过程中不想执行其它中断程序时, 应使用“禁止部分中断(PDI)”和“允许部分中断(PEI)”。 例:|-------------------------------------[LABEL I3 ]-||-------------------------------------[PDI・ ・ ・|-------------------------------------[PEI |-------------------------------------[RETI64d 3d ]-|64d 3d ]-| ]-|(6) 中断程序的执行以图像存储器为对象。因此, 在中断处理中运算的输出数据无法在扫描 1 次 END 命 令结束之前输出到外部输出模块。要立即向外部输出中断处理结果时, 应在 RETI 命令之前使用输入 输出控制用命令 RIO,RI,RO,ARIO。8-8
8.1.2.4等速扫描功能通过在 P1 的 START 命令之后立即记述下列命令进行等速扫描。P1|---[SYS 20h 时间 0 ]用 BCD 设定以 ms 为单位的扫描定时间(上例中为 10 ms) 指定等速扫描(20 h)设定了小于实际扫描时间的值时, 当然无法进行等速扫描,因此, 应设定比扫描时间 max 值更大的数值。 上次的扫描时间超时时, 在执行本命令时应打开 V56(CY)。不得设定多个时间。注意: 扫描时间的设定值范围为“1~99”。OP2 的有效数字为 2 位。设定 3 位以上的数值时, 则最上位的数值将被忽略。 |--------[START ] |-------[SYS 20 10 0]    8-9
8.1.3程序之间的数据利用由于 TOYOPUC-Nano 可以执行多个程序, 因此, 最多可执行 3 个顺序程序。各程序之间的数据无需特殊 设定便可互相利用。(1)2 互换模式 基本区域的数据是按各程序独立的数据。 输入输出区域和扩充区域的数据为各程序共享数据。(1-1)基本区域顺序程序输入输出 区域基本区域 数据扩充区域 数据   PRG.1STARTM100EM0000END PEND           P2-M100X000                                      Y200X000START P2-M110            M100         END PEND          PRG.2START M100PRG.3                       EM000Y200 00        END PEND          X000 Y200 M100 D0000  M100 M110  EM0000 M100    指定其它程序的数据区域时, 应在地址前标示程序 No.P*(P1=程序 1, P2=程序 2, P3=程序 3)。 例.P2-M100 :程序 2 的 M100P3-D0000L:程序 3 的 D0000L(D0000 的下位字节)8-10・・・ ・・・・・・ ・・・・・・ ・・・
(1-2)输入输出区域・扩充区域   PRG.1STARTM100EM0000END PEND           P2-M100X000                                              顺序程序输入输出 区域基本区域 数据扩充区域 数据Y200X000START M100P2-M110END PEND                       PRG.3                       EM0000PRG.2START M100Y200 00END PEND                  X000 Y200   M100 M110M100 D0000   EM0000 M100    8-11・・・ ・・・・・・ ・・・・・・ ・・・
8.2 8.2.1用户存储器的结构 参数用户可以设定的参数包括以下各项。可以根据程序来设定这些参数。(设定方法参见 Pcwin2 的使用说明 书。)。    项目    设置范围                      用户存储器     兼容模式程序执行    程序 1     有效[执行](固定)    程序 2、3 有效[执行]/无效[非执行] RUN 信号连锁     程序 1     连锁(固定)    程序 2、3 连锁/非连锁                        扫描时间定时器值        全体     1~65535 ms      初始程序    主程序   发生错误时的运行状态        扫描超时     停止/继续运行      I/O 表对照异常    应用命令错误    数据异常   I/O 模块的分配*1(0~E 支架,0~7 时隙)      种类识别代码     模块识别代码    分配点数   0-64 点/时隙      中断(定期中断功能) 中断 No.0~No.3   0~65535 ms 程序 1、2、3      链路模块    链路参数*2  根据链路模块种类    其他   程序名   64 字节(半角)  8.2.2*1 CPU 具有识别 I/O 模块安装状态的功能,在接通电源或者复位的时候,首先进行参数中设定的 I/O 配 置和实际安装状态的比较。因此,如果 I/O 模块的配置、种类发生错误,或忘记参数的设定的情况下, 会导致“I/O 表对照异常”。也可以对各时隙进行 I/O 地址占有点数的分配进行设定,这个数据比实际的 I/O 模块点数优先。*2 实际可安装 24 个通信(链路)模块。但对于一个程序而言、最多只能安装 8 个模块。内置链路也可 作为一个模块分配。程序容量・ 数据容量                                        程序内部继 定时 电器 器・ 计数M0-7FF 器 EM0-1F T,C0-1FFF F GM0-FF ET,C0-7 FF FF [点] [点]                            保持继 电器 K0-2FF EK0-FF F [点]链路继 电器 L0-7FF EL0-1FF F [点]起动・ 停 止检查 P0-1FF EP0-FF F [点]                    容量KWNo.*1输入输 出 [点]      链路寄 存器 R0-7FF [KW]数据寄 存器 [KW]扩充缓 冲寄存 器 [KW]     CPU工作模 式扩充闪 存器 [KW]                                                   6014096                                   602基本2048409676876825602560102401024025602560221212---    -                                       兼容模 式60340967682560102402560212--                                         程序 1,2,3 共 享扩充(67584)737284096204881924096-1282562048                                      合计20488601664009728389121177661642562048                           *1 各程序的输入输出是共享的。扩充输入输出不能作为实际 I/O 使用。8-12CPU 工作模式 基本性能数据区
8.2.3*7*5*7*6 *1*1 *1 *1 *1 *1 *1 *1I/O地址一览表 兼容模式       名称            比特地址 (***-***)       点数 字符地址 (***-***)       字符数 间接地址 (***-***)     *4保持 领域      P           分区检查    P000~P1FF         512   P00W~P1FW      32     -         -      -    K  保持继电器 K000~K2FF  768K00W~K2FW 48 40  9F      V       特殊继电器     V00~VFF      256   V0W~VFW   16    A0        BF      -    T C  定时器・ 计数 器 T000~T1FF  512T00W~T1FW 32 C0  FF -     L       链路继电器     L000~L7FF      2048   L00W~L7FW   128    100       1FF      -    X Y  输入输出 X000~X7FF  2048X00W~X7FW 128 200  2FF -     M    内部继电器   M000~M7FF    2048 M00W~M7FW  128   300     3FF   -     S       特殊寄存器       S000-0~S3FF-F      16384   S000~S3FF   1024    400       BFF          N  现在值寄存 器 N000-0~N1FF-F  8192N000~N1FF 512 C00  FFF      R       链路寄存器     R000-0~R7FF-F      32768   R000~R7FF   2048    1000       1FFF          D     数据寄存器   D0000-0~ D2FFF-F    196608  D0000~D2FFF  12288  2000    7FFF        P  分区检查 P1000~P17FF  2048P100W~ P17FW 128 C000  C0F F -     V       特殊继电器     V1000~V17FF      2048   V100W~ V17FW   128    C100       C1F F      -    T C  定时器・ 计数 器 T1000~T17FF  2048T100W~ T17FW 128 C200  C2F F -     M    内部继电器   M1000~M17FF    2048 M100W~ M17FW  128   C300     C3F F   -     L       链路继电器     L1000~L2FFF     8192   L100W~ L2FFW   512    C400       C7F F      -    S     特殊寄存器          S1000-0~ S13FF-F   16384  S1000~S13FF  1024  C800    CFF F        N    现在值寄存 器  N1000-0~ N17FF-F   32768   N1000~N17FF  2048   D000    DFF F      8-13地址分类 比特地址区域 字符地址区域 比特地址区域字符地址区 域基本区域 识别码
       名称              比特地址 (***-***)       点数 字符地址 (***-***)       字符数 间接地址 (***-***)     *4保持 领域      E P   外 区 域 1     扩充分区检 查    EP000~EPFFF         4096   EP00W~ EPFFW      256     -         -      -    E K  扩展保持继 电器 EK000~EKFFF  4096EK00W~ EKFFW 256 200  3FF      E V    扩展特殊继 电器   EV000~EVFFF    4096 EV00W~ EVFFW  256   400     5FF   -     E T       扩充定时 器・ 计数器     ET000~ET7FF      2048   ET00W~ ET7FW   128    600       6FF      -    EL  扩充链路继 电器 EL0000~EL1FFF  8192EL000W~ EL1FFW 512 700  AFF -     E X    扩展输入输 出   EX000~EX7FF    2048 EX00W~ EX7FW  128   B00     BFF   -     E M       扩展内部继 电器     EM0000~ EM1FFF      8192   EM000W~ EM1FFW   512    C00       FFF      -    E S  扩充特殊寄 存器  ES000-0~ ES7FF-F  32768ES000~ ES7FF 2048 1000  1FFF      E N       扩充当前值 寄存器     EN000-0~ EN7FF-F      32768   EN000~ EN7FF   2048    2000       2FFF          H      扩充设定值 寄存器    H000-0~H7FF-F     32768     H000~H7FF  2048    3000     3FFF          G X G Y    外 区 域 2    扩展输入输 出    GX0000~ GXFFFF  65536GX000W~ GXFFFW 4096 C000  DFF F -     G M  扩展内部继 电器      GM0000~ GMFFFF    65536 GM000W~ GMFFFW  4096   E000     FFF F   -      U 扩充数据寄存器     U00000-0~ U1FFFF-F       209715 2 U00000~ U1FFFF    131072    *2       *2        E B      扩展缓存寄存器     EB00000-0~ EB3FFFF-F      419430 4   EB00000~EB3 FFFF   262144    *2       *2          F R    扩充闪存器   FR000000-0~ FR1FFFFF-F    335544 32   FR000000~ FR1FFFFF  209715 2   *2    *2    /-  *7 *6*7 *6 *6*3*1 基本区域的新添加分地址不能参照外区域 1 中 4000 号以后的间接地址。此外,PC10 模式中的扩充区域(P,V,TC,M,L,S,N)全部从 1000 号开始。不连接以往区域。通信更新 区域的设定和以块为单位使用的应用命令不能使用跨接以往区域与扩充区域的使用方法。*2 关于 U,EB,FR 区域的间接地址见下页。*3 扩充闪存器参见“8.7.2 闪存器”。*4 源处于 OFF(复位)时位于数据保持区域。*5 X 和 Y(EX 和 EY,GX 和 GY)、T 和 C(ET 和 EC)不能使用重复的地址。(指定 X000/Y000,EX000/EY000,T000/C000,ET000/EC000 作为地址是错误的)*6 R0580~07FF 用于 SFC 控制,通常不能使用。使用 SFC 时,限制使用扩充定时器・ 计数器 ET/C,EN,H。*7 特殊继电器、特殊寄存器用于系统,不得用于定义之外的其它用途。8-14地址分类 比特地址区域 字符地址区域 比特地址区域 字符地址区域识别码
 识别 码UEBU,EB,FR 区域的间接地址在以下的每 64K(0~FFFF)地址空间内使用。 因此,保存间接地址的寄存器需要使用用间接地址指定空间的寄存器。 用应用命令间接指定 U,EB,FR 时,应使用变址寄存器功能。名称 地址(***-***) 间接地址(***-***)U00000 扩充数据寄 U08000 存器 U10000 U18000EB00000 EB08000 EB10000扩展缓存寄 EB18000 存器 EB20000 EB28000 EB30000 EB38000U07FFF 0 FFFF U0FFFF 0 FFFF U17FFF 0 FFFF U1FFFF 0 FFFF EB07FFF 0 FFFF EB0FFFF 0 FFFF EB17FFF 0 FFFF EB1FFFF 0 FFFF EB27FFF 0 FFFF EB2FFFF 0 FFFF EB37FFF 0 FFFF EB3FFFF 0 FFFF FR007FFF 0 FFFF FR00FFFF 0 FFFF FR017FFF 0 FFFF FR01FFFF 0 FFFF FR027FFF 0 FFFF FR02FFFF 0 FFFF FR037FFF 0 FFFF FR03FFFF 0 FFFF FR047FFF 0 FFFF FR04FFFF 0 FFFF FR057FFF 0 FFFF FR05FFFF 0 FFFF FR067FFF 0 FFFF FR06FFFF 0 FFFF FR077FFF 0 FFFF FR07FFFF 0 FFFF FR087FFF 0 FFFF FR08FFFF 0 FFFF FR097FFF 0 FFFF FR09FFFF 0 FFFF FR0A7FFF 0 FFFF FR0AFFFF 0 FFFF FR0B7FFF 0 FFFF FR0BFFFF 0 FFFF FR0C7FFF 0 FFFF FR0CFFFF 0 FFFF FR0D7FFF 0 FFFF FR0DFFFF 0 FFFF FR0E7FFF 0 FFFF FR0EFFFF 0 FFFF FR0F7FFF 0 FFFF FR0FFFFF 0 FFFF FR107FFF 0 FFFFFR 扩充闪存器FR000000 FR008000 FR010000 FR018000 FR020000 FR028000 FR030000 FR038000 FR040000 FR048000 FR050000 FR058000 FR060000 FR068000 FR070000 FR078000 FR080000 FR088000 FR090000 FR098000 FR0A0000 FR0A8000 FR0B0000 FR0B8000 FR0C0000 FR0C8000 FR0D0000 FR0D8000 FR0E0000 FR0E8000 FR0F0000 FR0F8000 FR1000008-15
 识别 码名称地址(***-***)FR108000 FR10FFFF FR110000 FR117FFF FR118000 FR11FFFF FR120000 FR127FFF FR128000 FR12FFFF FR130000 FR137FFF FR138000 FR13FFFF FR140000 FR147FFF FR148000 FR14FFFF FR150000 FR157FFF FR158000 FR15FFFF FR160000 FR167FFF FR168000 FR16FFFF FR170000 FR177FFF FR178000 FR17FFFF FR180000 FR187FFF FR188000 FR18FFFF FR190000 FR197FFF FR198000 FR19FFFF FR1A0000 FR1A7FFF FR1A8000 FR1AFFFF FR1B0000 FR1B7FFF FR1B8000 FR1BFFFF FR1C0000 FR1C7FFF FR1C8000 FR1CFFFF FR1D0000 FR1D7FFF FR1D8000 FR1DFFFF FR1E0000 FR1E7FFF FR1E8000 FR1EFFFF FR1F0000 FR1F7FFF FR1F8000 FR1FFFFF间接地址(***-***)0 FFFF 0 FFFF 0 FFFF 0 FFFF 0 FFFF 0 FFFF 0 FFFF 0 FFFF 0 FFFF 0 FFFF 0 FFFF 0 FFFF 0 FFFF 0 FFFF 0 FFFF 0 FFFF 0 FFFF 0 FFFF 0 FFFF 0 FFFF 0 FFFF 0 FFFF 0 FFFF 0 FFFF 0 FFFF 0 FFFF 0 FFFF 0 FFFF 0 FFFF 0 FFFF 0 FFFF8-16
8.2.4 Ex号在兼容模式中,用“8 位(16 进制)的字节地址”来表示整个数据区域。在“变址功能”和“闪存器”中有时使用“8 位字节地址”和“Ex 号”。 8 位字节地址 = “00”+“Ex 号(2 位)”+“间接字节地址”高位 2 位0001 02 03 04 05 06 07 08 09 0A 0B 0C 0D 0E 0F 10 11 12 13 14 15 16 1718 EB8 19 EB9 1A EB10 1B EB11 1C EB12 1D EB13 1E EB14 1F EB15低位 4 位高位 2 位低位 4 位高位 2 位低位 4 位高位 2 位6061 62 63 64 65 66 67 68 69 6A 6B 6C 6D 6E 6F 70 71 72 73 74 75 76 77 78 79 7A 7B 7C 7D 7E 7F低位 4 位* 基本区域的指定应使用 Ex 号-“0D”~”0F”。 “00”用于指定自区域。例:P1-D0000 ⇒ 000D2000 EB01234 ⇒ 00102468h EM0L ⇒ 00010C00h       自区域      E*      G*      U 0000-FFFFU1 0000-FFFFU2 0000-FFFFU3 0000-FFFF             FR00 0000-FFFFFR01 0000-FFFFFR02 0000-FFFFFR03 0000-FFFFFR04 0000-FFFFFR05 0000-FFFFFR06 0000-FFFFFR07 0000-FFFFFR08 0000-FFFFFR09 0000-FFFFFR10 0000-FFFFFR11 0000-FFFFFR12 0000-FFFFFR13 0000-FFFFFR14 0000-FFFFFR15 0000-FFFFFR16 0000-FFFFFR17 0000-FFFFFR18 0000-FFFFFR19 0000-FFFFFR20 0000-FFFFFR21 0000-FFFFFR22 0000-FFFFFR23 0000-FFFFFR24 0000-FFFFFR25 0000-FFFFFR26 0000-FFFFFR27 0000-FFFFFR28 0000-FFFFFR29 0000-FFFFFR30 0000-FFFFFR31 0000-FFFF                                                                                        FR32 0000-FFFFFR33 0000-FFFFFR34 0000-FFFFFR35 0000-FFFFFR36 0000-FFFFFR37 0000-FFFFFR38 0000-FFFFFR39 0000-FFFFFR40 0000-FFFFFR41 0000-FFFFFR42 0000-FFFFFR43 0000-FFFFFR44 0000-FFFFFR45 0000-FFFFFR46 0000-FFFFFR47 0000-FFFFFR48 0000-FFFFFR49 0000-FFFFFR50 0000-FFFFFR51 0000-FFFFFR52 0000-FFFFFR53 0000-FFFFFR54 0000-FFFFFR55 0000-FFFFFR56 0000-FFFFFR57 0000-FFFFFR58 0000-FFFFFR59 0000-FFFFFR60 0000-FFFFFR61 0000-FFFFFR62 0000-FFFFFR63 0000-FFFF                                                                                     20 4021         4122         4223     4324     4425     4526         46    U207000-U1FFFF     47 28     48 FR0000-FR1FFFFF29       492A     4A2B         4B2C     4C2D         4D2E         4E2F         4F30     5031     5132     5233     5334     5435     55     系统用      P1 0000-FFFF      P2 0000-FFFF      P3 0000-FFFF      EB0 0000-FFFFEB1 0000-FFFFEB2 0000-FFFFEB3 0000-FFFFEB4 0000-FFFFEB5 0000-FFFFEB6 0000-FFFFEB7 0000-FFFF                     EB0000-EB3FFFF36       5637         5738     5839     593A     5A       预定   3B     5B 3C     5C3D     5D3E     5E3F 5F        8-17
 基本 区域P1 链接寄存器 0D 数据寄存器 1数据寄存器 2 分区 特殊继电器 定时器/计数器 内部继电器 链路继电器 特殊寄存器 现在值寄存器 分区 保持继电器 特殊继电器 定时器/计数器 链路继电器 输入输出 内部继电器 特殊寄存器 现在值寄存器P2 链接寄存器 0E 数据寄存器 1数据寄存器 2 分区 特殊继电器 定时器/计数器 内部继电器 链路继电器 特殊寄存器 现在值寄存器参考).地址表 名称      分区      保持继电器      特殊继电器      定时器/计数器      链路继电器      输入输出      内部继电器      特殊寄存器      现在值寄存器Ex No. (16 进制)地址P000 - P1FF K000 - K2FF V000 - V0FF TC000 - TC1FF L000 - L7FF XY000 - XY7FF M000 - M7FF S0000 - S03FF N0000 - N01FF R0000 - R07FF D0000 - D0FFF D1000 - D2FFF P1000 - P17FF V1000 - V17FF TC1000 - TC17FF M1000 - M17FF L1000 - L2FFF S1000 - S13FF N1000 - N17FF P000 - P1FF K000 - K2FF V000 - V0FF TC000 - TC1FF L000 - L7FF XY000 - XY7FF M000 - M7FF S0000 - S03FF N0000 - N01FF R0000 - R07FF D0000 - D0FFF D1000 - D2FFF P1000 - P17FF V1000 - V17FF TC1000 - TC17FF M1000 - M17FF L1000 - L2FFF S1000 - S13FF N1000 - N17FF字节地址0000 - 003F 0040 - 009F 00A0 - 00BF 00C0 - 00FF 0100 - 01FF 0200 - 02FF 0300 - 03FF 0400 - 0BFF 0C00 - 0FFF 1000 - 1FFF 2000 - 3FFF 4000 - 7FFF C000 - C0FF C100 - C1FF C200 - C2FF C300 - C3FF C400 - C7FF C800 - CFFF D000 - DFFF 0000 - 003F 0040 - 009F 00A0 - 00BF 00C0 - 00FF 0100 - 01FF 0200 - 02FF 0300 - 03FF 0400 - 0BFF 0C00 - 0FFF 1000 - 1FFF 2000 - 3FFF 4000 - 7FFF C000 - C0FF C100 - C1FF C200 - C2FF C300 - C3FF C400 - C7FF C800 - CFFF D000 - DFFF8-18
 基本 区域P30F扩展区域 1扩充区域 2 扩充区域 3拡張領域 40102030405061011121314151617名称分区保持继电器 特殊继电器 定时器/计数器 链路继电器 输入输出 内部继电器 特殊寄存器 现在值寄存器 链接寄存器 数据寄存器 1 数据寄存器 2分区特殊继电器 定时器/计数器 内部继电器 链路继电器 特殊寄存器 现在值寄存器 扩展边缘 扩展保持继电器 扩充特殊继电器 扩展计时器/计数器 扩展链接继电器 扩展输入输出 扩充内部继电器 扩展特殊寄存器 扩展当前值寄存器 扩展设定值寄存器 扩展输入输出 扩充内部继电器扩展数据寄存器扩充缓冲寄存器Ex No. (16 进制)地址P000 - P1FFK000 - K2FFV000 - V0FFTC000 - TC1FFL000 - L7FFXY000 - XY7FFM000 - M7FFS0000 - S03FF N0000 - N01FF R0000 - R07FF D0000 - D0FFF D1000 - D2FFF P1000 - P17FF V1000 - V17FF TC1000 - TC17FF M1000 - M17FF L1000 - L2FFFS1000 - S13FF N1000 - N17FF EP000 - EPFFF EK000 - EKFFF EV000 - EVFFF ETC000 - ETC7FF EL0000 - EL1FFF EXY000 - EXY7FF EM0000 - EM1FFF ES0000 - ES07FF EN0000 - EN07FF H0000 - H07FF GXY0000 - GXYFFFF GM0000 - GMFFFF U00000 - U07FFF U08000 - U0FFFF U10000 - U17FFF U18000 - U1FFFF EB00000 - EB07FFF EB08000 - EB0FFFF EB10000 - EB17FFF EB18000 - EB1FFFF EB20000 - EB27FFF EB28000 - EB2FFFF EB30000 - EB37FFF EB38000 - EB3FFFF字节地址0000 - 003F 0040 - 009F 00A0 - 00BF 00C0 - 00FF 0100 - 01FF 0200 - 02FF 0300 - 03FF 0400 - 0BFF 0C00 - 0FFF 1000 - 1FFF 2000 - 3FFF 4000 - 7FFF C000 - C0FF C100 - C1FF C200 - C2FF C300 - C3FF C400 - C7FF C800 - CFFF D000 - DFFF 0000 - 01FF 0200 - 03FF 0400 - 05FF 0600 - 06FF 0700 - 0AFF 0B00 - 0BFF 0C00 - 0FFF 1000 - 1FFF 2000 - 2FFF 3000 - 3FFF C000 - DFFF E000 - FFFF 0000 - FFFF 0000 - FFFF 0000 - FFFF 0000 - FFFF 0000 - FFFF 0000 - FFFF 0000 - FFFF 0000 - FFFF 0000 - FFFF 0000 - FFFF0000 - FFFF 0000 - FFFF8-19
 拡張領域 5闪存寄存器名称Ex No. (16 进制)40 41 42 43 44 45 46 47 48 49 4A 4B 4C 4D 4E 4F 50 51 52 53 54 55 56 57 58 59 5A 5B 5C 5D 5E 5F 60 61 62 63 64 65 66 67 68 69 6A 6B 6C 6D地址FR000000 - FR007FFF FR008000 - FR00FFFF FR010000 - FR017FFF FR018000 - FR01FFFF FR020000 - FR027FFF FR028000 - FR02FFFF FR030000 - FR037FFF FR038000 - FR03FFFF FR040000 - FR047FFF FR048000 - FR04FFFF FR050000 - FR057FFF FR058000 - FR05FFFF FR060000 - FR067FFF FR068000 - FR06FFFF FR070000 - FR077FFF FR078000 - FR07FFFF FR080000 - FR087FFF FR088000 - FR08FFFF FR090000 - FR097FFF FR098000 - FR09FFFF FR0A0000 - FR0A7FFF FR0A8000 - FR0AFFFF FR0B0000 - FR0B7FFF FR0B8000 - FR0BFFFF FR0C0000 - FR0C7FFF FR0C8000 - FR0CFFFF FR0D0000 - FR0D7FFF FR0D8000 - FR0DFFFF FR0E0000 - FR0E7FFF FR0E8000 - FR0EFFFF FR0F0000 - FR0F7FFF FR0F8000 - FR0FFFFF FR100000 - FR107FFF FR108000 - FR10FFFF FR110000 - FR117FFF FR118000 - FR11FFFF FR120000 - FR127FFF FR128000 - FR12FFFF FR130000 - FR137FFF FR138000 - FR13FFFF FR140000 - FR147FFF FR148000 - FR14FFFF FR150000 - FR157FFF FR158000 - FR15FFFF FR160000 - FR167FFF FR168000 - FR16FFFF字节地址0000 - FFFF 0000 - FFFF 0000 - FFFF 0000 - FFFF 0000 - FFFF 0000 - FFFF 0000 - FFFF 0000 - FFFF 0000 - FFFF 0000 - FFFF 0000 - FFFF 0000 - FFFF 0000 - FFFF 0000 - FFFF 0000 - FFFF 0000 - FFFF 0000 - FFFF 0000 - FFFF 0000 - FFFF 0000 - FFFF 0000 - FFFF 0000 - FFFF 0000 - FFFF 0000 - FFFF 0000 - FFFF 0000 - FFFF 0000 - FFFF 0000 - FFFF 0000 - FFFF 0000 - FFFF 0000 - FFFF 0000 - FFFF 0000 - FFFF 0000 - FFFF 0000 - FFFF 0000 - FFFF 0000 - FFFF 0000 - FFFF 0000 - FFFF 0000 - FFFF 0000 - FFFF 0000 - FFFF 0000 - FFFF 0000 - FFFF 0000 - FFFF 0000 - FFFF8-20
   名称         Ex No. (16 进制)  地址      字节地址                                                                                6E      FR170000 - FR177FFF      0000 - FFFF       6F    FR178000 - FR17FFFF    0000 - FFFF      70     FR180000 - FR187FFF     0000 - FFFF        71      FR188000 - FR18FFFF      0000 - FFFF       72    FR190000 - FR197FFF    0000 - FFFF      73     FR198000 - FR19FFFF     0000 - FFFF        74      FR1A0000 - FR1A7FFF      0000 - FFFF       75    FR1A8000 - FR1AFFFF    0000 - FFFF      76     FR1B0000 - FR1B7FFF     0000 - FFFF        77      FR1B8000 - FR1BFFFF      0000 - FFFF       78    FR1C0000 - FR1C7FFF    0000 - FFFF      79     FR1C8000 - FR1CFFFF     0000 - FFFF        7A      FR1D0000 - FR1D7FFF      0000 - FFFF       7B    FR1D8000 - FR1DFFFF    0000 - FFFF      7C     FR1E0000 - FR1E7FFF     0000 - FFFF        7D      FR1E8000 - FR1EFFFF      0000 - FFFF       7E    FR1F0000 - FR1F7FFF    0000 - FFFF       7F      FR1F8000 - FR1FFFFF      0000 - FFFF                                                                                                             8-21
8.2.5特殊继电器一览表有各种特殊继电器,可以用于 CPU 状态、应用命令、链路模块等特殊用途。在这种情况下,在各顺序程序中使用的应用命令方面的特殊继电器被置于其程序所对应的特殊继电器区域。 其他则全部被置于“PRG.1”用的特殊继电器中。在使用 SFC 进行编程时,“V58~V5D”、“EV800~EVBFF”被用于 SFC 的执行控制,因此用户请不要使用。 其他的则全部置于”PRG.1”用的特殊寄存器中。对于一览表中没有的地址,则全部成为预定区域,用户无 法使用。兼容模式             地址        PRG.1PRG.1 PRG.2 PRG.3名称0:没有 ERR0 1:正在发生 ERR0一直 10:正在扫描 1:正在停止概要发生严重故障时 ON 解除异常时 OFF和工作状态无关一直 ON正在顺序扫描时 OFF 但在步执行中 ON解说                       V01重度异常             V02轻度异常0:没有 ERR1 1:正在发生 ERR1发生轻度故障时 ON 解除异常时 OFF             V03警报0:没有 ALM 1:正在发生 ALM发出警报时 ON 解除异常时 OFF        V04一直 ON             V05一直 OFF一直 0和工作状态无关一直 OFF             V06第 1 扫描END 命令 ON复位OFF 复位时 ON,END 处理时 OFF              V24疑似停止中0:不在模拟停止中 1:模拟停止中执行模拟扫描停止时 ON 解除后 OFF             V25停止请求持续中0:没有停止要求 1:有停止要求要求扫描停止时 ON 解除后 OFF           V26正在停止             V27RUN0:不是执行顺序命令 1:执行顺序命令正在执行顺序命令时 ON             V38数据存储器模式0:单一模式 1:分割模式数据区域分割模式时 ON              V390:不是 FUN 标记清除模式 1:是 FUN 标记清除模式程序 1 是 FUN 标记清除模式时 ON             V3A正在数据备份0:不是正在数据备份 1:正在数据备分正在备份用户数据时 ON             V400:不是执行顺序命令 1:执行顺序命令程序 1 正在执行顺序命令时 ON             V410:不是执行顺序命令 1:执行顺序命令程序 2 正在执行顺序命令时 ON             V420:不是执行顺序命令 1:执行顺序命令程序 3 正在执行顺序命令时 ON              V48测试模式0:测试模式 OFF 1:测试模式工作中测试模式工作时 ON             V49事件监控器0:非进行事件监控 1:正在进行事件监控事件监控器启动时 ON             V4AFB 程序库0:FB 程序库无效 1:FB 程序库有效FB 程序库启动时 ON             V4B用户程序库0:用户程序库无效 1:用户程序库有效用户程序库启动时 ON         FUN 标记清除模式RUN RUN RUN  8-28
           概要标准程序库启动时 ON解说              0:标准程序库无效 1:标准程序库有效       0:没有错误 1:有错误程序 1 中有应用命令错误时 ON,没有时 OFF 但是只用有禁止事项的命令才能成为对象       0:比较结果不是小 1:比较结果是小程序 1 的应用命令的比较命令结果       0:比较结果不是相等 1:比较结果是相等程序 1 的应用命令的比较命令结果       0:比较结果不是大 1:比较结果是大程序 1 的应用命令的比较命令结果       0:结果不是 0 1:结果是 0程序 1 的应用命令运算结果为 0 时 ON       0:没有退位 1:有退位程序 1 的应用命令运算结果比 0 小       0:没有进位 1:有进位程序 1 的应用命令运算结果在位数以上       0:没有错误 1:有错误程序 1 中有变址错误时 ON,没有时 OFF       1:数据异常清除通过启动特殊继电器(V5E)清除未确认数据异常的 警报       0.05 秒0.05 秒 周期 0.1 秒 50%duty 的时钟       0.1 秒周期 0.2 秒 50%duty 的时钟  0.1 秒        0.5 秒0.5 秒 周期 1 秒 50%duty 的时钟       1秒1秒 周期 2 秒 50%duty 的时钟       30 秒30 秒 周期 60 秒 50%duty 的时钟       1 扫描每一次扫描进行 ON/OFF 的时钟  1 扫描        n 扫描m 扫描根据应用命令设定的扫描时间间隔进行 ON/OFF 的时钟        n 扫描根据应用命令设定的扫描时间间隔进行 ON/OFF 的时钟  m 扫描        1:P1 执行中 0:停止或 P2,P3 执行中只在执行 P1 程序时 ON       1:P2 执行中 0:停止或 P1,P3 执行中只在执行 P2 程序时 ON       1:P3 执行中 0:停止或 P1,P2 执行中    0:复位 OFF 1:复位 ON只在执行 P3 程序时 ON          0:复位 OFF 1:复位 ON       0:复位 OFF 1:复位 ON       0:复位 OFF 1:复位 ON 地址 名称 V4C 标准程序库PRG.1 应用命令错误 1 (ER)          V50V51 PRG.1 <V52 PRG.1 =V53 PRG.1 >V54 PRG.1 零(Z)V55 PRG.1 借位(BO)V56 PRG.1 进位(CY)V57 PRG.1 变址错误 (ER)V5E 数据异常清除V70 0.1 秒时钟V71 0.2 秒时钟V72 1 秒时钟V73 2 秒时钟V74 60 秒时钟V78 扫描时钟V79 用户定义时钟 1V7A 用户定义时钟 2 V7C P1 执行中V7D P2 执行中V7E P3 执行中V80 PRG.1-链路 1 通信复位V81 PRG.1-链路 2 通信复位V82 PRG.1-链路 3 通信复位V83 PRG.1-链路 4 通信复位                                                                   8-29
    地址 名称             概要          解说    V84 PRG.1-链路 5 通信复位   0:复位 OFF 1:复位 ON     V85 PRG.1-链路 6 通信复位      0:复位 OFF 1:复位 ON      V86 PRG.1-链路 7 通信复位         0:复位 OFF 1:复位 ON       V87 PRG.1-链路 8 通信复位   0:复位 OFF 1:复位 ON      V90PRG.1-链路 1 链路命令可使用标记        0:不可使用特殊单元命令 1:可使用特殊单元命令分层通信     执行特殊单元命令或分层通信时 OFF 执行时 ON   V91PRG.1-链路 1 链路命令错误标记        V92PRG.1-链路 2 链路命令可使用标记     0:不可使用特殊单元命令 1:可使用特殊单元命令分层通信  执行特殊单元命令或分层通信时 OFF 执行时 ON     V93PRG.1-链路 2 链路命令错误标记            V94PRG.1-链路 3 链路命令可使用标记        0:不可使用特殊单元命令 1:可使用特殊单元命令分层通信     执行特殊单元命令或分层通信时 OFF 执行时 ON   V95PRG.1-链路 3 链路命令错误标记        V96PRG.1-链路 4 链路命令可使用标记     0:不可使用特殊单元命令 1:可使用特殊单元命令分层通信  执行特殊单元命令或分层通信时 OFF 执行时 ON     V97PRG.1-链路 4 链路命令错误标记            V98PRG.1-链路 5 链路命令可使用标记        0:不可使用特殊单元命令 1:可使用特殊单元命令分层通信     执行特殊单元命令或分层通信时 OFF 执行时 ON   V99PRG.1-链路 5 链路命令错误标记        V9APRG.1-链路 6 链路命令可使用标记     0:不可使用特殊单元命令 1:可使用特殊单元命令分层通信  执行特殊单元命令或分层通信时 OFF 执行时 ON     V9BPRG.1-链路 6 链路命令错误标记            V9CPRG.1-链路 7 链路命令可使用标记        0:不可使用特殊单元命令 1:可使用特殊单元命令分层通信     执行特殊单元命令或分层通信时 OFF 执行时 ON   V9DPRG.1-链路 7 链路命令错误标记            V9EPRG.1-链路 8 链路命令可使用标记  0:不可使用特殊单元命令 1:可使用特殊单元命令分层通信 执行特殊单元命令或分层通信时 OFF 执行时 ON      V9FPRG.1-链路 8 链路命令错误标记                 8-30
         解说                                                                                                                       地址 名称VA0 正进行全局通信VA1 链接参数异常VA2 通信异常VA3VA4 正进行全局通信VA5 链接参数异常VA6 通信异常VA7VA8 正进行全局通信VA9 链接参数异常VAA 通信异常 VABVAC 正进行全局通信VAD 链接参数异常VAE 通信异常VAFVB0 正进行全局通信VB1 链接参数异常VB2 通信异常VB3VB4 正进行全局通信VB5 链接参数异常VB6 通信异常VB7VB8 正进行全局通信VB9 链接参数异常VBA 通信异常 VBBVBC 正进行全局通信VBD 链接参数异常VBE 通信异常VBF概要                        PRG.1- 0:无异常 链路 1 1:有异常PRG.1- 0:无异常 链路 2 1:有异常PRG.1- 0:无异常 链路 3 1:有异常PRG.1- 0:无异常 链路 4 1:有异常PRG.1- 0:无异常 链路 5 1:有异常PRG.1- 0:无异常 链路 6 1:有异常PRG.1- 0:无异常 链路 7 1:有异常PRG.1- 0:无异常 链路 8 1:有异常                                                                                                                            注: 关于通信(链路)模块参照其各自的使用说明书。8-31
   地址 名称           概要          解说    VC0 CPU 异常  0:无异常 1:有异常 检测出 CPU 模块异常时 ON   VC1 电源异常     0:无异常 1:有异常  检出停电时 ON 复位或再次接通电源时 OFF   VC2 存储器数据异常     0:无异常 1:有异常  检出程序或参数数据异常时 ON   VC3 I/O 总线异常       0:无异常 1:有异常     检出 I/O 总线异常时 ON  VC4 特殊模块异常    0:无异常 1:有异常    检出特殊模块异常时 ON 解除异常时 OFF  VC5 模块参数异常  0:无异常 1:有异常 CPU 不能正确识别 I/O 模块时 ON   VC6 参数异常       0:无异常 1:有异常     检出参数异常时 ON  VC7I/O 模块异常 (保险丝断裂等)  0:无异常 1:有异常 检出 I/O 模块异常时 ON 解除异常时 OFF   VC8 I/O 构成异常       0:无异常 1:有异常     检出 I/O 模块构成异常时 ON 特殊卡的片数和 I/O 地址的分配)  VC9 用户程序异常  0:无异常 1:有异常 检出与用户程序相关部分异常时 ON 解除异常时 OFF   VCA 备份存储器异常       0:无异常 1:有异常     检出备份存储器异常时 ON  VCB 未确认数据异常  0:已确认 1:未确认 检出存储器数据异常(VC2)时 ON开启 V5E 或者通过使用外围装置时 OFF   VD0 PRG.1 用户程序异常        0:无异常 1:有异常     检出程序 1 的用户程序关联部分异常时 ON  VD1 PRG.2 用户程序异常   0:无异常 1:有异常 检出程序 2 的用户程序关联部分异常时 ON   VD2 PRG.3 用户程序异常        0:无异常 1:有异常     检出程序 3 的用户程序关联部分异常时 ON  VD8 PRG.1 参数异常   0:无异常 1:有异常 检出程序 1 的参数异常时 ON   VD9 PRG.2 参数异常      0:无异常 1:有异常  检出程序 2 的参数异常时 ON   VDA PRG.3 参数异常        0:无异常 1:有异常     检出程序 3 的参数异常时 ON  VE0 I/O 对照异常    0:无异常 1:有异常    参数的 I/O 识别代码与安装的 I/O 模块不同时 ON  VE1 扫描超时  0:无异常 1:有异常 检出扫描超时时 ON 复位或再次接通电源时 OFF    VE2PRG.1 应用命令错误锁 定     0:无异常 1:有异常  发生程序 1 的应用命令错误(V50)时 ON 复位或者写入 0 之前保持此状态   VE8 PRG.1 扫描超时        0:无异常 1:有异常     检出程序 1 的扫描超时时 ON 复位或再次接通电源时 OFF  VE9 PRG.2 扫描超时   0:无异常 1:有异常 检出程序 2 的扫描超时时 ON 复位或再次接通电源时 OFF   VEA PRG.3 扫描超时      0:无异常 1:有异常  检出程序 3 的扫描超时时 ON 复位或再次接通电源时 OFF   VF0 电池异常      0:无异常 1:有异常   检出异常时 ON 解除异常时 OFF 8-32
    地址       名称        概要       解说     VF2 特殊模块分配异常 0:无异常 1:有异常 通信(链路)模块分配异常时 ON    VF3   诊断模块异常   0:无异常 1:有异常  诊断模块异常时 ON    VF5   时钟异常    0:无异常 1:有异常   检出内置时钟异常时 ON兼容模式 扩展区域    地址       名称        概要       解说     EV100 可写入闪存器 0:无法写入闪存器 1:可写入闪存器 可写入闪存器的闪存存储器时 ON    EV101     写入闪存器失败     0:无异常 1:写入失败    写入闪存器的闪存存储器失败时 ON   EVE00 EVEFF      SN-I/F 输入数据链路区域           EVF00 EVFFF          SN-I/F 输出数据链路区域                8-33∼∼
8.2.6特殊寄存器一览表有各种各样的寄存器,可以用于 CPU 状态、内置时钟和链路模块等特殊的用途。 在兼容模式中,各个程序中都有基本区域的特殊继电器。这种情况下,在各顺序程序中使用的专门用于内置时钟的时刻、信号器、链路模块等的特殊寄存器被置于 此程序对应的特殊寄存器区域。其他则全部被置于“PRG.1”用的特殊继电器中。其他的则全部置于”PRG.1”用的特殊寄存器中。对于一览 表中没有的地址,则全部成为预定区域,用户无法使用。(1-1)兼容模式 PRG.1      地址名称 内容            S001 扫描时间最大值 顺序程序的扫描时间的最大值(μs)        2 进制    S002 扫描时间最小值 扫描程序的扫描时间的最小值(μs)    2 进制    S003 扫描时间当前值 顺序程序的扫描时间的最新值(μs)       2 进制   S004 时刻(秒)S005 时刻(分)S006 时刻(时)S007 时刻(日)S008 时刻(月)S009 时刻(年)S00A 时刻(星期)存储内置时钟的当前时刻。用 BCD 代码来表示数据的时候,1 个字节表示 1 位数。 (比如“0102”表示“12”。) 表示年的数据时用公历年的后两位数表示。表示星期的数据时 0~ 6 分别对应星期天~星期六。* 即使重写直接寄存器也不能更改时刻。设定时刻时用 PCwin2 的<CPU 的日期・时刻变更>功能或专用应用命令进行。(应 用命令参照编程手册“309 SYS 时钟调整命令(FUN300) PC3J 系列 2.6 以后的版本”。)                             BCD(1 位/字 节)                    S00C累计通电时间 CPU 模块通电时间累计值(h)S00D      2 进制数退 位    2 进制数进 位    S00E累计运行(RUN)时间 顺序程序运行时间累计值(h)S00F      2 进制数退 位    2 进制数进 位    S010 终端处理时间 最大值 顺序程序的终端处理时间的最大值(μs)    2 进制    S011 终端处理时间 最小值 顺序程序的终端处理时间的最小值(μs)       2 进制   S012 终端处理时间 当前值 顺序程序的终端处理时间的最新值(μs)     2 进制   S019 时刻(分・秒) 存储内置时钟的当前时刻。S01A 时刻(日・时) 用 BCD 代码来表示数据的时候,1 个字节表示 2 位数。      S01B 时刻(年・月)(比如“1234”表示为“12(分)・ 34(秒)。”)  BCD(2 位/字 节)            S022 0.1 ms 定时器 以接通电源时为 0,以 1 ms 为单位动作的类型。(同步扫描)         2 进制   S023 10 ms 定时器 以接通电源时为 0,以 10 ms 为单位动作的类型。(同步扫描)  2 进制      S024 100 ms 定时器 以接通电源时为 0,以 100 ms 为单位动作的类型。(同步扫描)       2 进制   S025 0.1 ms 定时器 以接通电源时为 0,以 0.1 ms 为单位动作的类型。(同步扫描)       2 进制    S0A8链路模块代码 参见 9.4.特殊继电器、特殊寄存器。S0AF        8-34~
       地址名称 内容                        S0C0S0C1 PRG.1 S0C2S0C3S0C4S0C5 PRG.2 S0C6S0C7S0C8S0C9 PRG.3 S0CAS0CBS0E0S0E1 程序变更履S0E2 历1S0E3S0E4S0E5 程序变更履S0E6 历2S0E7S0E8S0E9 程序变更履S0EA 历3S0EBS0ECS0ED 程序变更履S0EE 历4S0EFS0F0S0F1 程序变更履S0F2 历5S0F3S0F4S0F5 程序变更履S0F6 历6S0F7S0F8S0F9 程序变更履S0FA 历7S0FBS0FCS0FD 程序变更履S0FE 历8S0FF初始扫描时间 扫描时间最大值 扫描时间最小值 扫描时间当前值 初始扫描时间 扫描时间最大值 扫描时间最小值 扫描时间当前值 初始扫描时间 扫描时间最大值 扫描时间最小值 扫描时间当前值 变更位置 时刻(分・秒) 时刻(日・时) 时刻(年・月) 变更位置 时刻(分・秒) 时刻(日・时) 时刻(年・月) 变更位置 时刻(分・秒) 时刻(日・时) 时刻(年・月) 变更位置 时刻(分・秒) 时刻(日・时) 时刻(年・月) 变更位置 时刻(分・秒) 时刻(日・时) 时刻(年・月) 变更位置 时刻(分・秒) 时刻(日・时) 时刻(年・月) 变更位置 时刻(分・秒) 时刻(日・时) 时刻(年・月) 变更位置 时刻(分・秒) 时刻(日・时) 时刻(年・月)2进制 2进制2进制2进制 2进制2进制2进制2进制 2进制2进制2进制 2进制位 8:参数 位BCD(2 位/字程序 1 的初始顺序程序执行时间(μs)程序 1 的顺序程序的扫描时间的最大值(μs)程序 1 的顺序程序的扫描时间的最小值(μs)程序 1 的顺序程序的扫描时间的最新值(μs)程序 2 的初始顺序程序执时间(μs)程序 2 的顺序程序的扫描时间的最大值(μs)程序 2 的顺序程序的扫描时间的最小值(μs)程序 2 的顺序程序扫描时间的最新值(μs)程序 3 的初始顺序程序执行时间(μs)程序 3 的顺序程序的扫描时间的最大值(μs)程序 3 的顺序程序的扫描时间的最小值(μs)程序 3 的顺序程序扫描时间的最新值(μs)位 B:PRG.3 位 A:PRG.2 位 9:PRG.1 存储内置时钟的当前时刻。用 BCD 代码来表示数据的时候,1 个字节表示 2 位数。 (比如“1234”表示为“12(分)・ 34(秒)。”) 节)位 B:PRG.3 位 A:PRG.2 位 9:PRG.1 位 8:参数 位存储内置时钟的当前时刻。 BCD                                                                                                        用 BCD 代码来表示数据的时候,1 个字节表示 2 位数。 (比如“1234”表示为“12(分)・ 34(秒)。”) 节)位 B:PRG.3 位 A:PRG.2 位 9:PRG.1 位 8:参数 位存储内置时钟的当前时刻。 BCD(2 位/字                     用 BCD 代码来表示数据的时候,1 个字节表示 2 位数。 (比如“1234”表示为“12(分)・ 34(秒)。”) 节)位 B:PRG.3 位 A:PRG.2 位 9:PRG.1 位 8:参数 位存储内置时钟的当前时刻。 BCD(2 位/字                      用 BCD 代码来表示数据的时候,1 个字节表示 2 位数。 (比如“1234”表示为“12(分)・ 34(秒)。”) 节)(2 位/字 位 B:PRG.3 位 A:PRG.2 位 9:PRG.1 位 8:参数 位                存储内置时钟的当前时刻。 BCD     用 BCD 代码来表示数据的时候,1 个字节表示 2 位数。 (比如“1234”表示为“12(分)・ 34(秒)。”) 节)(2 位/字 位 B:PRG.3 位 A:PRG.2 位 9:PRG.1 位 8:参数 位                 存储内置时钟的当前时刻。 BCD        用 BCD 代码来表示数据的时候,1 个字节表示 2 位数。 (比如“1234”表示为“12(分)・ 34(秒)。”) 节)(2 位/字 位 B:PRG.3 位 A:PRG.2 位 9:PRG.1 位 8:参数 位                  存储内置时钟的当前时刻。 BCD        用 BCD 代码来表示数据的时候,1 个字节表示 2 位数。 (比如“1234”表示为“12(分)・ 34(秒)。”) 节)位 B:PRG.3 位 A:PRG.2 位 9:PRG.1 位 8:参数 位存储内置时钟的当前时刻。 BCD(2 位/字                         用 BCD 代码来表示数据的时候,1 个字节表示 2 位数。 (比如“1234”表示为“12(分)・ 34(秒)。”) 节)(2 位/字              8-35
          地址名称内容                          S130TOYOPUC -PCS 信息通信状态bit0:正在通信(ON: 与 TOYOPUC-PCS 正在通信)bit1:RUN 信号(ON: TOYOPUC-PCS 处于 RUN 状态)bit2:ERR0 信号(ON: 在 TOYOPUC-PCS 发生 ERR0)bit3:ERR1 信号(ON: 在 TOYOPUC-PCS 发生 ERR1)bit4:ALM 信号(ON: 在 TOYOPUC-PCS 发生 ALM) bit8:链路命令可使用标记(ON: 可以对 TOYOPUC-PCS 发出链路命令) bit9:链路命令异常(ON:发出的链路命令发生异常)            S131结构异常次数在 CPU- TOYOPUC-PCS 之间的通信中发生的结构异常次数            S132奇偶性异常次数在 CPU- TOYOPUC-PCS 之间的通信中发生的奇偶性异常次数            S133溢出异常次数在 CPU- TOYOPUC-PCS 之间的通信中发生的超越异常次数            S140 S14F    SN-I/F 输入数据链路区域从 TOYOPUC-PCS 输入。可创建 TOYOPUC-PCS 用回路。              S150 S15F    SN-I/F 输出数据链路区域TOYOPUC-PCS 的输出。可创建 TOYOPUC-PCS 用回路。              S200 S24F    错误信息请参照 5.1.4 错误信息输出用特殊寄存器。              S250 S2CF    PRG.1 PRG.1-链路请参照编程手册。              S2D1CPU 版本存储 CPU 版本。    CPU 版本   寄存器值(S2D1)    1.00   0100    1.01   0101              S300 S3FFPRG.1-链路 通信(链接)模 块状态信息     参照各通信(链路)模块的使用说明书。             18兼容模式时信号器信息       地址       名称        内容     S1000 S11FF        错误信息    请参照 5.1.4 错误信息输出用特殊寄存器。    8-36∼∼~~~~~
(1-2)兼容模式 PRG.2          地址时刻(星期)名称存储内置时钟的当前时刻。用 BCD 代码来表示数据的时候,1 个字节表示 1 位数。 (比如“0102”表示“12”。) 表示年的数据时用公历年的后两位数表示。表示星期的数据时 0~6 分别对应星期天~星期六。* 即使重写直接寄存器也不能更改时刻。设定时刻时用 PCwin2 的<CPU 的日期・时刻变更>功能或专用应用命令 进行。(应用命令参照编程手册“309 SYS 时钟调整命令 (FUN300)   系列 2.6 以后的版本”。)PC3J内容                      S004时刻(秒)           S005时刻(分)           S006时刻(时)BCD(1 位/字 节)           S007时刻(日)           S008时刻(月)           S009时刻(年)           S00A             S019时刻(分・秒)存储内置时钟的当前时刻。用 BCD 代码来表示数据的时候,1 个字节表示 2 位数。 (比如“1234”表示为“12(分)・ 34(秒)。”)BCD(2 位/字 节)           S01A时刻(日・时)           S01B时刻(年・月)            S0A8 S0AF    链路模块代码参见 9.4.特殊继电器、特殊寄存器。              S250 S2CF    PRG.2PRG.2-链路 请参照编程手册。                S300 S3FFPRG.2-链路 通信(链接)模块状态信息     参照各通信(链路)模块的使用说明书。             1 8信号器信息    8-37~~~~
(1-3)兼容模式 PRG.3          地址名称存储内置时钟的当前时刻。用 BCD 代码来表示数据的时候,1 个字节表示 1 位数。 (比如“0102”表示“12”。) 表示年的数据时用公历年的后两位数表示。表示星期的数据时 0~6 分别对应星期天~星期六。* 即使重写直接寄存器也不能更改时刻。设定时刻时用 PCwin2 的<CPU 的日期・时刻变更>功能或专用应用命令 进行。(应用命令参照编程手册“309 SYS 时钟调整命令 (FUN300)   系列 2.6 以后的版本”。)内容                      S004时刻(秒)           S005时刻(分)           S006时刻(时)BCD(1 位/字 节)           S007时刻(日)           S008时刻(月)           S009时刻(年)           S00A时刻(星期)PC3J             S019时刻(分・秒)时刻(日・时)存储内置时钟的当前时刻。用 BCD 代码来表示数据的时候,1 个字节表示 2 位数。 (比如“1234”表示为“12(分)・ 34(秒)。”)BCD(2 位/字 节)           S01A           S01B时刻(年・月)            S0A8 S0AF    链路模块代码参见 9.4.特殊继电器、特殊寄存器。              S250 S2CF    PRG.3PRG.3-链路 请参照编程手册。                S300 S3FFPRG.3-链路 通信(链接)模块状态信息     参照各通信(链路)模块的使用说明书。        1 8信号器信息    8-38~~~~
链路模块代码一览   模块名称    代码  备注 模块名称    代码   备注    2ET FL-net        7001      -    CPU内置 PC链接        FF11    -   2ET Ethernet IP    7002  - CPU 内置 CMP 链接    FF12   -   2ET EtherCAT      7003    -  CPU 内置 SIO     FF13     -   2ET Ethernet  7004 -CPU 内置 MODBUS  FF14 -   2ET FL 远程    7005  -           2ML PC 链接      7111    -               2ML CMP 链接  7112 -      2ML SIO      7113    -               2ML MODBUS  7114 -      DL DLINK(主机)      7220    -               DL DLINK(从机)  7221 -      CPU 内置 FL-net    FF01  -           CPU 内置 Ethernet IP      FF02    -               CPU 内置 EterCAT  FF03 -      CPU 内置 Ethernet      FF04    -               CPU内置 FL远程   FF05 -     8-39
8.3 8.3.1变址功能与间接地址 变址寄存器变址寄存器是指保存寄存器地址信息的专用寄存器。 共有 IX0~IXF16 个。 具有与以往的间接指定类似的功能。与间接指定的不同点、间接指定存在的问题 8.3.1.1• •••• • • • •进行间接指定时,对能够进行间接指定的命令是有限制的。通过使用变址寄存器,使得以往只能直接指定的指令可以间接指定了。在使用间接指定的回路中,即使进行回路监控,地址信息也只能用 16 进制表示,因此,无法实现回路 的可视性。在使用变址寄存器的回路中, 具有可以同时监控间接指定地址及该地址内容的功能,提高 了回路的可视性。在变址寄存器中添加了复位功能和执行前的增量 ・减量以及执行后的增量 减量功能,使编程更兼简 便。变址寄存器操作命令(新增量)8.3.1.2建议将以往执行间接指定命令的回路置换为变址指定以提高回路的可视化。-[INDX D000L -> IX0] -[STIDX IX1 -> D0 ]-[LDIDX D0 -> IX2 -[IDX+ D0 + IX3 -[IDX+H 120h+IX4 ] -[IDX+D -120+IX4 ]间接指定的替换使用例在变址寄存器中设定地址信息的命令 相当于间接指定中的-[MOVAD (D0000) -> D0100]。 在变址寄存器中设定 32bit 的字节地址。 使变址寄存器的地址信息保存在寄存器中的命令 转发地址需要 2 个字符。使用 STIDX 保存的地址信息返回到变址寄存器中。 在寄存器中需要 32bit 的地址信息。 在变址寄存器中进行 16 位寄存器内容的加法运算。 加法运算的数据包括符号。在变址寄存器中进行 16bit16 进制的常数加法运算。 常数数据中包括符号。在变址寄存器中进行 16bit10 进制的常数加法运算。 常数数据中包括符号。|-----------------[MOVAD (D120L)-> D0 ] |-----------------[MOVAD (D200L)-> D1= ] |-----------------[MOVH (D0) -> (D1) ]|-------------[INDX D120L -> IX0 ] |-------------[INDX D200L -> IX1 ] |-------------[MOVE IX0 -> IX1 ]] ]直接指定用命令“MOVE”与“MOVH”进行相同的处理。 不必在所有的运算域中使用变址寄存器。处于混用状态也可。 可用直接指定用命令进行间接指定。8-40
8.3.1.3变址寄存器的偏移指定 指定变址时,可将变址寄存器指定为作为起始地址的相对地址。|-------------[INDX D120L -> IX0 ] |-------------[* IX0 * IX0+1 -> IX+2]将进行 IX0(D120L)与 IX0+1(D120H)的乘法运算结果保存在 IX0+2(D121L)中。 移值可用 10 进制或 16 进制进行设定。可进行偏移指定的范围与用变址寄存器指定的区域与识别符号的范围相同。PC10G 中的扩充本区域(M1000~M17FF)和基本区域(M000~M7FF)被认为是外区域。 另外,在 FR 寄存器等的广大区域内可指定到 max3FFFFh(256 kbyte)。接点・线圈中的变址寄存器使用 变址寄存器也可用于接点和线圈。使用接点・线圈的 bit 地址时,偏移数值也变为位偏移。|-------------[INDX M01L -> IX1 ] IX1+11h IX1+5h|----| |---------------------------------[ ] (M021) (M015)偏移值不能进行与应用命令的运算域相同的跨区域指定。即使在使用变址寄存器时也可添加设定 ・线圈注释。 此外,还可进行回路监控。注意: 在定时器・计数器命令中不能使用变址。运算前・运算后增量・ 减量功能自动更新变址寄存器的地址信息。指定格式++IX0 运算前增量:在执行命令之前根据数据类型进行变址寄存器地址信息的+1(字节型)、+2(字符型)、+4(双字符型)以及+8(双精度)。--IX0 运算前减量:在执行命令之前根据数据类型进行变址寄存器地址信息的−1,−2,−4,−8。IX0++ 运算后增量:在执行命令之后,根据数据类型,进行当前的变址寄存器地址信息的 +1,+2,+4,+8。IX0-- 运算后减量:在执行命令之后,根据数据类型,进行当前的变址寄存器地址信息的 −1,−2,−4,−8。接点・线圈等的位地址不能使用。 根据各命令自动判别数据类型。 例-[W* IX0++ * IX1++ -> IX2++]在(+2) (+2) (+4) 乘法运算命令中,为使结果变为 32bit 而+4。8.3.1.48.3.1.58-41
8.3.1.6 使用变址寄存器的回路的回路监控执行时的地址  (D0008) (R008) (U1010) |----------------[W+ IX0+10h + IX1+10h -> IX2+20h]1234h 2345h 3579h8.3.1.7 详细规格 ●变址命令U1010 的数据  INDX 变址地址设定将 OP1 的地址设定在 OP2 的变址寄存器中。例: [ INDX D0000L -> IX0 ] 在变址寄存器 IX0 中设定 D0LDIDX 载入变址将保存在 OP1 的寄存器中的 32 位变址地址信息作为地址设定在 OP2 的变址中例: [ LDIDX D0000 -> IX0 ] 设定保存在 IX0 的 D1・ D0 中的地址信息的地址。STIDX 保存变址将 OP1 变址寄存器中的 32 位地址信息保存在 OP2 寄存器中。例: [STIDX IX0 -> D0000 ] 保存D1・ D0的IX0地址信息。IDX+ 变址加法运算将 OP1 的寄存器内容(字符)作为偏移补充地址设定在 OP2 的变址寄存器中。 偏移范围: -7FFFh~+7FFFh(8000h~7FFFh)=-32768~+32767例: [IDX+ D0000 + IX0 ] 在IX0中补充D0内容的偏移。IDX+D 变址常数加法运算(10 进制)将 OP1 的 10 进制数作为偏移补充地址设定在 OP2 的变址寄存器中。 偏移范围: -32768~+32767例: [IDX+D 99 + IX0 ] 在IX0种补充偏移99d。IDX+H 变址常数加法运算(16 进制)将 OP1 的 16 进制数作为偏移补充地址设定在 OP2 的变址寄存器中。 偏移范围: -7FFFh~+7FFFh例: [IDX+D FF + IX0 ] 在IX0中补充偏移FFh。  8-42加法运算的单 位为字节
●变址寄存器IX0~IXF 16 个变址寄存器 (1) 地址的识别单位• 在接点・ 线圈等中输入位单位的地址时作为 IXn+(偏移)自动识别 例: D0000L = IX0 ⇒ D0000-1 = IX0+1 IXn 为 IX0~IXF偏移范围: 0~3FFFFFh 位(0~7FFFFh 字节)• 在运算域输入字节单位的地址时 按通常的字节单位识别例: D0000L = IX0• 在运算域输入字符单位的地址时按通常的字单位识别例: D0000L = IX0 or D0000H = IX0 ⇒ D0000 = IX0• 在运算域输入双字符单位的地址时 按通常的字单位识别例: D0000L = IX0 or D0000H = IX0 ⇒ D1・ D0000 = IX0(2) 变址寄存器为 P1、P2、P3 共用寄存器。地址设定的顺序为循环设定(P1⇒P2⇒P3)补充:以 32 位识别所有的地址。(3) 偏移(位指定除外。位指定见上述(1)中说明) IX@+(16 进值或 10 进制偏移数)偏移范围: 0~3FFFF 字节(比位的偏移小) 例: |-----------[ INDX D0000L -> IX0 ]-|偏移通过字节识别  |-----[ DMOV 12345678 -> IX0+3h ]-| : 向 D2・ D1 传送 12345678。(即使 OP2为 IX0+2h,也向 D2・ D1 传送。)【将 D0000L 作为 0,加 3 个字节后(D0001H)作为字符识别,成为(D0001)。】(4) 运算前・运算后 ,增量・减量 --Ixn 执行前设定的地址-1 ++Ixn 执行前设定的地址+1 IXn--执行后设定的地址-1 IXn++执行后设定的地址+1 IXn 为 IX0~IXF例: |-----------[ INDX D0000L -> IX0 ]-| |-----------[ MOV 12 -> IX0++ ]-| |-----------[ IDX+H 1 + IX0 ]-|在 IX0 中设定 D0L向 D0L 发送 12,然后 IX0=D0H将 IX0 的设定地址偏移 1 个字节。(IX0=D0H ⇒ IX0=D1L)向 D1 传送 1234(将 D1L 作为字符地址识别), 然后将地址+1 个字符,使 IX0=D2L。向D3・D2传送12345678(按字符地址识别 D2L),然后将在地址上+2 个字符。 |-----------[ |-----------[WMOV 1234 -> IX0++ ]-| DMOV 12345678 -> IX0++ ]-|(5) 定时器・计数器 不能在定时器・计数器中使用变址。8-43地址的数据类型 自动识别(字节・字符・双字符)设定的变址寄存器值本身不会变更 设定的变址寄存器值在实际中会发生变化
(6) 不能使用变址寄存器的应用命令 BBMOV(位块传送)(7) 切断电源时、复位时 不保持变址寄存器内的内容。(清零)●变址错误(错误 7F) *发生条件(1) (2)(3)执行未设定变址地址的与变址相关的应用命令或使用变址寄存器。区域外:通过偏移跨接识别符号时。但即使跨接识别符号相同但不相连的地址时也会发生错误。(例:M7FF 和 M1000)补充:在 U、EB、FR 的相同识别符号内即使跨接 64K 的区域也可正常进行变址。执行定时器命令时在 T 或 ET 之外使用变址寄存器。*标记V57(变址错误)ON。 VE2(应用命令错误锁定)ON。 补充:V50(应用命令错误 1)不处于 ON 状态。*错误时的 RUN 状态 进行运算命令错误检查时停止。*错误时的动作(1) 接点⇒OFF(2) 线圈⇒什么都不做(因为没有执行的寄存器本身)(3) 接点类型应用命令(比较命令)⇒OFF(4) 输出类型应用命令⇒不执行(因为没有执行的寄存器本身)●功能说明例 P1|------------------[ INDX D5L -> IX0 ]-| |--------------[ WMOV 1234 -> IX0++ ]-| |----------[ DMOV 12345678 -> IX0++ ]-| |-----------------[ MOV AB -> IX0+3 ]-| |--------------[ WMOV 9876 -> IX0+4 ]-| |-------------[ WMOV ABCD -> IX0+5 ]-| |-----------------[ STIDX IX0 -> D10 ]-| |-----------------[ LDIDX D10 -> IX1 ]-| |-------------------[ IDX+H 20 + IX1 ]-|P2|-----------------[ WMOVE IX1 -> D0 ]-|在 IX0 中设定 D5L向 D5 传送 1234h(然后 IX0=D6L)向 D7・ D6 传送 12345678h(然后 IX0=D8L) 向 D9H 传送 AB(IX0=D8L)向 DA 传送 9876(IX0=D8L)向 DA 传送 ABCD(IX0=D8L)在 D11・ D10 中保存 IX0(=D8L)的地址信在 IX1 中设定 D8L在 IX1 中设定 D18L(IX1=D8L+20h=D18L)向 P2-D0 传送 P1-D18L     8-44以字符单位识别DAL,DAH⇒DA
●Pcwin2 显示及注意事项(1) 将变址作为线圈(包括输出型应用命令)使用时,无法进行程序检查中的输出重叠印检测。(2) 监控时变址寄存器显示所示地址。(3) 在各变址上有变址・串行号码。(4) 各变址・ 串行号码均具有注释。(变址・ 注释)(5) 块对照包括变址变址 ・串行号码对照。(6) 在应用命令中即使是间接地址的运算域也可使用变址。(7) 在 SFC 步中不能将变址作为直接地址使用。(8) 在 FB 程序库中不能使用变址。     变址・注释注释 变址・注释变址・注释变址・注释 变址・注释注释注释变址・注释注释注释       8-45
 8.3.1.8 运算前・运算后 ,增量・减量地址的加 减法运算值一览表运算前・运算后的增・ 减量( --Ixn、++Ixn、IXn--、IXn++:IXn 为 IX0~IXF)自动判别各应用命令的地址数据类型(字节・字符・ 双字符 )后改变变址寄存器的地址。FUN. 助记符 步 带 NO. 号 名称 数 OP1 OP2 OP3 INDX 符号浮动小数 点单双 精精 度度0 WMOVE1 WMOVP2 WXCH3 WBIN4 WBCD5 DIV6 PUP7 WMOVR8 WMOV Q9 NOT10 W+P11 W-P12 WCP13 AND14 OR17 CP18 XOR20 CMOV21 CLR36 WSFR37 WSFL50 DECO51 ENCO52 SEG53 SXCH54 BPU62 MOVT63 WINC64 WDEC68 SFIN69 SFOUT70 BMOV171 BMVI72 BDIV73 BPUP74 MOVF2 字节直接传送 传送 BCD4 位常数 16 位转换BCD4 位->BIN BIN->BCD4 位分配(字节)抽取(字节)传送 10 进制 5 位常数 传送 8 进制 6 位常数反转(字节)BCD 加法运算(4 位) BCD 减法运算(4 位) 字符比较 逻辑乘法(字节) 逻辑和(字节) 字节比较 异逻辑和(字节)清零确认传送(字节)重合数据清零(字节)右移 1 位(字符) 左移 1 位(字符) 4->16 解码16->4 编码7 段解码4 位转换位抽取(字节)16进制2位常数2处 传送2 进制增量(字符) 2 进制减量(字符) 存入移位 IN(字节) 存入移位 OUT(字节) 字节块传送 1 字节间接块传送块分配(字节)块抽取(字节)1 个字节间接传送 14 发送地址 接收地址4 常数数据 接收地址4 转换地址 接收地址4 转换起始地址 接收地址4 转换起始地址 接收地址5 发送地址 接收地址基本地 址5 发送地址基本地 偏移保存地址 址4 常数数据 接收地址4 常数数据 接收地址4 转换起始地址 接收地址5 S地址 D地址5 S地址 D地址4 比较的起始地址 比较的目标地址 5 S地址 D地址5 S地址 D地址4 比较的起始地址 比较的目标地址5 S地址 D地址5 发送地址 接收地址清零确 认5 比较的起始地址 比较清零目标地 址3 移位地址3 移位地址4 解码起始地址 解码目标地址 4 编码起始地址 编码目标地址 5 解码起始地址 解码目标地址 4 转换地址 接收地址4 位的位置保存 抽取起始地址5 常数数据 接收地址 4 比较的起始地址 +1 地址3 -1 地址4 起始地址 结束地址5 起始地址 结束地址5 发送起始地址 接收地址起始5 发送起始间接 接收起始间接5 传送基本地址偏 接收地址 移2/2 0/2 2/2 2/2 2/2偏移保存地址 1/1/1 接收地址 1/1/10/2 0/21/1 R地址 2/2/2 R地址 2/2/22/2  R地址 1/1/1 R地址 1/1/11/1  R地址 1/1/1数据数量 1/1/0 数据数量 1/1/022 1/2 2/1 数据数量 1/1/0 1/1 1/1接收地址 0/1/1 2/22 1/1 接收地址 1/1/1 接收结束地址 1/1/1 传送数间接 2/2/2传送数间接 2/2/2 传送数间接 2/2/25 发送地址 4 发送地址传送起始基本地 址偏移接收地址间接 1/2 8-46
 FUN. 助记符 步 带 NO. 号 名称 数 OP1 OP2 OP3 INDX 符号浮动小数 点单双 精精 度度75 MOVG76 MOVH77 FIL178 FILI181 MKP282 PCH283 MKP184 PCH185 CDSET86 CDO187 CDO288 SRH189 WSRH190 MOVE91 UP192 W+93 W-94 W*95 W/B100 MOV101 WMOV102 DMOV103 MOVP104 DMOVP105 MOVR106 DMOVR107 MOVQ108 DMOVQ109 JIS110 WMOVT111 DMOVE112 WMOVF113 DMOVF114 WMOVG115 DMOVG116 WMOVH117 DMOVH118 BMOV2119 WBMOV120 WBMVI1 个字节间接传送 2 4 发送地址间接1 个字节间接传送 3 4 发送地址间接 接收地址间接2/2 0/1/1 1/2/2 1/1 1 1/1 11/1/1 1/1/1 1/1/1 1/1/1 2/2/21/11/1 2/2/2  2/2/2  2/2/4  2/1/2 0/1 0/2 0/0/4  0/0/1 0/0/40/1  0/0/4 0/1 0/0/4 0/0/10/2/24/4 2/2 4/22/22/4 2/2 2/21/1/0 2/2/0 2/2/21 5 常数数据 起始 结束地址1 5 常数数据间接 起始间接 结束地址间接4 发送地址 接收地址 3 检查起始4 发送地址 接收地址 3 检查起始5 发送地址 接收地址偏移 接收地址基本地 址1 5 发送地址偏移 发送地址基本地 接收地址 址2 5 发送地址偏移 发送地址基本地 转换输出目标 址1 5 搜索数据保存地 起始 结束 址字节数据加注间接数据加注偶数奇偶编制偶数奇偶检查奇数奇偶编制奇数奇偶检查代码转换设定代码转换输出代码转换输出字节数据搜索字符数据搜索1 字节直接传送 4 发送地址高位方向移位 1 个字节 4 起始2 进制加法运算(字符) S地址2 进制减法运算(字符) S地址2 进制乘法运算(字符) S地址2 进制除法运算(字符) S地址传送16进制2位常数 4 常数数据传送16进制4位常数 4 常数数据传送16进制8位常数 5 常数数据低位传送 BCD2 位常数 4 常数数据传送 BCD8 位常数 5 常数数据低位传送10进制3位常数 4 常数数据传送10进制10位常数 5 常数数据低位传送 8 进制 3 位常数 4 常数数据传送8进制11位常数 5 常数数据低位JIS 代码存储 5 常数数据低位16 进制 4 位常数 2 处 5 常数数据 传送4 字节直接传送 4 发送地址 2字节间接传送 1 4 发送地址 4字节间接传送 1 4 发送地址2 字节间接传送 2 4 发送地址间接 4字节间接传送2 4 发送地址间接2 字节间接传送 3 4 发送地址间接 4 字节间接传送 3 4 发送地址间接 字节块传送2 5 发送地址起始 字符块传送 5 发送地址起始 字符间接块传送 5 发送起始间接1 5 搜索数据保存地 起始 结束 址8-47接收地址 2/1接收地址结束D地址 R地址 D地址 R地址 D地址 R地址 D地址 R地址 接收地址接收地址常数数据高位 接收地址 接收地址常数数据高位 接收地址 接收地址常数数据高位 接收地址 接收地址常数数据高位 接收地址 常数数据高位 接收地址接收地址 接收地址接收地址接收地址间接接收地址间接接收地址接收地址接收地址间接接收地址间接接收地址起始 传送数 接收地址起始 传送数 接收起始间接 传送数间接568 568569 569
 FUN. 助记符 步 带 NO. 号 名称 数 OP1 OP2 OP3 INDX 符号浮动小数 点单双 精精 度度122 WDIV123 DDIV124 WPUP125 DPUP126 WBDIV127 WBPUP128 FIL2129 WFIL130 FILI2131 WFILI132 XCH133 DXCH134 BXCH135 WBXCH136 BSET137 WBSET138 DBSET139 BRST140 WBRST141 DBRST142 WBPU143 DBPU144 MOVJ145 WMOVJ146 DMOVJ147 MOVK148 WMOVK149 DMOVK152 BIN153 DBIN154 BCD155 DBCD156 JBIN157 BJIS158 WTIM1159 WTIM2160 FIFW161 WFIFW162 DFIFW163 FIFR164 WFIFR165 DFIFR分配(字符)分配(32 位)抽取(字符)抽取(32 位)块分配(字符)块抽取(字符)字节数据加注 2 字符数据加注 间接字节数据加注 2 间接字符数据加注 8 位转换32 位转换 块转换(字节) 块转换(字符) 位设定(字节) 位设定(字符) 位设定(32 位) 位复位(字节) 位复位(字符) 位复位(32 位) 位抽取(字符) 位抽取(32 位) 寄存器->文件(字节) 寄存器->文件(字符) 寄存器->文件(32 位) 寄存器->文件(字节) 寄存器->文件(字符) 寄存器->文件(32 位) BCD2 位->BIN BCD8 位->BIN BIN->BCD2 位 BIN->BCD8 位 JIS->BINBIN->JIS 时分秒->秒 秒->时分秒FIFO 写入(字节) FIFO 写入(字符) FIFO 写入(32 位) FIFO 读出(字节) FIFO 读出(字符) FIFO 读出(32 位)5 发送地址 5 发送地址5 发送地址基本地 址5 发送地址基本地 址5 传送基本地址偏 移5 发送地址间接 5 常数数据5 常数数据5 常数数据间接5 常数数据间接4 发送地址目的地 4 发送地址目的地 5 发送地址目的地 5 发送地址目的地 4 位的位置4 位的位置4 位的位置4 位的位置4 位的位置4 位的位置4 位的位置4 位的位置4 发送地址4 发送地址4 发送地址4 发送地址4 发送地址4 发送地址4 转换起始地址4 转换起始地址4 转换起始地址4 转换起始地址5 转换起始地址5 转换起始地址4 转换起始地址4 转换起始地址5 发送地址5 发送地址5 发送地址5 文件起始5 文件起始5 文件起始接收地址基本地 址接收地址基本地 址发送地址偏移发送地址偏移接收地址间接传送起始基本地 址偏移接收地址起始接收地址起始接收起始间接接收起始间接发送地址目的地发送地址目的地发送地址目的地发送地址目的地位操作目的地位操作目的地位操作目的地位操作目的地位操作目的地位操作目的地位操作目的地位操作目的地接收地址接收地址接收地址接收地址接收地址接收地址转换目标地址转换目标地址转换目标地址转换目标地址转换目标地址转换目标地址转换目标地址转换目标地址文件起始文件起始文件起始偏移 偏移 偏移接收地址偏移 2/2/2接收地址偏移 4/2/2接收地址 2/2/2接收地址 4/2/4传送数间接 2/2/2传送数间接 2/2/2 数据数量 0/1/0数据数量 0/2/0 数据数间接 1/2/2 数据数间接 2/2/21/14/4 数据数量 1/1/0 数据数量 2/2/0 1/1 1/2 1/4 1/1 1/2 1/4 1/2 1/4 1/1 2/2 4/4 1/1 2/2 4/4 1/1 4/4 1/1 4/4 数据数量 1/1/0 数据数量 1/1/0 1/2 2/1 偏移 1/1/2 偏移 2/2/2 偏移 4/4/2 接收地址 1/2/1 接收地址 2/2/2 接收地址 4/2/48-48
 FUN. 助记符 步 带 NO. 号 名称 数 OP1 OP2 OP3 INDX 符号浮动小数 点单双 精精 度度556 556 557 557 558 558559 559166 WCMOV167 WCLR168 +169 D+170 -171 D-172 *173 D*174 /175 W/176 D/177 +P178 D+P179 -P180 D-P181 *P182 W*P183 D*P184 /P185 W/P186 D/P187 WAND188 DAND189 WOR190 DOR191 WNOT192 DNOT193 WXOR194 DXOR195 INC196 DINC197 DEC198 DDEC199 INCP200 WINCP201 DINCP202 DECP203 WDECP204 DDECP208 SUM209 WSUM210 DSUM211 DCP212 SRH2213 WSRH2清零确认传送(字节)重合数据清零(字符)2 进制加法运算(字节)2 进制加法运算(32 位)2 进制减法运算(字节)2 进制减法运算(32 位)2 进制乘法运算(字节)2 进制乘法运算(32 位)2 进制除法运算(字节)2 进制除法运算(字符 2)2 进制除法运算(32 位) BCD 加法运算(2 位) BCD 加法运算(8 位) BCD 减法运算(2 位) BCD 减法运算(8 位) BCD 乘法运算(2 位) BCD 乘法运算(4 位) BCD 乘法运算(8 位) BCD 除法运算(2 位) BCD 除法运算(4 位) BCD 除法运算(8 位) 逻辑乘法(字符) 逻辑乘法(32 位) 逻辑和(字符) 逻辑和(32 位) 反转(字符)反转(32 位) 异逻辑和(字符) 异逻辑和(32 位)2 进制增量(字节) 2 进制增量(32 位) 2 进制减量(字节) 2 进制减量(32 位) BCD2 位增量BCD4 位增量 BCD8 位增量 BCD2 位减量 BCD4 位减量 BCD8 位减量ON 位计数(字节) ON 位计数(字符) ON 位计数(32 位) 32 位比较 字节数据搜索 2 字数据搜索 25 发送地址起始 接收地址清零确 传送数 认5 比较起始 清零目标起始 数据数量 5 S地址 D地址 R地址5 S地址 D地址 R地址5 S地址 D地址 R地址5 S地址 D地址 R地址 5 S地址 D地址 R地址 5 S地址 D地址 R地址 5 S地址 D地址 R地址5 S地址 D地址 R地址 5 S地址 D地址 R地址5 S地址 D地址 R地址 5 S地址 D地址 R地址 5 S地址 D地址 R地址 5 S地址 D地址 R地址 5 S地址 D地址 R地址 5 S地址 D地址 R地址 5 S地址 D地址 R地址 5 S地址 D地址 R地址 5 S地址 D地址 R地址 5 S地址 D地址 R地址 5 S地址 D地址 R地址 5 S地址 D地址 R地址 5 S地址 D地址 R地址 5 S地址 D地址 R地址 4 发送地址 接收地址4 发送地址 接收地址5 S地址 D地址 R地址5 S地址 D地址 R地址4 比较目标地址 +1 地址4 比较目标地址 +1 地址3 -1 地址3 -1 地址4 比较目标地址 +1 地址4 比较目标地址 +1 地址4 比较目标地址 +1 地址3 -1 地址3 -1 地址3 -1 地址4 计数起始 接收地址4 计数起始 接收地址4 计数起始 接收地址4 比较目标地址 比较的起始地址5 搜索数据地址 起始 数据数量 5 搜索数据地址 起始 数据数量2/2/0 2/2/01/1/1  4/4/4  1/1/1  4/4/4  1/1/2  4/4/8  1/1/1 2/2/2  4/4/4 1/1/1 4/4/4 1/1/1 4/4/4 1/1/2 2/2/4 4/4/8 1/1/1 2/2/2 4/4/4 1/1/1 4/4/4 1/1/1 4/4/42/2 4/4/4 2/2/2 4/4/4 1/1 4/4 1 4 1/1 2/2 4/4 1 2 4 1/1 2/1 4/14/4  2/1/02/2/08-49
 FUN. 助记符 步 带 NO. 号 名称 数 OP1 OP2 OP3 INDX 符号浮动小数 点单双 精精 度度214 DSRH217 SFR218 DSFR219 SFL220 DSFL221 SRL222 WSRL223 DSRL224 BSFR225 WBSFR226 DBSFR227 BSFL228 WBSFL229 DBSFL230 BSRL231 WBSRL232 DBSRL233 RRC234 WRRC235 DRRC236 RLC237 WRLC238 DRLC239 RLRC240 WRLRC241 DRLRC242 RR243 WRR244 DRR245 RL246 WRL247 DRL248 RLR249 WRLR250 DRLR32 位数据搜索右移 1 位(字节)右移 1 位(32 位)左移 1 位(字节)左移 1 位(32 位)左右移 1 位(字节)左右移 1 位(字符)左右移 1 位(32 位)右移 N 位(字节)右移 N 位(字符)右移 N 位(32 位)左移 N 位(字节)左移 N 位(字符)左移 N 位(32 位)左右移 N 位(字节)左右移 N 位(字符)左右移 N 位(32 位)带 CY 循环右移(字节)带 CY 循环右移(字符)带 CY 循环右移(32 位)带 CY 循环左移(字节)带 CY 循环左移(字符)带 CY 循环右左移(32 位)带 CY 循环左右移(字 节)带 CY 循环左右移(字 符)带 CY 循环左右移(32 位)不带 CY 循环右移(字 节)不带 CY 循环右移(字 符)不带 CY 循环右移(32 位)不带 CY 循环左移(字 节)不带 CY 循环左移(字 符)不带 CY 循环右左移 (32 位)不带 CY 循环左右移 (字节)不带 CY 循环左右移 (字符)不带 CY 循环左右移 (32 位)5 搜索数据地址3 移位地址 1 3 移位地址 4 3 移位地址 1 3 移位地址 4 3 移位地址 1 3 移位地址 2 3 移位地址 4 4 移位地址 移位数 1/0 4 移位地址 移位数 2/0 4 移位地址 移位数 4/0 4 移位地址 移位数 1/0 4 移位地址 移位数 2/0 4 移位地址 移位数 4/0 4 移位地址 移位数 1/0 4 移位地址 移位数 2/0 4 移位地址 移位数 4/0 4 移位地址 移位数 1/0 4 移位地址 移位数 2/0 4 移位地址 移位数 4/0 4 移位地址 移位数 1/0 4 移位地址 移位数 2/04 移位地址 移位数 4/0 4 移位地址 移位数 1/0 4 移位地址 移位数 2/0 4 移位地址 移位数 4/0 4 移位地址 移位数 1/0 4 移位地址 移位数 2/0 4 移位地址 移位数 4/0 4 移位地址 移位数 1/0 4 移位地址 移位数 2/0 4 移位地址 移位数 4/0 4 移位地址 移位数 1/0 4 移位地址 移位数 2/0 4 移位地址 移位数 4/08-50起始 数据数量 4/4/0
 FUN. 助记符 步 带 NO. 号 名称 数 OP1 OP2 OP3 INDX 符号浮动小数 点单双 精精 度度251 SUP252 UP2253 WUP254 DUP255 SDOWN256 DOWN257 WDOWN258 DDOWN259 STURN260 TURN261 WTURN281 RI282 RO283 REF284 REFO291 ANN 302 MSET 304 SPR 306 SPW316 HCR317 HCW318 IOR319 IOW320 MOVAD323 +H324 W+H325 D+H326 +HP327 W+HP328 D+HP329 -H330 W-H331 D-H332 -HP333 W-HP334 D-HP335 *H336 W*H上位方向移位(4 位) 上位方向移位(字节) 上位方向移位(字符) 上位方向移位(32 位) 下位方向移位(4 位) 下位方向移位(字节)下位方向移位(字符) 下位方向移位(32 位)倒置(4 位) 倒置(8 位) 倒置(16 位) 输入更新 输出更新 外部输入传送 外部输出传送 信号器DLNK 信息发送 特殊模块字节读出 特殊模块字节写入 高速计数器 RD 高速计数器 WR 共享 I/ORD共享 I/OWR 地址常数传送BIN 常数加法运算(字 节)BIN 常数加法运算(字 符)BIN 常数加法运算(32 位)BCD2 位常数加法运算BCD4 位常数加法运算BCD8 位常数加法运算BIN 常数减法运算(字 节)BIN 常数减法运算(字 符)BIN 常数减法运算(32 位)BCD2 位常数减法运算BCD4 位常数减法运算BCD8 位常数减法运算BIN 常数乘法运算(字 节)BIN 常数乘法运算(字 符)4 移位起始 移位数 4 移位起始 移位数 4 移位起始 移位数 4 移位起始 移位数 4 移位起始 移位数 4 移位起始 移位数4 移位起始 移位数 4 移位起始 移位数5 发送地址 接收地址 5 发送地址 接收地址 5 发送地址 接收地址 4 起始 数据数量 4 起始 数据数量 5 发送地址 接收地址 5 发送地址 接收地址 4 代码 发送地址5 链路 NO.传送数 发送地址间接 5 链路 NO.传送数 发送地址间接数据数量数据数量数据数量数据数量 数据数量接收地址间接接收地址间接1/0 1/0 2/0 4/0 1/0 1/02/04/0 1/1/0 1/1/0 2/2/0 1/0 1/0 1/1/0 1/1/0 0/1 0/1/1 2/2/2 2/2/2 2/2 2/2/0 2/2/0 2/2/0 0/21/0/1 2/0/2 4/0/0  1/0/12/0/2 4/0/01/0/1 2/0/2 4/0/4  1/0/12/0/2 4/0/41/0/2  2/0/4 4 模块地址 5 模块地址 5 模块地址 5 模块地址 4 地址常数5 S地址 5 S地址5 S地址 5 S地址5 S地址 5 S地址5 S地址 5 S地址5 S地址 5 S地址5 S地址 5 S地址5 S地址 5 S地址接收地址发送地址 数据数量 接收地址 数据数量 发送地址 数据数量 接收地址常数数据 R地址常数数据 R地址常数数据低位 常数数据高位常数数据 R地址常数数据 R地址常数数据低位 常数数据高位常数数据 R地址常数数据 R地址常数数据低位 常数数据高位常数数据 R地址常数数据 R地址常数数据低位 常数数据高位常数数据 R地址常数数据 R地址560 560561 5618-51
 FUN. 助记符 步 带 NO. 号 名称 数 OP1 OP2 OP3 INDX 符号浮动小数 点单双 精精 度度337 D*H338 *HP339 W*HP340 D*HP341 /H342 W/H343 D/H344 /HP345 W/HP346 D/HP347 ANDH348 WANDH349 DANDH350 ORH351 WORH352 DORH353 XORH354 WXORH355 DXORH362 STI1363 WSTI1364 DSTI1369 FRWR370 CSET371 BRSET372 WBR373 WBW374 MAX375 WMAX376 DMAX377 MIN378 WMIN379 DMIN380 AVE381 WAVE382 DAVE576 =H577 =D578 =N579 W=HBIN 常数乘法运算(32 位)BCD2 位常数乘法运算BCD4 位常数乘法运算BCD8 位常数乘法运算BIN 常数除法运算(字 节)BIN 常数除法运算(字 符)BIN 常数除法运算(32 位)BCD2 位常数除法运算 BCD4 位常数除法运算 BCD8 位常数除法运算 常数逻辑乘法(字节) 常数逻辑乘法(字符) 常数逻辑乘法(32 位) 常数逻辑和(字节) 常数逻辑和(字符) 常数逻辑和(32 位) 常数 XOR(字节)常数 XOR(字符) 常数 XOR(32 位) ΣX(字节)BIN ΣX(字符)BIN ΣX(32 位)BIN闪存器写入发行 I/O 寄存器读出EB 地址设定从 EB 地址读出向 EB 地址写入最大值检索(字节)最大值检索(字符)最大值检索(32 位)最小值检索(字节)最小值检索(字符)最小值检索(32 位)平均(字节)平均(字符)平均(32 位)比较 AND=16 进制(字 节)比较 AND=10 进制(字 节)比較 AND=变量(字节) 比较 AND=16 进制(字符)5 S地址 5 S地址5 S地址 5 S地址5 S地址 5 S地址5 S地址 5 S地址5 S地址5 S地址5 S地址5 S地址5 S地址5 S地址5 S地址5 S地址5 S地址5 S地址5 S地址5 起始地址 5 起始地址 5 起始地址5 起始地址 5 数据数量5 EB 地址(L) 5 发送地址 5 发送地址 5 起始地址 5 起始地址 5 起始地址 5 起始地址 5 起始地址 5 起始地址 5 起始地址 5 起始地址 5 起始地址4 S地址 4 S地址4 S地址 4 S地址常数数据低位常数数据常数数据常数数据低位常数数据 常数数据常数数据低位常数数据常数数据常数数据低位常数数据常数数据常数数据低位常数数据常数数据常数数据低位常数数据常数数据常数数据低位接收地址接收地址接收地址接收地址(FR 寄 存器)发行目标地址 EB 地址(H) 接收地址 接收地址 接收地址 接收地址 接收地址 接收地址 接收地址 接收地址 接收地址 接收地址 接收地址间接指定 间接指定D地址 间接指定常数数据高位 R地址R地址 常数数据高位R地址 R地址常数数据高位 R地址R地址 常数数据高位 R地址 R地址 常数数据高位 R地址 R地址 常数数据高位 R地址 R地址 常数数据高位 数据数量 数据数量 数据数量数据数量保存目标地址接收地址传送数传送数数据数量数据数量数据数量数据数量数据数量数据数量数据数量数据数量数据数量4/0/0  562 562 1/0/22/0/4 4/0/01/0/1  2/0/2 4/0/0  563 563 1/0/12/0/24/0/01/0/12/0/24/0/01/0/12/0/24/0/01/0/12/0/24/0/01/2/2 2/2/2 4/2/2  564 5642/2/00/1/10/0/42/2/02/2/01/1/2 2/2/2 4/2/4  565 565 1/1/2 2/2/2 4/2/4  566 566 1/1/2 2/2/2 4/2/4  567 5671 11 28-52
 FUN. 助记符 步 带 NO. 号 名称 数 OP1 OP2 OP3 INDX 符号浮动小数 点单双 精精 度度928 928 929 929580 W=D581 W=N582 D=H583 D=D584 D=N585 <>H586 <>D587 <>N588 W<>H589 W<>D590 W<>N591 D<>H592 D<>D593 D<>N594 >H595 >D596 >N597 W>H598 W>D599 W>N600 D>H601 D>D602 D>N603 >=H604 >=D605 >=N606 W>=H607 W>=D比较 AND=10 进制(字 符)比较 AND=变量(字节) 比较 AND=16 进制(32位)比较 AND=10 进制(32位)比较 AND=变量(32 位)比较 AND<>16 进制 (字节)比较 AND<>10 进制 (字节)比较 AND<>变量(字 节)比较 AND<>16 进制 (字符)比较 AND<>10 进制 (字符)比较 AND<>变量(字 符)比较AND<>16进制 (32 位)比較 AND<>10 進(32 位)比较 AND<>变量(32 位)比较 AND>16 进制(字 节)比较 AND>10 进制(字 节)比较 AND>变量(字节) 比较 AND>16 进制(字符)比较 AND>10 进制(字符)比较 AND>变量(字符)比较 AND>16 进制(32 位)比较 AND>10 进制(32 位)比较 AND>变量(32 位) 比较 AND>=16 进制(字节)比较 AND>=10 进制(字节)比较 AND>=变量(字节)比较 AND>=16 进制(字符)比较 AND>=10 进制 (字符)4 S地址 间接指定 4 S地址 D地址5 S地址 常数低位5 S地址 常数低位 4 S地址 D地址4 S地址 间接指定4 S地址 间接指定 4 S地址 D地址4 S地址 间接指定 4 S地址 间接指定 4 S地址 D地址5 S地址 常数低位5 S地址 常数低位4 S地址 D地址4 S地址 间接指定4 S地址 间接指定 4 S地址 D地址4 S地址 间接指定4 S地址 间接指定 4 S地址 D地址5 S地址 常数低位5 S地址 常数低位 4 S地址 D地址4 S地址 间接指定4 S地址 间接指定 4 S地址 D地址4 S地址 间接指定 4 S地址 间接指定常数高位 常数高位2 24 4  4 11 1 2 2 28-53常数高位 4常数高位4411 1 22930 930 931 9312 常数高位 4常数高位4 4 11 1 2 2932 932 933 933
 FUN. 助记符 步 带 NO. 号 名称 数 OP1 OP2 OP3 INDX 符号浮动小数 点单双 精精 度度608 W>=N609 D>=H610 D>=D611 D>=N612 <H613 <D614 <N615 W<H616 W<D617 W<N618 D<H619 D<D620 D<N621 <=H622 <=D623 <=N624 W<=H625 W<=D626 W<=N627 D<=H628 D<=D629 D<=N640 =H641 =D644 =N648 W=H649 W=D652 W=N比较 AND>=变量(字 符)比较AND>=16进制 (32 位)比较 AND>=10 进制 (32 位)比较 AND>=变量(32 位)比较 AND<16 进制(字 节)比较 AND<10 进制(字 节)比较 AND<变量(字节) 比较 AND<16 进制(字符)比较 AND<10 进制(字符)比较 AND<变量(字符)比较 AND<16 进制(32 位)比较 AND<10 进制(32 位)比较 AND<变量(32 位) 比较 AND<=16 进制(字节)比较 AND<=10 进制(字节)比较 AND<=变量(字节)比较 AND<=16 进制(字符)比较 AND<=10 进制(字符)比较 AND<=变量(字符) 比较AND<=16进制(32 位)比较 AND<=10 进制(32 位)比较 AND<=变量(32位)比较 STR=16 进制(字节)比較 STR=10 进制(字节)比较 STR=变量(字节)比较 STR=16 进制(字 符)比较 STR=10 进制(字 符)比较 STR=变量(字符)4 S地址 D地址5 S地址 常数低位5 S地址 常数低位4 S地址 D地址4 S地址 间接指定4 S地址 间接指定 4 S地址 D地址4 S地址 间接指定4 S地址 间接指定 4 S地址 D地址5 S地址 常数低位5 S地址 常数低位 4 S地址 D地址4 S地址 间接指定4 S地址 间接指定 4 S地址 D地址4 S地址 间接指定 4 S地址 间接指定 4 S地址 D地址5 S地址 常数低位5 S地址 常数低位4 S地址 D地址4 S地址 间接指定4 S地址 间接指定 4 S地址 D地址4 S地址 间接指定4 S地址 间接指定 4 S地址 D地址2 常数高位 48-54常数高位4 934 934 4 935 935 111 222 常数高位 4常数高位4 936 936 4 937 937 11 1 2 2 2常数高位 4常数高位4 938 938 4 939 939 111 22 2
 FUN. 助记符 步 带 NO. 号 名称 数 OP1 OP2 OP3 INDX 符号浮动小数 点单双 精精 度度940 940 941 941656 D=H657 D=D660 D=N664 =H665 =D668 =N672 W=H673 W=D676 W=N680 D=H681 D=D684 D=N688 <>H689 <>D692 <>N696 W<>H697 W<>D700 W<>N704 D<>H705 D<>D708 D<>N712 <>H713 <>D716 <>N720 W<>H721 W<>D724 W<>N728 D<>D729 D<>D比较STR=16进制(32 位)比较 STR=10 进制(32 位)比较 STR=变量(32 位) 比较 OR=16 进制(字节)比较 OR=10 进制(字节)比较 OR=变量(字节)比较 OR=16 进制(字 符)比较 OR=10 进制(字 符)比较 OR=变量(字符) 比较OR=16进制(32位)比较 OR=10 进制(32位)比较 OR=变量(32 位)比较 STR<>16 进制(字 节)比较 STR<>10 进制(字 节)比较 STR<>变量(字 节)比较 STR<>16 进制(字 符)比较 STR<>10 进制(字 符)比较 STR<>变量(字 符)比较STR<>16进制 (32 位)比较 STR<>10 进制 (32 位)比较 STR<>变量(32 位)比较 OR<>16 进制(字 节)比较 OR<>10 进制(字 节)比较 OR<>变量(字节) 比较 OR<>16 进制(字符)比较 OR<>10 进制(字符)比较 OR<>变量(字符)比较 OR<>16 进制(32 位)比较 OR<>10 进制(32 位)5 S地址 常数低位 5 S地址 常数低位4 S地址 D地址4 S地址 间接指定4 S地址 间接指定 4 S地址 D地址4 S地址 间接指定4 S地址 间接指定 4 S地址 D地址5 S地址 常数低位5 S地址 常数低位 4 S地址 D地址4 S地址 间接指定4 S地址 间接指定 4 S地址 D地址4 S地址 间接指定 4 S地址 间接指定 4 S地址 D地址4 S地址 常数低位5 S地址 常数低位4 S地址 D地址4 S地址 间接指定4 S地址 间接指定 4 S地址 D地址4 S地址 间接指定4 S地址 间接指定 4 S地址 D地址5 S地址 常数低位5 S地址 常数低位 8-55常数高位 4常数高位4 4 11 1 222 常数高位 4常数高位4  41 1  12  2  2942 942 943 943常数高位 4常数高位4411 1 22 24 4 944 944 945 945常数高位 常数高位946 946
 FUN. 助记符 NO. 号732 D<>N736 >H737 >D740 >N744 W>H745 W>D748 W>N752 D>H753 D>D756 D>N760 >H761 >D764 >N768 W>H769 W>D772 W>N776 D>H777 D>D780 D>N784 >=H785 >=D788 >=N792 W>=H793 W>=D796 W>=N800 D>=H801 D>=D804 D>=N 808 >=H步 带 名称 数 OP1 OP2 OP3 INDX 符号浮动小数 点单双 精精 度度比较 OR<>变量(32 位) 比较 STR>16 进制(字节)比较 STR>10 进制(字节)比较 STR>变量(字节)比较 STR>16 进制(字 符)比较 STR>10 进制(字 符)比较 STR>变量(字符) 比较STR>16进制(32位)比较 STR>10 进制(32位)比较 STR>变量(32 位)比较 OR>16 进制(字 节)比较 OR>10 进制(字 节)比较 OR>变量(字节) 比较 OR>16 进制(字符)比较 OR>10 进制(字符)比较 OR>变量(字符)比较OR>16进制(32 位)比较 OR>10 进制(32 位)比较 OR>变量(32 位) 比较 STR>=16 进制(字节)比较 STR>=10 进制(字节)比较 STR>=变量(字节)比较 STR>=16 进制(字符)比较 STR>=10 进制(字符)比较 STR>=变量(字符) 比较STR>=16进制(32 位)比较 STR>=10 进制(32 位)比较 STR>=变量(32位)比较 OR>=16 进制(字 节)4 S地址 D地址4 S地址 间接指定4 S地址 间接指定 4 S地址 D地址4 S地址 间接指定4 S地址 间接指定 4 S地址 D地址5 S地址 常数低位5 S地址 常数低位 4 S地址 D地址4 S地址 间接指定4 S地址 间接指定 4 S地址 D地址4 S地址 间接指定4 S地址 间接指定 4 S地址 D地址5 S地址 常数低位5 S地址 常数低位 4 S地址 D地址4 S地址 间接指定4 S地址 间接指定 4 S地址 D地址4 S地址 间接指定 4 S地址 间接指定 4 S地址 D地址5 S地址 常数低位 5 S地址 常数低位 4 S地址 D地址4 S地址 间接指定4 947 947 11 1 222 常数高位 48-56常数高位4 948 948 4 949 949 11 1 222 常数高位 4常数高位4 950 950 4 951 951 11 1 2 2 2常数高位 4常数高位4 952 952 4 953 953 1
 FUN. 助记符 步 带 NO. 号 名称 数 OP1 OP2 OP3 INDX 符号浮动小数 点单双 精精 度度809 >=D 812 >=N816 W>=H817 W>=D820 W>=N824 D>=H825 D>=D828 D>=N832 <H833 <D836 <N840 W<H841 W<D844 W<N848 D<H849 D<D852 D<N856 <H857 <D860 <N864 W<H865 W<D868 W<N872 D<H873 D<D876 D<N880 <=H881 <=D884 <=N 888 W<=H比较 OR>=10 进制(字 节)比较 OR>=变量(字节) 比较 OR>=16 进制(字符)比较 OR>=10 进制(字符)比较 OR>=变量(字符)比较 OR>=16 进制(32 位)比较 OR>=10 进制(32 位)比较 OR>=变量(32 位) 比较 STR<16 进制(字节)比较 STR<10 进制(字节)比较 STR<变量(字节)比较 STR<16 进制(字 符)比较 STR<10 进制(字 符)比较 STR<变量(字符) 比较STR<16进制(32位)比较 STR<10 进制(32位)比较 STR<变量(32 位)比较 OR<16 进制(字 节)比较 OR<10 进制(字 节)比较 OR<变量(字节) 比较 OR<16 进制(字符)比较 OR<10 进制(字符)比较 OR<变量(字符)比较OR<16进制(32 位)比较 OR<10 进制(32 位)比较 OR<变量(32 位) 比较 STR<=16 进制(字节)比较 STR<=10 进制(字节)比较 STR<=变量(字节)比较 STR<=16 进制(字 符)4 S地址 间接指定 4 S地址 D地址4 S地址 间接指定4 S地址 间接指定 4 S地址 D地址5 S地址 常数低位5 S地址 常数低位 4 S地址 D地址4 S地址 间接指定4 S地址 间接指定 4 S地址 D地址4 S地址 间接指定4 S地址 间接指定 4 S地址 D地址5 S地址 常数低位5 S地址 常数低位 4 S地址 D地址4 S地址 间接指定4 S地址 间接指定 4 S地址 D地址4 S地址 间接指定4 S地址 间接指定 4 S地址 D地址5 S地址 常数低位5 S地址 常数低位 4 S地址 D地址4 S地址 间接指定4 S地址 间接指定 4 S地址 D地址4 S地址 间接指定1 1 222 常数高位 48-57常数高位4 954 954 4 955 955 11 1 222 常数高位 4常数高位4 956 956 4 957 957 11 1 222 常数高位 4常数高位4 958 958 4 959 959 11 1 2
    FUN. NO.       助记符 号   名称     步 数         OP1     OP2  OP3      带 符 号      浮动小数 点   INDX       单 精 度   双 精 度      889     W<=D   比较 STR<=10 进制(字 符)      4      S 地址     间接指定         2                    892 W<=N比较 STR<=变量(字 符)  4 S 地址 D 地址     2         896   D<=H 比较 STR<=16 进制 (32 位)     5   S 地址   常数低位 常数高位      4               897     D<=D   比较 STR<=10 进制 (32 位)      5      S 地址     常数低位   常数高位       4           960     960    900 D<=N比较 STR<=变量(32 位)  4 S 地址 D 地址     4    961 961    904     <=H   比较 OR<=16 进制(字 节)      4      S 地址     间接指定          1                    905 <=D比较 OR<=10 进制(字 节)  4 S 地址 间接指定     1          908     <=N   比较 OR<=变量(字节)      4      S 地址     D 地址         1                     912 W<=H比较 OR<=16 进制(字 符)  4 S 地址 间接指定      2         913   W<=D 比较 OR<=10 进制(字 符)     4   S 地址   间接指定       2                916     W<=N   比较 OR<=变量(字符)      4      S 地址     D 地址         2                     920 D<=H比较 OR<=16 进制(32 位)  5 S 地址 常数低位常数高位      4         921   D<=D 比较 OR<=10 进制(32 位)     5   S 地址   常数低位 常数高位      4         962   962    924   D<=N  比较 OR<=变量(32 位)      4    S 地址    D 地址       4          963    963  8-58
8.3.2 间接指定 可以与以往一样使用间接地址。8.3.2.1 间接地址 继电器/寄存器的地址区域有以下四种。    执行顺序程序及参照寄存器如下所示。  自区域      本程序内的基本区域       (_****)    文件寄存器     (B****)   外区域 1    外程序内的基本区域  (P*-_****)     扩展区域 1    (E_****, H****)      外区域 2 扩充区域 2    (G_****)      扩充数据寄存器区域 扩展数据寄存器     (U****)    程序的执行 程序的执行  P1 执行中 P1 执行中P2 执行中 P2 执行中P3 执行中 P3 执行中        参照寄存器 参照寄存器  扩充数据寄存器 扩充数据寄存器 区域区域     自区域 自区域 外区域 外区域       地址 地址地址 地址地址 地址     扩充 扩充注: 该图为数据分割 1 模式例。参照下页内容直接指定地址时,其它模式的地址标记不必特意区别上述 3 个地址空间。若将地址指定为”_****”,则存取当前执行中的本程序的基本区域。 若指定为“P*-_****”则存取外程序的基本区域,若指定为“E_****,H****”则存取扩充区域,若指定为 “U****”则存取扩充数据寄存器区域。8-59扩展数据寄存器扩展数据寄存器 随着程序执行的切换,本区域的随着程序执行的切换,本区域的寄存器也会切换寄存器也会切换
在指定间接地址的时候,为了区别上述 3 个地址空间,存放间接地址的寄存器有必要使用用间接地址指定 的区域的寄存器。         间接指定地址          保存目标地址寄存器   (1)  本区域的间接地址    _**** B****    →  本区域的寄存器     (_****) (B****)    (2)外区域 1 的间接地址 P*-_**** E_**** H****  →外区域 1 的寄存器  (P*-_****) (E_****) (H****)    (3) 外区域 2 的间接地址   G_****    → 外区域 2 的寄存器    (G_****)    (4) 扩充数据寄存器间接地址    U****     → 扩展数据寄存器     (U****)(1) 对本区域间接指定地址的时候• 在保存间接地址运算域的寄存器中,使用本区域的寄存器。 • 用间接字节地址指定间接地址。(2) 对外区域 1(扩充区域 1 以及外程序的数据区域)间接指定地址的时候• 在保存间接地址运算域的寄存器中,使用用间接地址指定区域的寄存器。• 用偏移+间接字节地址指定间接地址。在扩充区域偏移为 0000h,在程序 1 为 4000h,在程序 2 为 8000h,在程序 3 为 C000h。 例如,把扩充区域从 EX000 至 EX007 之间的 8 点(1 字节)向程序 2 的 D0000 的低位字节传送。MOVH (EM00W) → (P2-D0100)在此要预先对扩充内部继电器 EMOOW(EM000~EMOOF)设定扩充区域的 EX000~EX007 的间接字节地址 0B00h(0000h+0B00h),对程序 2 的数据寄存器 P2-D0100 设定 D0000 的低 位字节的间接字节地址 A000h(8000h+2000h)。(3) 对外区域 2(扩展区域 2)间接指定地址的时候• 存放间接地址的运算域寄存器使用 G_****。(4) 对扩充数据寄存器区域间接指定地址的时候• 在保存间接地址运算域的寄存器中,使用扩充数据寄存器。 • 用间接字节地址指定间接地址。             为了用间接地址指定扩充区域,需要在 运算域中使用扩充区域寄存器 (EM00W)。为了用间接地址指定程序 2 的区域,需要在运算域 中使用程序 2 的寄存器(P2-D0100)。     8-60
8.3.2.2字节地址的表述方法用字节地址表示时,在字符地址标记上带上 H、L,用字符数据内的低位字节表示高位字节。对于位地址区域,在字符地址右端添附 W,是字节地址时则通过添附 H、L 表示。 字符地址区域内的内容在字符地址的右端加注位,则可使之成为位地址。 (例)                 位数地址X000 X001 X002 X003 X004 X005X006X007X008字地址 字节地址(LSB) (LSB)↑ ↑| | | || X00L 低位字节 | || ↓               | (MSB) X00W (LSB)   || ↑ X009X00A |  X00B X00C X00DX00EX00F D0000-0 D0000-1 D0000-2 D0000-3 D0000-4 D0000-5D0000-6D0000-7 D0000-8D0000-9 D0000-A D0000-B D0000-C D0000-DD0000-E D0000-F| | 高位字节 | X00H| |   |↓↓(MSB) (MSB) (LSB) (LSB)       ↑ ↑| | | || D0000L 低位字节 | || ↓| (MSB)D0000 (LSB)         | |↑|| 高位字节   || | | ↓D000H  |↓ (MSB) (MSB)          8-61位地址区域范例 字符地址区域范例
位地址 位数据 字节数据 字符数据00▲▲ 10|| 21||3 0 34h | 41|| 51|| 60||7 0 ▼ 1234h 80▲| 91|| A0|| B 0 12h | C1|| D0|| E0|| F0▼▼h: 表示 16 进制数。             8-62
8.4 指令8.4.1 以往的指令(1) 基本命令步数( )内为指定外区域或扩充区域数据时。    No.      符号      语言       步数           功能     1     STR   1 (2)    开始演算(a 接点)    2  STR NOT  1 (2) 开始演算(b 接点)    3    AND     1 (2)   串行连接(a 接点)    4       AND NOT      1 (2)      串行连接(b 接点)    5     OR   1 (2)    并行连接(a 接点)    6     OR NOT   1 (2)    并行连接(b 接点)    7 8 9                 AND STR OR STR OUT  11 1 (2)         逻辑块间的串行连接逻辑块间的并行连接线圈输出        10    SET     1 (2)   保持继电器设置    11       RST      1 (2)      保持继电器复位    12  PTS  1 (2) 上升微分    13       NTS      1 (2)      下降微分    14     FPS   1    开始多线圈分支    15    FRD  1 多线圈分支    16    FPP     1   结束多线圈分支    17       FST      1      用于无条件输出    18  NOT  1 条件反转    19     NOP      1      无处理     8-54
(2) 定时器、计数器指令                  分类功能助记符号步数符号例子演算内容                                  直接指定10 ms 定时器TMRH4T000TMRH K=655.35设定值为 655.35 秒的 10 ms 定时器。                    计时器间接指定10 ms 定时器TMRH4T001TMRH S=D0100将 D0100 的内容作为设定 值的 10 ms 定时器                    直接指定100 ms 定时器TMR4T002TMR K=6553.5设定值为 6553.5 秒的 100 ms 定时器。                    间接指定100 ms 定时器TMR4T003TMR S=D0100将 D0101 的内容作为设定 值的 100 ms 定时器                    直接指定10 ms 累计定时器TMRSH4T004T TMRSH K=123.45 R设定值为 123.45 秒的 10 ms 累计定时器。                     累计定时器间接指定10 ms 累计定时器TMRSH4T005T TMRSH S=D0102 R将 D0102 的内容作为设定 值的 10 ms 累计定时器                     直接指定100 ms 累计定时器TMRS4T006T TMRS K=1234.5 R设定值为 1234.5 秒的 100 ms 累计定时器                     间接指定100 ms 累计定时器TMRS4T007T TMRS S=D0103 R将 D0103 的内容作为设定 值的 100 ms 累计定时器                      升序计数器直接指定 升序计数器CNT4C008CK CNT K=65535 R设定值为 65535 的升序计数 器                    间接指定 升序计数器CNT4C009CK CNT S=D0104将 D0104 的内容作为设定 值的升序计数器   R                  递降计数器直接指定递降计数 器CNTD4C00ACK CNTD K=12345 R设定值为 12345 的递降计数 器                     间接指定递降计数 器CNTD4C00BCK CNTD S=D0105将 D0105 的内容作为设定 值的递降计数器   R                  直接指定 升降计数器CNTH4C00CCK CNTH K=65535 U/D     升降计数器R设定值为 65535 的升降计数 器                 间接指定 升降计数器CNTH4C00DCK CNTH S=D0106 U/D将 D0106 的内容作为设定 值的升降计数器    R     U/D:输入升序计数的指令或者递降计数的指令,条件满足则是升序计数,条件不满足就是递降计数。 8-55
(3) 扩充定时器・计数器指令                分类功能助记符号步数符号例子演算内容                                扩充10 ms 定时器  ETMRH3将扩充设定值寄存器 H0000 的内容作为设定值 的 10 ms 定时器        计时器ET000ETMRH S=H0000                扩充100 ms 定时器 ETMR3ET001ETMR S=H0001将扩充设定值寄存器 H0001 的内容作为设定值 的 100 ms 定时器                   扩充10 ms 累计定时 器ETMRSH3ET002T ETMRSH S=H0002将扩充设定值寄存器 H0002 的内容作为设定值 的 10 ms 定时器    累计定时器R                 扩充100 ms 累计定时 器ETMRS3ET003T ETMRS S=H0003将扩充设定值寄存器 H0003 的内容作为设定值 的 100 ms 累计定时器   R                  升序计数器扩充 升序计数器ECNT3EC004CK ECNT S=H0004  R将扩充设定值寄存器 H0004 的内容作为设定值 的升序计数器                   递降计数器扩充 递降计数器ECNTD3EC005CK ECNTD S=H0005将扩充设定值寄存器 H0005 的内容作为设定值 的递降计数器   R                 升降计数器扩充 升降计数器ECNTH3将扩充设定值寄存器 H0006 的内容作为设定值 的升降计数器 R          EC006CK ECNTH S=H0006 U/D扩充设定值寄存器:与线圈地址相对应的固定的设定值寄存器。 U/D:输入升序计数指令或者递降计数指令,条件满足则是升序计数,条件不满足就是递降计数。    8-56
 (4) 应用命令 (4-1)接点类型的应用命令分类 号 指令符号 功能16进 2位制 4位 间接指 8位STR AND640 576648 579656 582641 577649 580 673W=D=HW=H S H D=H=DW=D S K D=D=NW=N S1 S2 D=N<>H W<>HSH D<><>D W<>DSK D<>D<>NW<>N S1 S2 D<>N>HW>H S H D>H>DW>D S K D>D>NW>N S1 S2 D>N>=H W>=HSH D>=H>=D W>=DSK D>=D>=NW>=N S1 S2 D>=N<HW<H S H D<H<D W<DSK D<D<NW<N S1 S2 D<N<=HW<=H S H D<=H<=DW<=D S K D<=D3位 = 5位定 10进制 10位8位 寄存器 16位 32位16进 2位 4位657 583 644 587 652 581 660 584 688 585 696 588 704 591 689 586 697 589 705 592 692 587 700 590 708 593 736 594 744 597 752 600 737 595 745 598 753 601 740 596 748 599 756 602 784 603 792 606 800 609 785 604 793 607 801 610 788 605 796 608 804 611 832 612 840 615 848 618 833 613 841 616 849 619 836 614 844 617 852 620 880 621 888 624 896 627 881 622 889 625 897 628 884 623 892 626 900 629681 D=D 668 =N 676 W=N 684 D=N 712 <>H 720 W<>H 728 D<>H 713 <>D 721 W<>D 729 D<>D 716 <>N 724 W<>N 732 D<>N 760 >H 768 W>H 776 D>H 761 >D 769 W>D 777 D>D 764 >N 772 W>N 780 D>N 808 >=H 816 W>=H 824 D>=H 809 >=D 817 W>=D 825 D>=D 812 >=N 820 W>=N 828 D>=N 856<H 864 W<H 872 D<H 857 <D 865 W<D 873 D<D 860 <N 868 W<N 876 D<N 904<=H 912 W<=H 920 D<=H 905 <=D 913 W<=D 921 D<=D 908 <=N 916 W<=N 924 D<=N对寄存器与常数或者寄存器与寄存器进行比较, 如果 S=H、S=K、S1=S2,则接点进入接通状态。对寄存器与常数或者寄存器与寄存器进行比较, 如果S≠H、S≠K、S1 ≠S2则接点进入接通状 态。对寄存器与常数或者寄存器与寄存器进行比较, 如果 S>H、S>K、S1>S2 则接点进入接通状 态。对寄存器与常数或者寄存器与寄存器进行比较, 如果 S≥H、S≥K、S1≥S2 则接点进入接通状态。对寄存器与常数或者寄存器与寄存器进行比较, 如果 S<H、S<K、S1<S2 则接点进入接通状 态。对寄存器与常数或者寄存器与寄存器进行比较,如果 S≤H、S≤K、S ≤S 则接点进入接通状态。 12间接指 制定 10进≠寄存器间接指定 >寄存器间接指定≥寄存器间接指定 <寄存器间接指定≤8位 3位 5位制 10位 8位16位32位 16进2位寄存器S, D:寄存器<=N W<=N D<=NS1 S2制10进 制8位 16位 32位16进 制10进 制8位 16位 32位16进 制10进 制8位 16位 32位16进 制10进 制8位 16位 32位4位 8位 3位 5位 10位2位 4位 8位 3位 5位 10位2位 4位 8位 3位 5位 10位2位 4位 8位 3位 5位 10位OR 664=H 672 W=H 680 D=H 665 =D比较(接点类型)H:16 进制常数 K:10 进制常数8-57
 (4-2)输出类型的应用命令分类2位16 进制常数传送 4位 8位 3位 BCD 常数传送 5位10位3位 10 进制常数传送 5位10位3位 8 进制常数传送 6位11位 16 进制常数 2 处 2位 传送 4位 8位直接传送 16位 32位8位 16位 32位号指令符号功能间接传送MOVE WMOVE S DMOVEMOVF WMOVF S DMOVFMOVG WMOVG S DMOVGDDD(1)间接传送 8位(2)间接传送 8位MOVHWMOVH S D DMOVHBMOV1 S D1 D2BMOV21 S D1 D2 WBMOVSDK16位 (3) 32位直接传送 8位 (1)直接传送 8位 (2) 16位8位16位8位 数据分配 16位 32位8位 块分配 16位8位 数据抽取 16位 32位BMV1 S1 WBMV1DIVWDIV S1 DDIVBDIVWBDIV S1PUPWPUP S1 DPUPBPUP S1 WBPUP块抽取8位 16位 4位间接传送D S2D S2D S2 S2 DDS2数据变更 8位 16位32位 块变更 8位16位 JIS 代码保存SXCHXCH D1 D2 WXCHDXCH对于 4 位的变更,D1 的高位 4 位和低位 4 位被改 变并被保存在 D 中。对于 8 和 16 位的变更,D16位 32位100 MOV 101 WMOV 102 DMOV 103 MOVP1 WMOVP 104 DMOVP 105 MOVR7 WMOVR 106 DMOVR 107 MOVQ8 WMOVQ 108 DMOVQ62 MOVT 110 WMOVT 90 MOVE0 WMOVE 111 DMOVE74 MOVF 112 WMOVF 113 DMOVF 75 MOVG 114 WMOVG 115 DMOVG76 MOVH 116 WMOVH 117 DMOVH70 BMOV1118 BMOV2 119 WBMOV71 BMV1 120 WBMV15 DIV 122 WDIV 123 DDIV72 BDIV 126 WBDIV 6 PUP124 WPUP 125 DPUP 73 BPUP127 WBPUP53 SXCH 132 XCH2 WXCH 133 DXCH 134 BXCH 135 WBXCH109 JISMOVWMOV H D DMOV向 D 传送 16 进制常数 H(2, 4, 8 位)。向 D 传送 BCD 常数 H(2, 4, 8 位)。向 D 传送 10 进制常数 K(3, 5, 10 位)。向 D 传送 8 进制常数 K(3, 6, 11 位)向D 、D 2处传送16进制常数H(2,4位)。S数据传送到 D。S 数据被传送到地址内容为 D 的寄存器。S 数据被传送到地址内容为 D 的寄存器。 寄存器中数据地址为 S 的内容被传送到地址为 D的寄存器中内容中。本区域中初始地址为 S 的数据被传送到区域为 D1和 D2 之间范围内。初始地址为 S 的、以 K 所表示的数值数据被传送到以 D 为起始地址的区域。将以 S1 的内容作为起始地址的区域中的数据传输到以 D 的内容作为起始地址的区域内。S 的内容 2为传输数量。S1 的数据被传送到列示的地址内。(D 的地址+S2 的偏移量。)传送数据区域的数为 S2 中的内容,传送数据的起 始地址是(S1 地址+S1 内容所列示偏移)。(S1 的地址+S2 内容中所示的偏移量)为地址中列 示的内容被传送到 D 所列示的地址。起始地址为S1的内容、数量在S2的内容中的数据 被传送到起始地址为:(D 地址+D 的内容)的偏 移量的区域中。MOVP WMOVP DMOVPMOVR WMOVR DMOVRMOVQ WMOVQ DMOVQH DK DQ DMOVT H D1 D2 WMOT12寄存器间接传送块传送传送BXCH D1 D2 WBXCH本区域中的数据其各自的起始地址分别是 D1 和 D2 地址,并且以常数 K 表示被变更的区域的数据。 将文字常数 C1、C2JIS 代码从 D 的地址保存到 4 字节部分的区域中。K JIS C1 C2 D8-5821 和 D2 的内容被改变。
               分类号指令        FIL1符号HD1D2功能                     数据填充 18位77FIL1将 16 进制 2 位常数 H 保存在用 D1 所示的地址到 用 D2 所示的地址之间的区域中。                          数据填充 28位128FIL2FIL2 WFILH 被传送到一个区域,S 的内容是起始地址,K 的 内容是数据的数量。 HSK                      16 位129WFIL                         间接数据填充 18位78FILI1FILI1             FILI2 WFILISD1                  DD2KS 的内容被存储到一个区域,D1 的内容是起始地 址,D2 的内容是数据的数量。                  间接数据填充 28位130FILI2S1DS2S1 的内容被存储到一个区域,D 的内容为起始地 址,S2 的内容表示其数据的数量。                16 位131WFILI               清除检查传送8位20CMOVCMOV WCMOV如果部分来自于 D 地址的数据 K 全是 0,那么数 据部分来自于是 S 地址的从 D 被传送到数据区。  S                   16 位166WCMOV                    8位21CLR如把 K 部分开始于 S 地址的数据和 K 部分开于开 始于 S 地址的数据进行匹配,K 部分的数据开始于 D 被清除。    CLR WCLR                  匹配数据清除16 位167WCLRSDK                       扩充输入输出传送283REFREFSDK将来自 S 地址的 K 字节部分的外部输入数据传送 到以 D 为起始地址的区域。                       外部输出传送284REFOREFOSDK将来自 S 地址的 K 字节部分的数据传送到以 D 为 起始地址的外部输出中。                          S, D:寄存器 H:16 进制常数 K:10 进制常数 Q:8 进制常数 C:文字常数8-59传送
 文件 文件寄存 寄存器器传送 文件 寄存器加法减法乘法除法增量减量32位 8位 16位WMOVJ S DMOVJDD分类号指令符号 功能寄存器 8位 ↓ 16位144 MOVJ MOVJ↓ 32位 寄存器MOVK WMOVK S8位 2进制 16位 32位2位 BCD 4位 8位 8位2进制 16位 32位2位 BCD 4位 8位 8位2进制 16位 32位2位 BCD 4位 8位 8位+W+ S1 S2D D+S2D2进制W/BS1S2D W/BCD 4位 8位 8位2进制 16位 32位2位 BCD 4位 8位 8位2进制 16位 32位2位 BCD 4位 8位 8位195 INC INCWINC SDDS2DS2DDS2DS2 S3S2K数存入 D+1 中。数据全部被作为 BCD 处理。 将 D 的内容+1 后与 S1 的内容进行比较。数据作为 2 进制数处理。将 D 的内容+1 后与 S1 的内容进行比较。数据作为 BCD 数据处理。D 的内容−1。数据作为 2 进制数处理。D 的内容−1。数据作为 BCD 数据处理。 进行 S1 的内容和 S2 的内容的逻辑(与)(AND),将结果保存在 D 中。进行 S1 的内容和 S2 的内容的逻辑相加(OR),将结果保存在 D 中。将 S 内容进行反转(将位进行变换,如是 1 则为 0,如为 0 则是 1。),将结果保存在 D 中。 将 S1 的内容和 S2 的内容进行排他的逻辑加(XOR),将结果保存在 D 中。从 S1 地址到 S2 地址如果有和 S3 的内容一致的数据,开启进位标记,将该位置数据保存在 S1+1 中。从 S2 地址开始到用 K 指定数据数的区域如果 有和 S1 内容一致的数据,开启进位标记,将这 个位置与 S2 一致的数据存入 S1+1。逻辑(与)(AND)16 位 32位187 WAND 188 DANDWAND S1 DAND逻辑加(OR) 反转(NOT)排他的逻辑加 (XOR)数据搜索 1 数据搜索 28位 16位 32位 8位 16位 32位 8位 16位 32位8位 16位8位 16位 32位14 OR ORWOR S1S, D:寄存器K:10 进制常数 8-6016位 16位 32位 2位S1 的内容除以 S2 的内容,将商存入 D 中,将余 数存入 D+1 中。数据全部作为 2 进制数处理。S 的内容除以 S 的内容,将商存入 D 中,将余 W/PS1S2D1 2145 WMOVJ146 DMOVJ147 MOVK148 WMOVK149 DMOVK DMOVK 168 +将 S 的内容传送到文件寄存器 D。 将文件寄存器 S 的内容传送到 D。进行 S1 的内容和 S2 的内容的加法运算,将结 果保存在 D 中。数据全部作为 2 进制数处理。进行 S1 的内容和 S2 的内容的加法运算,将结 果保存在 D 中。数据全部被作为 BCD 处理。从 S1 的内容中减去 S2 的内容,将结果保存在 D 中。数据全部作为 2 进制数处理。从 S 的内容中减去 S 的内容,将结果保存在 1 2D 中。数据全部被作为 BCD 处理。进行 S1 的内容和 S2 的内容的乘法运算,将结92 W+ 169 D+ 177 +P10 W+P178 D+P170 - -93 W- 171 D- 179 -P11 W-P 180 D-P 172 *W- S1 S2D D--P W-PS1S2D D-P*W* S1 S2 D D**P W*PS1S2D D*P95 W/B175 W/176 D/184 /P185 W/P D/P 186 D/P94 W*173 D*181 *P182 W*P183 D*P174 / /果保存在 D 中。数据全部作为 2 进制数处理。 进行 S 的内容和 S 的内容的乘法运算,将结63 WINC DINC196 DINC199 INCP INCP200 WINCP201 DINCPWINCP S DINCP197 DEC DEC64 WDEC198 DDEC202 DECP DECP203 WDEC 204 DDECWDECP DDECP13 AND AND189 WOR DOR 190 DOR9 NOT NOTWNOT S191 WNOT DNOT 192 DNOT18 XOR XOR193 WXOR 194 DXOR88 SRH189 WSRH1212 SRH2 213 WSRH2 214 DSRHH:16 进制常数WXOR S1 DXORSRH1 WSRH1 S1SRH2 WSRH2 S1 DSRH+PW+P S1 D+PD/ /PWDEC DDECDD1 2果保存在 D 中。数据全部被作为 BCD 处理。传送 数学运算 逻辑运算 搜索
     分类功能将 S 的内容的低位 7 位作为原数据,为了使“1”      生成奇偶性位数       这个位数成为奇数(MKP1)[偶数(MKP2)], 将最高位的位进行设置或复位,结果存入 D。   奇偶性检查BCD→2 进 制的转换S 的内容的奇偶性检查。如果“1”的位数不是奇数 (PCH1)[偶数(PCH2)],则接通进位标记。将保存在 S 中的 BCD 数据转换为 2 进制数据后 保存在 D 中。           号 指令符号            奇数83 MKP1 MKP1 MKP2 S D           偶数81 MKP2            奇数84 PCH1 PCH1 PCH2 S              偶数82 PCH2             2 位→8 位152 BIN   BIN WBIN DBIN         4 位→16 位3 WBINSD         8 位→32 位153 DBIN         8 位→2 位154 BCD   BCD WBCD DBCD      16 位→4 位4 WBCDSD32 位→8 位155 DBCD            156 JBINJBINSDK         157 BJISBJISSDK           50 DECODECO        SEGCDSETCDO1SS1SDS2D          ENCO S D 51 ENCO         52 SEGK         WTIM1 S D 158 WTIM1           WTIM2 S D 159 WTIM2              85 CDSETD                  86 CDO1S1S2D               87 CDO2CDO2S1S2D         8位17 CP   CP WCP DCP         16 位12 WCPS1S2         32 位211 DCP         8位136 BSET   BSET WBSET DBSET         16 位137 WBSETSD         32 位138 DBSET         8位139 BRST   BRST WBRST DBRST         16 位140 WBRSTSD          32 位141 DBRST          8位54 BPU   BUP WBPU DBPU          16 位142 WBPUS1S2          32 位143 DBPU          8位208 SUM   SUM WSUM DSUM      SD   16 位209 WSUM         32 位210 DSUM                   将保存在 S 中的 2 进制数据转换为 BCD 数据后 BCD 的转换                               保存在 D 中。2 进制→JIS→2 进制的转换2 进制→JIS 的转换 4→16 解码16→4 编码7 段解码 时分秒→秒的转换秒→时分秒的转换 代码转换设定代码转换输出 1 代码转换输出 2比较位设定位复位位抽取ON 位计数器从 S 的地址开始,将以 K 表示的文字数的数据看 作是 JIS 代码,将此变为 2 进制数,存入以 D 为 起始地址的区域内。从 S 的地址开始将以 K 表示的位数看作 16 进制 数,将此转变为 JIS 代码,存入以 D 为起始地址 的区域内。将 S 的内容的低位 4 位解码为 16 进制数据,存 于 D。在 S 的内容的 16 位中,将 ON 位地址变为 2 进 制数(复数 ON 位时低位优先),存于 D 的下位 4 位中。从 S 的地址开始,只将以 K 表示的位数从 2 进制 4 位数据变为 7 段数据,存入以 D 为起始地址的 区域内。将以 S 为起始地址存储在 4 字节中的 BCD 形式 的时分秒数据转换为 0.1 秒单位的 2 进制数据, 存于 D。将 S 的内容视作 0.1 秒单位的 2 进制数据,转变 为 BCD 形式时分秒数据,存于以 D 为起始地址 的 4 字节中。将 S1 的内容传送到用(D 的地址+S2 的内容)表 示的寄存器中。S1 的内容作为 BCD 处理。 将用(S2 的地址+S1 内容)表示的寄存器内容传 送到 D 中。S1 的内容作为 BCD 处理。 将保存在用(S2 的地址+S1 内容)表示的寄存器 中的 BCD 数据传送到 D+1 中,然后转换为 2 进 制数据后传送到 D 中。将 S1 的内容和 S2 的内容进行比较,根据其大小 关系,启动>=<三个标记中的一个。设定用 S 的内容指定的 D 的位复位用 S 的内容指定的 D 的位将用 S1 的内容指定的 S2 的位的内容向进位标记 传送。对在 S 内容中处于 ON 状态的位的总和进行计 数,将其结果保存在 D 中。                                                                                                                                      8-61奇偶性运算转换 比较 位操作
                分类号指令符号功能                      8位217SFR将 S 内容右移 1 位。将 D 输入内容向最高位移 位,最低位的内容进入进位标记。D T      SFR WSFR DSFR S                右移 1 位16 位36WSFR                 32 位218DSFR                   8位224BSFR   BSFR WBSFR DBSFR                  右移 n 位16 位225WBSFRSK只将指定了 S 内容的位数(K)向右移位。                  32 位226DBSFR                   219SFL  SFL WSFL DSFL              左移 1 位8位16 位37WSFLTS将 S 内容左移 1 位。将 D 输入内容向最高位移 位,最低位的内容进入进位标记。                        32 位220DSFL                   8位227BSFL   BSFL WBSFL DBSFL                  左移 n 位16 位228WBSFLSK只将指定了 S 内容的位数(K)向左移位。                  32 位229DBSFL                   8位221SRL L/R  SRL WSRL DSRL S T  将 S 内容向左(L/R=ON)[右(L/R=OFF)]移 动 1 位。                 左右移 1 位16 位222WSRL                 32 位223DSRL                   L/R T      BSRL WBSRL DBSRL S     左右移 n 位8位16 位230231BSRLWBSRL将指定了 S 内容的位数(K)向左(L/R=ON)[右 (L/R=OFF)]移动 1 位。                            32 位232DBSRL                   DDS, D:寄存器 H:16 进制常数 K:10 进制常数             8-62移位
 高位方向移位低位方向移位4位 251 SUP 8位 252 UP2 16位 253 WUP 32位 254 DUP8位 91 UP1 4位 255 SDOWN8位 256 DOWN 16位 257 WDOWN 32位 258 DDOWN 8位 160 FIFWSUPUP2 S WUPDUPUP1 S1SDOWN DOWN WDOWN S DDOWNKS2KD1 D2D1 D2将 S 作为起始地址,使用 K 指定了数据数区域 的数据向高位移位。最低位的数据为 0。以 1 个字节为单位使 S1 至 S2 区域数据移位。 最低位数据不变。将 S 作为起始地址,使用 K 指定了数据数区域 的数据向低位移位。将最高位数据作为 0。将 S 内容传送到用(D1 的地址+D2 的内容内容 表示的偏移值)表示的地址。然后 D2 的内容+1。分类号指令符号 功能写入 FIFO 16位32位 162 DFIFWFIFW WFIFW DFIFWFIFR WFIFR DFIFRSFIN SFOUTRRC WRRC DRRCRR WRR DRRRLC WRLC DRLCRL WRL DRLL/R RLRCSSS D1SSSSFIFO累积位移输入累积位移输出右旋转左旋转带进位 16位 左右旋 32位转 8位 无进位 16位SD D2KKKK161 WFIFW 8位 163 FIFR将S的内容传送到 D2。将 S 作为起始地址,使 将D 的内容作为数据数的区域的数据向低位移读取 FIFO 16位32位 165 DFIFR无进位 16位32位 244 DRR转移子例程调用从子例程的返回开始重复开始重复(间接)结束重复主控程序  输出输入更新  输入更新  输出更新  启动主程序设定 440 MC 复位 444 MCR280 RIO 281 RI282 RO 448 STARTD DK K243 WRR 8位 236 RLC带进位 16位32位 238 DRLC164 WFIFR1位。然后 D1 的内容−1。68 SFIN 69 SFOUT8位 233 RRC将从 S 的地址到 D 的地址的区域作为存储,将 S 的内容累积起来。但是,将 0 视为没有数据。 将S的内容传送到 D2。使 D1 地址到 S−1 为止 的数据向高位移位。将 D1 的内容变为 0。使 S 的内容以及进位标记只以用 K 指定的位数 向右旋转。使 S 的内容只以用 K 指定的位数向右旋转。 使 S 的内容以及进位标记只以用 K 指定的位数向左旋转。使 S 的内容只以用 K 指定的位数向左旋转。将 S 的内容以及进位标记只以用 K 指定的位数 向左(L/R=ON)[右(L/R=OFF)]旋转。将 S 的内容只以用 K 指定比特数向左 (L/R=ON)[右(L/R=OFF)]旋转。向标号数 Ln 转移。执行标号数 Sn 的子例程,用 RET 指令从本指令的下一步执行。 终止子例程,从调用该子例程的 CALL 指令的 下一步开始执行。从本指令到 NEXT 指令重复 K 次从本指令到 NEXT 指令以用 S 的内容表示的次数重复。S 的内容每次执行−1。将从 FOR、FORN 命令到本命令的程序以用FOR、FORN 命令指定的次数重复。 控制从设定到复位的主控制范围的输出命令。MC 命令输入处于 ON 状态则进行通常工作, 处于 OFF 状态则停止所有工作。 将外部输入的 ON/OFF 信息向设备 X 传输。从 D 的地址将 K 字节的外部输入数据向设备 X 传输。从 D 的地址将 K 字节的设备 Y 的 ON/OFF 信 息传送至外部输出。表示启动主顺序程序。带进位 16位32位 235 DRRC234 WRRC 8位 242 RR237 WRLC 8位 245 RL无进位 16位32位 247 DRL246 WRL 8位 239 RLRC240 WRLRC 241 DRLRC 248 RLR 249 WRLRTWRLRC DRLRCSSLnSnKSK32位 250 DRLR 272 JMP273 CALL 464 RET472 FOR476 FORN 480 NEXTL/R RLRTWRLR DRLRJMPCALL RETFORFORN NEXTMC MCRRIO RI ROSTART移位 旋转 程序分支 输出输入控制 标识8-63
                终止主程序分类号指令符号功能                    452ENDEND表示终止主顺序程序。                      终止程序456PENDPEND表示包含子例程在内的顺序程序的终止。                       标识460LABELLABELLn表示顺序程序的间隔和去向。                   S, D:寄存器 H:16 进制常数 K:10 进制常数 n:标识号S, D:寄存器 H:16 进制常数 K:10 进制常数   分类      号     指令    符号   功能                             读取高速计数器数据   316   HCR      HCR S1 S2      直接读取高速计数器模块的内部存储器。 写入高速计数器数据  317HCW   HCW S1 S2 H    向高速计数器模块的内部存储器直接写入数据。 读取共享 I/O 数据     318 IOR    IOR S1 S2 H      直接读取模拟模块的内部存储器。 写入共享 I/O 数据      319    IOW      IOW S1 S2 H      直接向模拟模块的内部存储器写入数据。 读取特殊模块 字节数据  304 SPR    SPR S1 S2 S3   直接读取串行 I/O 模块的内部存储器。 向特殊模块写入 字节数据      306     SPW      SPW S1 S2 S3      向串行 I/O 模块的内部存储器直接写入数据。                     信号器  291 ANN   ANN H S    向特殊寄存器的信号器区域,传输以代码 H 和 S 为起始地址的 16 字节的区域的信息数据和时刻。   用户定义时钟       293    USC      USC K1 K2 K3      设定特殊继电器的用户定义时钟 1、2 的动作。 内置时钟 30 秒校正  292 ADJ    ADJ   内置时钟的 30 秒校正。不满 30 秒舍去,超过 30 秒 的进位。 设定外设用通信速度      288    BAUD      BAUD K       将外设用通信速度变更位用 K 指定的速度。 终止程序  287STOP   STOP    停止执行顺序程序。 扫描时间复位      46  WDR     WDR     使扫描时间监控用定时器复位。          8-64特殊模块 其他
 (5) 在PC3J中追加的应用命令分类号指令符号 功能以 S 的 h1 表示的位的位置为起始地址,将用 K位块传送 121 BBMOV 4位 259 STURNBBMOVSTURN TURN WTURNSh1SDh2 KDKDD H2 DK DH DKHKHKD HDHHD H表示的点数的位数据向用 D 的 h2 表示的位的位 置为起始地址的区域传送.从以 S 为起始地址,用 K 表示的数目的数据区 域的最终数据反方向向以 D 为起始地址的区域 传送。将 S 变为间接地址,存入 D。S 的内容和常数 H 相加, 结果存入 D。数据全部作为 2 进制数处理。S 的内容和常数 H2.H1 相加,将结果存入 S 的 下一个地址。数据全部被作为 2 进制数处理。S 的内容和常数 K 相加,结果存入 D。 数据全部被作为 BCD 处理。S 的内容和常数 K 相加,将结果存入 S 的下一个 地址。数据全部被作为 BCD 处理。进行 S 的内容和常数 H 的相减,结果存入 D。 数据全部作为 2 进制数处理。S 的内容和常数 H 相减,将结果存入 S 的下一个 地址。数据全部被作为 2 进制数处理。S 的内容与常数 K 相减,结果存入 D。 数据全部被作为 BCD 处理。S 的内容和常数 K 相减,将结果存入 S 的下一个 地址。数据全部被作为 BCD 处理。乘以 S 的内容和常数 H,结果存入 D。 数据全部作为 2 进制数处理。S 的内容和常数 H 相乘,将结果存入 S 的下一个 地址。数据全部被作为 2 进制数处理。S 的内容和常数 K 相乘,结果存入 D。 数据全部被作为 BCD 处理。S 的内容和常数 K 相乘,将结果存入 S 的下一个 地址。数据全部被作为 BCD 处理。S 的内容和常数 H 相除,将结果存入 D,余数存 入下一个地址,数据全部作为 2 进制数处理。S 的内容和常数 H 相除,将结果存入 S 的下一个 地址,余数存入再下一个地址,数据全部作为 2 进制数处理。S 的内容和常数 K 相除,将结果存入 D,余数存 入下一个地址,数据全部作为 BCD 处理。S 的内容和常数 H 相除,将结果存入 S 的下一个 地址,余数存入再下一个地址,数据全部作为 BCD 处理。进行 S 的内容和常数 H 的逻辑与(AND),结 果存入 D。进行 S 的内容和常数 H 的异逻辑乘与(AND), 结果存入 S 的下一个地址。进行 S 的内容和常数 H 的逻辑加(OR),结果 存入 D。进行 S 的内容和常数 H 的逻辑加(OR),结果 存入 S 的下一个地址。进行 S 的内容和常数 H 的排他逻辑加(XOR), 结果存入 D。进行 S 的内容和常数 H 的排他逻辑加(XOR), 结果存入 S 的下一个地址。倒置 8位16位 261 WTURN地址常数传送2进 16位324 W+H W+H 325D+H D+H SH H1 KHKHKHKHH常数加法BCD 4位常数减法BCD 4位常数乘法BCD 4位BCD常数逻辑与常数逻辑加2进 16位 制 32位336 W*H W*H常数排他的逻辑 16位 加 32位354 WXORH WXORH 355 DXORH DXORHS260 TURN 320 MOVADSS SS SS SSS SS SSSSS SS SSMOVAD8位 323+H +H S制 32位2位 326 +HP +HP2进 16位 制 32位330 W-H W-H 331 D-H D-H327 W+HP W+HP 8位 328 D+HP D+HP8位 329 -H -H2位 332 -HP -HP 333 W-HP W-HP8位 334 D-HP D-HP 8位 335 *H *HDDD337 D*H D*H 2位 338 *HP *HP339 W*HP W*HP 8位 340 D*HP D*HP8位 341 /H /H342 W/H W/H2进 16位制 D/H常数除法 32位4位 345 W/HP W/HP343 D/H2位 344 /HP /HP8位 346 D/HP D/HP 8位 347 ANDH ANDH16位 348 WANDH WANDH 32位 349 DANDH DANDH8位 350 ORH ORH 16位 351 WORH WORH32位 352 DORH DORH 8位 353 XORH XORHD传送 数学运算 逻辑运算8-65
              分类32 位号指令符号功能                   8位362STI1将以 S1 作为起始地址,以 S2 的内容表示的数的 数据区域的总和存入 D。数据全部作为 2 进制数处理。    STI1 WSTI1 DSTI1                  总和16 位363WSTI1S1DS2                   32 位364DSTI1                    8位374MAX将以 S1 作为起始地址,以 S2 的内容表示的数的 数据区域的最大值存入 D。    MAX WMAX DMAX                  最大值检索16 位375WMAXS1DS2                   376DMAX                    8位377MIN将以 S1 为起始地址,用 S2 内容标示的数值的数 据区域的最小值存入 D。    MIN WMIN DMIN                  最小值检索16 位378WMINS1DS2                   32 位379DMIN                    8位380AVE将以 S1 作为起始地址,以 S2 的内容表示的数的 数据区域的平均值存入 D。数据全部作为 2 进制 数处理,小数点以下的四舍五入。    AVE WAVE DAVE                  平均16 位381WAVES1DS2                   32 位382DAVE                  附带条件的返回285CRET CRET条件满足时终止子例程,从调用该子例程的 CALL 指令的下一步开始执行。                         区域指定输出输入更新295ARIOARIO D K从 D 的地址开始更新 K 字节的外部输出输入。                   设定应用命令标记清除模式    解除应用命令标记清除模式300SYS    SYS 4 1 0设定当读入应用命令时清除应用命令标记                300SYS    SYS 4 0 0设定当读入应用命令时不清除应用命令标记                  SYS 时钟调整命令300SYS调整保存在以 S 地址为起始地址的 4 字符中的 BCD 分秒日时年月时钟。     SYS 5 S 0             S, D:寄存器 H:16 进制常数 K:10 进制常数 (6) 在PC3JG中追加的应用命令S, D:寄存器 H:16 进制常数 K:10 进制常数  分类     号     指令     符号     功能              缓冲寄存 器传送    寄存器地址设定    371   BRSET     BRSET S         D     将 S 指定的缓冲寄存器(EB)的间接地址设 置到以 D 为起始地址的 2 字符区域。   间接读出  372 WBR      WBR S D K      将以 S 为起始地址的 2 字符区域的内容作为地 址的缓冲寄存器中的内容用 K 指定的字符数传 送到以 D 为起始地址的寄存器中。   间接写入      373     WBW          WBW S D K          将以 S 为起始地址的寄存器区域用 K 指定的字 符数传送到以 D 为起始地址的 2 字区域的内容 作为地址的缓冲寄存器中。          DLNK-M2 用信息发出指令  302 MSET      MSET HSD      用以 H 指定的 DLNK-M2 为目标,以 H 指定的 尺寸大小发送以 S 为初始地址的信息。将来自 DLNK-M2 的响应保存在以 D 为起始地址的寄 存器中。 CSET 发出向 TOYOPUC-PCS 进行 I/O 寄 存器的读出的指令     370   CSET         CSET HSD         PCS 中以 S 为起始地址的 I/O 寄存器读出的指 令通过 H 仅发送指定的尺寸部分。将来自 PCS 的响应保存在以 D 为起始的寄存器中。 8-66统计处理 其他 传送 其他
 浮动小数点加法运算 单精度/双精度 (16 进制)助记符号 FD+FUN_No. 556 22C 步数 9步运算域 OP1 被加数据 OP2 加数据OP3 运算结果 可指定区域寄存器地址寄存器地址寄存器地址变址指定 数据类型可 单精度/双精度 可 单精度/双精度 可 单精度/双精度P V K T L X M S N R D JL JS EP EV EK ET EL EX EM ES H EN GS GZ GF GX GM U EB FR CY ECEY GYOP1  OP2  OP3  JL, JS, GS, GZ, GF 为系统区域,用户禁止使用。FR 区域为闪存器区域,电源断电或复位后会恢复到原来的数值。 指定变址前 ̇后指定时的变址加减值单精度++IX −−IX IX++ IX−−双精度++IX −−IX IX++ IX−−OP1 +4 −4OP2 +4 −4OP3 +4 −4地址指定规则单精度 :4 字节边界双精度 :8 字节边界 指定了违反规则的地址时,在运算过程中会在自动修正后进行运算。功能 浮动小数点加法运算 OP1 + OP2 -> OP3+4 −4 +4 −4 +4 −4OP1 +8 OP2 +8 OP3 +8−8 +8 −8 −8 +8 −8 −8 +8 −8--------[ FD+ D000+D002->D004 --------[ (d)FD+ D000 + D004 -> D008根据运算结果输出标记]] 单精度 双精度寄存器的偶数地址 寄存器的 4 的倍数的地址例D000, D002, D004, D006, ----- D000, D004, D008, D00C, ------V57 V56 V55 V54CY BO Z > = < Err Err(V50): 非数字 Z(V54): +0、 −0 CY(V56): + ∞、 −∞运算规则0 0数值 数值 数值 *1+∞ +∞ +∞−∞ −∞ −∞非数字 ERR ERR ERR*1 0 or 数值 or +∞ or −∞被加数据 0数值+∞ +∞+∞ +∞ ERR8-65V53−∞ 非数字 −∞ ERR−∞ ERR ERR ERR −∞ ERR ERR ERRV52 V51 V50
 浮动小数点减法运算 单精度/双精度 (16 进制)助记符号 FD- FUN_No. 步数 9步运算域 OP1 被减数据 OP2 减数据OP3 运算结果 可指定区域55722DFR 区域为闪存器区域,电源断电或复位后会恢复到原来的数值。指定变址前 ̇后指定时的变址加减值单精度++IX −−IX IX++ IX−−双精度++IX −−IX IX++ IX−−OP1 +4 −4 OP2 +4 −4 OP3 +4 −4+4 −4 +4 −4 +4 −4OP1 +8 OP2 +8 OP3 +8−8 +8 −8 −8 +8 −8 −8 +8 −8地址指定规则单精度 :4 字节边界双精度 :8 字节边界 指定了违反规则的地址时,在运算过程中会在自动修正后进行运算。例D000, D002, D004, D006, ----- D000, D004, D008, D00C, ------寄存器的偶数地址 寄存器的 4 的倍数的地址寄存器地址寄存器地址寄存器地址变址指定 数据类型可 单精度/双精度 可 单精度/双精度 可 单精度/双精度P V K T L X M S N R D JL JS EP EV EK ET EL EX EM ES H EN GS GZ GF GX GM U EB FR CY ECEY GYOP1  OP2  OP3  JL, JS, GS, GZ, GF 为系统区域,用户禁止使用。功能 浮动小数点减法运算--------[ FD ー --------[ (d)FD-OP1 - OP2 -> OP3D000 - D002 -> D004 D000 - D004 -> D008]] 单精度 双精度根据运算结果输出标记V57 V56 V55 V54CY BO Z > = < Err Err(V50): 非数字 Z(V54): +0、 −0 CY(V56): +∞、 −∞运算规则0 0数值 数值 数值 *1+∞ +∞ +∞−∞ −∞ −∞非数字 ERR ERR ERR被减数据 0数值*1 0 or 数值 or +∞ or −∞8-66+∞ +∞+∞ ERR +∞V53−∞ 非数字 −∞ ERR−∞ ERR −∞ ERR ERR ERR ERR ERRV52 V51 V50
 浮动小数点乘法运算 单精度/双精度 (16 进制)助记符号 FD* FUN_No. 558 22E 步数 9步运算域 OP1 被乘数据 OP2 乘数据OP3 运算结果 可指定区域寄存器地址寄存器地址寄存器地址变址指定 数据类型可 单精度/双精度 可 单精度/双精度 可 单精度/双精度P V K T L X M S N R D JL JS EP EV EK ET EL EX EM ES H EN GS GZ GF GX GM U EB FR CY ECEY GYOP1  OP2  OP3  JL, JS, GS, GZ, GF 为系统区域,用户禁止使用。FR 区域为闪存器区域,电源断电或复位后会恢复到原来的数值。 指定变址前 ̇后指定时的变址加减值单精度++IX −−IX IX++ IX−−双精度++IX −−IXIX++ IX−− +8 −8 +8 −8 +8 −8OP1 +4 −4 OP2 +4 −4 OP3 +4 −4+4 −4 +4 −4 +4 −4OP1 +8 OP2 +8 OP3 +8−8 −8 −8地址指定规则单精度 :4 字节边界双精度 :8 字节边界 指定了违反规则的地址时,在运算过程中会在自动修正后进行运算。功能 浮动小数点乘法运算 OP1 * OP2 -> OP3 --------[ FD* D000 * D002 -> D004例D000, D002, D004, D006, ----- D000, D004, D008, D00C, ------]CY BO Z > = < ErrErr(V50): 非数字 Z(V54): +0、 −0 CY(V56): +∞、 −∞--------[ (d)FD* D000 * D004 -> D008] 单精度 双精度根据运算结果输出标记运算规则数值+∞−∞ 非数字0 *1 ERR +/−∞ ERR +/−∞ ERR ERR+/−∞ +/−∞ ERR +∞ −∞ ERR −∞ +∞ ERR ERR ERR ERR寄存器的偶数地址 寄存器的 4 的倍数的地址V57 V56 V55 V54V53V52 V51 V50被乘数据0 数值 +∞ −∞ 非数字0 0 0ERR ERR ERR*1 0 or 数值 or +∞ or −∞8-67
 浮动小数点除法运算 单精度/双精度 (16 进制)助记符号 FD/ FUN_No. 559 22F 步数 9步运算域 OP1 被除数据 OP2 被除数据 OP3 运算结果可指定区域寄存器地址寄存器地址寄存器地址变址指定 数据类型可 单精度/双精度 可 单精度/双精度 可 单精度/双精度P V K T L X M S N R D JL JS EP EV EK ET EL EX EM ES H EN GS GZ GF GX GM U EB FR CY ECEY GYOP1  OP2  OP3  JL, JS, GS, GZ, GF 为系统区域,用户禁止使用。FR 区域为闪存器区域,电源断电或复位后会恢复到原来的数值。 指定变址前 ̇后指定时的变址加减值单精度++IX −−IX IX++ IX−−双精度++IX −−IX IX++ IX−−OP1 +4 −4 OP2 +4 −4 OP3 +4 −4+4 −4 +4 −4 +4 −4OP1 +8 OP2 +8 OP3 +8−8 +8 −8 −8 +8 −8 −8 +8 −8地址指定规则单精度 :4 字节边界双精度 :8 字节边界 指定了违反规则的地址时,在运算过程中会在自动修正后进行运算。例D000, D002, D004, D006, ----- D000, D004, D008, D00C, ------功能 浮动小数点除法运算--------[ FD/ --------[ (d)FD/OP1 / OP2 -> OP3D000 / D002 -> D004 D000 / D004 -> D008] 单精度 ] 双精度根据运算结果输出标记寄存器的偶数地址 寄存器的 4 的倍数的地址V57 V56 V55 V54CY BO Z > Err(V50): 非数字 Z(V54): +0、 −0 CY(V56): +∞、 −∞运算规则0 ERR+∞ 0*20−∞ 0*20 非数字 ERR ERR+∞ +∞+/−∞ ERR ERR ERR−∞ 非数字 −∞ ERR+/−∞ ERR ERR ERR ERR ERR ERR ERR数值+/−∞ 0 *1*1 0 or 数值 or +∞ or −∞ *2 下溢结果为 0被除数据 0 数值8-68V53V52 V51 V50 = < Err
 浮动小数点常数加法运算 单精度/双精度 (16 进制)助记符号 FD+FH FUN_No. 560 230 步数 9步运算域 OP1OP2 加数据 常数 不可 OP3可指定区域单精度/双精度单精度/双精度OP1 +4 −4 OP2OP3+4 −4被加数据 寄存器地址 可P V K T L X M S N R D JL JS EP EV EK ET EL EX EM ES H EN GS GZ GF GX GM U EB FR CY ECEY GYOP1  OP2OP3JL, JS, GS, GZ, GF 为系统区域,用户禁止使用。FR 区域为闪存器区域,电源断电或复位后会恢复到原来的数值。 指定变址前 ̇后指定时的变址加减值单精度++IX −−IX IX++ IX−−双精度++IX −−IX IX++ IX−− OP1 +8 −8 +8 −8 OP2OP3地址指定规则单精度 :4 字节边界双精度 :8 字节边界 指定了违反规则的地址时,在运算过程中会在自动修正后进行运算。例D000, D002, D004, D006, ----- D000, D004, D008, D00C, ------功能 浮动小数点常数加法运算--------[ FD+FH --------[ (d)FD+FHOP1 + OP2 -> OP1 下一个寄存器寄存器的偶数地址 寄存器的 4 的倍数的地址] ]V57 V56 V55CY BO Z > = < Err Err(V50): 非数字 Z(V54): +0、 −0 CY(V56): +∞、 −∞运算规则−∞ 非数字 0 0数值 +∞ −∞ ERR 数值 数值 *1 +∞ −∞ ERR+∞−∞ 非数字*1 0 or 数值 or +∞ or −∞8-69根据运算结果输出标记D000 + 0.1 D000 + 0.2单精度(向 D002 输出) 双精度(向 D004 输出)被加数据0 数值 +∞变址指定 数据类型V54 V53 V52 V51 V50
 浮动小数点常数减法运算 单精度/双精度 (16 进制)助记符号 FD- DH FUN_No. 步数 9步运算域 OP1 被减数据 OP2 减数据OP3可指定区域561231FR 区域为闪存器区域,电源断电或复位后会恢复到原来的数值。 指定变址前 ̇后指定时的变址加减值单精度++IX −−IX IX++ IX−−双精度++IX −−IX IX++ IX−− OP1 +8 −8 +8 −8 OP2OP3OP1 +4 −4 OP2OP3+4 −4地址指定规则单精度 :4 字节边界双精度 :8 字节边界 指定了违反规则的地址时,在运算过程中会在自动修正后进行运算。例D000, D002, D004, D006,----- D000, D004, D008, D00C,------功能 浮动小数点常数减法运算--------[ FD- DH --------[ (d)FD-FHOP1 - OP2 -> OP1 下一个寄存器根据运算结果输出标记寄存器的偶数地址 寄存器的 4 的倍数的地址D000 - 0.1 D000 - 0.2]单精度(向 D002 输出) 双精度(向 D004 输出)寄存器地址 可 常数 不可单精度/双精度单精度/双精度P V K T L X M S N R D JL JS EP EV EK ET EL EX EM ES H EN GS GZ GF GX GM U EB FR CY ECEY GYOP1  OP2OP3JL, JS, GS, GZ, GF 为系统区域,用户禁止使用。]V57 V56 V55CY BO Z > = < Err Err(V50): 非数字 Z(V54): +0、 −0 CY(V56): +∞、 −∞运算规则−∞ 非数字 0 0数值 +∞ −∞ ERR 数值 数值 *1 +∞ −∞ ERR+∞−∞ 非数字*1 0 or 数值 or +∞ or −∞8-70被减数据0 数值 +∞V54V53 V52 V51 V50变址指定 数据类型
 浮动小数点常数乘法运算 单精度/双精度 (16 进制)助记符号 FD*FH FUN_No. 562 232 步数 9步运算域 OP1OP2 乘数据 常数 不可 OP3可指定区域单精度/双精度单精度/双精度被乘数据 寄存器地址 可P V K T L X M S N R D JL JS EP EV EK ET EL EX EM ES H EN GS GZ GF GX GM U EB FR CY ECEY GYOP1  OP2OP3JL, JS, GS, GZ, GF 为系统区域,用户禁止使用。FR 区域为闪存器区域,电源断电或复位后会恢复到原来的数值。 指定变址前 ̇后指定时的变址加减值单精度++IX −−IX IX++ IX−−双精度++IX −−IX IX++ IX−− OP1 +8 −8 +8 −8 OP2OP3OP1 +4 −4 OP2OP3+4 −4地址指定规则单精度 :4 字节边界双精度 :8 字节边界 指定了违反规则的地址时,在运算过程中会在自动修正后进行运算。例D000, D002, D004, D006, ----- D000, D004, D008, D00C, ------功能 浮动小数点常数乘法运算--------[ FD*FH --------[ (d)FD*FHOP1 * OP2 -> OP1 下一个寄存器根据运算结果输出标记寄存器的偶数地址 寄存器的 4 的倍数的地址D000 * 0.1 D000 * 0.2]] 单精度(向 D002 输出) 双精度(向 D004 输出)V57 V56 V55CY BO Z > = < Err Err(V50): 非数字 Z(V54): +0、 −0 CY(V56): +∞、 −∞运算规则数值+∞−∞ 非数字*1 0 or 数值 or +∞ or −∞8-71被乘数据0 数值 +∞−∞ 非数字 0 0 0ERR ERR ERR0 *1 +/−∞ +/−∞ ERR变址指定 数据类型V54 V53 V52 V51 V50
 浮动小数点常数除法运算 单精度/双精度 (16 进制)助记符号 FD/FH FUN_No. 563 233 步数 9步运算域 OP1OP2 除数据 常数 不可 OP3可指定区域单精度/双精度单精度/双精度功能 浮动小数点常数除法运算--------[ FD/FH --------[ (d)FD/FHOP1 / OP2 -> OP1 下一个寄存器被除数据 寄存器地址 可P V K T L X M S N R D JL JS EP EV EK ET EL EX EM ES H EN GS GZ GF GX GM U EB FR CY ECEY GYOP1  OP2OP3JL, JS, GS, GZ, GF 为系统区域,用户禁止使用。FR 区域为闪存器区域,电源断电或复位后会恢复到原来的数值。 指定变址前・后指定时的变址加减值单精度++IX −−IX IX++ IX−−双精度++IX −−IX IX++ IX−− OP1 +8 −8 +8 −8 OP2OP3OP1 +4 −4 OP2OP3+4 −4地址指定规则单精度 :4 字节边界双精度 :8 字节边界 指定了违反规则的地址时,在运算过程中会在自动修正后进行运算。例D000, D002, D004, D006, ----- D000, D004, D008, D00C, ------根据运算结果输出标记寄存器的偶数地址 寄存器的 4 的倍数的地址D000 / 0.1 D000 / 0.2]单精度(向 D002 输出) 双精度(向 D004 输出)]V57 V56 V55CY BO Z > = < Err  Err(V50): 非数字 Z(V54): +0、 −0 CY(V56): +∞、 −∞运算规则数值+∞−∞ 非数字被除数据 0 数值0 ERR+/−∞ 0 *1+∞ +∞+/−∞−∞ 非数字 −∞ ERR+/−∞ ERR*1 0 or 数值 or +∞ or −∞8-72变址指定 数据类型V54 V53 V52 V51 V50
 浮动小数点总和 单精度/双精度 (16 进制)助记符号 FDSTI1 FUN_No. 564 234 步数 9步运算域 OP1 起始地址 寄存器地址 可OP2 运算结果 寄存器地址 可OP3 数据数量 寄存器地址 可可指定区域P V K T L X M S N R D JL JS EP EV EK ET EL EX CY ECEYOP1  OP2  OP3  JL, JS, GS, GZ, GF 为系统区域,用户禁止使用。FR 区域为闪存器区域,电源断电或复位后会恢复到原来的数值。 指定变址前 ̇后指定时的变址加减值单精度++IX −−IX IX++ IX−−双精度++IX −−IX IX++ IX−−OP1 +4 −4 OP2 +4 −4 OP3 +2 −2+4 −4 +4 −4 +2 −2OP1 +8 OP2 +8 OP3 +2−8 +8 −8 −8 +8 −8 −2 +2 −2地址指定规则单精度 :4 字节边界双精度 :8 字节边界 指定了违反规则的地址时,在运算过程中会在自动修正后进行运算。例D000, D002, D004, D006, ----- D000, D004, D008, D00C, ------寄存器的偶数地址 寄存器的 4 的倍数的地址功能 浮动小数点总和 将以OP1为起始地址的区域的数据总和输出到OP2中。数据数为OP3的寄存器值(BIN值)。--------[ FDSTI1 D000 -> D100 D104 --------[ (d)FDSTI1 D000 -> D200 D204根据运算结果输出标记V57 V56 V55 V54 CY BO Z]] 单精度 双精度V53 V52 V51 V50 = < Err>OFFOFF Err(V50): Z(V54): CY(V56):运算规则0 0数值 数值 数值 *1+∞ +∞ +∞−∞ −∞ −∞非数字 ERR ERR ERR*1 0 or 数值 or +∞ or −∞比非数字 or 数据数 8192 大 +0、 −0+∞、 −∞被加数据 0数值+∞ +∞−∞ 非数字 −∞ ERR−∞ ERR ERR ERR −∞ ERR ERR ERR+∞ +∞ ERR8-73变址指定 数据类型单精度/双精度 单精度/双精度 BIN16bitEM ES H EN GS GZ GF GX GM U EB FR GY
浮动小数点最大值 单精度/双精度 (16 进制)助记符号 FDMAX FUN_No. 565 235 步数 9步可指定区域P V K T L X M S N R DCY ECEY GY运算域 OP1OP2 运算结果寄存器地址 可 寄存器地址 可 寄存器地址 可单精度/双精度 单精度/双精度 BIN16bit起始地址 OP3 数据数量变址指定 数据类型                                                                       JLJS                                                                                                    OP1FR 区域为闪存器区域,电源断电或复位后会恢复到原来的数值。 指定变址前 ̇后指定时的变址加减值单精度地址指定规则单精度 :4 字节边界双精度 :8 字节边界 指定了违反规则的地址时,在运算过程中会在自动修正后进行运算。功能 检索浮动小数点最大值--------[ FDMAX --------[ (d)FDMAX将在 OP1 为起始地址的区域的数据中搜索出的最大值输出到 OP2 中。数据数 为 OP3 的寄存器值(BIN 值)。根据运算结果输出标记Err(V50): 比非数字 or 数据数 8192 大 Z(V54): +0、 −0CY(V56): +∞、 −∞双精度寄存器的偶数地址 寄存器的 4 的倍数的地址例D000, D002, D004, D006, ----- D000, D004, D008, D00C, ------D000 -> D100 D104 D000 -> D200 D204]] 单精度 双精度EPEVEKETELEXEMESHEN                                 GXGMUEBFRGSGZGF                                                                                                                      OP2                                                                                                          OP3                                                            JL, JS, GS, GZ, GF 为系统区域,用户禁止使用。            ++IX          −−IX    IX++        IX−−     OP1+4  −4+4  −4     OP2 +4     −4 +4     −4     OP3    +2      −2    +2      −2              ++IX         −−IX    IX++       IX−−    OP1+8  −8+8  −8     OP2 +8     −8 +8    −8     OP3    +2      −2    +2     −2     V57         V56       V55      V54   V53       V52      V51     V50       CY    BO   Z  >   =   <   Err       OFF    OFF                8-74
浮动小数点最小值 单精度/双精度 (16 进制)助记符号 FDMIN FUN_No. 566 236 步数 9步可指定区域P V K T L X M S N R DCY ECEY GY运算域 OP1OP2 运算结果寄存器地址 可 寄存器地址 可 寄存器地址 可单精度/双精度 单精度/双精度 BIN16bit起始地址 OP3 数据数量变址指定 数据类型                                                                       JLJS                                                                                                    OP1FR 区域为闪存器区域,电源断电或复位后会恢复到原来的数值。 指定变址前・后指定时的变址加减值单精度地址指定规则单精度 :4 字节边界双精度 :8 字节边界 指定了违反规则的地址时,在运算过程中会在自动修正后进行运算。功能 检索浮动小数点最小值--------[ FDMIN --------[ (d)FDMIN将在 OP1 为起始地址的区域的数据中搜索出的最小值输出到 OP2 中。数据数为 OP3 的寄存器值(BIN 值)。根据运算结果输出标记Err(V50): 比非数字 or 数据数 8192 大 Z(V54): +0、 −0CY(V56): +∞、 −∞双精度寄存器的偶数地址 寄存器的 4 的倍数的地址例D000, D002, D004, D006, ----- D000, D004, D008, D00C, ------D000 -> D100 D104 D000 -> D200 D204]] 单精度 双精度EPEVEKETELEXEMESHEN                                 GXGMUEBFRGSGZGF                                                                                                                      OP2                                                                                                          OP3                                                            JL, JS, GS, GZ, GF 为系统区域,用户禁止使用。         ++IX         −−IX IX++       IX−−     OP1    +4      −4    +4      −4     OP2+4  −4+4  −4     OP3  +2      −2  +2      −2         ++IX        −−IX IX++      IX−−     OP1    +8      −8    +8     −8    OP2+8  −8+8  −8     OP3  +2      −2  +2     −2   V57       V56    V55    V54 V53      V52    V51   V50          CY      BO     Z   >     =     <     Err       OFF    OFF                8-75
浮动小数点平均 单精度/双精度 (16 进制)助记符号 FDAVE FUN_No. 567 237 步数 9步运算域 OP1OP2 运算结果寄存器地址      可寄存器地址      可寄存器地址      可单精度/双精度 单精度/双精度 BIN16bit起始地址 OP3 数据数量可指定区域P V K T L X M S N R DCY ECEY GY变址指定 数据类型                                                                 单精度地址指定规则单精度 :4 字节边界双精度 :8 字节边界 指定了违反规则的地址时,在运算过程中会在自动修正后进行运算。双精度EPEVEKETELEXEMESHEN                     GXGMUEBFR  JLJSGSGZGF                                                                                                         OP1                                                                                                      OP2                                                                                                     OP3                                                        JL, JS, GS, GZ, GF 为系统区域,用户禁止使用。        FR 区域为闪存器区域,电源断电或复位后会恢复到原来的数值。 指定变址前・后指定时的变址加减值        ++IX         −−IX IX++       IX−−     OP1 +4     −4 +4     −4     OP2    +4      −4    +4      −4     OP3   +2   −2   +2   −2           ++IX        −−IX IX++      IX−−     OP1 +8     −8 +8    −8     OP2    +8      −8    +8     −8    OP3   +2   −2   +2   −2  寄存器的偶数地址 寄存器的 4 的倍数的地址例D000, D002, D004, D006, ----- D000, D004, D008, D00C, ------功能 浮动小数点平均 将以 OP1 为起始地址的区域的数据的平均值输出到 OP2 中。数据数为 OP3 的寄存器 值(BIN 值)。--------[ FDAVE D000 -> D100 D104 --------[ (d)FDAVE D000 -> D200 D204根据运算结果输出标记Err(V50): 比非数字 or 数据数 8192 大 Z(V54): +0、 −0CY(V56): +∞、 −∞]] 单精度 双精度      V57 V56       V55    V54    V53    V52    V51  V50         CY      BO     Z   >   =   <   Err                           8-76
10 进制常数传送 单精度/双精度 (16 进制)助记符号 FDMOVR FUN_No. 569 239 步数 9步运算域 OP1OP2 接收地址 寄存器地址 可 OP3可指定区域P V K T L X M S N R DCY ECEY GY传送数据 常数 可单精度/双精度单精度/双精度变址指定 数据类型                                                                  JLJS                                                                                   OP1                                                                                                     OP2FR 区域为闪存器区域,电源断电或复位后会恢复到原来的数值。 指定变址前・后指定时的变址加减值单精度地址指定规则单精度 :4 字节边界双精度 :8 字节边界 指定了违反规则的地址时,在运算过程中会在自动修正后进行运算。双精度EPEVEKETELEXEMESHEN                     GXGMUEBFRGSGZGF                                                                                                                           OP3                         JL, JS, GS, GZ, GF 为系统区域,用户禁止使用。         ++IX         −−IX IX++       IX−−     OP1                 OP2    +4      −4    +4      −4     OP3                 ++IX        −−IX IX++      IX−−     OP1                OP2    +8      −8    +8     −8    OP3        --------[ (d)FDMOVR 0.2 -> D200 ]根据运算结果输出标记双精度寄存器的偶数地址 寄存器的 4 的倍数的地址例D000, D002, D004, D006, ----- D000, D004, D008, D00C, ------功能 浮动小数点 10 进制常数传送 向 OP2 的寄存器传送浮动小数点常数 --------[ FDMOVR 0.1 -> D100 ] 单精度     V57 V56    V55 V54     V53 V52    V51   V50         CY     BO   Z      >    =     <     Err                           8-77
BIN16->浮动小数点 单精度/双精度 (16 进制)助记符号 FFLT FUN_No. 570 23A 步数 7步可指定区域BIN16bit单精度/双精度P V K T L X M S N R DCY ECEY GY运算域 OP1 OP3寄存器地址 可 寄存器地址 可转换起始地址 OP2 转换目标地址变址指定 数据类型                                                                   JLJS                                                                                 OP1FR 区域为闪存器区域,电源断电或复位后会恢复到原来的数值。 指定变址前・后指定时的变址加减值单精度地址指定规则单精度 :4 字节边界双精度 :8 字节边界 指定了违反规则的地址时,在运算过程中会在自动修正后进行运算。双精度寄存器的偶数地址 寄存器的 4 的倍数的地址例D000, D002, D004, D006, ----- D000, D004, D008, D00C, ------EPEVEKETELEXEMESHEN                     GXGMUEBFRGF                                                                                                                              OP2                                                                                                   OP3                       JL, JS, GS, GZ, GF 为系统区域,用户禁止使用。            ++IX          −−IX    IX++        IX−−     OP1+2  −2+2  −2     OP2 +4     −4 +4     −4     OP3                            ++IX         −−IX    IX++       IX−−    OP1+2  −2+2  −2     OP2 +8     −8 +8    −8     OP3               功能 BIN16->浮动小数点 将 OP1 寄存器的带符号 16bit 二进制数据转换为浮动小数点,输出到 OP2 的寄存器中。 --------[ FFLT D000 -> D100 ] 单精度--------[ (d)FFLT D000 -> D200 ] 双精度 根据运算结果输出标记GSGZ     V57 V56    V55 V54     V53 V52    V51   V50         CY     BO   Z      >    =     <     Err                           8-78
BIN32->浮动小数点 单精度/双精度 (16 进制)助记符号 FDFLT FUN_No. 571 23B 步数 7步BIN32bit单精度/双精度P V K T L X M S N R DCY ECEY GY运算域 OP1OP2 转换目标地址OP3可指定区域寄存器地址 可 寄存器地址 可转换起始地址变址指定 数据类型                                                                   JLJS                                                                                OP1FR 区域为闪存器区域,电源断电或复位后会恢复到原来的数值。 指定变址前・后指定时的变址加减值单精度地址指定规则单精度 :4 字节边界双精度 :8 字节边界 指定了违反规则的地址时,在运算过程中会在自动修正后进行运算。双精度EPEVEKETELEXEMESHEN                     GXGMUEBFR                                                                                                    OP2                                                                                                   OP3                       JL, JS, GS, GZ, GF 为系统区域,用户禁止使用。            ++IX          −−IX    IX++        IX−−     OP1+4  −4+4  −4     OP2 +4     −4 +4     −4     OP3                            ++IX         −−IX    IX++       IX−−    OP1+4  −4+4  −4     OP2 +8     −8 +8    −8     OP3               寄存器的偶数地址 寄存器的 4 的倍数的地址例D000, D002, D004, D006, ----- D000, D004, D008, D00C, ------功能 BIN32->浮动小数点 将 OP1 寄存器的带符号 32bit 二进制数据转换为浮动小数点,输出到 OP2 的寄存器中。 --------[ FDFLT D000 -> D100 ] 单精度--------[ (d)FDFLT D000 -> D200 ] 双精度 根据运算结果输出标记GSGZ     V57 V56    V55 V54     V53 V52    V51   V50         CY     BO   Z      >    =     <     Err                           8-79GF                           
浮动小数点->BIN16 单精度/双精度 (16 进制)助记符号 FINT FUN_No. 572 23C 步数 7步运算域 OP1 OP3可指定区域寄存器地址 可 寄存器地址 可P V K T L X M S N R DCY ECEY GY转换起始地址 OP2 转换目标地址单精度/双精度BIN16bit变址指定 数据类型                                                                       JLJS                                                                                       OP1FR 区域为闪存器区域,电源断电或复位后会恢复到原来的数值。 指定变址前・后指定时的变址加减值单精度地址指定规则单精度 :4 字节边界双精度 :8 字节边界 指定了违反规则的地址时,在运算过程中会在自动修正后进行运算。双精度EPEVEKETELEXEMESHEN                                 GXGMUEBFRGSGZGF                                                                                                                                          OP2                                                                                                            OP3                         JL, JS, GS, GZ, GF 为系统区域,用户禁止使用。            ++IX          −−IX    IX++        IX−−     OP1+4  −4+4  −4     OP2 +2     −2 +2     −2     OP3                            ++IX         −−IX    IX++       IX−−    OP1+8  −8+8  −8     OP2 +2     −2 +2    −2     OP3               功能 浮动小数点->BIN16 --------[ FINTErr(V50): 非数字Z(V54): +0、 −0CY(V56): −32768~32767 以外(范围外)寄存器的偶数地址 寄存器的 4 的倍数的地址例D000, D002, D004, D006, ----- D000, D004, D008, D00C, ------将 OP1 寄存器的浮动小数点数据的整数部分转换为 BIN,输出到 OP2 的寄存器中。 D000 -> D100 ] 单精度例 −3.5 -> −3D000 -> D200 ] 双精度 根据运算结果输出标记--------[ (d)FINT     V57 V56    V55 V54     V53 V52    V51   V50         CY     BO   Z      >    =     <     Err          OFF                 8-80
浮动小数点->BIN32 单精度/双精度 (16 进制)助记符号 FDINT FUN_No. 573 23D 步数 7步运算域 OP1 OP3寄存器地址 可 寄存器地址 可P V K T L X M S N R DCY ECEY GY转换起始地址 OP2 转换目标地址单精度/双精度BIN32bit变址指定 数据类型    可指定区域                                                                      JLJS                                                                                    OP1FR 区域为闪存器区域,电源断电或复位后会恢复到原来的数值。 指定变址前・后指定时的变址加减值单精度地址指定规则单精度 :4 字节边界双精度 :8 字节边界 指定了违反规则的地址时,在运算过程中会在自动修正后进行运算。双精度EPEVEKETELEXEMESHEN                                 GXGMUEBFRGSGZGF                                                                                                                                     OP2                                                                                                      OP3                        JL, JS, GS, GZ, GF 为系统区域,用户禁止使用。            ++IX          −−IX    IX++        IX−−     OP1+4  −4+4  −4     OP2 +4     −4 +4     −4     OP3                            ++IX         −−IX    IX++       IX−−    OP1+8  −8+8  −8     OP2 +4     −4 +4    −4     OP3               寄存器的偶数地址 寄存器的 4 的倍数的地址例D000, D002, D004, D006, ----- D000, D004, D008, D00C, ------功能 浮动小数点->BIN16 将 OP1 寄存器的浮动小数点数据的整数部分转换为 BIN,输出到 OP2 的寄存器中。 --------[ FDINT D000 -> D100 ] 单精度例 −3.5 -> −3--------[ (d)FDINT D000 -> D200 ] 双精度 根据运算结果输出标记Err(V50): 非数字Z(V54): +0、 −0CY(V56): −2147483648~2147483647 以外(范围外)     V57 V56    V55 V54     V53 V52    V51   V50         CY     BO   Z      >    =     <     Err          OFF                 8-81
文字列->浮动小数点 单精度/双精度 (16 进制)助记符号 FVAL FUN_No. 574 23E 步数 9步转换起始地址 寄存器地址 可可指定区域P V K T L X M S N R DCY ECEY GY变址指定 数据类型 运算域 OP1OP2 转换目标地址 寄存器地址 可OP3 文字数 常数ASCII单精度/双精度 10 进制数                                                                      JLJS                                                                                                           OP1FR 区域为闪存器区域,电源断电或复位后会恢复到原来的数值。 指定变址前・后指定时的变址加减值单精度地址指定规则单精度 :4 字节边界双精度 :8 字节边界 指定了违反规则的地址时,在运算过程中会在自动修正后进行运算。EPEVEKETELEXEMESHEN                                 GXGMUEBFR                                                   OP2双精度GSGZGF                                                                                                                                                                               OP3                                                                JL, JS, GS, GZ, GF 为系统区域,用户禁止使用。         ++IX         −−IX IX++       IX−−     OP1 +2     −2 +2     −2     OP2 +4     −4 +4     −4     OP3                               ++IX        −−IX IX++      IX−−     OP1 +2     −2 +2    −2     OP2 +8     −8 +8    −8     OP3                     寄存器的偶数地址 寄存器的 4 的倍数的地址例D000, D002, D004, D006, ----- D000, D004, D008, D00C, ------功能 ASCII->浮动小数点 将以 OP1 寄存器的低位作为起始地址的 ASCII 文字列(OP3 的数据数部分)转换为浮动 小数点输出到 OP2 中。--------[ FVAL D000 -> D100 --------[ (d)FVAL D000 -> D200根据运算结果输出标记Err(V50): 不能转换数据数超过 256 Z(V54): 0CY(V56): 上溢8d ] 单精度 8d ] 双精度   V57       V56    V55    V54 V53      V52    V51   V50          CY      BO     Z   >     =     <     Err           OFF                8-82
文字列->浮动小数点 单精度/双精度 (16 进制)助记符号 FSTR FUN_No. 575 23F 步数 9步运算域 OP1OP2 转换目标地址 寄存器地址 可OP3 文字数 常数单精度/双精度ASCII10 进制数转换起始地址 寄存器地址 可变址指定 数据类型 可指定区域P V K T L X M S N R DCY ECEY GY                                                                      JLJS                                                                                                              OP1FR 区域为闪存器区域,电源断电或复位后会恢复到原来的数值。 指定变址前・后指定时的变址加减值单精度地址指定规则单精度 :4 字节边界双精度 :8 字节边界 指定了违反规则的地址时,在运算过程中会在自动修正后进行运算。转换规格:OP3的指定文字数小于16时,小数点以下的位数为6位。 OP3 的指定文字数大于 16 时,小数点以下的位数为 12 位。 OP3 的指定文字数为 0 时,用指数方式表示。 转换数据比指定文字数还大时,出现 FUN 异常。虽然是 123456,但文字数为 5 时异常1.23456 时为 1.234 转换数据被舍入。双精度EPEVEKETELEXEMESHEN                                 GXGMUEBFR                                                                                                                OP2                                                                                                            OP3                                                               JL, JS, GS, GZ, GF 为系统区域,用户禁止使用。            ++IX          −−IX    IX++        IX−−     OP1+4  −4+4  −4     OP2 +2     −2 +2     −2     OP3                            ++IX         −−IX    IX++       IX−−    OP1+8  −8+8  −8     OP2 +2     −2 +2    −2     OP3               功能 浮动小数点->文字列--------[ FSTR D000 -> D100 8d ] 单精度--------[ (d)FSTRD000 -> D200 8d ]双精度寄存器的偶数地址 寄存器的 4 的倍数的地址例D000, D002, D004, D006, ----- D000, D004, D008, D00C, ------将 OP1 寄存器的数据作为浮动小数点数据,转换为 ASCII 后向 OP2 的寄存器中输 出 OP3 的位数部分。OP3 的位数为“0000”时,用指数方式表示。根据运算结果输出标记Err(V50):非数字位数不足数据数超过 256   V57       V56    V55    V54 V53      V52    V51   V50          CY      BO     Z   >     =     <     Err       OFF    OFF   OFF             8-83GSGZGF    
弧度->角度 单精度/双精度 (16 进制)助记符号 DEG FUN_No. 985 3D9 步数 7步运算域 OP1OP2 转换目标地址OP3可指定区域P V K T L X M S N R DCY ECEY GY转换起始地址寄存器地址 可 寄存器地址 可单精度/双精度单精度/双精度变址指定 数据类型                                                                      JLJS                                                                                  OP1FR 区域为闪存器区域,电源断电或复位后会恢复到原来的数值。 指定变址前・后指定时的变址加减值单精度地址指定规则单精度 :4 字节边界双精度 :8 字节边界 指定了违反规则的地址时,在运算过程中会在自动修正后进行运算。双精度EPEVEKETELEXEMESHEN                                 GXGMUEBFRGSGZGF                                                                                                                                         OP2                                                                                                       OP3                        JL, JS, GS, GZ, GF 为系统区域,用户禁止使用。            ++IX          −−IX    IX++        IX−−     OP1+4  −4+4  −4     OP2 +4     −4 +4     −4     OP3                            ++IX         −−IX    IX++       IX−−    OP1+8  −8+8  −8     OP2 +8     −8 +8    −8     OP3               寄存器的偶数地址 寄存器的 4 的倍数的地址例D000, D002, D004, D006, ----- D000, D004, D008, D00C, ------功能 弧度->角度 将 OP1 寄存器的浮动小数点弧度转换为浮动小数点角度,输出到 OP2 的寄存器中 --------[ DEG D000 -> D100 ] 单精度--------[ (d)DEG D000 -> D200 ]根据运算结果输出标记双精度     V57 V56    V55 V54     V53 V52    V51   V50         CY     BO   Z      >    =     <     Err          OFF                 8-84
角度->弧度 单精度/双精度 (16 进制)助记符号 RAD FUN_No. 986 3DA 步数 7步运算域 OP1OP2 转换目标地址OP3可指定区域P V K T L X M S N R DCY ECEY GY转换起始地址寄存器地址 可 寄存器地址 可单精度/双精度单精度/双精度变址指定 数据类型                                                                      JLJS                                                                                                                 OP1FR 区域为闪存器区域,电源断电或复位后会恢复到原来的数值。 指定变址前・后指定时的变址加减值单精度地址指定规则单精度 :4 字节边界双精度 :8 字节边界 指定了违反规则的地址时,在运算过程中会在自动修正后进行运算。--------[ (d)RAD D000 -> D200 ]根据运算结果输出标记双精度双精度                                                               OP2寄存器的偶数地址 寄存器的 4 的倍数的地址例D000, D002, D004, D006, ----- D000, D004, D008, D00C, ------EPEVEKETELEXEMESHEN                                 GXGMUEBFR                                                                                                                                                          OP3                        JL, JS, GS, GZ, GF 为系统区域,用户禁止使用。            ++IX          −−IX    IX++        IX−−     OP1+4  −4+4  −4     OP2 +4     −4 +4     −4     OP3                            ++IX         −−IX    IX++       IX−−    OP1+8  −8+8  −8     OP2 +8     −8 +8    −8     OP3               功能 角度->弧度 将 OP1 寄存器的浮动小数点角度转换为浮动小数点弧度,输出到 OP2 的寄存器中。 --------[ RAD D000 -> D100 ] 单精度GSGZGF     V57 V56    V55 V54     V53 V52    V51   V50         CY     BO   Z      >    =     <     Err                           8-85
SIN 单精度/双精度 (16 进制)助记符号 SIN FUN_No. 987 3DB 步数 7步运算域 OP1OP2 转换目标地址OP3可指定区域P V K T L X M S N R DCY ECEY GY转换起始地址寄存器地址 可 寄存器地址 可单精度/双精度单精度/双精度变址指定 数据类型                                                                      JLJS                                                                                                               OP1FR 区域为闪存器区域,电源断电或复位后会恢复到原来的数值。 指定变址前・后指定时的变址加减值单精度地址指定规则单精度 :4 字节边界双精度 :8 字节边界 指定了违反规则的地址时,在运算过程中会在自动修正后进行运算。双精度寄存器的偶数地址 寄存器的 4 的倍数的地址例D000, D002, D004, D006, ----- D000, D004, D008, D00C, ------功能 SIN 将 OP1 寄存器的浮动小数点弧度作为 SIN(正弦)输出到 OP2 的寄存器中。 --------[ SIN D000 -> D100 ] 单精度--------[ (d)SIN D000 -> D200 ] 双精度 根据运算结果输出标记EPEVEKETELEXEMESHEN                                 GXGMUEBFRGSGZGF                                                                                                              OP2                                                                                                       OP3                        JL, JS, GS, GZ, GF 为系统区域,用户禁止使用。            ++IX          −−IX    IX++        IX−−     OP1+4  −4+4  −4     OP2 +4     −4 +4     −4     OP3                            ++IX         −−IX    IX++       IX−−    OP1+8  −8+8  −8     OP2 +8     −8 +8    −8     OP3                    V57 V56    V55 V54     V53 V52    V51   V50         CY     BO   Z      >    =     <     Err       OFF                    8-86
COS 单精度/双精度 (16 进制)助记符号 COS FUN_No. 988 3DC 步数 7步运算域 OP1OP2 转换目标地址OP3可指定区域P V K T L X M S N R DCY ECEY GY转换起始地址寄存器地址 可 寄存器地址 可单精度/双精度单精度/双精度变址指定 数据类型                                                                      JLJS                                                                                   OP1FR 区域为闪存器区域,电源断电或复位后会恢复到原来的数值。 指定变址前・后指定时的变址加减值单精度地址指定规则单精度 :4 字节边界双精度 :8 字节边界 指定了违反规则的地址时,在运算过程中会在自动修正后进行运算。双精度EPEVEKETELEXEMESHEN                                 GXGMUEBFRGSGZGF                                                                                                                                     OP2                                                                                                      OP3                      JL, JS, GS, GZ, GF 为系统区域,用户禁止使用。            ++IX          −−IX    IX++        IX−−     OP1+4  −4+4  −4     OP2 +4     −4 +4     −4     OP3                            ++IX         −−IX    IX++       IX−−    OP1+8  −8+8  −8     OP2 +8     −8 +8    −8     OP3               寄存器的偶数地址 寄存器的 4 的倍数的地址例D000, D002, D004, D006, ----- D000, D004, D008, D00C, ------功能 COS 将 OP1 寄存器的浮动小数点弧度作为 COS(余弦)输出到 OP2 的寄存器中。 --------[ COS D000 -> D100 ] 单精度--------[ (d)COS D000 -> D200 ]根据运算结果输出标记双精度     V57 V56    V55 V54     V53 V52    V51   V50         CY     BO   Z      >    =     <     Err       OFF                    8-87
TAN 单精度/双精度 (16 进制)助记符号 TAN FUN_No. 989 3DD 步数 7步运算域 OP1OP2 转换目标地址OP3可指定区域P V K T L X M S N R DCY ECEY GY转换起始地址寄存器地址 可 寄存器地址 可单精度/双精度单精度/双精度变址指定 数据类型                                                                      JLJS                                                                                  OP1FR 区域为闪存器区域,电源断电或复位后会恢复到原来的数值。 指定变址前・后指定时的变址加减值EPEVEKETELEXEMESHEN                                 GXGMUEBFR                                                           OP2单精度地址指定规则单精度 :4 字节边界双精度 :8 字节边界 指定了违反规则的地址时,在运算过程中会在自动修正后进行运算。双精度GSGZGF                                                                                                                                                                        OP3                    JL, JS, GS, GZ, GF 为系统区域,用户禁止使用。            ++IX          −−IX    IX++        IX−−     OP1+4  −4+4  −4     OP2 +4     −4 +4     −4     OP3                            ++IX         −−IX    IX++       IX−−    OP1+8  −8+8  −8     OP2 +8     −8 +8    −8     OP3               寄存器的偶数地址 寄存器的 4 的倍数的地址例D000, D002, D004, D006, ----- D000, D004, D008, D00C, ------功能 TAN 将 OP1 寄存器的浮动小数点弧度作为 TAN(正切)输出到 OP2 的寄存器中。 --------[ TAN D000 -> D100 ] 单精度--------[ (d)TAN D000 -> D200 ] 双精度 根据运算结果输出标记     V57 V56    V55 V54     V53 V52    V51   V50         CY     BO   Z      >    =     <     Err                           8-88
ASIN 单精度/双精度 (16 进制)助记符号 ASIN FUN_No. 990 3DE 步数 7步运算域 OP1OP2 转换目标地址OP3可指定区域变址指定 寄存器地址 可 寄存器地址 可数据类型单精度/双精度单精度/双精度转换起始地址                                                                P V K T L X M S N R D             EPEVEKETELEXEESHEN                                 GXGMUEBFRC YFR 区域为闪存器区域,电源断电或复位后会恢复到原来的数值。 指定变址前・后指定时的变址加减值GYJLJS                                                                                    OP1单精度地址指定规则单精度 :4 字节边界双精度 :8 字节边界 指定了违反规则的地址时,在运算过程中会在自动修正后进行运算。双精度寄存器的偶数地址 寄存器的 4 的倍数的地址D000, D002, D004, D006, ----- D000, D004, D008, D00C, ------功能 ASIN 将弧度值作为 OP1 寄存器的浮动小数点正弦值输出到 OP2 的寄存器中。 --------[ ASIN D000 -> D100 ] 单精度--------[ (d)ASIN D000 -> D200 ]根据运算结果输出标记双精度EC EYM                                                                                                              OP2                                                                                                          OP3                       JL, JS, GS, GZ, GF 为系统区域,用户禁止使用。         ++IX         −−IX IX++       IX−−     OP1 +4     −4 +4     −4     OP2    +4      −4    +4      −4     OP3                 ++IX        −−IX IX++      IX−−     OP1 +8     −8 +8    −8     OP2    +8      −8    +8     −8    OP3        例GSGF      V57 V56       V55 V54       V53 V52      V51   V50         CY     BO   Z      >    =     <     Err       OFF                    8-89GZ                            
ACOS 单精度/双精度 (16 进制)助记符号 ACOS FUN_No. 991 3DF 步数 7步变址指定 数据类型 运算域 OP1 转换起始地址 寄存器地址 可 单精度/双精度 OP2 转换目标地址 寄存器地址 可 单精度/双精度OP3可指定区域P V K T L X M S N R D EPEVEKETELEXEMESHEN                                 GXGMUEBFR CY ECEY GY                                                                      JLJS                                                                                                            OP1FR 区域为闪存器区域,电源断电或复位后会恢复到原来的数值。 指定变址前・后指定时的变址加减值单精度地址指定规则单精度 :4 字节边界双精度 :8 字节边界 指定了违反规则的地址时,在运算过程中会在自动修正后进行运算。双精度GSGZGF                                                                                                                       OP2                                                                                                            OP3                           JL, JS, GS, GZ, GF 为系统区域,用户禁止使用。            ++IX          −−IX    IX++        IX−−     OP1+4  −4+4  −4     OP2 +4     −4 +4     −4     OP3                            ++IX         −−IX    IX++       IX−−    OP1+8  −8+8  −8     OP2 +8     −8 +8    −8     OP3               寄存器的偶数地址 寄存器的 4 的倍数的地址例D000, D002, D004, D006, ----- D000, D004, D008, D00C, ------功能 ACOS 将弧度值作为 OP1 寄存器的浮动小数点余弦值输出到 OP2 的寄存器中。 --------[ ACOS D000 -> D100 ] 单精度--------[ (d)ACOS D000 -> D200 ]根据运算结果输出标记双精度     V57 V56    V55 V54     V53 V52    V51   V50         CY     BO   Z      >    =     <     Err       OFF                    8-90
ATAN 单精度/双精度 (16 进制)助记符号 ATAN FUN_No. 992 3E0 步数 7步运算域 OP1OP2 转换目标地址OP3可指定区域P V K T L X M S N R DCY ECEY GY转换起始地址寄存器地址 可 寄存器地址 可单精度/双精度单精度/双精度变址指定 数据类型                                                                      JLJS                                                                                    OP1FR 区域为闪存器区域,电源断电或复位后会恢复到原来的数值。 指定变址前・后指定时的变址加减值单精度地址指定规则单精度 :4 字节边界双精度 :8 字节边界 指定了违反规则的地址时,在运算过程中会在自动修正后进行运算。--------[ (d)ATAN D000 -> D200 ]根据运算结果输出标记双精度双精度寄存器的偶数地址 寄存器的 4 的倍数的地址例D000, D002, D004, D006, ----- D000, D004, D008, D00C, ------功能 ATAN 将弧度值作为 OP1 寄存器的浮动小数点正切值输出到 OP2 的寄存器中。 --------[ ATAN D000 -> D100 ] 单精度EPEVEKETELEXEMESHEN                                 GXGMUEBFRGSGF                                                                                                              OP2                                                                                                        OP3                       JL, JS, GS, GZ, GF 为系统区域,用户禁止使用。            ++IX          −−IX    IX++        IX−−     OP1+4  −4+4  −4     OP2 +4     −4 +4     −4     OP3                            ++IX         −−IX    IX++       IX−−    OP1+8  −8+8  −8     OP2 +8     −8 +8    −8     OP3                    V57 V56    V55 V54     V53 V52    V51   V50         CY     BO   Z      >    =     <     Err       OFF                    8-91GZ                           
平方根 单精度/双精度 (16 进制)助记符号 SQR FUN_No. 993 3E1 步数 7步运算域 OP1OP2 转换目标地址OP3可指定区域P V K T L X M S N R DCY ECEY GY转换起始地址寄存器地址 可 寄存器地址 可单精度/双精度单精度/双精度变址指定 数据类型                                                                      JLJS                                                                                                               OP1FR 区域为闪存器区域,电源断电或复位后会恢复到原来的数值。 指定变址前・后指定时的变址加减值单精度地址指定规则单精度 :4 字节边界双精度 :8 字节边界 指定了违反规则的地址时,在运算过程中会在自动修正后进行运算。功能 平方根 将 OP1 寄存器的平方根输出到 OP2 中。--------[ SQR D000 -> D100 ] 单精度--------[ (d)SQR D000 -> D200 ]根据运算结果输出标记双精度双精度寄存器的偶数地址 寄存器的 4 的倍数的地址例D000, D002, D004, D006, ----- D000, D004, D008, D00C, ------EPEVEKETELEXEMESHEN                                 GXGMUEBFRGSGZGF                                                                                                              OP2                                                                                                         OP3                      JL, JS, GS, GZ, GF 为系统区域,用户禁止使用。            ++IX          −−IX    IX++        IX−−     OP1+4  −4+4  −4     OP2 +4     −4 +4     −4     OP3                            ++IX         −−IX    IX++       IX−−    OP1+8  −8+8  −8     OP2 +8     −8 +8    −8     OP3                    V57 V56    V55 V54     V53 V52    V51   V50         CY     BO   Z      >    =     <     Err       OFF                    8-92
乘方 单精度/双精度 (16 进制)助记符号 POW FUN_No. 994 3E2 步数 9步运算域 OP1OP2 幂指数可指定区域寄存器地址 可 寄存器地址 可 寄存器地址 可P V K T L X M S N R DCY ECEY GY幂底数 OP3 运算结果单精度/双精度单精度/双精度单精度/双精度变址指定 数据类型                                                                      JLJS                                                                                                      OP1FR 区域为闪存器区域,电源断电或复位后会恢复到原来的数值。 指定变址前・后指定时的变址加减值单精度地址指定规则单精度 :4 字节边界双精度 :8 字节边界 指定了违反规则的地址时,在运算过程中会在自动修正后进行运算。--------[ POW D000 D102 -> D004 --------[ (d)POW D000 D004 -> D008根据运算结果输出标记]] 单精度 双精度双精度寄存器的偶数地址 寄存器的 4 的倍数的地址例D000, D002, D004, D006, ----- D000, D004, D008, D00C, ------功能 乘方 用OP2 寄存器求出 OP1 寄存器的乘方,输出到 OP3 寄存器中。EPEVEKETELEXEMESHEN                                 GXGMUEBFRGSGZGF                                                                                                                      OP2                                                                                                               OP3                                                              JL, JS, GS, GZ, GF 为系统区域,用户禁止使用。         ++IX         −−IX IX++       IX−−     OP1 +4     −4 +4     −4     OP2    +4      −4    +4      −4     OP3   +4   −4   +4   −4           ++IX        −−IX IX++      IX−−     OP1 +8     −8 +8    −8     OP2    +8      −8    +8     −8    OP3   +8   −8   +8   −8        V57 V56       V55 V54       V53 V52      V51   V50         CY     BO   Z      >    =     <     Err          OFF                 8-93
指数 单精度/双精度 (16 进制)助记符号 EXP FUN_No. 995 3E3 步数 7步运算域 OP1OP2 转换目标地址OP3可指定区域P V K T L X M S N R DCY ECEY GY转换起始地址寄存器地址 可 寄存器地址 可单精度/双精度单精度/双精度变址指定 数据类型                                                                      JLJS                                                                                                               OP1FR 区域为闪存器区域,电源断电或复位后会恢复到原来的数值。 指定变址前・后指定时的变址加减值单精度地址指定规则单精度 :4 字节边界双精度 :8 字节边界 指定了违反规则的地址时,在运算过程中会在自动修正后进行运算。功能 指数 将OP1 寄存器的指数(低 e)输出到 OP2 寄存器中。 --------[ EXP D000 -> D100 ] 单精度--------[ (d)EXP D000 -> D200 ]根据运算结果输出标记双精度双精度寄存器的偶数地址 寄存器的 4 的倍数的地址例D000, D002, D004, D006, ----- D000, D004, D008, D00C, ------EPEVEKETELEXEMESHEN                                 GXGMUEBFRGSGZGF                                                                                                              OP2                                                                                                       OP3                        JL, JS, GS, GZ, GF 为系统区域,用户禁止使用。            ++IX          −−IX    IX++        IX−−     OP1+4  −4+4  −4     OP2 +4     −4 +4     −4     OP3                            ++IX         −−IX    IX++       IX−−    OP1+8  −8+8  −8     OP2 +8     −8 +8    −8     OP3                    V57 V56    V55 V54     V53 V52    V51   V50         CY     BO   Z      >    =     <     Err             OFF              8-94
对数(e) 单精度/双精度 (16 进制)助记符号 LOGE FUN_No. 996 3E4 步数 7步运算域 OP1OP2 转换目标地址OP3可指定区域P V K T L X M S N R DCY ECEY GY转换起始地址寄存器地址 可 寄存器地址 可单精度/双精度单精度/双精度变址指定 数据类型                                                                      JLJS                                                                                                               OP1FR 区域为闪存器区域,电源断电或复位后会恢复到原来的数值。 指定变址前・后指定时的变址加减值单精度地址指定规则单精度 :4 字节边界双精度 :8 字节边界 指定了违反规则的地址时,在运算过程中会在自动修正后进行运算。功能 对数(e) 将 OP1 寄存器的对数(低 e)输出到 OP2 寄存器中 --------[ LOGE D000 -> D100 ] 单精度--------[ (d)LOGE D000 -> D200 ]根据运算结果输出标记双精度双精度寄存器的偶数地址 寄存器的 4 的倍数的地址例D000, D002, D004, D006, ----- D000, D004, D008, D00C, ------EPEVEKETELEXEMESHEN                                 GXGMUEBFRGSGZGF                                                                                                              OP2                                                                                                         OP3                      JL, JS, GS, GZ, GF 为系统区域,用户禁止使用。            ++IX          −−IX    IX++        IX−−     OP1+4  −4+4  −4     OP2 +4     −4 +4     −4     OP3                            ++IX         −−IX    IX++       IX−−    OP1+8  −8+8  −8     OP2 +8     −8 +8    −8     OP3                    V57 V56    V55 V54     V53 V52    V51   V50         CY     BO   Z      >    =     <     Err                           8-95
对数(10) 单精度/双精度 (16 进制)助记符号 LOG10 FUN_No. 996 3E4 步数 7步运算域 OP1OP2 转换目标地址OP3可指定区域P V K T L X M S N R DCY ECEY GY转换起始地址寄存器地址 可 寄存器地址 可单精度/双精度单精度/双精度变址指定 数据类型                                                                      JLJS                                                                                    OP1FR 区域为闪存器区域,电源断电或复位后会恢复到原来的数值。 指定变址前・后指定时的变址加减值单精度地址指定规则单精度 :4 字节边界双精度 :8 字节边界 指定了违反规则的地址时,在运算过程中会在自动修正后进行运算。--------[ (d)LOG10 D000 -> D200 ]根据运算结果输出标记双精度双精度                                                              OP2寄存器的偶数地址 寄存器的 4 的倍数的地址例D000, D002, D004, D006, ----- D000, D004, D008, D00C, ------功能 对数(10) 将 OP1 寄存器的对数(低 10)输出到 OP2 寄存器中 --------[ LOG10 D000 -> D100 ] 单精度EPEVEKETELEXEMESHEN                                 GXGMUEBFRGSGF                                                                                                                                                         OP3                      JL, JS, GS, GZ, GF 为系统区域,用户禁止使用。            ++IX          −−IX    IX++        IX−−     OP1+4  −4+4  −4     OP2 +4     −4 +4     −4     OP3                            ++IX         −−IX    IX++       IX−−    OP1+8  −8+8  −8     OP2 +8     −8 +8    −8     OP3                    V57 V56    V55 V54     V53 V52    V51   V50         CY     BO   Z      >    =     <     Err                           8-96GZ                           
比较 单精度/双精度 助记符号 各种 FUN_No. 步数 7、9 步运算域 OP1OP2 比较目标地址OP3可指定区域P V K T L X M S N R DCY ECEY GY比较的起始地址寄存器地址 可 寄存器地址或常数 可单精度/双精度单精度/双精度变址指定 数据类型                                                                      JLJS                                                                                                       OP1FR 区域为闪存器区域,电源断电或复位后会恢复到原来的数值。 指定变址前・后指定时的变址加减值单精度地址指定规则单精度 :4 字节边界双精度 :8 字节边界 指定了违反规则的地址时,在运算过程中会在自动修正后进行运算。EPEVEKETELEXEMESHEN                                 GXGMUEBFR                                                 OP2功能 比较(接点型)-[ F=N-[ (d)F>N将 OP1 和 OP2 作为浮动小数点进行比较满足条件时 ON D000 = D100 ]-- 单精度D000 > D200 ]-- 双精度种类 (寄存器之间的比较)常数比较 F=NF=DF<>NF<>DF>NF>DF>=NF>=DF<NF<DF=<NF=<D根据使用场所,有 STR、AND、OR 型。双精度GSGZGF                                                                                                                                                                               OP3                                                             JL, JS, GS, GZ, GF 为系统区域,用户禁止使用。        ++IX       −−IX IX++      IX−−     OP1 +4     −4 +4     −4     OP2    +4      −4    +4      −4     OP3                ++IX      −−IX IX++     IX−−     OP1 +8     −8 +8    −8     OP2    +8      −8    +8     −8    OP3        寄存器的偶数地址 寄存器的 4 的倍数的地址例D000, D002, D004, D006, ----- D000, D004, D008, D00C, ------8-97
8.4.2 8.4.2.1(1)PC10G、Toyopuc-Nano专用应用命令 定时器命令(1ms,1s)在以往的 10ms、100ms 单位的定时器上追加了 1ms、1s 单位的定时器命令。与 1ms单位定时器的不同点(TMRHH,TMRSHH)受 1ms 单位定时器的限制,程序在同一扫描内要反复执行多次。 因此,在循环处理内设置定时器命令则在超时的情况下也可在循环外进行程序处理。  (2)|---------------[Label L0 ]|--||---------[TMRHH T0 5ms] T0|---|/|-------[JMP L0 ]1s单位定时器(TMRL,TMRSL) 可进行长时间定时。Max 65535 秒 定时器误差:0.1 秒18 小时 12 分 15 秒                           分类功能助记符号步数符号例子演算内容处理时间μs                                          直接指定 1ms 计时器TMRHH4T000TMRHH K=65.535设定值为 65.535 秒的 1ms 计时器。                        计时器间接指定 1ms 计时器TMRHH4T001TMRHH S=D0100将 D0100 的内容作为设定 值的 1ms 定时器。                      直接指定 1000ms 定时器TMRL4T002TMRL K=65535设定值为 65535 秒的 1000 ms 定时器。                         间接指定 1000 ms 定时器TMRL4T003TMRL S=D0100将 D0101 的内容作为设定 值的 1000ms 定时器。                          直接指定 1ms 累计定时器TMRSHH4T004 TTMRSH K=12.345 R              累计定时器设定值为 12.345 秒的 1ms 累计计时器。           间接指定 1ms 累计定时器TMRSHH4T005 TTMRSH S=D0102 R将 D0102 的内容作为设定 值的 1ms 累计定时器                       直接指定 1000ms 累计定时器TMRSL4T006 TTMRS K=12345 R设定值为 12345 秒的 1000 ms 累计计时器。                         间接指定 1000ms 累计定时器TMRSL4T007 TTMRS S=D0103 R将 D0103 的内容作为设定 值的 1000ms 累计定时器。        8-98
8.4.2.2 翻转线圈    追加在满足条件时进行反向输出的线圈。    通常与边缘命令成对使用。AB                A: B:          翻转 翻转 翻转可在切换可编程显示器等的模式时使用。 8.4.2.3 带符号运算可指定 BIN 型四则运算・带符号的比较运算。    (1) 字节型(8bit)将最高位的 bit7 作为符号处理。−128~127(80h~7Fh)(2) 字符型(16bit)将最高位的 bit15 作为符号处理。−32768~32767(8000h~7FFFh)(3) 双字符型(32bit)将最高位的 bit31 作为符号处理。−2147483648~214783647(80000000h~7FFFFFFFh)在加法运算和减法运算中,带符号与否运算结果均相同。 但在处理上溢、下溢时会有变化,应予以注意。不带符号(字符)FFFFh + 0001h = 0000h 上溢带符号(字符)FFFFh + 0001h = 0000h 不上溢 (−1)根据 Pcwin2,在回路监控中进行带符号运算时,监控结果也带符号显示。8-99此时由于是字节型命令因此,将最 高位的 bit7 作为符号处理。复选“有(s)”则可进行带符号运算。
8.4.2.4PID命令|--------[PID D0000 D0010 D0020 ]格式 OP1:各种参数的起始地址单精度浮动小数点 OP2:偏差输入保存地址单精度浮动小数点 OP3:PID 输出保存地址单精度浮动小数点参数表(OP1)     地址 内容     备注     OP1+0    mode:工作模式      0:位置算法 1:速度算法     OP1+2Kp:比例系数       OP1+4 Ki:积分系数          OP1+6    Kd:微分系数           OP1+8work0:偏差积分值(Σei)  仅限 mode=0 时     OP1+10 work1:上次偏差(e1)     在运算过程中保存数据用     OP1+12    work2:上次偏差的差(e1-e2)      仅限 mode=1 時     OP1+14   work3:预约      Ki=Kp*(Ts/Ti)Kd=Kp*(Td/Ts)Ti=积分时间 Ts=取样周期(定期分割间隔) Td=微分时间位置算法=0 : Mp = Kp*e0 + Ki*Σei + Kd*(e0-e1)速度算法=1 : Mp += Kp(e0-e1) + Ki*e0 + Kd*((e0-e1)-(e1-e2))e0:本次偏差e1:上次偏差 e2:大上次偏差Mp:PID 输出(操作量)时执行 PID 基本算式的命令,在进行 PID 控制时使用。 没有自动调谐等功能。  本命令只能在定期分割过程中执行。  定期分割的间隔则按原样成为取样周期。8-100
8.4.2.5 浮动小数点命令  选择浮动小数点对应的应用命令。选择单精度・双精度。     8.4.2.5.1 浮动小数点命令一览表助记符号 内容 单精度 双精度                             浮动小数点运算的注意要点寄存器的使用方法单精度:从寄存器的偶数地址例:指定 D0000 D000 和 D001禁止从奇数地址开始指定双精度:从寄存器的 4 符字境界 例:D000 指定D000,D001,D002,D003 只能指定最低位 0、4、8、C   FD+ 加法运算(浮动小数点)  FD− 减法运算(浮动小数点)  FD* 乘法运算(浮动小数点)  FD/ 除法运算(浮动小数点)  FD+FH 常数加法运算(浮动小数点)  FD−FH 常数减法运算(浮动小数点)  FD*FH 常数乘法运算(浮动小数点)  FD/FH 常数除法运算(浮动小数点)  FDSTI1 ΣX(浮动小数点)  FDMAX 最大值检索(浮动小数点)  FDMIN 最小值检索(浮动小数点)  FDAVE 平均(浮动小数点)  FDMOVR 10 进制常数传送(浮动小数点)  FFLT BIN16->浮动小数点  FDFLT BIN32->浮动小数点  FINT 浮动小数点->BIN16  FDINT 浮动小数点->BIN32  FVAL 文字列->浮动小数点  FSTR 文字列->浮动小数点  F=FD 比较 AND=10 进制(浮动小数点)  F=FN 比较 AND=变量(浮动小数点)  F<>FD 比较 AND<>10 进制(浮动小数点)  F<>FN 比较 AND<>变量(浮动小数点)  F>FD 比较 AND>10 进制(浮动小数点)  F>FN 比较 AND>变量(浮动小数点)  F>=FD 比较 AND>=10 进制(浮动小数点)  F>=FN 比较 AND>=变量(浮动小数点)  F<FD 比较 AND<10 进制(浮动小数点)  F<FN 比较 AND<变量(浮动小数点)  F<=FD 比较 AND<=10 进制(浮动小数点)  F<=FN 比较 AND<=变量(浮动小数点)  F=FD 比较 STR=10 进制(浮动小数点)  F=FN 比较 STR=变量(浮动小数点)                                                                                   数据格式根据 IEEE754 规定进行 单精度:32bit双精度:64bit                                                                                  8-101
              助记符号 内容F=FD 比较 OR=10 进制(浮动小数点)F=FN 比较 OR=变量(浮动小数点)F<>FD 比较 STR<>10 进制(浮动小数点)F<>FN 比较 STR<>变量(浮动小数点)F<>FD 比较 OR<>10 进制(浮动小数点)F<>FN 比较 OR<>变量(浮动小数点)F>FD 比较 STR>10 进制(浮动小数点)F>FN 比较 STR>变量(浮动小数点)F>FD 比较 OR>10 进制(浮动小数点)F>FN 比较 OR>变量(浮动小数点)F>=FD 比较 STR>=10 进制(浮动小数点)F>=FN 比较 STR>=变量(浮动小数点)F>=FD 比较 OR>=10 进制(浮动小数点)F>=FN 比较 OR>=变量(浮动小数点)F<FD 比较 STR<10 进制(浮动小数点)F<FN 比较 STR<变量(浮动小数点)F<FD 比较 OR<10 进制(浮动小数点)F<FN 比较 OR<变量(浮动小数点)F<=FD 比较 STR<=10 进制(浮动小数点)F<=FN 比较 STR<=变量(浮动小数点)F<=FD 比较 OR<=10 进制(浮动小数点)F<=FN 比较 OR<=变量(浮动小数点)DEG 弧度->角度  RAD 角度->弧度  SIN 正弦 单精度 双精度                                                                                                                                                                             COS 余弦(COS)  TAN 正切(TAN)  ASIN 反正弦(ASIN)  ACOS 反余弦(ACOS)  ATAN 反正切(ATAN)  SQR 平方根(SQRT)  POW 乘方(POW)  EXP 指数运算(EXP)  LOGE 对数运算(LOGe)  LOG10 对数运算(LOG10)                                                                    8-102
8.4.2.5.2 浮动小数点数命令的内部表示方式(1) 小数点数的内部表示方式参见IEEE标准。(a)float 型31 30 23 22指数部分(8 位) 符号部分(1 位)double 型和 long double 型 63 62 52 51指数部分(11 位) 符号部分(1 位)0尾数部分(23 位)                           (b)0                         浮动小数点数的符号。为 0 时为正,为 1 时为负。2. 指数部分用 2 次方表示浮动小数点的指数。3. 尾数部分  对应浮动小数点有效数字的数据。(3) 表示值的种类 浮动小数点除了用通常的实数值表示之外还可用无限大等数值表示。浮动小数点的表示值种类如下所示。1. 标准化数指数部分为 0 或所有位数不为 1 时。以通常的实数值来表示。2. 非标准化数指数部分为 0,尾数部分不为 0 时。以绝对值较小的实数值来表示。3. 零指数部分及尾数部分为 0 时。以值 0.0 来表示。4. 无穷大指数部分所有位数为 1,尾数部分为 0 时。以无穷大来表示。5. 非数字指数部分所有位数为 1,尾数部分不为 0 时。作为与数值不对应的运算结果,得到“0.0/0.0”、“∞/∞”、 “∞−∞”等结果。8-103尾数部分(52 位) (2) 内部表示方式的各组成要素意义如下。 1. 符号部分
8.4.2.5.3 浮动小数点数命令的数据格式详细内容 (a) float 型(1) 标准化数用符号部分为 0(正)或 1(负)表示数值符号。指数部分取 1~254(28−2)范围内的数值。实际指数是从该值延减去 127 后的值,其范围为−126~127。 尾数部分取 0~223−1 范围内的数值。将 223 位假定为 1,其后有小数点的部分可解释为实际的尾数。 标准化数的表示值为(−1)<符号部分>×2<指数部分>−127×(1+<尾数部分>×2−23)。例:31 30 23 22 0符号:+ 指数:10000010(2)−127= 3 尾数:1.011(2)= 1.375值 :1.375×23= 11(2)表示 2 进制数。     150       10000010     01100000000000000000000 (2) 非标准化数用符号部分为 0(正)或 1(负)表示数值符号。指数部分为 0,实际的指数则为−126。在 1~223−1 范围内,将实际的尾数 223 的位假定为 0,可将其后的小数点部分解释为尾数部分。 非标准化数的表示值为(−1)<符号部分>×2−126×(<尾数部分>×2−23)。例:31 30 23 22符号:+指数:−126 尾数:0.011(2)= 0.375 值 :0.375×2−1260(2)表示 2 进制数。     150       00000000     01100000000000000000000 (3) 零用符号部分为 0(正)或 1(负)分别表示+0.0、−0.0。 指数部分、尾数部分均为 0。+0.0、−0.0 作为数值均用 0.0。(4) 无穷大用符号部分为 0(正)或 1(负)分别表示+∞、−∞。 指数不 f 分为 255(28−1)。尾数部分为 0。(5) 非数字指数不 f 分为 255(28−1)。 尾数部分为 0 以外的数值。8-104
(b) double 型和 long double 型 (1) 标准化数用符号部分为 0(正)或 1(负)表示数值符号。指数部分取 1~2046(211−2)范围内的数值。实际指数是从该值减去 1023 后的值,其范围为−1022~1023。尾数部分取 0~252−1 范围内的数值。将 252 位假定为 1,其后有小数点的部分可解释为实际的尾数。 标准化数的表示值为(−1)<符号部分>×2<指数部分>−1023×(1+<尾数部分>×2−52)。例:63 62 52 51符号:+ 指数:1111111111(2)-1023= 0 尾数:1.0111(2)= 1.4375值 :1.4375×20= 1.43750     0      01111111111     0111000000000000000000000000000000000000000000000000 (2) 非标准化数用符号部分为 0(正)或 1(负)表示数值符号。指数部分为 0,实际的尾数则为−1022。在 1~223−1 范围内,将实际的尾数 223 的位假定为 0,可将其后的小数点部分解释为尾数部分。 非标准化数的表示值为(−1)<符号部分>×2−1022×(<尾数部分>×2−52)。例:63 62 52 51符号:- 指数:−1022 尾数:0.0111(2)0.4375 值 :0.4375×2−10220(2)表示 2 进制数。     1        00000000000     1110000000000000000000000000000000000000000000000000  (3) 零用符号部分为 0(正)或 1(负)分别表示+0.0、−0.0。 指数部分、尾数部分均为 0。+0.0、−0.0 作为数值均用 0.0。(4) 无穷大用符号部分为 0(正)或 1(负)分别表示+∞、−∞。 指数部分为 2047(211−1)。尾数部分为 0。(5) 非数字指数部分为 2047(211−1)。 尾数部分为 0 以外的数值。8-105(2)表示 2 进制数。
8.4.2.5.4 浮动小数点数命令的四则运算规则(1) 结果数值的舍入方法虽然浮动小数点的四则运算结果正确,但内部表示的尾数超出有效数字时,按以下规则进行舍入。 [1] 在近似该值的两个浮动小数点内部表示中向更接近的舍入结果数值。[2] 该值处于近似的两个浮动小数点正中央时,向尾数最末位为 0 的方向舍入结果数值。(2) 上溢、下溢、无效运算时的处理      对实际中发生的上溢、下溢、无效运算进行如下处理。[1] 上溢时根据结果符号为正或负无穷大。[2] 下溢时根据结果符号为正或负零。[3] 在进行不同号无穷大的加法运算、同号无穷大的减法运算、零和无穷大的乘法运算、用零除零或 用无穷大除无穷大时会出现无效运算。此时,结果为非数字。(3) 与特殊数值(零、无穷大、非数字)运算相关的注意事项[1] 正的零和负的零之和为正的零。[2] 同号的零的差为正的零。[3] 运算一方或双方含有非数字时的运算结果始终为非数字。 [4] 在比较运算中将正的零和负的零作为相同的数字处理。8.4.2.5.5 浮动小数点命令的数据寄存器上的排列单精度D0000 D0001必须从偶数地址开始双精度D0000 D0001 D0002 D0003必须从 4 的倍数的地址开始      15      14        13       12   11        10       9   8    7      6        5      4     3     2   1      0        31    30        29      28   27        26      25   24     23    22    21   20   19   18  17   16         15 14       13    12 11       10    9    8    7 6   5    4    3       2 1     0    31   30      29      28   27      26      25     24     23   22   21    20     19       18    17     16    47     46   45    44  43   42    41   40   39 38  37   36   35    34   33   32        63    62        61      60   59        58      57      56     55   54     53      52    51    50   49   48   8-106
 8.4.3 1.分层通信用应用命令 概要记载了由 TOYOPUC-Nano 越过网络分层进行事件通信用的功能。PLCFL-netPLCPLCPLCFL-net从 TOYOPUC-Nano 经过分层进行消息 通信。FL-net2.通信的方法分层通信用的消息(中继命令)可在 TOYOPUC-Nano 的梯形程序中,通过执行专用的应用命令来发送、 接收。专用应用命令将不等到响应就结束,并返回顺序运算,所以命令结束时,响应接收并不同时。响应接收以 相关链接的可使用链接标志来确认。TOYOPUC-Nano8-108
3. 应用命令的规格LCSET 链接命令发布 (FUN 383) (1) 可用设备           X Y       M K      V T    C    L    P       D    R N       S    B   常数   OP1                                                                             OP2                   OP3                                                                             PC3/PC2PC3 扩展 PC10 扩展EXEYEMEKEVETECELEPU HENESGXGYGMGSGZGFJLJSEBFR                              OP1                                                                     OP2                                                                     OP3                                                                                      GS,GZ,GF,JL,JS 是系统区域,所以禁止使用。FR 区域是闪存寄存器,所以已写入的数据要通过电源 OFF 或重置来恢复(2) 步骤数 5(3) 符号LCSET(4) 功能从 OP2 的寄存器中,向链接模块发出用 OP1 表示的容量区域中所设定的消息。另外,接收到响应时, 将响应保存在 OP3 的寄存器中。应用命令结束后,响应数据仍未进行设置。响应数据的设置完成后,即可设置链接命令使用许可标志。 本命令以链接模块分配的程序编号来执行。OP1 格式(命令大小) FCB0  LCSET 100Ah D0100 U0000                                                                            链接 No. (5) 标志数据容量(最大 550 字节)     CY BO     Z >    = <    ER                        ↑错误标志(ER):保存区域超出数据存储器区域时为 ON。 (6) 程序例M0 为 ON,发给链接 No.3 中分配的 FL-net 的链接命令可使用时,发布以 R0200 至 R0204 的 10 字 节进行定义的消息命令。将响应保存在以 D0800 为起始的区域内。M000 P000  V90OP1=300Ah OP2=R0200 OP3=D0800            LCSET 300Ah R0200 D0800   8-109
4. 消息格式以 TOYOPUC 以太网的计算机链接方式中继命令格式为准。 但是,应用命令中的命令数据设定中不需要报头部分(从起始开始的 6 字节)。 表示在 D0100 中设定命令,并将响应保存在 U0000 中时的例子。• 命令D0100 D0101 D0102 D0103 D0104D010n参考)以太网中继命令不需要• 响应U0000 U0001 U0002 U0003 U0004U000n链接模块的局号与实际发出命令的 CPU 模块相对的命令 局号上位 局号下位 LL 05 命令代码 LH 数据 数据 数据 数据   00 数据       将中继命令第 7 字节以下的 部分设置在寄存器中。         0 0       0 0      L L      L H      C M D                          0 5      L L      L H         数据      0 0        <正常响应>    局号上位局号下位U0000 U0001 U0002 U0003U0000U0001U0002U0003 U0004U0005 U0006<异常响应(第 2 分层时)><异常响应(第 1 分层时)>  局号上位局号下位    LL06LL15      命令代码LHNAK 代码LH      数据数据XX    数据数据     局号上位 局号下位 LL 06 60 LH 局号下位 链接 No. 15 局号上位 LH LL XX NAK 代码    00数据     注)响应数据长度最大为 512 字节(命令报头部分除外)      8-110链路 No. 局号下位 局号上位命令代码
 5. 使用例(1) 数据写入PLCTOYOPUC-Nano 程序 No.=3局号=100 FL-net程序 No.=1 局号=100PLCFL-netPLC局号=100FL-net程序 No.=1在上述网络中,当 P1-M500 为 ON 时,发出在 TOYOPUC-Nano 的 P2-D0800 中写入 1234h 的命令。命令设置在 P1-D0100 中。响应用 U0400 来接收。 <顺控程序>M500 P000 V98V98 P001 M510程序OP1=101Ch LCSET 101Ch D0100L U0400L OP2=D0100L响应接收处理8-111M510 SM510 ROP3=U0400LM510=命令执行中
<命令数据>    中继命令代码(2)(1)  64.00.05.16.00.60.13.64.00.05.0E.00.60.32.64.00.05.06.00.95.02.00.18.34.12.00.00.00                局号 P1L3 (2) 的字节数(1) 的字节数 P3L2 局号 局号上位 下位(1)数据扩展文字写入在最终数据中追加 00            00 64 16 05 60 00 64 13 05 00 00 0E 32 60 00 64 06 05 95 00 00 02 34 18 00 12 00 00D0100 D0101 D0102 D0103 D0104D0105 D0106 D0107 D0108 D0109 D010A D010B D010C D010D               <响应数据>  (2) 64.00.06.11.00.60.13.64.00.06.09.00.60.32.64.00.06.01.00.95.XX.XX.XX              ACK(06) (1) 的字节数ACK(06) (2) 的字节数 ACK(06) 数据扩展文字写入 上位 下位U0400 U0401 U0402 U0403 U0404U0405 U0406 U0407 U0408 U0409 U040A U040B         00 64 11 06 60 00 64 13 06 00 00 09 32 60 00 64 01 06 95 00 XX XX  XX             8-112
 PLC(2) 数据读出程序 No.=3PLCFL-netTOYOPUC-Nano局号=100FL-net局号=100 FL-net程序 No.=1 局号=100程序 No.=1<顺控程序>M120 P010 V98V98 P011 M180程序LCSET 101Dh响应接收处理EB00000L EB00800LOP1=101Dh OP2=EB00000L OP3=EB00800LPLC在上述网络中,当 P1-M120 为 ON 时,发布将 TOYOPUC-Nano 的 FR01000 至 FR10FF(512 字节) 读出的命令。命令设置在 EB00000 中。响应用 EB00800 来接收。8-113M180S M180=命令执行中M180 R
<命令数据>    中继命令代码(2)(1)  64.00.05.17.00.60.13.64.00.05.0F.00.60.32.64.00.05.07.00.C2.00.20.40.00.00.02.00.00.00                局号 P1L3 (2) 的字节数EB00000 EB00001 EB00002 EB00003 EB00004EB00005 EB00006 EB00007 EB00008 EB00009 EB0000A EB0000B EB0000C EB0000D EB0000E(1) 的字节数 P3L2 局号 局号上位 下位数据扩展文字写入在最终数据中追加 00            00 64 17 05 60 00 64 13 05 00 00 0F 32 60 00 64 07 05 C2 00 20 00 00 40 02 00 00 00  00                <响应数据>响应数据为 FR00000=0000、FR00001=0001、FR00002=0002····时(1)  (2) 64.00.06.11.02.60.13.64.00.06.09.02.60.32.64.00.06.01.02.C2.00.00.01.00.02.00.03.00····              FD.00.FE.00.FF.00.XX.XX.XXACK(06) PC10 数据字节读出  ACK(06) (1) 的字节数EB00800 EB00801 EB00802 EB00803 EB00804EB00805EB00806EB00807EB00808EB00809EB0080AEB0080B EB0080CEB00908 EB00909 EB0090A EB0090BACK(06) (2) 的字节数 上位下位       00 64 11 06 60 02 64 13 06 00 02 09 32 60 00 64 01 06 C2 02 00 00 00 01 00 02    00 FE 00 FF XX XX  XX                      8-114
8.5 设备情报存储器 设备信息存储器是与顺序程序、参数、数据不同的,是单独存放顺序线路注释的存储器。设备信息存储器的容量为 4MB。在只有地址注释的时候,通常能够存储 10000 件以上的注释。能够容纳 的注释数,随着注释内容的变化而变化。通过 PCwin2 将注释等存入设备信息存储器。读出存在设备信息存储器中的信息,PCwin2 可以显示附带注释的线路图和循环线路图等。 对设备情报存储器的存入和读出,可以通过与 CPU 工作模式无关的 PCwin2 来进行。不能通过顺序程序变更存在设备信息存储器中的信息,也不能将数据存入设备信息存储器。也不能通过顺 序程序参考存入的信息。 Carry Carry out Door out under open position position positionRestartStart外部设备(PCwin2)Unclamp PaletteNC start position       positionreturn position  Start Start Continuous Return Continuous Stand Intensiv position off -by erre Cycle off        Start                         8-115设备信息存储器4MB命令等Start position用户存储器顺序程序 参数 数据   显示以设备信息存储器中保存的信息为基础的,带有注释的回路图等。Toyopuc-Nano      
8.6 8.6.18.6.2备份功能 存储器的备份功能用户程序(顺控程序和参数)、数据存储器、设备信息存储器中的内容(注释等)在即使停电也能保留其 内容的非易失性存储器中做了备份,所以不会发生数据消失的情况。内置时钟的后备支持功能内置时钟的时刻信息可通过电容器来做后备支持。保留期限为 10 天以上,因此,即使是长假连休等,保留时间上也毫无问题。万一时刻信息消失时,会检出“错误代码 AF:时刻未设定”的警报,因此,请在 PCwin2 中进行时刻设定。 进行时刻设定后,警报就会消失。8-116
8.6.3 8.6.3.1闪存寄存器与PCwin2 的通信设定可用参数指定来限制容量。可用这种方法来减少数据备份等中的不必要的处理(未使用区域的备份),实 现备份的高速化。  8.6.3.2闪存器闪存存储器中保存的数据在挥发性 RAM 上已展开的状态下,使用闪存器。闪存存储器挥发性 RAM                FR 寄存器                                                  4Mbyte              在初始化时 传送只传送设定的容量。可随时存取顺控程序|--||-----[MOV              DM 8-117FR0 -> D0]  注意: 虽然可随时在 FR 寄存器上进行存取,但在向 FR 寄存器中写入时电源中断或进行复位操作,则写 入的内容会被原来闪存存储器上的数据替换。因此,通常将其作为只读专用寄存器使用。
8.6.3.3 闪存器与其它寄存器的不同点FR 闪存器与其它寄存器的规格不同。请在充分了解 FR 寄存器规格的基础上使用。 特征 1: 闪存器不在删除其内容后就无法写入。因此,对同一地址而言,只需删除 1 次后便可写入。(在删除状态下数据变为“FFFFh”。)特征 2: 闪存器的删除只能以 64kbyte 为单位进行。因此,只能在有限的几个字节范围内进行删除。特征 3: FR 寄存器保存在非易失性存储器中,因此,即使停电时数据也会被保留下来。 特征 4: 写入、删除需要一定的处理时间。删除 1 块(64kbyte)约需 0.5 秒。写入 1 个字符约需 6μs。特征 5: 进行某一区域的删除、写入时不能进行其它区域的删除、写入操作。8.6.3.4 用途例 (1) 用途1保存工件的加工条件、各种设定条件等常数数据(不会因运算而发生变化的数据)用。(作为只读专用寄 存器使用)通过 PCwin2 等编制常数数据,再通过寄存器写入功能写入到 Toyopuc-Nano 中。通过 PCwin2 写入寄存器中时,不仅写入 FR 寄存器区域(挥发性 RAM)中,同时也会写入闪存存储器 中。(2) 用途2 作为运算工作区使用。根据(电源中断时数据也不会被删除的数据)或接通电源时通常从高位计算机写入    的最新数据中最新的数据进行控制。(电源中断时数据也不会被删除的数据)(3) 用途3 保存设备的记录信息用。使用专用命令将记录信息保存在闪存存储器中。 保存到一定量时通过高位计算机等读出记录信息。8-118
8.6.3.5 FR寄存器 地址一览表 用户标记地址(字符单位)ExNo. 用户标记地址(字符单位)40 FR100000 41 FR108000 42 FR110000 43 FR118000 44 FR120000 45 FR128000 46 FR130000 47 FR138000 48 FR140000 49 FR148000 4A FR150000 4B FR158000 4C FR160000 4D FR168000 4E FR170000 4F FR178000 50 FR180000 51 FR188000 52 FR190000 53 FR198000 54 FR1A0000 55 FR1A8000 56 FR1B0000 57 FR1B8000 58 FR1C0000 59 FR1C8000 5A FR1D0000 5B FR1D8000 5C FR1E0000 5D FR1E8000 5E FR1F0000 5F FR1F8000                                                      FR000000 FR008000 FR010000 FR018000 FR020000 FR028000 FR030000 FR038000 FR040000 FR048000 FR050000 FR058000 FR060000 FR068000 FR070000 FR078000 FR080000 FR088000 FR090000 FR098000 FR0A0000 FR0A8000 FR0B0000 FR0B8000 FR0C0000 FR0C8000 FR0D0000 FR0D8000 FR0E0000 FR0E8000 FR0F0000 FR0F8000~ FR007FFF ~ FR00FFFF ~ FR017FFF ~ FR01FFFF ~ FR027FFF ~ FR02FFFF ~ FR037FFF ~ FR03FFFF ~ FR047FFF ~ FR04FFFF ~ FR057FFF ~ FR05FFFF ~ FR067FFF ~ FR06FFFF ~ FR077FFF ~ FR07FFFF ~ FR087FFF ~ FR08FFFF ~ FR097FFF ~ FR09FFFF ~ FR0A7FFF ~ FR0AFFFF ~ FR0B7FFF ~ FR0BFFFF ~ FR0C7FFF ~ FR0CFFFF ~ FR0D7FFF ~ FR0DFFFF ~ FR0E7FFF ~ FR0EFFFF ~ FR0F7FFF ~ FR0FFFFFExNo. ~ FR107FFF 60 ~ FR10FFFF 61 ~ FR117FFF 62 ~ FR11FFFF 63 ~ FR127FFF 64 ~ FR12FFFF 65 ~ FR137FFF 66 ~ FR13FFFF 67 ~ FR147FFF 68 ~ FR14FFFF 69 ~ FR157FFF 6A ~ FR15FFFF 6B ~ FR167FFF 6C ~ FR16FFFF 6D ~ FR177FFF 6E ~ FR17FFFF 6F ~ FR187FFF 70 ~ FR18FFFF 71 ~ FR197FFF 72 ~ FR19FFFF 73 ~ FR1A7FFF 74 ~ FR1AFFFF 75 ~ FR1B7FFF 76 ~ FR1BFFFF 77 ~ FR1C7FFF 78 ~ FR1CFFFF 79 ~ FR1D7FFF 7A ~ FR1DFFFF 7B ~ FR1E7FFF 7C ~ FR1EFFFF 7D ~ FR1F7FFF 7E ~ FR1FFFFF 7F                                                                                                                                                                                                                                                                                                                                 ExNo.:闪存存储器上的删除单位上使用的 No.(64Kbyte 单位)字节地址的高位 2 位8-119
8.6.3.6 FR寄存器删除、写入专用命令(1) 闪存存储器删除---[FRCL 初始块 结束块 ]指定删除的块 No(上表中的 ExNo.)的初始和结束地址后删除。(2) 闪存写入专用命令---[FRWR 寄存器地址 FR 寄存器 写入字数] 通过与字型块传送(WBMOV)相同的格式进行指定。同时有两个命令时,由于闪存存储器的删除、写入是启动命令。因此,必须要等到删除、写入结束后,才 能执行下一命令。(可通过特殊继电器-V100 判别是否结束)实际的闪存寄存器的删除、写入通过系统侧自动进行。特殊继电器 EV100:可写入闪存存储器标记 EV101:写入闪存存储器失败标记EV100:删除结束写入结束FRWR 执行          FRCL 执行* 也可通过以太网指令向闪存存储器写入。详细内容参见“9.8.9.1. 以太网指令”。FRWRI  8-120
参考回路不断向 FR 寄存器中存入设备记录信息。 保存记录用:FR00000~FR0FFFFF 的1Mbyte 一次的记录信息:64 字节将准备在 D0000~D001F 中的记录信息写入 FR 寄存器中。 回路用于变址寄存器。参见“8.3 变址寄存器”。清除 FR 寄存器 写入记录       确认起动写入记录起动写入记录起动写入记录起动写入记录确认起动写入记录起动清除 FR 寄存器清除 FR 寄存器 1M(40~4F)确认 FR 寄存器起动初始 FR 寄存器地址退避 FR 寄存器地址起动写入记录设置记录数据写入 FR 寄存器地址写入记录确认起动写入记录更新 FR 寄存器地址退避 FR 寄存器地址 确认 FR 寄存器 起动    起动清除 FR 寄存器 起动清除 FR 寄存器 FR 寄存器可 WR   确认 FR 寄存器 起动           起动写入记录 FR 寄存器可 WR     8-121
8.7 RUN中写入      由于在写入过程中会暂时停止执行程序,因此请勿在设备工作或对象机械工作过程中进行 RUN 中的写入。 请在设备、机械处于循环停止状态下进行 RUN 中的写入。 由于电路的更改,设备有时会发生无法预测的动作,应充分注意安全。 注意: PC 侧的 CPU 工作模式与 PCwin2 侧的 CPU 工作模式不同时,无法进行 RUN 中的写入。步骤1) 点击 CPU 菜单“Write onto CPU[写入到 CPU]”中的“Program *[程序*]”(*1~3)。 显示信息后点击“Yes[是]”。2) 显示下一画面。  8-122
1) 为了防止发生危险,严禁在 PC 运行过程中进行写入。不得不进行 RUN 中的写入时,应再次阅读警告内容后再进行作业。密码请使用如下所示的 2 个半角文字。 密码:#W2) 写入后重新启动 PC 时,复选“Write program and reset/start PC[写入后重新启动]”,点击 “Continue[继续]”。未重新启动时继续点击“Continue[继续]”。3) 写入结束后,显示结束信息。点击“OK[确定]”。 8-123
 8.8 程序库功能Toyopuc-Nano 内置程序库功能。功能的详细内容参见“程序库功能的使用说明书”。8.9 SFC功能的详细内容参见“PCwin2 的使用说明书(t-a65)”。利用 SFC 编程时,SFC 的执行控制占用下述数据存储器区域。因此,应该注意不能作为用户存储器使用。另外,应该注意有时因工作模式不同,不能利用 SFC 编程。SFC 的执行控制也会占用特殊继电器的“V58~ V5D”、“EV800~EVBFF”,因此不对该区域进行访问。工作模式 程序步数 过渡数 动作数/ 动作标 辅助 处理数 步 识数 SFC 数1000 16 1000 256 100 *1 1000 16 1000 256 100 1000 16 1000 256 100 500 1000 16 1000 256 100 500 1000 16 1000 256 100 500 1000 16 1000 256 100 1000 1000 16 1000 256 100--- ---数据存储器占用区域No. PC10 P1P1-R580~R7FF P2-R580~R7FF P3-R580~R7FF P1-R580~R7FF P2-R580~R7FF P3-R580~R7FF P1-R580~R7FF - P3-R580~R7FF P1-R580~R7FF P2-R580~R7FFET000~ET5FF *2ET000~ET1FF ET200~ET3FF ET400~ET5FF ET000~ET3FF - ET400~ET5FF ET000~ET1FF ET200~ET5FFH000~H5FF *2H000~H1FF H200~H3FF H400~H5FF H000~H3FF - H400~H5FF H000~H1FF H200~H5FFEN000~EN5FF *2EN000~EN1FF EN200~EN3FF EN400~EN5FF EN000~EN3FF - EN400~EN5FF EN000~EN1FF EN200~EN5FF模式 P2 P3P1分离1 P2 P3 P1分离2 P2 P3 P1分离3 P2 P3 P1分离4 P2 P3 P1分离5 P2 P3 P1单一1 P2500 1000 500 1000 1000 100016 1000 256 100 16 1000 256 100 16 1000 256 100P1单一3 P2 P3 P1单一4 P2 P3 P1单一5 P2 P3 P1单一6 P2 P3PC2兼容P1可使用编号 -500 1000 16 1000256*1*2表示 PC3JG 分割模式的各程序 No.可使用级数的限制。- - -500 1000 16 500 1000 16 - - -- - - - - - -1000 256 100 P1-R580~R7FF ET000~ET1FF H000~H1FF EN000~EN1FF 1000 256 100 P2-R580~R7FF ET200~ET3FF H200~H3FF EN200~EN3FF- - - - - - -500 1000 16 1000 256 100P1-R580~R7FF-P3-R580~R7FF R580~R7FFR580~R7FF-R580~R7FFET000~ET1FF H000~H1FF- -ET400~ET5FF H400~H5FF ET000~ET1FF H000~H1FF不可不可ET000~ET3FF H000~H3FF- - 不可 ET000~ET1FF H000~H1FF 不可EN000~EN1FF-EN400~EN5FF EN000~EN1FFEN000~EN3FF-EN000~EN1FF------500 5001000 100016 161000 2561000 256100 100不可 P3不可P1 1000 1000 16 1000 256单一2 P2------P3不可100100- - -1000 1000 16---- - -500 1000 16---- - -500 1000 16- - - - - - -不可1000 256 100 R580~R7FF ET000~ET3FF H000~H3FF EN000~EN3FF--- - - - -- - - - - - -1000 256 100 R580~R7FF ET000~ET1FF H000~H1FF EN000~EN1FF--- - - - - - - - - - - -1000 256 100 R580~R7FF ET000~ET1FFH000~H1FF EN000~EN1FF不可不可 ----- 000- 000- 00-99 - - - - 999 255不可- - - - - - - - - -0000 0000 -9999 -9999P1+P2+P3 ≤ 1500P1+P2 ≤ 1000P2+P3 ≤ 1000 例P1 P2 P3 700 300 500说明P1 中使用 700 级时,P2 可使用 300(1000-700)级,P3 可使用 500 级。P1 中使用 400 级时,P2 可使用 600(1000-400)级,P3 可使P3 ≤ 500根据程序 1/2/3 使用的级数确定 ET·H·EN 的各地址的使用区域。400 600 400用 400(1000-600)级。8-124
(1) 在 PC2 兼容模式/PC2/PC1 系列·MX 中不能使用。(2) 在单一模式中,只有程序1可以使用。(3) 程序容量为 16KW 时,级数最大限制在 500。(4) 用于 SFC 控制时占用用户数据存储器的识别符号 R(链路寄存器区域)和扩充定时器区域。(5) 扩充标识(EL****)占用 SFC。注: SFC 占用的扩充定时器、计数器及扩充标识不能使用。8-125
9 链路功能TOYOPUC-Nano 在标准情况下内置有 2 端口的 PC / CMP / MODBUS / SIO、2 端口的 ET、1 端口的 SN-I/F。9.1 设定链路参数 使用链路模块时应按各程序设定参数。    不使用内置链路时不必进行本项设定。   链路       链路号码      支架号     时隙号    模块名称  ET(L1 侧)    任意    内置   L1   以太网  ET(L2 侧)    任意    内置   L2   以太网  PC/CMP/MODBUS/SIO/ SN-I/F(L3)*1  任意 内置 L3 PC 链接、MODBUS 计算机 链接、SIO   PC/CMP/MODBUS/SIO (L4)      任意    内置    L4   PC 链接、MODBUS 计算机 链接、SIO*1 如果 L3 侧不进行链路参数设定则会成为 SN-I/F。作为 SN-I/F 使用时,请将开关置于 L3 T-ON 侧。不作为 SN-I/F 使用时应将其置于 T-OFF 位置。(开 关设定的详细内容请确认 2.2.3(2) SN-IF 的布线) 9-1 9
9.2内置计算机链路功能通过串行通信进行 PC 与高位计算机(计算机、操作盘等)的数据交换。通信方式为以高位计算机为主局, 以 PC 为子局的多站通信网络方式(1:N),可进行最多 32 局的 TOYOPUC-Nano 与高位计算机之间的数 据交换。规格 计算机链路规格9.2.1 (1)         项目规格            接口标准EIA RS-422 标准         通信方式起止同步式 半双工(2 线式)         传输线路带屏蔽的双绞线         传输速度0.3, 0.6, 1.2, 2.4, 4.8, 9.6,19.2, 38.4, 57.6, 115.2 kbps(取决于设定*1)         传输距离最远 1 公里(总长)*2         传输形态1:N         局数最大 32 局(局号:00~37 “用 8 进制数设定”)          数据形式起始位 ·········1 位数据长度 ······7 或 8 位(取决于设定) 奇偶性 ·········1 位(偶数奇偶性) 停止位 ·········1 或 2 位(取决于设定)           使用字符ASCII 代码         错误检出奇偶校验、和数校验 注: 在存储器容量的设定为 PC2 模式、内置标准的链路参数未设定时,作为   中设定的计算机链路工 作。*1 根据链接参数进行设定。*2 相对于传输速度时,以最大传输距离的图表为参考,表示如下。在 115.2 kbps 的传输速度下使用时,请充分注意噪音等。 RS422/RS485 的传输速度与传输距离传输速度(bps)    9-2传送距离 (m)
(2) 通信格式 指令以及响应的通信格式如下。指令 ....和数校验的范围       AD (H)       AD (L)     ?    RI      指令内容   SC (H)     SC (L)     C R     P R G            AD (H)     AD (L)     #    RI      响应内容    SC (H)      SC (L)     C R     P R G     响应 (正常时)响应 (异常时)AD (H)(L)····· RI ··············在指令方面表示应该接受指令的机号,在响应方面表示发送了该响应的机号。 用 ASCII 代码表示 2 位 8 进制数(00~37)。 指定自接收指令以后,到发送出响应为止的时间。用 ASCII 代码(30H~39H,41H~46H)表示 1 位 16 进制数(0~F)。RI 的数值与响应时间之间的关系见下表。....         ..    ..   AD (H)     AD (L)     %    RI      EC (H)   EC (L)     SC (H)      SC (L)     C R     P R G        RI 响应时间 (ms)    RI   响应时间 (ms)     0 0    8   80     1 10    9   90     2    20     A     100    330  B 200     4 40    C   300     5    50     D     400    660  E 500     7  70     F   600 PRG ···········SC (H)(L)····· EC (H)(L)·····: ·············· ? ·············· #················ %··············· CR ·············表示指令处理的对象。用 ASCII 代码表示 0~3。根据指令“PRG”有必须、可省略、不要三种情况。省略时用参数设定的程序 No.成为指令处理对象。对于不存在的程序,不发出指令。 表示和数校验数据。用 ASCII 代码表示 2 位 16 进制数(00~FF)。表示异常时的内容。用 ASCII 代码表示 2 位 16 进制数(00~1F)。 是表示指令、响应开始的代码(ASCII 3AH)。是表示指令的代码(ASCII 3FH)。是表示正常响应的代码(ASCII 23H)。是表示异常响应的代码(ASCII 25H)。是表示指令、响应结束的代码(ASCII 0DH)。     PRG 程序    PRG   程序     0    整个系统     2     程序 2    1   程序 1   3   程序 3  9-3
     补充. 和数校验 本模块为了提高传送数据的可靠性,除了奇偶校验以外还通过和数校验,进行错误检测。本模块的和数校验方法按如下所述。(1) 直接用ASCII代码增加由AD(H)至指令内容(或响应内容)最后为止的数据。(2) 把和数校验项的2位16位进制数转换为8位数据后,加到(1)的和里,如果结果为0,就视为正 常信息。因此,和数校验代码应按照以下顺序编制。1) 直接用 ASCII 代码增加由 AD(H)至指令内容(或响应内容)最后为止的数据。2) 取在(1)编制的和的低位 1 字节的“2 的补码(注 1)”。3) 把在(2)编制的 1 字节的数据划分为高位 4 位和低位 4 位,分别转换成 ASCII 代码。注1: 2 的补码 是倒置使用 2 进制表示数据的所有位(0→1,1→0)后加 1 的値。注2: 指令中的和数校验项〔SC(H),(L)〕的 2 字符为“@(ASCII 40H)” 时,本模块不进行和数校验。因此,要把不需要和数校验的部分设定为“@@”。 但是,由于此时传送错误的检测率下降,所以要尽量放入和数校验数据。 (3) 通信指令No 功能1 读取1点I/O2 读取 I/O 寄存器字节3 写入1点I/O4 写入 I/O 寄存器字节5 读取顺序程序6 写入顺序程序7 读取 I/O 寄存器字8 写入 I/O 寄存器字9 停止扫描10 解除停止扫描11 重新开始扫描12 读取 CPU 的状态13 载入 I/O 寄存器14 设定写入模式15 读取写入模式16 复位17 停止模拟扫描18 解除停止模拟扫描19 读取CPU的ID20 读取定时器、计数器设定值・现在值21 写入定时器、计数器设定值・现在值22 写入定时器・计数器设定值23 写入定时器・计数器现在值24 读取参数25 写入参数26 执行权限定设定27 读取执行权限28 读取时钟时刻29 设定时钟时刻30 载入顺序程序PRG 指令 MRL MRB SRR SRB RPM PRG=1,2,3  WPM PRG=1,2,3  RDR 16 点单位  WDR 16点单位  HLT PRG=0,2,3  RUN PRG=0,2,3  STA PRG=0,2,3                  备注 8 点单位                    8 点单位                                        – MPC     FDR – EWR – SWE– RST16 点单位仅限 PC2 兼容模式 仅限 PC2 兼容模式                    ––– IDRPSC PRC                TCR TCW SPW PPW PRR PRW– ELS– ELR– WTR– WTC FIL PRG=1,2,3扩充定时器・计数器除外 扩充定时器・计数器除外 扩充定时器・计数器除外 扩充定时器・计数器除外                                                            9-4
      No 功能      PRG    指令   备注     31    读取 I/O 寄存器多点字地址登录     –    RDA        32读取 I/O 寄存器多点字  – RDM       33    读取 I/O 寄存器扩充多点     –   REM   PC3J       34读取 I/O 寄存器扩充多点地址登录  –REA PC3J        35 写入 I/O 寄存器扩充多点    – WEM  PC3J        36 读取设置信息字节    – IBR PC3J         37 写入设备信息字节    – IBW  PC3J        38 开始写入程序、参数     RWS  PC3J        39 结束写入程序、参数、保持状态     ERC  PC3J        40 结束写入程序、参数、复位/保持状态     ERS  PC3J        41    开始写入设备信息     –   IWS  PC3J       42结束写入设备信息  –IWE PC3J        43 读取 CPU 状态扩充    – MPE  PC3J       44    写入 I/O 寄存器扩充多点地址登录     –   WEA   PC3J                 PRG:  =  =程序 No.必须可省略(是在省略时设定了链路参数 的程序 No. 但是关于“HLT”,“RUN”,“STA”指令,可作为 PRG=0 使用。) =PC3J: PC3J 系列 CPU 用扩充指令只能在 PC2 兼容模式省略 9-5
9.2.2 (1)设定链路参数 支架No.、时隙No.、链路模块名的设定在 TOYOPUC-Nano 的计算机链路中,将支架 No.设定为“Built-in(内装)”、时隙 No.设定为“Standard(标 准)”、链路模块名设定为“Computer link(计算机链路)”。链路参数的详细设定设定参数,使其与连接设备的参数相符。步骤1) 设定局号。2) 设定数据长度。3) 设定停止位长度。4) 设定通信速度。点击通信速度 ,从一览中选择。5) 设定2线式。6) 设定结束,点击“OK(确定)”。注: 在 PC2 兼容模式下使用内装计算机链路时,不必设定链路参数。 如果与上述设定不符,则会导致通信异常。     (2)  9-6
9.3 内置PC链路功能在子局中指定的 TOYOPUC-Nano 与子局中,指定的最多 15 台 PC 之间,可进行最大 512 点的 I/O 信息交换。 9.3.1 规格(1) PC链路规格      项目         规格     I/O 点数     最大 512 点/1 端口    每 1 机的发送点数 选择 19.2 kbps/57.6 kbps 时:最大 384 点 选择 NC3 倍速时:最大 512 点      局数   最大 16 局(主局 1 局,子局 15 局)/1 线      I/O 的分配      最小设定单位 8 点    传输距离     最远 1 公里(总长)    信号电平 EIA RS-422 标准      通信速度   19.2 kbps/57.6 kbps/NC3 倍速率*1(取决于设定)      同步方式   起止同步模式      传输方式       半双工方式(2 线式)    位结构 JIS7 单位系 10 位      校验模式   垂直奇偶性、水平奇偶性(偶数)      电缆       带屏蔽的双绞线    CPU 停止时的发送数据 OFF 数据/停止前数据(取决于设定)      通信异常时的 CPU 动作   停止/RUN 继续(取决于设定)      连接顺序程序时的通信异常    异常/反复(取决于设定) *1 在与对应于 M-NET3 倍速的 NC 机种通信时设定。9-7
(2) 链路No.和链路区域链路参数可以对程序 1~3 的链路 1~8 进行任意设定。在链路区域设定了内部继电器(M)或链路继电器(L)时,设定了链路参数的程序继电器区域为链路区 域。输入输出(X·Y)区域和扩充区域(EX·EY, EM, EL)为各程序共享区域。链路参数可以对程序 1~3 的 链路 1~8 进行任意设定。输入输出(X, Y)区域在各程 序中共通链路区域设定了内部继电器 (M)或链路继电器(L)时, 设定了链路参数的程序继电 器区域为链路区域。                                    扩充区域为各程序的共享区                                    域。 链路 1-1~1-8  程序 1 (PRG.1) 链路参数  PRG.1 内部继电器 (M)链接 2-1~2-8     PRG.1 链路继电器 (L)链接 3-1~3-8 程序 2 (PRG.2) 链路参数输入输出(X·Y)PRG.2 内部继电器 (M)程序 3 (PRG.3) 链路参数  PRG.3 内部继电器 (M)  PRG.2 链路继电器 (L)PRG.3 链路继电器 (L) 扩充输入输出 (EX·EY)扩充内部继电器 (EM)扩展链接继电器 (EL)            9-8
(3) 使用输入输出继电器(X/Y)时的注意事项在通信区域使用了 I/O 继电器(X·Y)的情况下,请注意 CPU 连接的 I/O 模块 I/O 地址不要重复。CPU中发生错误“86”(通信异常)。  X, Y000 X, Y000 X, Y000X, Y7FF X, Y7FF X, Y7FF               良好   X, Y000X, Y7FF实际 I/O 与通 信区域重复X, Y000X, Y7FF实际在 I/O 之间设立 了通信区域时X, Y000X, Y7FF通信区域后面实际 有 I/O 时                        不可   CPU 连接的 I/O 模块(输入、输出、输入输出) PC 链路通信区域应用命令的输入输出更新(RIO, FUN No. = 280)、输入更新(RI, FUN No. = 281)输出更新(RO, FUN No. = 282)不能在通信区域使用。 9-9
9.3.2PC链路的动作概要PC 链路的通信有连接顺序和普通顺序,在电源接通时用连接顺序进行连接状況以及设定确认后,再用普通顺序进行 I/O 的 ON/OFF 信息交换。 主局连接顺序子局             等待主局 的连接顺序?Y连接顺序连接顺序 OK? YY 解除异常 连接顺序Y N异常警报NN     N Y常顺序通常顺序 OK? N异常警报  连接顺序 OK?                              YN通常顺序 OK?               Y复位 SW ON?通信复位? N    YN 复位 SW ON?     YY 等待主局 的连接顺序? 通信复位?N    N     9-10
(1) 数据传送概念图I/O 地址 L000 (M000)**** 子局 1子局 2主局子局 1子局 2子局 n L000L000****L000           ** *****        (输出)  1)(输入)     (输入)  2)(输出)*        (输出)(输入)  3)    (输入)  4)max连续 512 点(输出)      * ****    (输出)(输入)  *  子局 nL7FF (M7FF)2N+12N    (输入)(输出)        ** L7FF L7FF L7FF      通信顺序 1)→2)→3)→4)→--------→2N→2N+1→1)→2)---------(N=1~15) * 可以作为内部继电器使用。**** 表示各局用于通信的区域起始地址。 起始地址可以由各局自由设定。不需要符合主局地址。但是可以用于通信的仅限于链路继电器(L)、内部继电器(M)、输入输出继电器(X, Y)、链路继电器(扩充区域)(EL)、内部继电器(扩充 区域)(EM)、输入输出继电器(扩充区域)(EX, EY)区域。  9-11
(2) 连接顺序主局针对子局,从子局 1 开始到子局 15 为止,依次检查有无连接及与输入输出点数设定中的子局是否一 致。如设定那样,子局有针对主局应答的回复时,连接顺序将变为 OK 并转到通常顺序。 在子局方面电源接通后,要等待主局发出的连接顺序。在连接顺序方面,检查主局的输入输出点数与各局 输入输出点数的一致性。连接顺序为 OK 时,可以对来自主局的普通顺序进行应答。(3) 普通顺序主局按顺序,将普通顺序进行从子局 1 开始到设定的最后子局为止。在通常顺序中,主局对子局 N 发送 设定点数分的 I/O 的 ON/OFF 数据,以由子局 N 按照接收选定点数部分 I/O 的 ON/OFF 数据的形式,进 行数据通信。通过重复这种工作,在主和子局之間进行数据交換。(4) CPU停止时的通信数据PC 链路与 CPU 的 RUN、停止无关系地进行的通信。但是,不在 CPU 的停止状态进行通信区域之间的数据交换。此时发送数据全部成为 OFF 数据。通过 CPU 复位 SW 进行停止通过外围装置进行停止 → 发送 OFF 数据 RUN 因 CPU 的错误停止 (读接收数据) 9-12
9.3.3PC运算之间的定时PC 的运算与 PC 链路的通信异步进行。但是输入输出数据的交换在各扫描结束时进行。(1) PC1扫描 < 通信 1扫描 PC 1 扫描通信 1扫描 (2) PC1扫描 > 通信 1扫描PC 1 扫描通信 1扫描: PC 链路的数据送至内部虚拟程序数据发送至 PC 链路: 把接收数据发送到 PC交换发送数据通信 1 扫描(从子局 1 到设定的最后子局的通信)所需时间取决于进行通信的子局数及通信点数。 通信速率 19.2 kbps 时                                                                      通信 1 扫描(ms) = 1.2X + 9.5N 通信速率 57.6 kbps 时通信 1 扫描(ms) = 1.0X + 8.1N 通信速率 3 倍速率时X:输入输出总字节数 N:子局数 通信 1 扫描(ms) = 0.5X + 7.3N例)通信速率 19.2 kbps、子局数 = 7、输入输出总字节数 = 32 字节(256 点)1扫描 =1.2×32+9.5×7=104.9(ms)9-13
9.3.4分离功能如果 PC 链路在子局发生了通信异常,子局就对全部子局停止通信,进行异常报警。 分离功能系指将特定主局从通信线中脱离开来或重置。这一功能可以使一个有异常发生的子局从通信网络中断开并保持其他正常子局的通信。此外,还可将发生异常的子局复原。指定子局的分离指定子局的分离的执行是通过对子局 PC 的分离寄存器(S31C, S33C, S35C,   ,S3FC)设定数据进 行。(1)用于各子局的位 位=1 分离指定 位=0 无指定分离寄存器(1 字)  D15 .....   DA  D9  D8  D7 .....   D2 D1  D0           无关子局 1 分离指定子局 2 分离指定子局 7 分离指定子局 8 分离指定子局 9 分离指定子局 10 分离指定子局 15 分离指定                   链路1-S31C 链路2-S31C 链路3-S31C 链路4-S31C链路5-S39C 链路6-S39C 链路7-S39C 链路8-S39C (2)注1: 不使用分离功能时,请使用一个顺序程序来清除分离寄存器。由于即便断开电源,分离寄存器也保 持数据,因此,有时会在未通知的情况下进行分离。此时虽然通信处于正常状态,但数据全部变为 OFF 数据。注2: 分离寄存器不是 0000 时,关闭所有站点的通信。分离子局的通信[1] 分离子局正常时主站向指定脱离的子站发送 I/O 的 OFF 数据。来自该子站的接收数据将被丢弃,并作为已接收 I/O 的 OFF 数据来运行。可与其他未指定脱离的子局,像通常那样进行 I/O 的 ON/OFF 数据的通信。在分离指定的状态,主局直接接通电源,或者在通信复位时,与其他子局一样,从连接顺序开始,按 普通顺序,进行 OFF 的数据交换。[2] 分离子局为通信异常时 主局要把连接顺序发送到子局解除异常为止。如果异常被解除,对于连接顺序有了正常的响应,就重新开始与上述[1]相同的普通顺序。该期间对其他子局继续执行普通顺序程序。[3] 分离指定被解除时[1] 时···· 交换普通 ON/OFF 的 I/O 数据。[2] 时···· 作为通信异常,进行异常报警,停止有关全部子局的通信。[4] 其它  主局在未进行分离指定的子局成为异常通信时,进行异常报警,停止有关全部子局的通信。9-14
9.3.5 (1)PC链路通信复位可以在通信异常时进行通信复位。方法通过使通信复位用虚拟程序的“OFF” → “ON”,进行通信复位。 复位只是在“OFF” → “ON”上升时有效。复位的定时PC     地址 内容    地址   内容     V80 通信复位 1    V84   通信复位 5     V81 通信复位 2    V85   通信复位 6     V82    通信复位 3     V86     通信复位 7    V83   通信复位 4   V87   通信复位 8  (2)                    通信重置PC 链路1 扫描通信异常 起始设定 复位:END 处理 PC 链路和数据交换连接顺序 常顺序读链路参数          PC 链路通过通信复位,开始与电源接通时相同的动作。 (连接顺序执行后,按照普通顺序开始 I/O 数据交换。)注1: 即便是 CPU 的复位・起动 SW,也要进行通信复位。注2: 通信复位在通信异常时有效。在链路参数异常时无效,要在写入参数后,重新接通电源或者进行复 位、起动 SW 的操作。9-15
(3) 通信异常的解除如果在主局重新接通电源或进行复位·起动 SW 的操作,或者进行通信复位,通信异常就被解除,重新开 始通信。不需要进行子局的通信复位。 子局在通信异常时,也要对来自主局的连接顺序进行响应,通过连接顺序 OK,可以解除通信异常,进行 普通顺序的响应。但是,在进行了链路参数变更的情况下,即便是子局也要进行电源的重新接通或者 CPU 的复位·起动 SW 的操作。   主局     主局 异常警报子局  子局 异常警报   通信复位通信异常连接顺序常顺序    主局 解除异常子局 异常警报       主局子局 解除异常  (4) 通信复位电路例[1] 采用了通信复位时由于即便有电源接通时的误差,也不作为通信异常。所以在电源接通后,需要进行 2 秒时间复位。 第 1 扫描  V06VA2 T000T000      [TIMK=0002.0] V80Y000]SET:2.0 秒 通信复位通信异常分离寄存器清零分离寄存器   通信异常 特殊继电器通信复位 按钮信号                       VA2 V06T000                [FUN No.1 WMOVP0000 → S31C       注1: 上述是链路 No. = 1 时的电路例。 通信异常特殊继电器、通信复位按钮信号、分离寄存器根据链路 No.而不同。注2: 不使用分离寄存器时,请务必清零。9-16
[2] 使用分离寄存器时如果使用“[1] 使用通信复位时”的电路,子局电源的启动会出现延迟,并在错误信息输出用寄存器种保存“LINK ERROR”(错误代码:86)。下面的电路在主局电源接通后 2 秒钟,不显示“LINK ERROR”。此外,还是错误代码未存储在错误信息输出用寄存器内的电路例。第 1 扫描V06V06T00分离寄存器    FUN No.101 [ WMOVT000 [ TMRP00     FUN No.101 [ WMOVFFFFh → S31C ]分离寄存器设定                K=0002.0 0000h → S31C] SET:2.0 秒] 分离寄存器清零分离寄存器                 电源接通后,分离所有局,在电源接通后 2 秒钟,所有错误不报警。2 秒钟之后,解除分离,进行正 常的通信。注1: 上述电路例中的链路 No. = 1。 注意,分离寄存器因链路 No.而异。注2: 以内置 PC 链接为主局与 FS 终端(V1.00)连接时,请将使用上述 (2) 分离寄存器时的回路加入 到顺序中。没有该分离电路时,有时会导致异常通信,无法进行通信。    链路号码 分离寄存器    链路号码   分离寄存器    1    S31C        5      S39C    2 S33C    6   S3BC    3 S35C    7   S3DC    4 S37C     8   S3FC 9-17
 9.3.6 PC链路状态PC 链路可以通报 CPU 的特殊寄存器状态信息(子局通信状态、子局连接状态)以及异常信息。 还可以通过在分离寄存器种设定数据进行子局分离。MSB LSB地址 F E D C B A 9 8 7 6 5 4 3 2 1 0 用途S3*0 1514131211109 8 7 6 5 4 3 2 1 0子局通信状态S3*1S3*2S3*3S3*4S3*5S3*6S3*7S3*8S3*9S3*AS3*BS3*C 1514131211109 8 7 6 5 4 3 2 1 0子局连接状态 S3*DS3*ES3*FS3x0S3x1S3x2S3x3S3x4S3x5S3x6S3x7S3x8S3x9S3xAS3xBS3xC 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0 子局分离 S3xDS3xE S3xF*, x 的代码链路No. 12345678* 02468ACE x 13579BDF注: 数据单一方式时,地址如下。程序 1程序 2程序 3*处代入上述*, x 的号码。S3*0~ ES0*0~ ES1*0~9-18子局 No.异常信息(错误代码) 异常信息(错误详情 1) 异常信息(错误详情 2) 异常信息(错误详情 3) 异常信息(错误详情 4) 异常信息(错误代码存储 1) 异常信息(错误代码存储 2) 异常信息(错误代码存储 3) 异常信息(错误代码存储 4) 异常信息(错误代码存储 5) 异常信息(错误代码存储 6) 异常信息(错误代码存储 7)
 通信状态报警功能PPC 链接将向 CPU 的特殊寄存器通告状态信息(子局通信状态、子局连接状态)。(1) 子局通信状态 通知特殊寄存器“S3*0”子局的通信状态。MSB LSB    地址S3*0               F15               E14        D13        C12        B11        A10    99         88         77       66       55       44        33       22    11         00     用途子局通信状态       *的代码子局 No.通信状态有发生 max 数百 ms 时间延迟的可能性。   链路 No.      1       2    3    4 5       6    7  8    *            0         2         4        6      8         A         C      E        在主局的场合  与正常进行通信的子局对应的位为“1”。(如果在分离状态也进行通信,就为“1”。)1:正常进行通信的子局0:还没有进行通信的子局 通信异常发生時,与检测出异常的子局对应的位为“0”,其他的子局保持发生通信异常前的通信状态内容。 (通信异常发生時,实际上是不能进行通信的,在发生异常前,与进行正常通信子局对应的位仍然为“1”。)通过链路参数设定,只是与设定为连接的子局的位为“1”。 还有,在通信异常時,全部为“0”。(2) 子局连接状态 对特殊寄存器“S3*C”报知子局的连接状态。MSB LSB地址 F E D C B A 9 8 7 6 5 4 3 2 1 0 用途S3*C             15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0 子局连接状态通过链路参数设定,对应于设定为连接的子局的位为“1”。通过链路参数设定,对应于设定为连接的本局的位为“1”。    在子局的场合                                                                                                                                                                                      在主局的场合      在子局的场合  9-19
(3) 通信异常子局诊断方法 根据分离功能和子局的通信状态实施。诊断例(工程盘的 PC-LINK 主机分配给链路 No.1 的场合)       备份布线工程盘子局 2 PB2子局 1 PB2断线子局 4 PB2子局 3 PB2通信线路PB2:光分支开关LSB不能与子局 2,4 通信。 由链路系統图断定在子局 3 和子局 4 之间断线                PB2    [1] 把连接局全部设定为分离状态。[2] 进行通信复位。[3] 监控子局连接状态、子局通信状态。S300 S30CMSB0000000000001010      0000000000011110       [4] 连接备用配线。[5] 监控子局连接状态、子局通信状态。MSB确认无通信异常子局[6] 解除分离,重新开始运行。LSBS300 S30C0000000000011110      0000000000011110       9-20
9.3.7 设定链路参数(1) 支架No.、时隙No.、链路模块名的设定PC 链接在“Built-in(内装)”中设定机架 No.,在“Standard(标准)”中设定插槽 No.,在“PC link master” or “PC link slave”(PC 链接主局 or 子局)”中设定链接模块名称。(2) 链路参数的详细设定 PC链路主局的设定进行 PC 链路主局的设定。设定 PC 链接时,需在“Built-in(内装)”中设定机架 No.,在“Standard(标准)”中设定插槽 No.,并设定 [Soft SW(软件 SW)]。     步骤1) 设定链路区域起始地址。 可输入的范围:  链路继电器  内部继电器  输入输出  链路继电器(扩充区域)  内部继电器(扩充区域)  输入输出(扩充区域)L00L~L7FH M00L~M7FH X/Y00L~X/Y7FH EL000L~EL1FFH EM000L~EM1FFH EXY000L~EXY7FH2) 设定连接子局。校验连接子局。3) 设定传送字节数。传送数的合计为 64 字节。4) 点击“Soft SW(软件 SW)”,设定软件开关。9-21
5) 设定结束,点击“OK(确定)”。备忘录进行如下 4 项设定内容的异常校验。1. 链路区域起始地址是否正确?2. 传送字节数是否正确?3. 传送字节数的合计是否在 64 字节之内?4. 链路区域起始地址+传送字节数的合计是否超出区域范围? 软件开关的设定(主局)使用 PC 链接时,需设定以下的动作参数。设定内容详细内容可点击各项目。步骤1) 设定 CPU 停止时的发送数据。 CPU 停止时的发送数据OFF 数据CPU 停止时,发送 OFF 数据。 停止前数据CPU 停止时,发送停止前的数据。2) 设定通信异常时的 CPU 动作。通信异常时的 CPU 动作 停止通信异常时,CPU 停止。 RUN 继续即使通信异常,CPU 也不停止。通信异常用特殊继电器置于 ON。3) 设定连接顺序时的通信异常。    连接顺序程序时的通信异常异常 在连接顺序中如果通信异常,则将其作为通信异常,停止于所有子局的通信。 请按子局 →主局的顺序接通电源。如果按主局 →子局的顺序接通,则会出现通信异常,并停止通信。反复 即使在连接顺序中有通信异常,所有子局也要在连接顺序结束后反复连接顺序。因此,无论按主 局 →子局还是子局 →主局的顺序接通电源均不会出现通信异常。      但在接通电源时即使通信线断线也不会报警,应予以注意。 9-22
4) 设定通信速度。 通信速度设定通信速度。• 57600 bps• 19200 bps• 对应NC的3倍速率5) 设定 2 线式/4 线式。6) 设定结束,点击“确定”。 PC链路子局的设定进行 PC 链路子局的设定。设定 PC 链接时,需在“Built-in(内装)”中设定机架 No.,在“Standard(标准)”中设定插槽 No.,并设定 [Soft SW(软件 SW)]。步骤1) 设定链路区域起始地址。可输入的范围: 链路继电器内部继电器输入输出链路继电器(扩充区域)内部继电器(扩充区域)输入输出(扩充区域)L00L~L7FH M00L~M7FH X/Y00L~X/Y7FH EL000L~EL1FFH EM000L~EM1FFH EXY00L~EXY7FH2) 设定连接子局。校验连接子局。3) 设定传送字节数。传送数的合计为 64 字节。4) 点击“Soft SW(软件 SW)”,设定软件开关。5) 设定结束,点击“OK(确定)”。备忘录进行如下 4 项设定内容的异常校验。1. 链路区域起始地址是否正确?2. 传送字节数是否正确?3. 传送字节数的合计是否在 64 字节之内?4. 链路区域起始地址+传送字节数的合计是否超出区域范围?9-23
 软件开关的设定(子局)使用内置型 PC 链路时,需要设定下列工作参数。设定内容详细内容可点击各项目。步骤 1)2)3)4) 5)设定 CPU 停止时的发送数据。 CPU 停止时的发送数据OFF 数据CPU 停止时,发送 OFF 数据。 停止前数据CPU 停止时,发送停止前的数据。 设定通信异常时的 CPU 动作。 通信异常时的 CPU 动作停止通信异常时,CPU 停止。 RUN 继续即使通信异常,CPU 也不停止。通信异常用特殊继电器置于 ON。 设定通信速度。通信速度设定通信速度。• 57600 bps• 19200 bps• 对应NC的3倍速率注意: 与对应 M-NET3 倍速率的 NC 机通信时,如果通信速度设定为 57600 bps,则无法进行通信异 常校验。设定 2 线式/4 线式。 设定结束,点击“OK(确定)”。9-24
9.4 9.4.1内置FL-net功能本章就 FL-net 的功能进行说明。FL-net规格   No.  项目   规格   1  物理层   10 BASE-T , 100 BASE-TX   2   传输速度    10 Mbps, 100 Mbps    3 最大电缆长度*1 Max 100 m(节点 - 节点间(1 对 1 连接时)、节点 - HUB 间、HUB - HUB 间)总延长距离:Max 2100 m(HUB:Max20 台)   4   最大节点数    249(254 局)*2    5 通信功能 数据链路功能讯息服务器功能消息客户端功能   6   继电器链路容量    512 字    7 寄存器链路容量 8192 字 (通过链路参数进行切换)   8    讯息数据容量     1024 字节  9.4.2*1 指定的 HUB 为自动协议。连接了自动协议之间时为 100 Mbps。 *2 ( )是包含保养用节点在内的节点数。数据链路规格   No        项目    规格     继电器链路      寄存器链接    1 链路区域*1 L000~L7FF L1000~L2FFF*2 M000~M7FF M1000~M17FF*2 X·Y000~X·Y7FF EL000~EL1FFF EM000~EM1FFF EX·EY000~EX·EY7FF GX·GY0000~GX·GYFFFF GM0000~GMFFFF使用 XY 区域时参见 9.7.4.项。 R000~R7FF D0000~D2FFF U0000~U1FFFF EB00000~EB3FFFF   2   链路容量   512 字   2048 字/6144 字/8192 字 (通过触电开关进行切换)   3    每 1 台的发送容量     ↑     ↑    4   通信方式   N:N 方式及 1:N 方式   N:N 方式及 1:N 方式  *1 工作模式及存储器容量的设定中可使用的区域有限制。9-25
9.4.3数据链接方式数据连接方式支持 N:N 方式(N 对 N 方式)和 1:N 方式(1 对 N 方式)。N:N 方式就是如下图所示的某节点(局)的发送区域为其他节点的接收区域,各节点之间共有数据的方式。 节点 1 节点 2 节点 3 节点 4在 1:N 方式中,进行设定在 1:N 主局中的节点和设定在 1:N 子局中的节点之间的通信。 在 1:N 子局之间不进行数据链接。  发送区域 接收区域 接收区域 接收区域 接收区域 发送区域 接收区域 接收区域 接收区域 接收区域 发送区域 接收区域 接收区域 接收区域 接收区域 发送区域             1:N主站 1:N子站 1:N子站 节点 1 节点 2 节点 3N:N 方式的节点和 1:N 方式可以在一个网络中同时存在。1:N子站 节点 41:N 子局  发送区域 接收区域 接收区域 接收区域 接收区域 发送区域 接收区域 发送区域 接收区域 发送区域         N:N 或 1:N 主局 N:N 或 1:N 主局1:N 子局  接收区域 发送区域 接收区域 接收区域 发送区域 接收区域 接收区域 接收区域 接收区域 发送区域 接收区域 发送区域         9-26
9.4.4在通信区域中使用输入输出(X·Y)时的注意事项(1) 注意不要使连接 CPU 的 I/O 模块和 I/O 地址出现重复。重复设定时,CPU 中发生错误“86”(通信异常)。  X/Y000 X/Y000 X/Y000X/Y7FF X/Y7FF X/Y7FF               良好          X/Y000X/Y7FFX/Y000X/Y7FF  在输入输出之间加入  通信区域时X/Y000X/Y7FF   在通信区域之后有输   入输出时         输入输出与通信 区域重复   不可   ···· PC 的 I/O 区域 ···· PC 的 I/O 区域和 FL-net 的通信区域重复的区域 ···· FL-net 的通信区域(2) 应用命令的 I/O 更新(RIO:FUN No. = 280)、输入更新(RI:FUN No. = 281)输出更新(RO: FUN No. = 282)不能在通信区域使用。9-27
9.4.5信息服务器功能针对从其它节点发送来的指令信息进行响应的方式。指令处理以及响应发送处理均由 FL-net 和 CPU 自动进行,不需要为该功能进行参数设定和顺序程序处理。 详细内容请参照 TOYOPUC Nano 2ET 的使用说明书。                     指令响应      9.4.6信息终端功能                                         9.4.7向其它节点发送指令信息,接收响应的方式。指令数据的生成及 FL-net 的发送指示,向响应数据的 FL-net 寄存器读出均由顺序程序进行。 详细内容请参照 TOYOPUC Nano 2ET 的使用说明书。指令响应其他节点状态读出功能通过顺序程序处理可在寄存器上读出参与 FL-net 通信的其它节点的状态。详细内容请参照 TOYOPUC Nano 2ET 的使用说明书。9-28
 9.4.8 监控功能可通过特殊寄存器 S3*0~S3*F 监控参加 FL-net 通信的节点(局号 1~254)。 下图表示局号(参数的节点将 10 进制表记改为 16 进制表记)和位数地址的对应表。MSB LSB FEDCBA9876543210S3*0 0F 0E 0D 0C 0B 0A 09 08 07 06 05 04 03 02 01S3*1 S3*2 S3*3 S3*4 S3*5 S3*6 S3*7 S3*8 S3*9 S3*A S3*B S3*C S3*D S3*E S3*F ··· S3xF1F 1E 1D 1C 1B 1A 19 18 17 16 15 14 13 12 11 10 2F 2E 2D 2C 2B 2A 29 28 27 26 25 24 23 22 21 20 3F 3E 3D 3C 3B 3A 39 38 37 36 35 34 33 32 31 30 4F 4E 4D 4C 4B 4A 49 48 47 46 45 44 43 42 41 40 5F 5E 5D 5C 5B 5A 59 58 57 56 55 54 53 52 51 50 6F 6E 6D 6C 6B 6A 69 68 67 66 65 64 63 62 61 60 7F 7E 7D 7C 7B 7A 79 78 77 76 75 74 73 72 71 70 8F 8E 8D 8C 8B 8A 89 88 87 86 85 84 83 82 81 80 9F 9E 9D 9C 9B 9A 99 98 97 96 95 94 93 92 91 90 AF AE AD AC AB AA A9 A8 A7 A6 A5 A4 A3 A2 A1 A0 BF BE BD BC BB BA B9 B8 B7 B6 B5 B4 B3 B2 B1 B0 CF CE CD CC CB CA C9 C8 C7 C6 C5 C4 C3 C2 C1 C0 DF DE DD DC DB DA D9 D8 D7 D6 D5 D4 D3 D2 D1 D0 EF EE ED EC EB EA E9 E8 E7 E6 E5 E4 E3 E2 E1 E0FEFDFCFBFAF9F8F7F6F5F4F3F2F1 F0自身节点地址(16 进制) 各位 = 1:通信中各位 = 0:不参加通信特殊寄存器的 x, *部分取决于链路 No.。链路No. 12345678* 02468ACEx 13579BDF例如,FL-net 的链接 No.用 5 来监视节点编号 85(55h)的局的参加状态时,从上述局号与位数地址的对应表中可知,其与 S3*5 的第 5 位相对应,因此,只要查看 S385(链接 No. 5 时,* = 8)的第 5 位即可。进行复位/启动及切断电源再次接通时上述区域会被清零。 另外,通过复位,FL-net 将从通信线路上脱离,并重新开始通信加入处理。9-29
9.4.9 FL-net通信响应时间(1) 刷新周期时间FL-net 通信采用无标准·权标方式。有的节点将从该节点地址获得权标(发送权)开始到下一次该节点地址获得权标的时间(权标的 1 周期时 间)称为“刷新周期时间”。刷新周期时间(平均) T = P (1.375 + 0.0275P) + 0.004N [ms]P:节点数N:各节点的发送字数的所有节点合计(发送字数 = 继电器链路发送字数 + 寄存器链路发送字数)(2) 响应时间在 TOYOPUC PC10G-CPU 同类产品之间进行通信时,为从发送测 PLC 输入启动开始的时间到接收侧PLC 输出开始的时间。组成 发送侧 PLC 接收侧 PLC响应时间(平均) R=25+T+1.6P+10(K−1)+0.024×n1+Tsc1×2+Tsc2×2+TID +TOD [ms] T: 刷新周期时间P: 节点数n1: 发送侧节点的发送字数K: 包数(= n1/512 小数点进位)TSC1: 发送侧 PLC 的扫描时间TSC2: 接收侧 PLC 的扫描时间TID: 输入模块延迟时间 TOD: 输出模块延迟时间  CPU    输 入CPU  输 出          9-30
9.4.10 FL-net的起始设定 9.4.10.1 初始设定步骤系统启动时的设定步骤请在 FL-net 的参数设定中使用 PCwin2。(1) 链路模块名的设定请参照“(1)开关的设定”请参照“(2)链路模块名的设定”请参照“(3)链路参数详细设定”请参照“(4)网络参数的设定” (通常使用缺省值,不必进行变更) 开始   开关的设定   链路模块名的设定  链接参数详细设定    网络参数的设定  电源通断或重置启动通过 PCwin2 的“Parameter(参数)”→“Link Parameter(链路参数设定)”选择分配给 FL-net 的链路 No.,设定支架 No.、时隙 No.和链路模块名。如果开关设定与 I/O 模块识别代码及链路模块名的容量(8 KB/16 KB/32 KB)不同,则会导致链路参数异 常。设定示例 9-31
(2) 链路参数详细设定 设定链路模块名后,继续进行详细设定。  此处进行以下项目的设定。[1] 节点号码[2] 节点名称[3] RUN 停止时的输出状态[4] 其他节点脱离时的输入状态[5] 通信方式[6] 数据链路的设定[7] 网络的设定  这些设定值通常由终端用户的网络管理者指定。(2) - 1 节点编号 设定 FL-net 局号。设定值为 1~159、168~249、不得与其它节点(FL-net 通信局)重复。 节点号码重复时,即将随后参加网络的节点不能参加通信,模块前面得点矩阵显示器显示错误代码“E7”(节点号码重复)。(2) - 2 节点名称用半角英文字符设定 FL-net 得节点名称,名称在 10 个字以内。也可省略设定。 设定的节点名称作为对来自主计算机等的“网络参数读出要求”指令的响应被读出。(2) - 3 RUN 停止时的输出状态关于继电器链路和寄存器链路,设定 CPU 模块 RUN 停止时的输出状态。设定为“Clear(清除)”时,如果 RUN 停止,则数据连接的自节点发送数据全部为 0。 设定为“Hold(保持)”时,即便 RUN 停止,继续发送 RUN 停止前的数据。 9-32
(2) - 4 其他节点脱离时的输入状态 其他节点脱离网络时,关于继电器链路和寄存器链路,设定如何处理其节点接收区域的数据。设定“Clear(清除)”时,从已脱离节点接收了信息的区域的数据全部为 0。 设定“Hold(保持)”时,从已脱离节点接收了信息的区域的数据保持脱离前的状态。 注意: 其他节点未参加通信时,其节点信息发送区域的数据变为 00(零)。其他节点在参加一次通信后再脱离,随后在自节点参加了通信时,已脱离的其他节点的发送息区 域的数据也变为 00(零)。此外,自节点与其他节点同时参加通信后,其他节点已经脱离时的数据按照“State of input in other node separation(其他节点脱离时的输入状态)”设定。(2) - 5 通信方式的设定从“N:N 或者 1:N 主局”、“1:N 子局”、“不进行数据链接”中选择一种数据链接方法。(1) N:N或1:N主站所谓 N:N 方式是指有的节点得发送区区域会成为其它接点的接收区域,各节点间的数据是共享的方 式。1:以 N 方式通信时的主局也设定在该模式。下一章将详细说明。节点 1 节点 2 节点 3 节点 4(2) 1:N 子站只进行与 1 个特定局的数据链接的方式。下图以将节点 1 设定成“N:N 或 1:N 主局”、节点 2~4 设定成“1:N 子局”为例。 下一章将详细说明。在节省子局内存的同时,还具有能够共享顺序程序的优点。  发送区域 接收区域 接收区域 接收区域 接收区域 发送区域 接收区域 接收区域 接收区域 接收区域 发送区域 接收区域 接收区域 接收区域 接收区域 发送区域                              N:N或 1:N主局 1:N子局 节点 1 节点 2(3) 不进行数据链接(只有信息通信) 不进行数据链接的模式。参加 FL-net 的通信,只进行信息通信。1:N子局 节点 31:N子局 节点 4  发送区域 接收区域 接收区域 接收区域 接收区域 发送区域 接收区域 发送区域 接收区域 发送区域                   9-33
(2) - 6 数据链接的设定选择了“N:N 或者 1:N 主局”或者“1:N 子局”时,单击“Data Link(数据链路)”按钮,设定详细的通信参数。 关于可以进行数据链接的区域,请参照“9.7.2.数据链路规格”。(1) N:N 或 1:N 主站通过 FL-net 网络里参加通信的各节点共有数据的虚拟内存空间、共用内存发送接收信息。 如果某个节点向共用内存上发送数据,则此数据被其他节点接收,各节点上共有相同数据。 共用内存的信息发送地址和大小以字符(16 位)为单位设定每个节点。 节点号码的大小与信息发送地址的顺序无关。例)   公用存储器 地址 0000    节点 1 发送区域 节点 10 发送区域节点 3 发送区域        分配时发送共用内存上数据的区域不的重复。如果重复,则后参加通信的节点会出现“E8”(继电器链路区域重复)或“E9”(寄存器链路区域重复) 错误,从而导致通信异常。例)节点 2 发送区域节点 1 发送区域 节点 10 发送区域节点 3 发送区域    节点 2 的发送区域的一 部分与节点 3 的发送区 域重复,所以节点 2 出 现通信异常。           9-34
在“N:N 或 1:N 主局”模式下,用以下 4 个参数设定 CPU 模块的寄存器的哪一地址对应从共用内存 的起始地址开始多大范围内的数据以及自节点发送区域的地址和长度。共用内存的地址 0000 对应链路区域的起始地址。• 链路区域的起始地址 ······ (1)  用文字单位来设定链接区域起始地址此处设定的地址对应共用内存的地址 0000• 链路区域字数··············· (2)  以文字单位来设定刷新数据的整个区域容量• 发送区域的起始地址 ······ (3)  以文字单位来设定自站所发送区域的起始地址。• 发送区域字数··············· (4)  按字符单位设定本局发送区域的大小PC 内部寄存器公用存储器 (1)地址 0000          接收区域      (2)(3) (4)  发送区域    接收区域 注意: 节点号码和共用内存的发送地址及数据大小,通常由终端用户的网络管理者指定。9-35
设定示例 1 •(1) (3)继电器链接如上设定时,寄存器数据与共用内存的对应如下。地址 PC 内部寄存器 L000L100 L1FFL3FF共用内存的地址按字(16 点)单位表示。 例如 L01W 表示 L010~L01F 的 16 点。 寄存器链接如上设定时,寄存器数据与共用内存的对应如下。(2) (4)公用存储器 地址00000010 001F003F(2) (4)公用存储器 地址 0000030004FF 05FF              接收区域 发送区域 接收区域             16 文字 64 文字               注意:•(1) (3)1536 字地址R000R300R4FF R5FFPC 内部寄存器                接收区域  发送区域接收区域            512 字              9-36
设定示例 2 节点 No.1节点 No.22 个节点分别进行上述设定时,如下图所示节点 1 发送的 L100~L1FF 数据通过共用内存进入节点 2 的同一地址。节点 2 发送的 L280~L47F 数据虽然反映在共用内存上,但是节点 1 的连接区域的范围是 L000~L3FF, 超过此范围 L400~L47F 的数据不能读到节点 1,节点 1 的相同地址只接收节点 2 的 L280~L3FF 的 数据。      地址L000L100L1FF L280L3FF节点 1 数据共用内存节点 2 数据 地址 L000L100L280L47F L5FF   节点 1 数据 接收区域  发送区域     发送区域 节点 2 数据 接收区域 接收区域                                       9-37
各节点的连接区域起始地址不必相同。如下图设定节点 2 时,节点 1 和节点 2 之间的数据交换如下。    地址L000L100L1FF L280L3FF节点 1 数据共用内存节点 2 数据 地址 M100M200M380M57F M6FF   节点 1 数据 接收区域  发送区域     发送区域 节点 2 数据 接收区域 接收区域                                       9-38
设定示例 3 节点 No.10  节点 No.128 节点 No.249 如上设定时,进行以下数据链接。9-39
• 继电器链接 节点 10 数据节点 128 数据节点 249 数据   X400X600X700 X7FFR000R400 R500R6FFL000L200 L2FFM000M200M300M3FF      发送区域 节点 10 接收区域  节点 128 接收区域 发送区域 节点 254 接收区域  节点 128 接收区域 节点 10 接收区域 发送区域                          注意:• 寄存器链接节点 10 数据节点 128 数据节点 249 数据继电器链接的地址以 16 位的文字单位进行设定。所谓 X40W,表示 X400~X40F。 D100D500D600D6FFD000D400 D500D6FFD7FF        节点 128 接收区域节点 10 接收区域  发送区域 节点 128 接收区域 节点 254 接收区域 发送区域  节点 10 接收区域  发送区域                                 注意: 链接区域与发送区域的关系以“Trans. area top addr.(发送区域起始地址)”和“Trans. area words(发送区域字符数)”指定的发 送区域,必须完全进入“Link area top addr.(链路区域起始地址)”和“Link area words(链路区域字 符数)”指定的链路区域内。 例如,下图所示的设定由于发送区域(L300~L47F)超出了链接区域(L000~L3FF),所以无法设 定。(试图设定时,会显示错误信息) 9-40
(2) 1:N 子站在 1:N 子局模式下,只进行以链路参数指定的一个局的数据链路。在此模式下,按以下参数设定从哪个局号的节点接收多少字符数据,保存到哪个寄存器,并且设定将 本站的多少字符数据从哪个地址发送到哪部分的共用内存(*1)。• 主站节点编号··································(1)在 1~249 的范围内指定进行通信的其他站的节点编号。如果在此范围内,则无论什么站号都可    以设定,不必区分与子站节点编号的大小。• 接收区域起始地址 ···························· (2)    按字符单位指定保存从主局收到的数据的寄存器的起始地址。• 接收文字数量··································(3)    指定接收主局数据的字数。• 发送区域字数··································(4)    指定本局发送的数据字数。    (自站发送数据的起始地址接在接收区域最终地址之后)• 公用存储器(*1)发送区域起始地址 ····· (5)在本局发送数据的共用内存(*1)上指定地址。*1 共用内存就是参加通信的各节点共有数据的虚拟内存空间,FL-net 的数据连接通过此共用内存来进行。PC 内部寄存器(2) 整个网络如下图进行数据链接。N:N或 1:N主局 1:N子局 节点 1 节点 2公用存储器            接收区域(3) (4)地址 0000(5)   发送区域      1:N子局 节点 31:N子局 节点 4  发送区域 接收区域 接收区域 接收区域 接收区域 发送区域 接收区域 发送区域 接收区域 发送区域                   注意: 节点号码、共用内存的信息发送地址及数据大小通常由终端用户的网络管理者来指定。9-41
设定示例 1  如按上图进行了设定时,将进行如下图的数据链接。 PC 内部寄存器公用存储器地址0000用局号指定主局的发送区域 (32 字)0100     地址L000L20032 字 20 字           接收区域     发送区域      注: 无论主局向共用内存的哪个地址上发送数据,都将从该地址接收数据,所以无需设定主站的发送区 域起始地址。•地址L000L200按“Recv. words(接收字数)”设定的字数 < 实际的主局发送字数时,超出主局发送数据的 部分(下图示例的后 8 个字)不被接收。 PC 内部寄存器公用存储器 地址 0000用节点号码指定的主局发送 区域(40 字)0100                接收区域32 字 20 字       发送区域无法接收 的区域      9-42
• 按“接收字数”设定的字数 > 实际的主局发送字数时,主局发送数据的“接收字数”不足的区域(下 图示例中的后半段的 16 个字)里加入 0(零)PC 内部寄存器  公用存储器地址0000用局号指定的主局发送区域 (16 字)0100    地址L000L20032 字 加入零数据的区域20 字             接收区域          发送区域      注意:共用内存的发送区域即使出现上下关系变化,PC 内部寄存器的“接收区域”“发送区域” 的并存不出现变化。PC 内部寄存器 公用存储器      接收区域   发送区域    9-43用局号指定主局的发送区域 (32 字)
节点 No.100 节点 No.64 节点 No.150 9-44
X400 X5FFX700 X7FFD000D3FF D500D6FF D780 D87FL000L1FFL200L2FFM000M1FF M200M2FF• 继电器链接 节点 100 数据(主局)节点 64 数据 (子局)节点 150 数据 (子局)         发送区域 节点 64 接收区域 节点 150 接收区域 节点 100 接收区域 发送区域  节点 100 接收区域 发送区域        X600               注意:• 寄存器链路继电器链接的地址以 16 位的文字单位进行设定。所谓 X40W,表示 X400~X40F。节点 100 数据 节点 64 数据 (主局) (子局)节点 150 数据 (子局) D100D4FF D580D67FD000D1FF D200D3FF       发送区域 节点 150 接收区域 节点 64 接收区域  节点 10 接收区域 发送区域 节点 10 接收区域 发送区域                          9-45
(2) - 7 网络的设定 网络设定通常不需要进行变更。没有网络管理人员的指示请勿进行变更。 改变网络的设定时,请单击“Network(网络)”按钮。 网络地址的设定FL-net 虽然使用 UDP/IP 协议进行通信,但却将该协议中使用的 IP 地址的上位 3 位作为网络地址来 设定。IP 地址的第 4 位为节点编号。例如,网络地址为 192.168.250,则节点号码为 100 的节点的 IP 地址为 192.168.250.100。从 PC 等 发送 PING 以及本模块进行响应时使用该 IP 地址。FL-net 虽然进行 UDP/IP 的广播传输,但此时的目标 IP 地址仅用 FFh 来发送 IP 地址的第 4 位。例 如,IP 地址为 192.168.250.100 的节点发送数据时的目标 IP 地址为 192.168.250.255。网络地址必须与 1 个 FL-net 网络的所有节点相同。如果网络地址不同,则该节点无法接收其它节点的数据,并且其它节点也无法接收该节点发送的数据。 以太网测定器会监控所有数据,应予以注意。在 FL-net 规格中 192.168.250 为缺省网络地址。    9-46
 权标监控超时时间的设定在 FL-net 的通信中,各节点按节点编号的升序使标记(发送权)循环。收到标记的节点将数据链接发送区域内的数据和消息数据(如有)分配到 1024 字节以下容量的一帧中进行发送,并在最后的一 帧中添加发往下一节点的标记。所谓权标监控超时时间是指发送权标的时间超过了从前一节点发送权标开始到下一节点地址发送权 标的时间的最大值,导致下一节点自动再次发送权标。如果连续发生 3 次此类情况,则该节点会脱离 通信链路,被排除在权标循环之外。设定为“自动”时,将自动根据发送区域的数据容量来计算、设定标记监视超时时间。此时的计算公式 如下所示。权标监控超时时间=(1 + 5) + (TBN + 1 + 1)*(1 + 5) ms 帧间各最大值          数据发送时间最大值 呼叫       1 ms权标5 ms信息帧 循环数据总块数帧间隔最大值(*2) 数据发送数据最大值(*1)1 ms 5 ms前节点的时间1 ms权标         *1 使用 10 Mbps 的通信线传送 1024 字节的数据所需时间。*2 最小容许帧间隔最大值。(详细内容参见下章)想要手动设定标记监视超时时间时,请取消“Auto(自动)”复选框中的勾选,自行设定时间。可以设定的 值的范围为 10~255。 在设定权标监控超时时间内无法发送权标时发生“EA”错误,出现通信异常。此时应再次设定权标监控超时 时间,使时间更长一些。9-47
 最小允许帧间隔的设定 帧间隔就是在数据帧和数据帧之间,电路上不流通数据状态的时间。数据帧  数据帧     帧间隔时间 在 FL-net 通信中设定有各节点的最小容许帧间隔,始终发送该设定值。 各节点时常监视其他节点的 最小允许帧间隔,且所有节点的最大值均为有效。最小允许帧间隔可在 0~5 ms 的范围内设定,但 是,最小允许帧间隔设定为 1 ms, 3 ms, 5 ms 的 3 种节点混合在一起时,则 5 ms 为有效,线路上传 输的所有数据帧的间隔将变为 5 ms。此参数能够调整单位时间内电路上流经的数据,使处理速度慢的节点也能参加通信。 在 PC10G-CPU 中最小容许帧间隔的缺省设定为 1 ms。9-48
9.5 9.5.1内置以太网功能 对以太网功能进行说明。以太网规格    No.   项目   规格    1   物理层   10 BASE-T/100 BASE-TX    2     传输速度     10 Mbps, 100 Mbps    3   最大电缆长度*1   Max 100 m(节点 - 节点间(1 对 1 连接时)、节点 - HUB 间、 HUB - HUB 间)    4   通信功能   计算机链接功能(仅 TCP)*2 文件存储器功能(仅 TCP)*2    5    可开放的端口数量  计算机链路时 最多 32 端口    文件存储器时 最多 8 个端口    6     计算机链路数据容量     最大 1 K 字节    7 文件内存容量  发送 2 K 字节 接收 2 K 字节 9.5.29.5.39.5.4*1 指定的 HUB 为自动协议。连接了自动协议之间时为 100 Mbps。*2 未对应 UDP。通过计算机链路方式通信根据其它节点发送的指令进行 CPU 内的数据读/写。由于是通过以太网进行指令分析以及与 CPU 之间进 行数据交换。因此,不需要数据交换所需的顺序程序。其它节点的链接对象为电脑等的主机,所以不能在 TOYOPUC 之间发送接收信息。 详细内容请参照 PC3J/2J FL/ET-T-V2H 模块或 2PORT-EFR 的使用说明书。通过文件存储器方式通信通过顺序程序的应用命令 SPR、SPR2(文件存储器读出)、SPW、SPW2(文件存储器写入)进行以太 网内的文件读/写进行发送和接收。其他节点不仅与个人电脑等主机,也可与其他 PC10G 的以太网,或 PC3J/2J 的 FL/ET-T-V2、FL/ET-T-V2H、 2PORT-EFR 模块之间进行通信。(不能与其它制造商生产的以太网模块进行通信。)详细内容请参照 PC3J/2J FL/ET-T-V2H 或 2PORT-EFR 模块的使用说明书。 PING测试功能PING 测试就是确认与通信对象的通信电路是否连接,通信是否正常的测试。 PING 测试没有通过时可能因为以下的原因。• 没有连接电缆,或者接触不良。• 对方节点之间的通信设备(HUB 等)发生故障。• 对象节点没有启动。• 自节点或者对象节点的 IP 地址重复。• 自节点和对象节点的 IP 地址的网络 ID 不同。(详细内容请参照 PC3J/2J FL/ET-T-V2H 或 2PORT-EFR 模块的使用说明书。)9-49
9.5.5进行PING测试的方法进行 PING 测试时 TOYOPUC-Nano 的以太网在根据分配的链路 No.确定的以下地址中通过外设等以 16进制数设定对象节点的 IP 地址。    链路 No.    对象节点 IP 地址写入目标地址   1 S31C~S31D    2  S33C~S33D    3    S35C~S35D   4 S37C~S37D    5  S39C~S39D    6    S3BC~S3BD   7   S3DC~S3DD   8   S3FC~S3FD  例如,以太网的链路 No.1 对象节点的 IP 地址为 172.16.93.133 时,“5D85”设定在 S31C 中,“AC10”设定 在 S31D 中。PING 测试结束后请将这些值恢复为 0000。每二秒钟反复进行依次 PING 测试,结果设定在文件存储器地址 106 的第 3 位和第 4 位上。如果第 3 位 处于 ON 状态,则“PING 测试 OK”。如果第 4 位处于 ON 状态,则“PING 测试 NG”。PING 测试的结果可 通过监控状态监控区域进行确认。为了从文件存储器中读出数据,需要安装使用 SPR 指令的顺序程序。(详细内容请参照 PC3J/2J FL/ET-T-V2H 或 2PORT-EFR 模块的使用说明书。)9-50
9.5.6状态监控功能通过监控 CPU 模块的特殊寄存器、S300 号台,可以监控模块的状态。 可以通过特殊寄存器进行监视的连接为 1~8。对于 9~32,使用 SPR2 命令,监视状态。应该监控的地址由连接器 No.决定,如下所示。    链路 No.  对象节点 IP 地址写入目标地址    1    S300~S30F   2   S320~S32F   3 S340~S34F    4  S360~S36F    5    S380~S38F   6 S3A0~S3AF    7  S3C0~S3CF    8  S3E0~S3EF  通过相关装置监控此区域,可以看到如下图所示的文件存储器的控制标记状态、链路异常代码等。MSB LSB FEDCBA9876543210S3#0 S3#1 S3#2 S3#3 S3#4 S3#5 S3#6 S3#7 S3#8 S3#9 S3#A S3#B S3#C S3#D S3#E S3#F     CN8           主动打开要求     CN1      0        0      0       0      0       0       0        *1       CN8   文件存储器接收请求       CN1    CN8           文件存储器发送要求       CN1       0        0      0      0      0      0      0        0      0       0      0      0      0      0      *3       *2             CN8 开放正常 CN1       0      0     0     0     0     0     *5    *4    CN8 文件存储器发送完成 CN1                     CN8 连接异常 CN1     0       0      0      0      *9  *8      *7   *6     CN8  文件存储器接收完成       CN1             自以太网地址第 4 位*10 自以太网地址第 5 位*10                  自以太网地址第 6 位*10      0      0      0      0      0      0      0      0                      连接器 1:连接器异常代码     连接器 2:连接器异常代码     连接器 3:连接器异常代码     连接器 4:连接器异常代码     连接器 5:连接器异常代码     连接器 6:连接器异常代码     连接器 7:连接器异常代码     连接器 8:连接器异常代码                                                                *1 初始化要求*2 错误记录发送确认*3 ICMP 记录发送确认*4 初始化正常*5 初始化异常*6 错误记录接收*7 ICMP 记录发送*8 PING 正常*9 PING 异常*10 以太网地址的前三位为 00.60.53(固定值)。9-51
9.5.7以太网通信处理时间以计算机链路方式和文件存储器方式通信时,传送延迟时间通过以下算式计算。但根据网络负载和系统组成,传送延迟时间有时会延长。通过下列算式求出的值是目标传送延迟时间的最小值。线路拥挤无法发送数据以及线路中的数据发生冲突时,内置以太网会等待由通信参数“Resend timer(再 次传送定时器)”指定的时间后再次试着进行传送。计算机链路方式从主计算机向线路发出指令到内置以太网向线路发送响应的时间。主计算机 TOYOPUC-Nano(1)       • 协议为 TCP/IP 时• 链路参数设定为“Ethernet(以太网)”时传送延迟时间 = 6 +(1 + 0.001 × 指令字节数 + 0.002 × 响应字节数)× 使用连接器数 + 顺序扫描时间*1(ms)• 链路参数设定为“Ethernet (32 ports)(以太网(32 端口))”时传送延迟时间 = 6 +(1.5 + 0.002 × 指令字节数 + 0.002 × 响应字节数)× 使用连接器数 + 顺序扫描时间*1(ms)• 协议为 UDP/IP 时• 链路参数设定为“Ethernet(以太网)”时传送延迟时间 = 6 +(0.5 + 0.002 × 指令字节数*2 + 0.002 × 响应字节数*2)× 使用连接器数 + 顺序扫描时间*1(ms)• 链路参数设定为“Ethernet (32 ports)(以太网(32 端口))”时传送延迟时间 = 6 +(1 + 0.003 × 指令字节数*2 + 0.003 × 响应字节数*2)× 使用连接器数 + 顺序扫描时间*1(ms)*1 顺序扫描时间超过 25 ms 时按 25 ms 计算。*2 指令字节数、响应字节数为计算机链路方式的 TOYOPUC 数据部分的字节数。9-52
(2) 文件存储器方式在TOYOPUC TOYOPUC-Nano 的内置以太网同类产品之间通信时,为从发送侧发送标记处于 ON 状态开 始到接收侧寄存器读出接收的数据,接收确认标记处于 ON 状态,向发送侧返送响应,发送侧发送完成标 记处于 ON 状态为止的时间。TOYOPUC-NanoTOYOPUC-Nano        文件寄存器发送 → ← 响应发送   • 协议为 TCP/IP 时• 链路参数设定为“Ethernet(以太网)”时传送延迟时间 = 9 +(1 + 0.005 × 发送数据字节数*1)× 使用连接器数 + 发送侧顺序扫描时间 × 3 + 接收侧顺序扫描时间 × 6(ms)• 链路参数设定为“Ethernet (32 ports)(以太网(32 端口))”时传送延迟时间 = 11 +(1.5 + 0.005 × 发送数据字节数*1)× 使用连接器数 + 发送侧顺序扫描时间 × 3 + 接收侧顺序扫描时间 × 6(ms) • 协议为 UDP/IP 时• 链路参数设定为“Ethernet(以太网)”时传送延迟时间 = 7 +(1 + 0.005 × 发送数据字节数*1)× 使用连接器数 + 发送侧顺序扫描时 间×3+ 接收侧顺序扫描时间 ×6(ms)• 链路参数设定为“Ethernet (32 ports)(以太网(32 端口))”时传送延迟时间 = 8 +(1.5 + 0.005 × 发送数据字节数*1)× 使用连接器数 + 发送侧顺序扫描时间 × 3 + 接收侧顺序扫描时间 × 6(ms)*1 发送数据字节数为发送文件存储器数据的字节数(LL, LH 的值)。9-53
9.5.8 以太网的初始设定 9.5.8.1 初始设定步骤  开始设定 I/O 模块    链路模块名的设定    链路参数的详细设定或取决于顺序程序的通讯参数设定  (1) 链接模块名称的设定打开或关闭电源或者复位/启动通过外设的“Parameter(参数)” → “Link Parameter(链路参数)”的链路设定选择分配支架 No.时隙 No., 并将链路模块名设定为“Ethernet (32 ports)(以太网(32 端口))”进行以太网设定。 使用程序分割模式时,还要正确选择程序号码。 9-54
(2) 通信参数的设定(2) - 1 通信参数的种类通信参数有以下几种。[1] 自身节点 IP 地址用 0~255 中的 4 个数字设定以太网中分配的 IP 地址。但不得使用 0.0.0.0 和 255.255.255.255。另外,网络上如果存在设定了相同 IP 地址的节点,则通信将不能正常进行。IP 地址分为网络 ID 和主机 ID,通信对象的 IP 地址必须与网络 ID 相同。(详细内容请参照 TOYOPUCNano 2ET 的使用说明书。)[2] 链接 1~32 使用在以太网中设置了 1~32 的 32 个连接器,其中每个连接器都将设定使用哪个连接器。 设定为“使用”的连接器,如果没有正确设定协议、开放方式和端口 No.则无法正确设定其它节点表 No. 从而发生错误。[3] 协议、开放方式设定使用 TCP/IP 还是 UDP/IP 协议进行通信,另外,选择 TCP/IP 时还设定连接器的打开/关闭。 TCP/IP 在开始通信前打开线路的连接,并在通信结束时进行连接的关闭或复位处理。UDP/IP 不用执 行该手续即可开始/结束通信。另外,TCP/IP 可通过 ACK(应答)响应来确认通信数据有无送达对方,未能确认时,要进行数据的重发。UDP/IP 中不进行这种传输确认,因此,发送的数据有时会由于线 路上的数据冲突等而消失,并未送达对方。(i) TCP 主动通过 TCP/IP 协议从以太网打开对象节点的线路的模式。(ii) TCP 对方特定被动通过 TCP/IP 协议从其它节点标指定的对象节点打开线路的模式。与 IP 地址或端口 No.指定的不      同的对象即使发出线路开放要求线路也不会打开。(iii) TCP对方不特定被动为 TCP/IP 协议,是从对方节点打开线路的模式。对方节点的 IP 地址及端口 No.不特定。是通常      与计算机进行通信时使用的模式。(iv) UDPUDP 未对应。请设定 TCP 主动或 TCP 被动。[4] 自身节点端口 No.设定各连接器端口 No.。端口 No.必须设定在 1025~65534(16 进制数 0401~FFFE)范围内。 设定时,请不要使自节点端口 No.与其他连接器的自节点端口 No.重复。[5] 其他节点表 No.选择“TCP Active(TCP 主动模式)”或者“TCP Destination - Specified Passive(TCP 对象特定被动模式)”或者“UDP”时,必须指定对象节点的 IP 地址和端口 No.对象节点的 IP 地址和端口 No.设定在 1~32 其它节点表中,通过其它节点表 No.来指定使用其中哪个其它节点表。[6] 使用其他节点表 1~32最为通信对象的其它节点的 IP 地址和端口 No.最大可设定至 32 个节点。 设定其它节点 IP 地址和其它节点端口 No.的其它节点表请设定为“Used(使用)”。[7] 其他节点 IP 地址[1]是其它节点的 IP 地址。设定 4 个 0~255 范围内的数字。 只有在设定为“Used(使用)”的其它节点表中才需要设定。9-55
[8] 其它节点端口 No.指定其它节点的端口 No.。端口 No.必须设定在 1025~65534(16 进制数 0401h~FFFEh)范围内。 只有在设定为“Used(使用)”的其它节点表中才需要设定。[9] 子网掩码、网关 IP 地址自节点 IP 地址与通信对象的 IP 地址的网络 ID 不同时,必须设定子网掩码、网关 IP 地址。 (详细内容请参照 PC3J/2J FL/ET-T-V2H 或 2PORT-EFR 模块的使用说明书。)[10] 等待重置重传次数在 TCP 连接器中,相对于发送的数据,如果对象没有返回 ACK(接收确认信号)时,则按照此处设 定的次数重发数据,重发后依然不能接收到 ACK 时,则通过以太网重新启动连接器。此时,会发生 连接器错误代码为 4013 得连接器异常。该连接器错误代码会在再次打开连接器时被清除。 设定为“Disable(未设定)”时,会无限量反复发送,而不进行连接器的重新启动。在通信中对方电源中断,而以太网侧的连接器仍处于打开状态时,解释对方要再次打开连接器,连接 器也不会正常打开。为了避免出现上述问题,建议设定“等待重新启动的重发次数”。(可设定范围:3~10 次,缺省:10 次) ■ 参考在 1 台设备的节点(个人电脑及 PC 模块等具备以太网通信功能的装置)中设置固有的 IP 地址。如果在多个节点上设定相同的 IP 地址,则无法进行正常通信。可在各节点上设定多个端口 No.每个节点内的端口 No.不得重复。各端口可进行单独通信。使用 TCP 协议时,要确定由哪一方打开连接器,此时,应将打开方指定为“主动”,被打开方指定为“被动”,进 行通信得端口之间其端口 No.不必相同。设定示例打开侧 被打开侧IP address 192.168.1.1Port No.6000 Port No.6001 Port No.6002IP address 192.168.1.0 Port No.2001Port No.1025Port No.1020IP address 192.168.1.2 Port No.2000Port No.3000Port No.4000Port No.4500                       下面设定通信所用定时器。通常不必进行本项设定或进行变更。9-56
[11] 无接收计时器在 TCP 中设定的连接器内,在以“Non-Reception Timer(无接收定时器)”设定的秒数或者分钟数的时间内,如果没有接收到来自对象节点发送数据时,则通过以太网重新启动连接器。设定为“Disable (未设定)”时,不能通过以太网重新启动连接器,会无限期地等待来自对象节点的数据。(可设定范围:1 秒~255 分钟,缺省:无限期等待)[12] 响应计时器集中设定以下的计时器。• 等待主动打开指令响应的定时器• 分割接收数据时的后续数据接收定时器(TCPUDP) • ·对于文件存储传输的响应监视计时器可设定范围:1~255 秒 ,缺省:6 秒)* 下述重发计时器、关闭计时器、数据包生存时间、IP 组装计时器在 Nano CPU 内置以太网中不使用。[13] 重发定时器(数据)是在发送数据之后,等待来自对方节点的 ACK(接收确认信号)的计时器。超过该设定时间仍未收 到 ACK 时重发数据。(可设定范围:200 ms~60 秒,缺省:500 ms)[14] 重发定时器(SYN/FIN)与 SYN(打开对象节点的连接器)或者 FIN(关闭对象节点的连接器)对应的响应等待定时器。超 过该设定时间仍未收到 ACK 时重发数据。(可设定范围:200 ms~60 秒,缺省:500 ms)[15] 关闭计时器从自节点关闭连接器时,从自节点发送 FIN,如果收到来自对象节点的 FIN 接收则关闭。从自节点发 送 FIN 后,超过该设定时间后,对象节点认为收到 FIN 时重新启动连接器。(可设定范围:2~60 秒,缺省:10 秒)[16] 数据包生存时间TTL (time to live) 设定值:每次通过 IP 路由器时一个一个减少的值。 (可设定范围:1~255 次,缺省:10 次)[17] IP 组合计时器分割的包的组合待机时间 (可设定范围:1~255 秒 ,缺省:10 秒) 9-57
(2) - 2 通信参数的设定方法参数的设定用 PCwin2 进行。在链接参数设定画面中选择“initialized based on Initial Sequence Program(根据初始化顺控程序进行初 始化)”时,不会动作。(1) 通过链接参数进行设定的方法在“Link parameter setup(链路参数的设定)”画面中选择“Ethernet(以太网)”,单击“Detail (D)(详 细设定)”按钮,显示通信参数设定画面。在该画面上设定• 自节点 IP 地址、• 使用连接器 1~32• 协议、打开方式• 自节点端口 No.• 其它节点表 No.然后根据需要,通过左下角的按 钮,设定其他节点表、各种计时器、 子网掩码、网关 IP 地址。   9-58
单击“Other Node Table(各种定时器的设定)”按钮,则显示各种定时器的设定画面  单击“Timers(各种定时器的设定)”按钮,则显示各种定时器的设定画面。在该画面上设定• 使用表 1~32• 其它节点 IP 地址• 其他节点端口 No. 9-59
点击[Sub-net Mask and Gateway IP Address(子网掩码、网关 IP 地址)]按钮后,就会显示子网掩 码及网关 IP 地址的设定画面。初始值全部为 0。变更时请单击“Change(变更)”按钮。单击“Default(初始值)”则返回初始状态。注意: 在外设上读出用顺序程序进行以太网初始化的 CPU 模块参数,通过以太网的链路参数详细设定 设定通信参数时,通常输入缺省值的项目全部为零。此时,请暂时先返回“链路设定”,按“Clear (清除)”、“OK”后,再次设定以太网。(2) 通过顺序程序进行设定的方法 基于顺控程序进行的设定为未对应。  9-60
• 通信参数寄存器数据的设置将数据设定在寄存器中之后,通过 SPW 指令向以太网中写入通信参数。 以下列举通信参数以及将其写入文件存储器的顺序程序例示。通信参数例自节点 IP 地址=192.168.1.2 (C0.A8.01.02h)使用连接器 No.1,2,3 和其它节点表 No.1,2连接器 1: TCP 主动, 端口 No.6000 (1770h), 其它节点表 No.1连接器 2: TCP 对象特定被动, 端口 No.6001 (1771h), 其它节点表 No.2 连接器 3: TCP 对象不特定被动, 端口 No.6002 (1772h)其它节点表 1: IP 地址 = 192.168.1.1 (C0.A8.01.01h), 端口 No.8000 (1F40h) 其它节点表 2: IP 地址 = 192.168.1.3 (C0.A8.01.03h), 端口 No.8001 (1F41h)通过 R0104 设定初始化参数时    寄存器数据   设定数据   数据内容    R0104     0102     自节点 IP 地址(低位)    R0105 C0A8 自节点 IP 地址(高位)    R0106   0307   使用表(1, 2)/使用连接器(1, 2, 3)    R0107     0000     使用连接器(9~16)    R0108 0000 连接器 1:TCP 主动    R0109     1770     连接器 1:端口 No.    R010A 0001 连接器 1:其它节点表 No.    R010B     0000     0000 固定    R010C 0100 连接器 2:TCP 对象特定被动    R010D   1771   连接器 2:端口 No.    R010E     0002     连接器 2:其它节点表 No.    R010F 0000 0000 固定    R0110   0200   连接器 3:TCP 对象不特定被动    R0111     1772     连接器 3:端口 No.    R0112   0000   连接器 3:其它节点表 No.    R0113   0000   0000 固定    R0114 | R0127 0000 由于不使用连接器 4~8,因此不必设定。    R0128   0101   其它节点表 1:其它节点 IP 地址(低位)    R0129     C0A8     其它节点表 1:其它节点 IP 地址(高位)    R012A 1F40 其它节点表 1:其它节点端口 No.    R012B   0000   0000 固定    R012C     0103     其它节点表 2:其它节点 IP 地址(低位)    R012D   C0A8   其它节点表 2:其它节点 IP 地址(高位)    R012E 1F41 其它节点表 2:其它节点端口 No.    R012F      0000     0000 固定  注: CPU 模块的寄存器数据为 16 bit 字数据,因此将文件存储器中的 2 个字节用一个寄存器数据表示。9-61
• 向以太网模块传送通信参数·初始化要求打开 顺序程序例使用功能命令中的 SPW 将设定在寄存器中的通信参数传送给以太网模块。关于 SPW 命令,请参照TOYOPUC NANO 2ET 的使用说明书。 下面列举将前页的通信参数写入以太网的文件存储器中,并将初始化请求标志为 ON 时的示例。       V006仅限第 1 扫描 ON 时的特殊继电器V090 P001 链接 1可使用标记V006V006V090 P002[WMOV 5058 → R010 ] (链路 5,传送 58h 字节)[WMOV 1208 → R011 ] (1208h = R104 的间接地址 (1000h + 104h*2))从以太网模块(在本 例中为链路 No.5)的 文件存储器地址     [WMOV 0008 → R012 ]   0008 写入从 R0004  (0008h = 文件存储器写入起始地址) [SPW R010 R011 → R012 ](向文件存储器写入込)[WMOV 0001 → R100 ] (使初始化要求标记 ON 的数据)[WMOV 5001 → R013 ] (链路 5,传送 1 字节)[WMOV 1200 → R014 ] (1200h = R100 的间接地址 (1000h + 100H*2))[WMOV 0000 → R015 ] (0000h = 文件存储器写入起始地址)[SPW R013 R014 → R015 ] (向文件存储器写入込)到 R012F 的数据。                           向文件寄存器地址 0000 中写入为了打 开设定在 R0001 中 的初始化要求而写 入的数据            如果通信参数异常,CPU 模块会出现通信异常“E6”。请参考“5.5.4. 通信异常”,重新设定通信参数。9-62
            0000 0001 0002 0003 0004 0005 0006 0007 0008 0009 000A 000B 000C 000D 000E 000F 0010 0011 0012 0013 0014 0015 0016 0017 0018 0019 001A 001B 001C 001D 001E 001F 0020 0021 0022 0023 0024 0025 0026 0027(00 固定)1:初始化要求1     1~8:连接器 1~8 1     1~8:连接器 1~8 1     1~8:连接器 1~8主动打开要求(1:要求) 发送要求(1:要求) 接收确认(1:确认)• 文件存储器通信参数设定地址bit7 bit0                     8 8765432                  765432                  8 1(00 固定) 1 (00 固定)1:错误记录接收确认,2:ICMP 记录接收确认765432              2        (00 固定) (00 固定)自节点 IP 地址 00000001~FFFFFFE(低位)(高位)       7    6   5  4  3    2    7  6 54 3  2  15    14   13  12  11    10     8               1   81       1~8:使用连接器(1:使用)  16               9(00 固定) 连接器打开方式自身节点端口 No. (低位) 连接     0401h~FFFEh (高位)1~16:使用表(1:使用)TCP 主动打开:0000h,TCP 对象特定被动打开:0100hTCP 对方不特定被动开放:0200h, UDP: 0001hTCP 主动打开:0000h,TCP 对象特定被动打开:0100h TCP 对方不特定被动开放:0200h, UDP: 0001hTCP 主动打开:0000h,TCP 对象特定被动打开:0100h TCP 对方不特定被动开放:0200h, UDP: 0001h                  器No.1其它节点表 No. (低位) 0001h~0010h (高位)(00 固定) 连接器打开方式                               自身节点端口 No. (低位) 连接     0401h~FFFEh (高位) 器No.2其它节点表 No. (低位) 0001h~0010h (高位)(00 固定) 连接器打开方式                               自身节点端口 No. (低位) 连接     0401h~FFFEh (高位) 器No.3其它节点表 No. (低位) 0001h~0010h (高位)(00 固定)                   9-63
         0028 0029 002A 002B 002C 002D 002E 002F 0030 0031 0032 0033 0034 0035 0036 0037 0038 0039 003A 003B 003C 003D 003E 003F 0040 0041 0042 0043 0044 0045 0046 0047 0048 0049 004A 004B 004C 004D 004E 004F 0050 0051 0052 0053 0054 0055 0056 0057连接 器 No.4连接 器 No.5连接 器 No.6连接 器 No.7连接 器 No.8表No.1连接器打开方式 自身节点端口 No.0401h~FFFEh 其它节点表 No.0001h~0010h (00 固定)连接器打开方式 自身节点端口 No.0401h~FFFEh 其它节点表 No.0001h~0010h (00 固定)连接器打开方式 自身节点端口 No.0401h~FFFEh 其它节点表 No.0001h~0010h (00 固定)连接器打开方式 自身节点端口 No.0401h~FFFEh 其它节点表 No.0001h~0010h (00 固定)连接器打开方式 自身节点端口 No.0401h~FFFEh 其它节点表 No.0001h~0010h (00 固定)其它节点 IP 地址 00000001~FFFFFFE其它节点端口 No. 0401h~FFFEh(00 固定)(低位)(高位)(低位)(高位)(低位)(高位)(低位)(高位)(低位)(高位)(低位)(高位)(低位)(高位)(低位)(高位)(低位)(高位)(低位)(高位)(低位)(高位)(低位)(高位)TCP 主动打开:0000h,TCP 对象特定被动打开:0100h TCP 对方不特定被动开放:0200h, UDP: 0001hTCP 主动打开:0000h,TCP 对象特定被动打开:0100h TCP 对相不特定被动打开:0200h, UDP: 0001hTCP 主动打开:0000h,TCP 对象特定被动打开:0100h TCP 对方不特定被动开放:0200h, UDP: 0001hTCP 主动打开:0000h,TCP 对象特定被动打开:0100h TCP 对方不特定被动开放:0200h, UDP: 0001hTCP 主动打开:0000h,TCP 对象特定被动打开:0100h TCP 对方不特定被动开放:0200h, UDP: 0001h                                                                                                       9-64
          0058 0059 005A 005B 005C 005D 005E 005F 0060 0061 0062 0063 0064 0065 0066 0067 0068 0069 006A 006B 006C 006D 006E 006F 0070 0071 0072 0073 0074 0075 0076 0077 0078 0079 007A 007B 007C 007D 007E 007F 0080 0081 0082 0083 0084 0085 0086 0087(低位)表No.2表No.3表No.4表No.5表No.6表No.7(高位) 其它节点端口 No. (低位)0401h~FFFEh (高位) (00 固定)(低位)其它节点 IP 地址 00000001~FFFFFFE(高位) 其它节点端口 No. (低位)0401h~FFFEh (高位) (00 固定)(低位)其它节点 IP 地址 00000001~FFFFFFE(高位) 其它节点端口 No. (低位)0401h~FFFEh (高位) (00 固定)(低位)其它节点 IP 地址 00000001~FFFFFFE(高位) 其它节点端口 No. (低位)0401h~FFFEh (高位) (00 固定)(低位)其它节点 IP 地址 00000001~FFFFFFE(高位) 其它节点端口 No. (低位)0401h~FFFEh (高位) (00 固定)(低位)其它节点 IP 地址 00000001~FFFFFFE(高位) 其它节点端口 No. (低位)0401h~FFFEh (高位) (00 固定)其它节点 IP 地址 00000001~FFFFFFE                                                                                  9-65
          0088 0089 008A 008B 008C 008D 008E 008F 0090 0091 0092 0093 0094 0095 0096 0097 0098 0099 009A 009B 009C 009D 009E 009F 00A0 00A1 00A2 00A3 00A4 00A5 00A6 00A7 00A8 00A9 00AA 00AB 00AC 00AD 00AE 00AF 00B0 00B1 00B2 00B3 00B4 00B5 00B6 00B7(低位)表No.8表No.9表No.1 0表No.1 1表No.1 2表No.1 3(高位) 其它节点端口 No. (低位)0401h~FFFEh (高位) (00 固定)(低位)其它节点 IP 地址 00000001~FFFFFFE(高位) 其它节点端口 No. (低位)0401h~FFFEh (高位) (00 固定)(低位)其它节点 IP 地址 00000001~FFFFFFE(高位) 其它节点端口 No. (低位)0401h~FFFEh (高位) (00 固定)(低位)其它节点 IP 地址 00000001~FFFFFFE(高位) 其它节点端口 No. (低位)0401h~FFFEh (高位) (00 固定)(低位)其它节点 IP 地址 00000001~FFFFFFE(高位) 其它节点端口 No. (低位)0401h~FFFEh (高位) (00 固定)(低位)其它节点 IP 地址 00000001~FFFFFFE(高位) 其它节点端口 No. (低位)0401h~FFFEh (高位) (00 固定)其它节点 IP 地址 00000001~FFFFFFE                                                                                  9-66
           00B8 00B9 00BA 00BB 00BC 00BD 00BE 00BF 00C0 00C1 00C2 00C3 00C4 00C5 00C6 00C7 00C8 00C9 00CA 00CB 00CC 00CD 00CE 00CF 00D0 00D1 00D2 00D3 00D4 00D5 00D6 00D7 00D8 00D9 00DA 00DB 00DC 00DD 00DE 00DF(低位)  其它节点 IP 地址 00000001~FFFFFFE   表   (高位)No.1 4其它节点端口 No. (低位) 0401h~FFFEh (高位)             (00 固定)其它节点 IP 地址 00000001~FFFFFFE(低位)                表   (高位)No.1 5其它节点端口 No. (低位) 0401h~FFFEh (高位)             (00 固定)其它节点 IP 地址 00000001~FFFFFFE(低位)               表   (高位)No.1 6其它节点端口 No. (低位) 0401h~FFFEh (高位)             (00 固定)子网掩码网关 IP 地址 00000001~FFFFFFE(00 固定)(低位)(高位)(低位)(高位)                   9-67
     响应计时器         (低位)     (高位)   无接收定时器      (低位)   (高位) 重发定时器(数据)    (低位)     (高位)   重发定时器(SYN/FIN)         (低位)     (高位)    关闭定时器    (低位)     (高位)  数据包生存时间     (低位)     (高位)   IP 组合计时器        (低位)   (高位)    重置等待重发次数       (低位)     (高位)                 (00 固定)                   00E000E100E200E3                 • 00E400E500E600E700E800E900EA       • 00EB00EE00EF00F000F1     • 00F200F3 00F4 00F5 00F6 00F7 00F8 00F9 00FA 00FB 00FC 00FD 00FE 00FF• 响应计时器以秒为单位设定。(6 秒时 → 0006h)无接收计时器 以秒为单位或以分钟为单位设定。以秒为单位时用 16 进制 数表示的最高位上的位为 1。不设定时为 0。(30 秒 → 101Eh,2 分钟 → 0002h,无限等待 → 0000h)• 重发定时器(数据)・重发定时器(SYN/FIN)以 1 秒或 100 ms 为单位设定。以 100 ms 为单位时用 16 进制数表示的最高位上的位为 1。(500 ms → 1005h,2 秒 → 0002h)关闭计时器以秒为单位设定。(5 秒 → 0005h)• 数据包生存时间00ED       以一次为单位设定。(10 次 → 000Ah) • IP 组合定时器以一次为单位设定。 (10 次 → 000Ah) 等待重置重传次数 以一次为单位设定。 (10 次 → 000Ah) 00EC  9-68
9.6 SN-I/F功能在链路参数中未将支架号设定为内置,插槽号设定为选件时,SN-I/F 自动被选择为链路目的地,与TOYOPUS-PCS 连接。 数据链路区域也自动设定为固定值,所以不能变更。连接 TOYOPUC-PCS 时,应置于 L3-422-ON、L3-LT-ON 位置。 未连接 TOYOPUC-PCS 时,应置于 L3-LT-OFF 位置。(1) 链路规格      项目   规格        数据链路功能    I/O:32 字节、寄存器:32 字节      传输距离       最远 3m(只限于局内通信)    数据形式 奇偶性 ········1 位(偶数) 数据长度 ·····8 位结束位 ········1 位      同步方式      起止同步模式   传输方式     半双工方式(2 线式)    通信速度 288 kbps      电缆      带屏蔽的双绞线  (2) 数据链路区域不与 TOYOPUC-PCS 通信(S130 的 bit0 为 OFF)时,输入数据设定在 OFF 数据。(3) 特殊寄存器通过 S130(通信状态信息)可确认与 TOYOPUC-PCS 间的通信状态或 TOYOPUC-PCS 的工作状态。即使在 TOYOPUC-PCS 间的通信停止的状态下,也不进行异常报警。可通过 S130 的 bit0 的通信中标记 确认。   项目          链路区域   备注 I/O          输入      EVE00-EVEFF      32 字节(256 点)    输出     EVF00-EVFFF     32 字节(256 点)     寄存器      输入 S140-S14F 32 字节    输出      S150-S15F     32 字节        寄存器       内容       S130 通信状态信息bit0:正在通信(ON:与 TOYOPUC-PCS 正在通信)bit1:RUN 信号(ON:TOYOPUC-PCS 处于 RUN 状态)bit2:ERR0 信号(ON:在 TOYOPUC-PCS 发生 ERR0)bit3:ERR1 信号(ON:在 TOYOPUC-PCS 发生 ERR1)bit4:ALM 信号(ON:在 TOYOPUC-PCS 发生 ALM) bit8:链路命令可使用标记(ON:可以对 TOYOPUC-PCS 发出链路命令) bit9:链路命令异常(ON:发出的链路命令发生异常)     S131      成帧异常次数    S132 奇偶异常次数     S133    溢出异常次数 9-69
9.7 内置FL远程M功能 (1) FL远程规格      项目   规格        传输速度       10 Mbps, 100 Mbps    最大电缆长度*1 Max 100 m(主机 - HUB 间、主机 - 子机间(1 对 1 连接时)、子机 - HUB 间、HUB - HUB 间)总延长距离:Max 2100 m(HUB:Max20 台)     最大连接节点数       64 台(其中主机 1 台,子机 63 台)    节点地址 子机:01~63      I/O 点数       输入:最大 2048 位,输出:最大 2048 位    1 个子机的 I/O 点数 输入:最大 64 位,输出:最大 64 位      I/O 的分配   最小 8 点单位      链路区域   X·Y, M, L, EX·EY, EM, EL, GX/GY, GM        通信功能   I/O 通信 *1 指定的 HUB 和 FRMT 为自动协议。自动协商模式之间相互连接时,将达到 100 Mbps。 开关式 HUB:Max20 台    24VDC  Max 100m主机▪▪▪               子机 01子机 02Max 100m Max 100m▪ ▪ ▪子机 63     子机:Max63 台9-70
(2) 链路No.和链路区域链路参数可以对程序 1~3 的链路 1~8 进行任意设定。在链接区域设定内部继电器(M)或链接继电器(L)时,已设定链接参数的程序的继电器区域将成为链 接区域。输入输出(X·Y)区域和扩充区域(EX·EY, EM, EL, GX·GY, GM)为各程序共享区域。链路参数可以对程序 1~ 3 的链路 1~8 进行任意设 定。输入输出(X, Y)区域在 各程序中共通链路区域设定了内部继电器 (M)或链路继电器(L)时, 设定了链路参数的程序继电 器区域为链路区域。                                    扩充区域为各程序的共享区                                    域。 链路 1-1~1-8链接 2-1~2-8      程序 1 (PRG.1) 链接参数程序 2 (PRG.2) 链接参数   PRG.1 内部继电器 (M)PRG.2 内部继电器 (M)   PRG.1 链路继电器 (L)PRG.2 链路继电器 (L)链接 3-1~3-8程序 3 (PRG.3) 链接参数  输入输出(X·Y)PRG.3 内部继电器 (M)  PRG.3 链路继电器 (L)   扩充输入输出(EX·EY, GX·GY)扩充内部继电器 (EM, GM)扩展链接继电器 (EL)            9-71
(3) 通信区域中使用输入输出(X, Y)时的注意事项1) 注意不要使安装 CPU 的 I/O 模块的 I/P 地址与通信区域重复。  X/Y000 X/Y000 X/Y000X/Y7FF X/Y7FF X/Y7FF        良好    X/Y000X/Y7FFX/Y000X/Y7FF   在输入输出之间加入     通信区域时X/Y000X/Y7FF                    输入输出与通信 区域重复在通信区域之后有输  入输出时   不可 CPU 的 I/O 区域 FL 远程的通信区域CPU的I/O区域与FL远程的 通信区域重复的区域        2) 应用命令的 I/O 更新(RIO, FUN No. = 280)、输入更新(RI, FUN No. = 281)输出更新(RO, FUN No. = 282)不能在通信区域使用。3) 通信区域的地址使用了 Y 时,CPU 内部的地址标记全部成为 X。因此,用 I/O 监视器监视通信区域 时,将显示为 X。9-72
9.7.1接通电源的顺序投入电源时,请按照子站 → 主站的顺序,或同时投入。 按照主站 → 子站的顺序投入电源时,有时会引起通信异常。 另外,通信开始后,一旦切断子站的电源,就会引起通信异常。(4) 显示FL 远程的状态显示指示灯中有硬件状态、通信状态等两种。 硬件状态、通信状态的各指示灯中分别有绿色和红色的指示灯,通过亮灯/闪烁/熄灯来表示以下的状态。   指示灯名称       颜色      状态   状态定义   内容       硬件状态     绿           正常状态   模块正常状态     未设定状态  正在初始化  红          致命故障   硬件异常       轻微故障    链接参数异常    -  没有供给电源 • 没有向主机模块供给电源 • 正在复位• 初期处理开始等待     通信状态        绿          正常状态   网络正常状态       未连接状态    网络正常,但未确立通信状态    红    致命通信异常 网络上检测出不能通信的异常 • 节点地址重复       通信异常    部分子局通信异常     -       网络电源异常   未连接电缆  :灯亮 :闪亮 :灯灭   接通电源的顺序     结果   主局 → 子局        子局 → 主局           同时       主站对于投入电源时应答较慢的子站,最大在 18 秒钟内不会发生异常。 在此期间,主站将实施通信恢复操作。仍不能恢复通信时,将作为通信异常通告给 CPU。注1: 通信异常的解除请重置 CPU → 启动,或使通信重置特殊继电器为 ON。(详细内容参见“9.10.3. 通信复位”。)注2: 主站将在所有子站全部通信正常后继续通信。即使缺少 1 个站,也会作为通信异常而停止通信。(如 果使用脱离功能,则可以继续进行通信。详细内容请参照“9.10.4 脱离功能”。在 FL 远程中,可通 过链接参数的设定来选择通信异常时的通信停止进行/不进行。)9-73
9.7.2通信复位通信重置是因通信异常而停止通信时,使通信恢复的功能。 可通过使通信重置用特殊继电器由“OFF” → “ON”的方法对通信进行重置。 各链路 No.的通信复位用特殊继电器的 I/O 地址见下表。        链路号码   I/O 地址            1        V80     2 V81       3   V82       4   V83       5   V84       6   V85       7       V86     8    V87   注1: 通信复位功能仅在特殊继电器启动时有效。注2: 通信重置仅在通信异常时有效。通信正常时无效。通过重新启动CPU进行通信复位可通过 CPU 的重置开关来进行通信的重置。通信复位电路例在接通电源后 18 秒之内有通信回复动作,则不需要复位电路。 下图为回复通信异常时的通信所需电路例。 通信复位 按钮信号通信异常 特殊继电器VAAV82      通信复位通信异常         注1: 上图为链路 No. = 3 时的电路例。 通信异常特殊继电器、通信复位根据链路 No.而不同。注2: 通信异常时,如果是“CPU RUN Stop(CPU 的 RUN 停止)”的设定,则上述回路不会变为有效。9-74
9.7.3 分离功能主机在某个子站中发生通信异常时,会针对所有子站停止通信,并向 CPU 通告异常。所谓脱离功能,是指使特定的子站从通信网络上脱离(或重置)的功能。可通过此功能,使异常状态的子 站从通信网络上脱离开来,并对其他正常的子站继续进行通信。 脱离状态下的通信(1) 分离子机正常时主站向指定脱离的子站发送 I/O 的 OFF 数据。来自该子站的接收数据将被丢弃,并作为已接收 I/O 的 OFF 数据来运行。即使针对脱离子站的输出为 ON,通信上还是可以进行 OFF 数据的通信。 可与其他未指定脱离的子站,像通常那样进行 I/O 数据的通信。 在指定脱离的状态下,主站投入电源或进行通信重置时,也会进行 OFF 数据的交换。(2) 分离子机为通信异常时 主站在该子站的异常解除之前,继续进行通信恢复操作。在异常解除,并有正常应答后,开始进行 OFF 数据的交换。期间,可对其他子站,像通常那样进行 I/O 数据的通信。为了通报指定分离的子局出现了通信异常,主局会在 7 段显示器上显示错误代码 D9(传送异常)和 异常子局编号。(3) 分离指定被解除时子局为正常时········ 进行通常 ON/OFF 的 I/O 数据交换。 子局为异常时········ 为一般异常,进行异常通告,并停止对所有子局的通信。(4) 其它 主站在未指定脱离的子站发生通信异常时,要进行异常通告,并停止针对所有子站的通信。 脱离子站的指定通过在特殊寄存器 S3*C~3*F 上设定数据进行各子局分离状态的设定。各比特 No.表示节点地址(局号)。 MSBS3*C S3*D S3*E S3*F各位 = 1:指定分离 各位 = 0:未指定分离• 特殊寄存器的*部分取决于链路 No.。LSB   15      14  13      12  11      10  9      8  7      6  5      4    3    2    1    -   31       30 29       28 27       26 25       24 23       22 21       20    19    18    17   16   47     46    45      44    43      42    41     40    39      38    37      36      35     34     33     32   63      62  61      60  59      58  57      56  55      54  53      52    51    50    49    48      链路 No.    1    2  3    4  5   6    7    8    *            1         3      5          7      9        B          D        F   9-75
9.7.4 通信数据响应时间(1) 组成子机全部为 FRMT(TCU-6405, TCU-6406, TCU-6407)。 刷新处理 通信处理(2) 程序X120 Y100    将从子局的输入开始到子局输出为止的时间作为通信数据的响应时间。(3) 算式响应时间平均值 = 20 + 1.7 × (子机数) + (I/O 响应时间) + (扫描时间) × 2 [ms](子局)输入 X120输出 Y100    CPU内置FL 遥控主机 (主局)        FRMTFRMTFRMT           (参考)FRMT 输入输出响应时间规格 OFF → ON:1.5 ms 以下 ON → OFF:1.5 ms 以下9-76(100 Mbps 时)
9.7.5参数的设定在程序中设定“I/O Module(I/O 模块)”和“Link Parameter(链路参数)”。下面以 PCwin 为例说明参数的设定方法。注意1: 参数的变更、追加,请务必从 CPU 中读出“All programs + parameter(所有程序+参数)”后进 行。  下面对如下所示组成结构的参数设定方法进行说明。将 LS 连接在 i4 上 子局设定链路参数在参数菜单中选择“Link Parameter(链路参数)”,显示如下画面。(1)于 O2 处连接             9.7.5.1    (2)   9-77
〔链路模块名的设定步骤〕(1) 选择程序 No.和链路 No.。(2) 点击“Link setup(链路设定)”,显示如下画面。(3) (5)(6)(3) 设定安装模块的链路 No.。点击链路 No.栏中的   ,选择链路 No.(0~E)。(4) 设定安装模块的插槽 No.。点击插槽 No.栏中的 ,选择插槽 No.(0~7)。(5) 输入链路模块名点击链路模块名栏中的 ,选择链路模块。(6) 点击“OK(确定)”,显示如下画面,链路模块名设定完成。(4)                (7)   (7) 点击“Detail(详细设定)”,显示如下画面。9-78
〔详细设定的设定步骤〕 FL 远程 M 的详细设定(2)(3) (7)(4) (5)    (1)(9) (8)                   (6)        (10)  (1)“Link area(链路区域)” 设定通信区域的起始地址。最终地址将根据子站的传输字节数量的合计自动进行设定。可使用的 I/O地址如下所示。• 链路继电器:• 内部继电器:• 输入输出:L00L~L7FH, L1000L~L2FFFH, EL000L~EL1FFHM00L~M7FH, M1000L~M17FFH, EM000L~EM1FFH, GM000L~GMFFFH X, Y00L~X, Y7FH, EXY000L~EXY7FH, GXY000L~GXYFFFH注: 使用 X·Y 区域时,设定不得与 CPU 中使用的 I/O 重复。(2) “Node name(节点名称)” 输入 FL-远程 M 的名称。(3) “Slave setup(子站设定列表)”从子站设定列表中点击想要设定的子站 No.,并点击[Slave setup(子站设定)],进行子站的详细设  定。详细内容,请参照下页的子站设定。9-79
(4) “State of output in halt(RUN 停止时的输出状态)”设定 CPU 模块的 RUN 停止时的输出状态。设定在“Clear(清除)”上时,RUN 停止后,数据链接的 自身节点发送数据将全部变为 0。设定为“Hold(保持)”时,即便 RUN 停止,继续发送 RUN 停止前的数据。(5) “Communication stop in communication error(通信异常时的通信停止)”设定在通信异常时“stop(停止)”或“not stop(不停止)”通信。设定为“not stop(不停止)”时,则在通信异常时主机会向 CPU 发出异常警报,并继续与正常的子局   进行通信,等到异常的子局恢复正常后,自动再次开始与该子局进行通信。(6) “CPU operation in communication error(通信异常时的 CPU 动作)”设定模块发生异常时 CPU 的动作。设定为“RUN continued(RUN 继续)”时,则在通信异常时也不 停止运行。设定在“stop(停止)”上时,发生通信异常时,RUN 就会停止。(7) “Unconnected detecting effective I/O address list(未连接检测 有效 I/O 地址列表)”显示点击的子局设定一览表中的子局的未连接检测设定为“Enable(有效)”的 I/O 地址。(8) “Diagnosic Detail setup(诊断详细设定)”设定在该子局为 FRMT 系列时将诊断信息(通用状态、断路状态、未连接状态)保存在 CPU 的哪一 个区域。诊断信息的详细内容参见“9.10.6.诊断信息的收集”。(9) “Network(网络)” 不必进行与本项相关的设定。(10) 设定结束后,点击画面右上方的“OK(确定)”。 9-80
〔子局设定的设定步骤〕 FRMT 子站设定画面(1)(2)(3)(4)            (a)(b)   (1) “Slave connection setup(子站连接的设定)” 选择该子局是否连接通信线路。(2) “Transferred bytes setup(转送比特数的设定)” M: Master, S: Slave,← : 传送方向用 10 进制来设定相关子站的输入输出字节数量。在 M ← S 传输数量中设定输入字节数量,在 S ← M 传输数量中设定输出字节数量。I/O 地址的顺序按照传输数量设定栏的上段为前,下段为后的顺序进行分配。上述设定例中的 I/O 地址的顺序虽然是输入为前,输出为后,但点击[Transmission Direction(传输 方向)]后,传输方向将切换为输出为前,输入为后。各子局的传送字节数的设定范围为输入 0~128,输出 0~128。传输字节数量的合计为 256 字节以内。(3) “Extended setting(扩展设定)”相关子站为 FRMT 系列时,设定如下。(a) “Diagnosis function(诊断功能)”将 FRMT 系列的诊断功能设定为“Enable(有效)”或“Disable(无效)”。诊断信息的详细内容参见“9.10.8 诊断信息的收集”。(b) “Unconnected detecting Enable/Disable(未连接检测 有效/无效)”在各个接点上设定未连接检测功能的有效或无效。 有勾选的为有效,无勾选的为无效。00~3F 表示 I/O 地址。注: 即使将诊断功能设定为无效,FRMT 侧在诊断功能有效时设定的“Unconnected detecting Enable/Disable(未连接检测 有效/无效)”数据的值仍将保留下来。要将诊断功能设定为无效时, 请在诊断功能有效下,全部置于无勾选的,然后将电源由 OFF → ON,使诊断功能变为无效。(4) 设定结束后,请点击画面右上的[OK ]。   9-81
9.7.6 诊断信息的收集FL 远程除了 I/O 数据以外,还拥有“general-purpose status(通用状态)”、“short circuit data(短路信息)”、 “disconnection data(未连接信息)”、“validity/invalidity of the disconnection detecting function(未连接 检测功能的有效/无效信息)”等诊断信息。I/O 数据与诊断信息的流程 CPU经常进行 I/O 刷新I/O 通信从机(FRMT 系列)         主机(FL 远程 M)      I/O 分配 (1)(2)(3) (4) (5)      I/O 数据I/O 数据        通用状态  异常履历重置& 任意读出开关通用状态       链接参数I/O 数据 通用状态 异常履历重置& 任意读出开关      未连接检测功能有效/无效信息  设定值未连接检测功能有效/无效信息未连接检测功能有效/无效信息         短路信息短路信息短路信息          未连接信息未连接信息未连接信息          发生短路、未连接时进行 I/O 刷新发出指令 响应数据 通过FL远程的链接参数进行的I/O分配(详细内容请参照“9.10.7 通过链接参数进行的诊断信息的收集”)(1) I/O 数据:在“link area(链接顶部)”设定起始地址。(2) 通用状态和异常履历复位&任意读出开关:在扩充设定的“General-purpose status area(通用状态区域)”设定起始地址。(3) 未连接检测功能 有效/无效信息:在每个子站的 I/O 地址上设定“validity/invalidity of the disconnection detecting function(未连接检测 有效/无效)”。该数据在重新投入从机的电源后也仍然会保留。(4) 短路信息:在扩展设定的“Short-circuit state area(短路状态区域)”中设定起始地址。(5) 未连接信息:在扩展设定的“Unconnected state area(未连接状态区域)”中设定起始地址。注1: 通用状态、异常履历重置&任意读出开关、未连接检测功能 有效/无效信息、短路信息、未连接信 息对象从机是 FRMT 系列,且用链接参数设定为诊断功能“Enable(有效)”时为有效。注2: 将全部子站设定为诊断功能“Disable(无效)”时,节点 01~63 的通用状态及异常履历重置&任意 读出开关的数据因为经常进行 I/O 刷新,所以请在未使用区域进行设定。注3: 将“diagnosis function(诊断功能)”由“Enable(有效)”变更为“Disable(无效)”时,1) 在“diagnosis function(诊断功能)”为“Enable(有效)”的状态下,将所有 I/O 地址的“no-contactdetection(未连接检测)”设定为“Disable(无效)”。2) 写入参数后,重新接入电源,确认通信确立的情况。3) 将“diagnosis function(诊断功能)”设定为“Disable(无效)”。4) 写入参数后,重新接入电源,确认通信确立的情况。 9-82
9.7.6.1  根据链路参数收集诊断信息“general-purpose status(通用状态)”、“short-circuit data(短路信息)”、“disconnection data(未连接 信息)”在 CPU 上的 I/O 分配,以及“validity/invalidity of the disconnection detecting function(未连接检 测功能的有效/无效)”设定,用 PCwin2 设定在 FL 远程的链接参数中。链路参数的设定方法参见“9.7.7 参数的设定”。初始设定为“general-purpose status area(通用状态区域)”D000L-D003FH、“short-circuit information area (短路信息区域)”D0040L-D007FH、“Un-connect information area(未连接信息区域)” D0080L-D00BFH。通过 PCwin 进行 FL 远程链路参数设定的画面   子局的详细设定画面 “Diagnosis function(诊断功能)” 有效/无效 有效:在接入电源时,发送各子局 I/O 地址的 “Unconnected detection Enable/Disable(未连接检测 有效/无效)”设定信 息。无效:不发送“Unconnected detection Enable/disable(未连接检测 有效/无效)”设定信 息。各子局 I/O 地址将保留“diagnosis function enable(诊断功能 有效)”时所设定的信息。    “validity/invalidity of the disconnection detecting function(未连接检测功能)” 有效/无效在 I/O 地址上打勾进行设定。 有勾选:有效,无勾选:无效   将“Diagnosis function(诊断功能)”从“Valid(有效)” 设置为“Invalid(无效)”时,1) 在“Diagnosis function(诊断功能)”为“Valid(有效)”的状态下,将所有 I/O 地址的“Unconnecteddetection(未连接检测)”设定为“Invalid(无效)”。2) 写入参数后,重新接入电源,确认通信确立的情况。3) 将“Diagnosis function(诊断功能)”设定为“Invalid(无效)”。4) 写入参数后,重新接入电源,确认通信确立的情况。9-83
9.7.6.2 通用状态用链接参数进行通用状态的 I/O 分配后,可从所设定的起始地址 [+00L],将通用状态区域分配在 [+1FH] 上,从 [+20L],将异常履历重置&任意读出开关区域(详细内容请参照“9.10.6.3 异常履历重置&任意读出 开关”)分配在 CPU 上。通用状态和异常履历复位&任意读出开关数据以每个节点 1 个字节为单位进行分配。注意: 用“FRMT”链路参数将所有子局的诊断功能均设定为“Disable(无效)”时也会进行节点 01~63 的通用状态和异常履历复位&任意读出开关数据的分配。通用状态和异常履历复位&任意读出开关区域的分配     相对字节地址   数据        +00L         +00H      节点 01 通用状态    | | | | | |     +1FL   节点 62 通用状态     +1FH   节点 63 通用状态         +20L            +20H      节点 01 异常复位&任意读出开关        | | |   | | |       +3FL        节点 62 异常复位&任意读出开关      +3FH    节点 63 异常复位&任意读出开关    通用状态区域异常履历重置& 任意读出开关区域 通用状态的格式如下所示。通用状态的格式     位        内容        0   I/O 端子台 1(I/O 地址 0~F 用的端子台)电源电压状态标志 0:I/O 电源 ON、1:I/O 电源 OFF     1   I/O 端子台 2(I/O 地址 10~1F 用端子台)电源电压状态标记 0:I/O 电源 ON、1:I/O 电源 OFF     2      未使用(不定)    3    未使用(不定)     4输入部分未连接检测标记0:正常(全点连接) 1:未连接发生中(即使检测出有 1 点未连接时) 输出部分未连接检测标记0:正常(全点连接) 1:未连接发生中(即使检测出有 1 点未连接时)  标记状态参见 FRMT 系列使用 说明书(“2.5.2 断线检测定 时”)。     5 输入部短路检测标志 0:正常(全点正常) 1:有短路之处(即使只有 1 点短路) 输出部分未连接检测标记 0:正常(全点连接) 1:有短路之处(即使只有 1 点短路)    发生异常时为 1(最少保持 1 s 时间), 异常解除后返回 0。     6       未使用(不定)    7    未使用(不定)     9-84
9.7.6.3异常履历复位&任意读出开关虽然 FRMT 系列的子机在检测出“短路”和“未连接”之后,在排除其原因后会自动恢复 I/O 控制,但“短路”信息和“未连接”信息以及 I/O_LED 显示仍会保持红灯闪烁状态。 可通过将异常履历重置开关的各种位数设置为 ON 来对这些保留的数据进行重置。通过将任意读出开关的各位置于 ON 位置可读出各种异常履历信息及当前信息的 诊断信息图(详细内容参见“9.10.7.4 诊断信息图”)。异常履历复位&任意读出开关的格式     位   内容           0      输入短路异常履历复位(1:复位) 异常履历复位开关* 为 ON 时的启动仅仅有效 1 次。          1    输入未连接异常履历复位(1:复位)   2   输出短路异常履历复位(1:复位)   3  输出未连接异常履历复位(1:复位)      4      输入短路的履历和当前的读出(1:读出)            5    输入未连接的履历和当前的读出(1:读出)     任意读出开关* 为 ON 时的启动仅仅有效 1 次。        6     输出短路的履历和当前的读出(1:读出)        7      输出未连接的履历和当前的读出(1:读出)                    9.7.6.4诊断信息图检测出 FRMT 系列的从机有“短路”及“未连接”时,主机将自动将诊断信息保存在“短路状态区域”及“未连接状态区域”中。用链接参数设定的“短路状态区域”起始地址 [+00L] 至 [+3FH] 的数据格式,请参照(1)短路状态区域的格式。用链接参数设定的“未连接状态区域”起始地址 [+00L] 至 [+3FH] 的数据格式,请参照(2)未连接状态区 域的格式。“短路状态区域”和“未连接状态区域”的通用说明(1) 同时保存履历信息和当前信息。(2) 该区域为 4 段位移结构,信息 0 为最新数据,数据按信息 1 → 信息 2 → 信息 3 的顺序依次移位,从信息 3 开始数据消失。(3) Get/Set 标记(仅限信息 0 有效)设定了履历信息和当前信息时,主机(FL 远程)会将 Get/Set 标记的位 0 设定为“1”。用顺序程序将 Get/Set 标记的位 0 变为“1”时,读取履历信息或当前信息后 Get/Set 标记的位 0 返回“0”(初始化时也要将其设定为“0”。)。9-85
(1) 短路状态区域的格式    履历       相对地址 内容    数据格式 短路履历信息 0最新 数据                                                   +00L Get/Set 标志    Bit0 = 0:Get,Bit0 = 1:Set,Bit1~7 = 0 固定     +00H (未使用)      00h 固定    +01L 节点地址(Hex) 01h~3Fh (1~63)     +01H (未使用)      00h 固定    +02L 响应代码 Lo 正常时:69h 异常时:94h     +02H 响应代码 Hi   00h 固定     +03L 错误代码 Lo      消息响应的错误代码 Lo 正常时:00h 异常时:10h    +03H 错误代码 Hi    消息响应的错误代码 H 正常时:00h 异常时:00h   +04L+04H+05L+05H 短路履历信息 +06L I/O 0~63 +06H+07L+07H                      MSB LSB数值表示 I/O 地址 0:正常,1:短路      07   06   05   04   03   02   01   00    0F   0E   0D   0C   0B   0A   09   08    |    |    |    |    |    |    |    |   | | | | | | | |    3F   3E    3D    3C    3B    3A    39    38                短路当前信息 0最新 数据                                                  +08L Get/Set 标志      Bit0 = 0:Get,Bit0 = 1:Set,Bit1~7 = 0 固定    +08H (未使用) 00h 固定     +09L 节点地址(Hex)   01h~3Fh (1~63)     +09H (未使用)      00h 固定    +0AL 响应代码 Lo    正常时:67h 异常时:94h    +0AH 响应代码 Hi 00h 固定     +0BL 错误代码 Lo   消息响应的错误代码 Lo 正常时:00h 异常时:10h     +0BH 错误代码 Hi      消息响应的错误代码 H 正常时:00h 异常时:00h   +0CL+0CH+0DL+0DH 短路当前信息+0EL I/O 0~63 +0EH+0FL +0FH                      MSB LSB数值表示 I/O 地址 0:正常,1:短路状态      07     06     05     04     03     02     01     00    0F   0E   0D   0C   0B   0A   09   08    | | | | | | | |   |    |    |    |    |    |    |    |    3F   3E   3D   3C   3B   3A   39   38                  短路履历信息 1        +10L 与短路履历信息 0 相同 |+17H       与短路履历信息 0 相同    短路当前信息 1 +18L 与短路当前信息 0 相同 |+1FH 与短路当前信息 0 相同    短路履历信息 2        +20L 与短路履历信息 0 相同 |+27H       与短路履历信息 0 相同    短路当前信息 2   +28L 与短路当前信息 0 相同 |+2FH     与短路当前信息 0 相同    9-86
    履历     相对地址     内容      数据格式     短路履历信息 3 +30L | +37H 与短路履历信息 0 相同 与短路履历信息 0 相同     短路当前信息 3     +38L | +3FH     与短路当前信息 0 相同     与短路当前信息 0 相同   (2) 未连接状态区域的格式    履历       相对地址 内容    数据格式 未连接履历信息 0最新数 据                                                     +00L Get/Set 标志    Bit0 = 0:Get,Bit0 = 1:Set,Bit1~7 = 0 固定     +00H (未使用)      00h 固定    +01L 节点地址(Hex) 01h~3Fh (1~63)     +01H (未使用)   00h 固定     +02L 响应代码 Lo      正常时:6Ah 异常时:94h    +02H 响应代码 Hi    00h 固定    +03L 错误代码 Lo 消息响应的错误代码 Lo 正常时:00h 异常时:10h     +03H 错误代码 Hi      消息响应的错误代码 H 正常时:00h 异常时:00h   +04L+04H +05L+05H 未连接履历信息 +06L I/O 0~63+06H +07L +07H                      MSB LSB数值表示 I/O 地址 0:正常,1:未连接      07   06   05   04   03   02   01   00    0F     0E     0D     0C     0B     0A     09     08    | | | | | | | |   |    |    |    |    |    |    |    |    3F   3E   3D   3C   3B   3A   39   38               未连接当前信息 0最新数 据                                                  +08L Get/Set 标志   Bit0 = 0:Get,Bit0 = 1:Set,Bit1~7 = 0 固定     +08H (未使用)   00h 固定     +09L 节点地址(Hex)      01h~3Fh (1~63)    +09H (未使用) 00h 固定     +0AL 响应代码 Lo   正常时:68h 异常时:94h     +0AH 响应代码 Hi      00h 固定    +0BL 错误代码 Lo    消息响应的错误代码 Lo 正常时:00h 异常时:10h    +0BH 错误代码 Hi    消息响应的错误代码 H 正常时:00h 异常时:00h   +0CL+0CH+0DL+0DH 未连接当前信息+0EL I/O 0~63 +0EH+0FL +0FH                           MSB LSB数值表示 I/O 地址 0:正常,1:未连接状态      07   06   05   04   03   02   01   00    0F     0E     0D     0C     0B     0A     09     08    | | | | | | | |   |  |  |  |  |  |  |  |    3F     3E     3D     3C     3B     3A     39     38                  未连接履历信息 1     +10L 与未连接履历信息 0 相同 |+17H    与未连接履历信息 0 相同     未连接当前信息 1      +18L 与未连接当前信息 0 相同 |+1FH       与未连接当前信息 0 相同    9-87
    履历     相对地址     内容      数据格式     未连接履历信息 2 +20L | +27H 与未连接履历信息 0 相同 与未连接履历信息 0 相同     未连接当前信息 2     +28L | +2FH     与未连接当前信息 0 相同     与未连接当前信息 0 相同     未连接履历信息 3 +30L | +37H 与未连接履历信息 0 相同 与未连接履历信息 0 相同     未连接当前信息 3     +38L | +3FH     与未连接当前信息 0 相同     与未连接当前信息 0 相同   9-88
9.8 内置标准 MODBUS-RTU(从机)功能通过 MODBUS-RTU 通信,进行与 MODBUS-RTU(主机)的数据交换。9.8.1 MODBUS-RTU规格 (1) MODBUS-RTU规格      项目         规格   接口标准 EIA RS-485 兼容 2 线式      通信方式   异步式      传输线路       带屏蔽的双绞线    通信速度 0.3, 0.6, 1.2, 2.4, 4.8,9.6, 19.2, 38.4, 57.6, 115.2 kbps(根据设定)     传输距离       最远 1 公里(总长)    传输形态 1 : N, 1 : 1      局数       最大 255 局    数据形式 起始位 ·········1 位数据长度 ······8 位奇偶 ············有/无 奇数/偶数(根据设定) 停止位 ·········1 或 2 位(取决于设定)      错误检出      奇偶校验、CRC 校验  (2) 所支持的MODBUS功能代码( )内:10 进制MODBUS 通信协议等详细内容请参照 web 上公开的规格书等。     功能代码   功能      01、02      位数数据的读出     03、04   文字数据的读出     05   1 位数数据的写入     06      1 文字数据的写入    0F(15)    位数数据的程序段写入    10(16)  文字数据的程序段写入 9-89
(3) MODBUS对应地址映射表功能代码 01, 02, 05, 0F 用位数地址   MOWord addoressDBUSadd MOoressDBUS地 位数地址址 No points 点数(位数)(word)   TOYOPUC 位数地址 TOYOPUC Word addoress 0000~EP0  ~ FFF 4096EP   000    ~FFFEK1000  ~1FFF 4096EK  000    ~FFFEV2000  ~2FFF 4096EV   000   ~FFFET,EC3000  ~37FF 2048ET,EC   000   ~7FFEL3800  ~57FF 8192EL   000   ~1FFFEX,EY5800  ~5FFF 2048 EX,EY   000       ~7FFEM6000  ~7FFF8192EM000      ~1FFF 8000~ P1P8000  ~  81FF 512P000  ~1FFK8200  ~84FF  768K  000    ~2FFV8500  ~85FF  256V  000    ~FFT,C8600  ~87FF  512T,C  000    ~1FFL8800  ~8FFF  2048L  000    ~7FFX,Y9000  ~97FF  2048  X,Y  000        ~7FFM9800  ~9FFF2048M000      ~7FF A000~ P2PA000  ~  A1FF 512P 000~ 1FFKA200  ~A4FF  768K   000  ~ 2FFVA500  ~A5FF  256V   000  ~ FFT,CA600  ~A7FF  512T,C   000  ~ 1FFLA800  ~AFFF  2048L   000  ~ 7FFX,YB000  ~B7FF  2048  X,Y   000      ~ 7FFMB800  ~BFFF2048M 000     ~ 7FF C000~ P3PC000  ~  C1FF 512P 000~ 1FFKC200  ~C4FF  768K    000  ~ 2FFVC500  ~C5FF  256V    000  ~ FFT,CC600  ~C7FF  512T,C    000  ~ 1FFLC800  ~CFFF  2048L    000  ~ 7FFX,YD000  ~D7FF  2048  X,Y    000       ~ 7FFMD800  ~DFFF2048M 000~ 7FF E000~GX,GY E000  ~ FFFF  8192  GX,GY      000  ~ 1FFF                                                                                           9-90
功能代码 03, 04, 06, 10 用文字地址    0000~2000~ P1MODWord addoressressPBUEPEKELEX,EYESHKVSaDBUS地址dd10058018002000205001FF57F5FFFFF1FFF204F205FNo点po数ints  MOo 字地址(文字)(word)2048TOYOPUC 文字地址 TOYOPUC Word addoress  FF256EPEKELEX,EYESENPKV000     000000000FF W     ~~ 256FF W        EVET,EC~~    2002FF37F256EVET,EC000FF W        ~~    3001280007F W        ~~    3805120001FF W        ~~   1287F W        EM800~~   600   ~7FF512EM0001FF W    ~    20480007FF       ~~    EN100017FF20480007FF        ~   H000~7FF         ~~    201F320001F W         ~~    2020480002F W        ~~    16FW        T,CLX,Y20802100~~   2060    ~207F 20FF217F32128T,CLX,Y0000001F W    ~  1280007F W       ~~    7F W         M      SN21802600~~21FF25FF1024MS000~  1287F W     2200~000~3FF        ~   27FF512N0001FF                D3000~2FFF3FFF4096RD000~  R280020480007FF    ~~  FFF         ~~    4000~ P2P4000401F32P0001F W          KT,CMSN42004600~~404F407F41FF45FF47FFKT,CMSN000000~  4020480002F W       V~~    4050405F16V000FW         4060~~  320001F W           L4080~40FF128L000~7F W          X,Y4100~417F128X,Y000~ 7F W        ~~    41801287F W        ~~    10243FF        ~    5120001FF        ~~   R     D480050004FFF5FFF20484096R0007FF    ~  D000~FFF         6000~ P3P6000~P~   601F320001F W         ~~   KVMSRD602062007000604F605F65FF6FFF7FFF484096KVMSRD0002F W        ~~   605016000FW          T,C~~  6060607F32T,C0001F W        ~~    L608060FF128L0007F W        ~~    X,Y6100617F128X,Y0007F W         6180~61FF000~  1287F W        ~~   10240003FF       ~~    N660067FF512N0001FF       ~~    680020480007FF        ~   000~FFF         ~~      8000~U8000FFFF32768U0007FFF              ~~                                                                                                                                                                                     9-91
9.8.2 (1)设定链路参数 支架No.、时隙No.、链路模块名的设定在 MODBUS 中设定时,要在“Built-in(内装)”中设定机架 No.,在“Standard(标准)”中设定插槽 No., 在“MODBUS”中设定链接模块名称。链路参数的详细设定设定参数,使其与连接设备的参数相符。步骤1) 设定局号。2) 设定停止位数长度。3) 设定奇偶。4) 设定通信速度。点击通信速度 ,从一览中选择。5) 设定结束,点击“OK(确定)”。    (2)  9-92
9.9 EtherCAT功能规格及参数设定、使用方法等详细内容请参照 TOYOPUC EtherCAT 使用说明书(T-326N)。TOYOPUC-Nano  <L1> EtherCAT(主机)    9-93EtherCAT(主机)仅 L1 可使用(选择)
9.10 EtherNet/IP功能注意: TOYOPUC-Nano CPU 内置端口中的 EtherNet/IP 功能的使用未对应。9.10.1 概要所谓 EtherNet/IP,是指以广泛使用的以太网技术为基础的产业用网络。本标准通过 ODVA (OpenDeviceNet Vendor Association) 来管理,并在全球众多的设备中采用。通过使用 EtherNet/IP,控制器之间的网络自不必说,还可构建起控制器与设备之间的现场网络。<系统概要>EtherNet/IP 是一个多供应商的网络。因此,加入 TOYOPUC-Nano 之间的数据链接中后,TOYOPUC-Nano还可以同其他公司生产的 EtherNet/IP 对应控制器及远程 I/O 设备等进行连接。 交换式集线器     TOYOPUC-Nano扫描仪     TOYOPUC-Nano扫描仪  其他公司制控制器 其他公司制 远程 I/O 扫描仪 适配器  TOYOPUC-Nano 是与 EtherNet/IP 的扫描仪对应的设备。既可以在 PCwin2 上进行发端连接和目标连接两个扫描列表的设定,还可以与安装了 CIP 的 Transportclass1 的其他公司 EtherNet/IP 控制器、I/O 设备连接(与 Transport class3 不对应)。所谓扫描仪 ·············是指可在扫描仪-扫描仪之间或扫描仪-适配器之间构筑起连接的设备。扫描仪具有          打开其他设备连接的发端功能。所谓适配器 ·············是指自身不具有打开连接功能的设备。要想进行 EtherNet/IP 通信,就必须打开来 自扫描仪的通信。远程 I/O 设备等中较多的类型。所谓连接 ················是指用 EtherNet/IP 进行数据通信所需的通信线路。 注意1: 不可在适配器之间进行数据链接。注意2: 与其他公司制设备的连接有一定限制。详细内容请参照下页的注意事项。9-94
9.10.2 9.10.3 (1)EtherNet/IP规格I/O通信功能连接想要进行数据的收发,就必须打开与对方设备的连接。 打开连接的一侧称为发端侧,被打开的一侧称为目标侧,从发端侧向目标侧请求开放连接。 开放成功后,即可进行数据通信。TOYPUC-Nano 的 EtherNet/IP 可使用发端和目标双方的功能。 连接的建立有以下几种方法。< Exclusive Owner >是一个连接中,可从发端向目标和从目标向发端进行双向数据通信的功能。 可在连接点设定为实例 ID 时使用。为标签时不能使用。 (关于连接点,请参照下页的 (2) 数据的分配。) TOYOPUC-Nano< Input Only >TOYOPUC-Nano 或其他公司 EtherNet/IP 模块目标     建立连接  发端    输入I/O 数据输出   I/O 数据   输出建立连接输入 是在一个连接中,可从目标侧向发端侧进行数据通信的设定。 连接点为标签指定时,如下所示,可通过设置 2 个连接,进行双向的通信。 TOYOPUC-NanoTOYOPUC-Nano 或其他公司 EtherNet/IP 模块目标发端       发端   输入输出 I/O 数据    建立连接  目标 I/O 数据    输出输入 9-95
(2) 数据的分配 建立连接时,在目标侧上设置的连接点将从发端侧进行指定。连接点的指定方法有实例 ID 和标签 2 种方式。 a) 实例ID是用实例 ID(0~65535 的编号)来指定对方设备连接位置的通信方法。 在发端侧指定作为对象的目标侧连接的 ID。 在连接的详细设定中设定输入输出区域的地址。PLC A连接点发端 → 目标ID=“101” 目标 → 发端 = “100”PLC B    CPU用户存储器EtherNet/IP通信功能部分EtherNet/IP通信功能部分CPU用户存储器       实例 ID实例 ID    输入区域 输入区域输出区域 输出区域“100”输出区域          输入区域          输出区域进行上述指定后,请求开放    I/O 刷新数据I/O 刷新输出区域  输出区域 连接点数据“101”目标   输入区域   I/O 刷新I/O 刷新 输入区域    输入区域  发端                     9-96
b) 标签 是用标签(变量名称)来指定对方设备连接位置的通信方法。PLC APLC B    CPU用户存储器EtherNet/IP通信功能部分连接点 EtherNet/IP 通信功能部分指定标签名称 “tag_123”后,请求开放CPU用户存储器           输入区域”tag_123”     I/O 刷新I/O 刷新          输入区域     输出区域    输出区域标签名称 输出区域  输入区域数据“tag_456”后,请求开放输出区域   发端输出区域 标签名称“tag_456”目标指定标签名称目标     输出区域输入区域   I/O 刷新数据I/O 刷新    连接点输入区域  输入区域  发端                       (3) 连接的建立 发端侧在电源接通,且可开始通信的状态下,向连接位置上设定的目标连接请求建立连接。目标侧为可应  答状态,并针对来自发端侧的连接请求,判断可以连接时,即可建立连接。在目标侧,将用发端侧的连接请求来确认 ID(或标签)信息、数据容量等。  发端侧和目标侧中参数信息不一致时,将无法建立连接。发端侧与目标设备不能建立连接时,将成为连接异常,并更新各状态信息。关于状态,请参照 9.15.5 章。  发生连接异常时,发端将进行重新连接。对方设备及网络设备没有问题时,虽然会再次建立连接,但由于网络构成及连接设定状况的不同,重新连 接有时会需要 1 分钟左右的时间。(4) 数据包间隔(RPI) 建立连接后,发端侧和目标侧两方面将以一定间隔来发送数据。这个间隔就叫做数据包间隔。可设定范围为 0.5~10,000 ms。数据包间隔可分别设定为发端 → 目标(OT)方向、目标 → 发端(TO)方向。 连接点中使用了标签时,仅设定 TO 侧数据表间隔的值。OT 侧的数据表间隔可使用 TO 侧的设定值。但是,TO 侧的设定值小于 250 ms 时,将以 250 ms 的间隔 进行发送。9-97
(5) 通信超时在连接建立后,数据通信可实施的状态下,接收数据中断一定时间时,将成为连接异常,数据通信将停止。  接收数据的监视时间用数据包间隔的设定值和通信超时乘数来确定。通信参数乘数可从 RPIx4, RPIx8, RPIx16, RPIx32, RPIx64, RPIx128, RPIx256, RPIx512 中选择。例如,数据包间隔为 50 ms,超时为 RPI×8 时,如果在 400 ms 的时间内未能接收数据,就会成为连接异 常。成为连接异常时,将停止该连接的发送动作,并更新各状态信息。 关于状态,请参照 9.15.5 章。RPI 为 10 ms 以下时,超时请设定在 RPIx8 以上。(6) 通信负载EtherNet/IP 可通过数据包间隔来确定所发送的数据量。数据包间隔如果是较大的值,则通信负载变小,  数据包间隔较小时,通信负载将变大。设定多个连接,并以较小的数据包间隔运行时,模块将承受较大的负载。可收发数据包的量有一定限度, 超出这个限度时,就无法正常运行。 因此,在构建系统时,需进行连接数量与数据包间隔的设定,避免超出模块的能力。 可进行通信的数据量,大致可使用单元允许带宽,用以下的计算公式计算得出。 计算结果用负载率来表示,负载率超过 100%时,请复核 RPI 的值等,将通信负载设定为合适的值。另外, 在同一线路上有 EtherNet/IP 通信以外的其他设备等混用时,请以具有更大余量的负载设定进行使用。负载率 = 各连接的负载率合计 [%]各连接的负载率 =((1000 ÷TO侧RPI)+ (1000÷OT侧RPI))÷3000pps×100 [%]单位允许带宽注: 连接点中使用标签时的 OT 侧的 RPI 如下所示。 TO侧RPI为250ms以下时: OT侧RPI=250ms。 TO 侧 RPI 大于 250 ms 时: OT 侧 RPI = TO 侧 RPI。  9-98
负载率计算 例)在这里,考虑设 3 台 TOYOPUC-Nano。左起,分别称为 A, B, C。在 A 和 B 之间,设定了实例 ID 通信。在 A 和 C 之间,设定了标签通信。A, B, C 各自的发端、目标和 RPI 的设定值如下图所示。TOYOPUC-Nano ATOYOPUC-Nano BCRPI = 20 ms RPI = 20 msRPI = 50 ms RPI = 250 ms就各 TOYOPUC-Nano (A, B, C),计算负载率,确认有无超出 100%。• TOYOPUC-Nano ATOYOPUC-Nano A 由于使用了 2 个连接,因此,要就各连接计算负载率,最后合计求出 A 的负载率。 实例 ID 通信的负载率负载率 ={(1000÷20)+(1000÷20)}÷1000pps×100 = 10 [%]标签通信的负载率负载率 ={(1000÷50)+(1000÷250)}÷1000pps×100= 2.4 [%]合计负载率 =10+2.4= 12.4 [%]• TOYOPUC-Nano B求出 TOYOPUC-Nano B 的负载率。负载率 ={(1000÷20)+(1000÷20)}÷1000pps×100 = 10 [%]• TOYOPUC-Nano C求出 TOYOPUC-Nano C 的负载率。负载率 ={(1000÷50)+(1000÷250)}÷1000pps×100 = 2.4 [%]由于所有的 TOYOPUC-Nano 的负载率都在 100%以内,所以,以该设定可以毫无问题地使用。注意: RPI 的值设定过小时,负载率将变高。在不需进行高速通信的地方,RPI 请尽可能设定较大的值, 以避免抬高负载率。TOYOPUC-Nano                 实例 ID 通信标签通信   发端目标        发端  目标  9-99
9.10.4 EtherNet/IP的设定方法 9.10.4.1 设定链路参数链接模块的分配在 Nano-CPU 中进行通信相关的模块设定。1) 从项目中双击参数的链接参数。2) 选择设定 EtherNet/IP 的程序 No.及链接 No.。3) 点击链接设定按钮。确定设定 EtherNet/IP 的链接 No.。(任意) 在这里,作为例子,选择了链接 No.1。              4) 在机架 No.、插槽 No.中选择机架 0、插槽 2(或插槽 3)。5) 从链接模块名称中选择“EtherNet/IP”。6) 点击 OK 按钮。5) 打开标签,选择 EtherNet/IP。          9-100
7) 确认 EtherNet/IP 是否为选择状态,并点击“Detail(详细设定)”按钮。7) 在EtherNet/IP已被选择的状态下,点   击详细设定。    链接参数详细设定  (1) 自身节点 IP 地址   显示进行设定后的结果。  (6) 目标设定保存       (2) 个别设定(3) 列表设定(4) 选项 (5) 网络详细设定 (1) 自身节点IP地址设定自身节点地址。IP 地址请从以下列表中进行设定。 128.0.0.0~223.255.255.2559-101
(2) 个别设定在所选择的连接 No.中进行设定。1) 选择“Do(进行)”连接设定。2) 功能从“Target(目标)”、“Originator(发端)”中选择。 3) 按下设定按钮,就功能进行设定。   从“T arget(目标)” “Originato(r 发端)” 进行选择。    (2-1) 目标的设定 进行目标的设定。(a)(b) (c)(d)         (a) 通信方式从“Instance ID(实例 ID)”、“Tag(标签)”中选择通信方式。(b) 目标 → 发端 信息 设定目标 → 发端 信息。 (b-1) 连接点设定连接点。    通信方式   ID   可设定的值    实例 ID     以数值进行设定。     100~199, 768~1279    标签   以标签名称(字符串)进行设定。   字母(有大写小写区别)数字、符号(有部分符号不可使用)  9-102
(b-2) 输出设定 输出区域可设定 8 个区域。注意: 可使用的区域数量为输入区域、输出区域合计 1000 区域为止。(b-3) 地址 地址可设定以下的区域。 可设定区域    继电器链路     寄存器链接    M00L~7FH, L00L~7FH, X、Y00L~7FH、 EM00L~1FFH, EL00L~1FFH, EX、EY00L~7FH, GM000L~FFFH*1, GX,GY000L~FFFH*1    R0000~07FF, D0000~FFF, U0000~7FFF*1  D000L 及 R100H 等) 根据所设定的实时格式,能够设定的合计字节数量上限会有所不同。8 个区域的字节数量合计请务必设定在以下范围内。(b-5) 异常时的状态异常时的状态可从 OFF(默认)/保留中选择。关于设定为 OFF 或保留时的动作,请参照“9.10.8 异常时输入输出的设定”。注意: 地址中请务必设定 L(Low)或 H(High)。(例(b-4) 字节数就 8 个区域分别设定输出区域的字节数量。   实时格式      可设定的字节数量范围   Modeless Heartbeat  0~1448 字节   32birHeader      0~1444 字节  9-103
(c) 发端→目标 信息 设定发端 → 目标 信息。(c-1) 连接点 设定连接点。(c-2) 输入设定输出区域可设定 8 个区域。注意: 可使用的区域数量为输入区域、输出区域合计 1000 区域为止。(c-3) 地址 地址可设定以下的区域。 可设定区域     通信方式   连接点   可设定的值     实例 ID      以数值进行设定。     100~199, 768~1279    标签    不可设定   不可设定       继电器链路     寄存器链接    M00L~7FH, L00L~7FH, X、Y00L~7FH、 EM00L~1FFH, EL00L~1FFH, EX、EY00L~7FH, GM000L~FFFH*1, GX,GY000L~FFFH*1    R0000~07FF, D0000~FFF, U0000~7FFF*1  D000L 及 R100H 等) 根据所设定的实时格式,能够设定的合计字节数量上限会有所不同。8 个区域的字节数量合计请务必设定在以下范围内。(c-5) 异常时的状态异常时的状态可从 OFF(默认)/保留中选择。关于设定为 OFF 或保留时的动作,请参照“9.10.8 异常时输入输出的设定”。注意: 地址中请务必设定 L(Low)或 H(High)。(例(c-4) 字节数就 8 个区域分别设定输入区域的字节数量。   实时格式      可设定的字节数量范围   Modeless Heartbeat  0~1448 字节   32birHeader     0~1444 字节9-104
(d) 详细设定 (d-1) 实时格式用 EtherNet/IP 将 TOYOPUC-Nano 相互连接时,请选择自动。(默认为自动。)<自动上有勾选> <自动上无勾选> 去除自动上的勾选时,将变为手动设定。从以下列表中选择实时格式。     通信方式      通信方向   所选择的实时格式 实例 ID        目标 → 发端   Modeless   发端 → 目标     32bitHeader   标签     目标 → 发端 Modeless   发端 → 目标   HeartBeat     通信方向  可选择的实时格式    目标 → 发端  Modeless , HeartBeat , 32 bitHeader   发端 → 目标  Modeless , HeartBeat , 32bitHeader9-105
(2-2) 发端 (a)(b)(c) (d)(e)(f)(c) 通信超时用 RPI 的乘数进行设定。从 X4 至 X512 中选择。(g)               (a) 目标节点 IP 地址 设定目标节点的 IP 地址。(b) 通信方式选择“Instance ID(实例 ID)”方式或“Tag.(标签)”方式中的其中一个。例如,RPI = 50ms,超时为 RPIX4 时,如果在 50msX4 = 200ms 以内无法接收数据,就会成为 连接异常。(d) 目标 → 发端信息(d-1) 数据包间隔(RPI)设定从发端向目标发送的数据包的发送间隔。(2~10000 ms:2 ms 单位) (d-2) 连接类型从“Point to Point”或“Multicast”中选择连接类型。 < Point to Point >是将发端与目标按 1:1 建立起来的连接。  发端目标 9-106
< Multicast >可用多个发端(同一模块的除外)来接收来自 1 个目标的发送数据。使用多点传送时,请将同一目标中连接的各发端 TO 侧数据包间隔(RPI)的设定值设定为相 同的值。注意: 不可从一台 TOYOPUC-Nano 的多个发端连接中,对同一目标使用多点传送。下面的例子中,就是以多点传送来使用左侧的 TOYOPUC-Nano 所拥有的多个发端,并试图 连接到右侧 TOYOPUC-Nano 的目标上。这种情况下,左侧的 TOYOPUC-Nano 发端连接将 反复连接、断开,不会正常运行。另外,将分别向 TOYOPUC-Nano 通告错误代码 86(链接 通信异常),向 S3*0 通告错误代码 5A。 发端          TOYOPUC- NanoTOYOPUC- Nano   目标 发端  发端  发端   注意: 作为目标侧来使用多点传送时,需要有与所连接的发端数量相对应的连接数量。9-107目标 发端
例) 在下图中,针对1个进行多点传送的目标,连接了3个发端。虽然目标的多点传送连接 设定是一个,但实际上连接了 3 个,所以,这种情况下的多点传送连接为 3 个连接。  发端  发端 发端(d-3) 连接点 设定连接点。可设定的值从以下范围中选择。(d-4) 输入设定9-108目标消费 3 个连接      通信方式   连接点   可设定的值     实例 ID      以数值进行设定。     0~65535    标签  以标签名称(字符串)进行设定。  字母(有大写小写区别)数字、符号(有部分符号不可使用)  输出区域可设定 8 个区域。注意: 可使用的区域数量为输入区域、输出区域合计 1000 区域为止。
(d-5) 地址 地址可设定以下的区域。 可设定区域     继电器链路     寄存器链接   M00L~7FH, L00L~7FH, X、Y00L~7FH、 EM00L~1FFH EL00L~1FFH, EX、EY00L~7FH, GM000L~FFFH*1, GX,GY000L~FFFH*1  R0000~07FF, D0000~FFF, U0000~7FFF*1D000L 及 R100H 等) 根据所设定的实时格式,能够设定的合计字节数量上限会有所不同。8 个区域的字节数量合计请务必设定在以下范围内。• 异常时的状态异常时的状态可从 OFF(默认)/保留中选择。关于设定为 OFF 或保留时的动作,请参照“9.10.8 异常时输入输出的设定”。 (e) 发端→目标信息(e-1) 数据包间隔(RPI) 设定从发端向目标发送的数据包的发送间隔。(2~10000 ms:2 ms 单位)(e-2) 连接类型连接类型为“Point to Point”(固定)。(e-3) 连接点 设定连接点。注意: 地址中请务必设定 L(Low)或 H(High)。(例(d-6) 字节数就 8 个区域分别设定输入区域的字节数量。   实时格式      可设定的字节数量范围   Modeless Heartbeat  0~1448 字节   32birHeader      0~1444 字节      通信方式     连接点    可设定的值   实例 ID 以数值进行设定。 0~65535    标签      不可设定    不可设定  9-109
(e-4) 输出设定 输出区域可设定 8 个区域。注意: 可使用的区域数量为输入区域、输出区域合计 1000 区域为止。(e-5) 地址 在地址中从以下的寄存器区域开始设定。 可设定区域    继电器链路     寄存器链接    M00L~7FH, L00L~7FH, X、Y00L~7FH、 EM00L~1FFH, EL00L~1FFH, EX、EY00L~7FH, GM000L~FFFH*1, GX,GY000L~FFFH*1    R0000~07FF, D0000~FFF, U0000~7FFF*1  D000L 及 R100H 等) 根据所设定的实时格式,能够设定的合计字节数量上限会有所不同。8 个区域的字节数量合计请务必设定在以下范围内。(e-7) 异常时的状态异常时的状态可从 OFF(默认)/保留中选择。关于设定为 OFF 或保留时的动作,请参照“9.10.8 异常时输入输出的设定”。注意: 地址中请务必设定 L(Low)或 H(High)。(例(e-6) 字节数就 8 个区域分别设定输出区域的字节数量。   实时格式      可设定的字节数量范围   Modeless Heartbeat  0~1448 字节   32birHeader      0~1444 字节  9-110
(f) 详细设定 (f-1)(f-2) (f-3)(f-4) (f-5)(f-1) 触发器 设定发送数据的发送时间。 触发器从“Cyclic”或“COS”中选择。(f-2) 最小发送间隔设定把触发器设定在“COS”时的最小发送间隔。自动时,为 RPI/4 的值。注意: 最小发送间隔的最小值为 6 ms。因此,使用自动时,请将 OT 方向和 TO 方向的 RPI设定值设定在 24 ms 以上。设定在 23 ms 以下时,将无法正常发挥作用。(f-3) 配置实例 是配置连接实例。默认为 1。通常,请保持 1 的状态。设定范围为 0~65535。(默认 1)用 EtherNet/IP 将 TOYOPUC-Nano 相互连接时,请设定为 1。 该参数在连接对方设备所拥有的配置实例的值为 1 以外的值时将进行变更。其他公司制的设 备有时会有配置实例的设定值为 1 以外的值的情况。请以其他公司制的设备使用说明书或 EDS 文件为参考,设定为与其他公司制设备所拥有的配置实例相同的值。注意: 配置实例不一致时,通信将无法进行。(f-4) 端口编号、链接地址 结合所连接的设备,设定端口编号与链接地址。默认为端口编号 0,链接地址 0。用 EtherNet/IP 将 TOYOPUC-Nano 相互连接时,请设定为默认的端口编号 0,链接地址 0。 其他公司制的设备中,有些会带有端口编号及链接地址。请以其他公司制的设备使用说明书 或 EDS 文件为参考,结合对方设备来设定端口编号及链接地址。注意: 带有端口编号及链接地址的设备进行连接时,如果端口编号及链接地址未能正确设定,              Cyclic     按 RPI 的设定间隔来进行数据的发送。    COS(Change of State) 数据没有变化时,按 RPI 的设定间隔发送数据。 数据有变化时,从发生变化时开始,在最小发送间隔的设定时间内发送数据。 则无法进行通信。9-111
(f-5) 实时格式实时格式请根据连接对象设备进行设定。用 EtherNet/IP 将 TOYOPUC-Nano 相互连接时,请选择自动。(默认为自动。)注意: 选择自动时,可选择下表“With check mark at "Auto(" 自动上有勾选)”中的实时格式。     并非自动进行与对方设备相匹配的设定的功能。 <自动上有勾选><自动上无勾选> 去除自动上的勾选时,将变为手动设定。从以下列表中选择实时格式。注意: 进行与其他公司制的设备的连接时,请根据其他公司制的设备中设定的实时格式进行 设定。     实时格式在各连接设备之间有差异时,有时会无法进行通信。     通信方式      通信方向   所选择的实时格式 实例 ID        目标 → 发端   Modeless   发端 → 目标    32bitHeader   标签      目标 → 发端 Modeless   发端 → 目标    HeartBeat       通信方向   可选择的实时格式     目标 → 发端   Modeless , HeartBeat , 32bitHeader   发端 → 目标   Modeless , HeartBeat , 32bitHeader 9-112
(g) 目标设定打开 目标设定打开按钮可在使用发端的标签通信时应用。通过读入事先保存的目标的标签名称,即可选择可使用的目标的标签名称。选择可从发端的连接 点设定栏对话框中进行。要使用该功能,必须事先使用目标设定保存功能,来保存目标的标签名称信息。详细内容请参照 “(6) 目标设定保存”。   读入标签名称的设定已保存下来的文本文件。   (3) 列表设定 参数设定信息可用表格形式进行显示、编辑。 可进行 EXCEL 等数据的复制粘贴。即可从列表中选择标签名称。 9-113
(4) 选项 (4-1) 连接目的地 IP 地址输出信息地址输出各连接的连接目的地 IP 地址最下位位数的 1 字节。 连接设定为发端时,可保存用参数设定的目标 IP 地址。 为目标设定时,可在连接建立后,保存对方发端的 IP 地址。 初始值为 00。保存格式如下所示。占用 64 字的寄存器。 多点传送时,仅保存与所连接的对方 1 台设备相对应的 IP 地址。偏移+0 +1 +2+62 +63例) 将 192.168.0.1 的连接 0 的对方 IP 地址为 192.168.0.8 时,连接 3 的对方 IP 地址为 192.168.0.12 时的状态输出到 D0C00~中    上位   下位    CN1   CN0    CN3   CN2    CN5     CN4               CN125     CN124    CN127 CN126 192.168.0.1192.168.0.8192.168.0.12     CN0   CN3         上位   下位     00   08     0C   00     00    00 地址D0C00 D0C01 D0C029-114
(4-2) 数据包丢失次数(1)(2) (3) (4) (5)异常(6)(7) (8) (9) (10)异常输出连接的接收数据包丢失次数。计数值为接收侧监视数据包的连号,并累计其编号在顺序号中丢失的数量。该值定期进行更新时,至对方设备为止的线路就有可能出现问题。注意: 数据包丢失次数由于对顺序号丢失次数进行监视,所以在拔下 LAN 电缆的状态下,将无法 进行次数的更新。                           计数数量00 00 01 01 01 01 01 01 04 04  重新建立连接  (11) (12) (13)异常(14)(15)(16)(17)(18) (19)异常连接异常                         计数数量 04 04 04 05 05 05 ** ** ** **   数据包丢失次数可用 0~65535 的字数据来输出。计数计至 65535 时,计数值将返回 0。 数据包丢失次数的保存格式如下所示。占用 128 字的寄存器。发端侧时 05 05 04 05 目标侧时 00 00 00 01   发生连接超时时,将保留该计数值。 之后,重新建立连接时,发端连接中值会被保留,但目标连接中计数值则会被初始化(0000)。    内容    CN0 数据包丢失次数    CN1 数据包丢失次数    CN2 数据包丢失次数            CN126 数据包丢失次数    CN127 数据包丢失次数   参数的设定 地址偏移+0 +1 +2+126 +1279-115
(4-3) 脱离寄存器区域地址   设定脱离指定用寄存器区域。设定区域的格式如下所示。占用 8 字的寄存器。注意: 所谓脱离功能,是指确认指定脱离的连接出现通信异常的状况,并对其他正常的连接继续 进行通信的功能。详细内容请参照“9.10.7 脱离功能”。偏移 15+00     15    14      13   12    11       10   9      8   7   6     5      4  3      2      1     0 31302928272625242322212019181716   47 46  45 44 43  42 41  40 39 38  37 36 35  34  33 32     63    62     61   60   59     58   57     56   55   54     53    52  51     50     49    48   79   78   77  76  75   74  73   72  71  70   69   68 67   66   65   64   9594  9392 91  9089  8887 86  85 8483  82 81 80     111    110     109   108   107     106   105     104   103   102     101    100  99     98     97    96   127   126   125  124  123   122  121   120  119  118   117   116  115   114   113   112  +1                                   1:脱离指定+2                                   0:脱离解除+3 +4 +5 +6 +7(4-4) 异常时的 CPU 通告设定在发端连接中发生连接超时(错误代码 0050)时,是否向 CPU 模块进行通告异常状况。初始值为“Do not(不进行)”。(5) 网络详细设定(5-1) 子网掩码、网关 IP 地址自节点 IP 地址与通信对象的 IP 地址的网络 ID 不同时,必须设定子网掩码、网关 IP 地址。详细内 容,请参照 FL/ET-T-V2H 使用说明书(t-754)中的资料 5。(5-2) 命令通信用 UDP 端口 No 是在分层通信中使用的端口 No。    通常情况下,请勿变更本设定。(6) 目标设定保存 将目标侧的标签名称信息作为文本数据保存。保存后的数据可在设定对方 TOYOPUC-Nano 的发端侧标签通信的标签名称时使用。详细内容请参照“(2-2) 发端”的“(g) 打开目标设定”。     不向 CPU 进行通告。 (默认值)      即使检出连接异常,也不向 CPU 进行通告。    向 CPU 进行通告。 (选项)    检出连接异常时,将通告异常情况,并在 CPU 中显示通信异常(错误代码 86)。 通信异常(VA2)将变为 ON。发生连接异常后,将以 10 秒间隔进行连接重建。但是,即使可以建立连接,CPU 中 的异常状态在通信重置(V80:链接 1 时)实施之前也将被保留。   9-116
9.10.5 状态9.10.5.1 链接用特殊寄存器在 EtherNet/IP 中,特殊寄存器里配备有以下的状态信息。15 0S3*0 S3*1 S3*2 S3*3 S3*4 S3*5 S3*6 S3*7 S3*8 S3*9 S3*A S3*B S3*C S3*D S3*E S3*FS3#0 S3#1 S3#2 S3#3 S3#4 S3#5 S3#6 S3#7 S3#8 S3#9 S3#A S3#B S3#C S3#D S3#E S3#F自身以太网地址的第 1~3 位为 00:60:53。  特殊寄存器的*,#部分取决于链路No.。                 连接建立状态区域                                 连接异常状态区域                 15 0     错误代码     详细 1 详细 2 详细 3         系统版本         错误代码履历             连接异常状态区域             自身的以太网地址第 4 位      自身的以太网地址第 5 位    自身的以太网地址第 6 位    (系统预约)    自身的 IP 地址第 1 位 自身的 IP 地址第 2 位     自身的 IP 地址第 3 位      自身的 IP 地址第 4 位     链路 No.    1   2    3  4   5    6   7    8    *          0      2        4    6      8        A      C      E   #       1     3       5   7    9       B    D     F   9-117
 (1) 连接建立状态区域输出连接的建立状态。 连接已确立时,相关连接编号的位数位置将变为“1”。15 0 S3*0 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0连接异常发生中S3*1 31 30 29 28 27 26 25 24 23 22 21S3*2 47 46 45 44 43 42 41 40 39 38 37S3*3 63 62 61 60 59 58 57 56 55 54 53S3*4 79 78 77 76 75 74 73 72 71 70 69S3*5 95 94 93 92 91 90 89 88 87 86 85S3*6111 110 109 108 107 106 105 104 103 102 101 100 99 98 97 96 S3*7 127 126 125 124 123 122 121 120 119 118 117 116 115 114 113 112(2) 连接异常状态区域输出连接异常发生状态。 发生异常的相关连接编号的位数位置将变为“1”。 本区域为履历信息,即使连接异常恢复之后,也将保留“1”的状态。 通信重置(V80:链接 No.1 时)ON 之后将变为“0”。15 0S3*8 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0S3*9 31 30 29 28 27 26 25 24 23 22 21 20 19 18 17 16 1:有连接异常S3*A 47 46 45 44 43 42 41 40 39 38 37 36 35 34 33 32 0:无分配或正常S3*B 63 62 61 60 59 58 57 56 55 54 53 52 51 50 49 48S3*C 79 78 77 76 75 74 73 72 71 70 69 68 67 66 65 64S3*D 95 94 93 92 91 90 89 88 87 86 85 84 83 82 81 80S3*E111 110 109 108 107 106 105 104 103 102 101 100 99 98 97 96 S3*F 127 126 125 124 123 122 121 120 119 118 117 116 115 114 113 112注意1: 对方正在接入电源,或启动花费时间时,在连接建立前,有时会发生连接异常。在这种情况下, 连接建立后,请实施通信重置(V80:链接 No.1 时)解除异常。注意2: 发端侧在电源接入时或 CPU 重置时,即使相关连接上没有连接对象,约 40 秒钟时间,连接异 常状态区域的相关位数都不会为 ON。另外,设定在“Notification of fault to CPU = Do(异常时 的 CPU 通告=进行)”时,也同样有约 40 秒钟时间,不会通告通信异常。注意3: 目标侧在电源接入时或 CPU 重置时,如果相关连接上没有连接对象,则连接异常区域的相关位 数不会为 ON。目标侧使连接异常区域的相关位数为 ON 的情况仅在业已正常建立的连接出现异常时会发生。 特殊寄存器的*部根据链接No.来确定。链路No. 12345678 * 02468ACE9-11820 19 18 17 16 1:正常36 35 34 33 32 0:无分配或52 51 50 49 48 68 67 66 65 64 84 83 82 81 80
表示电源接入时 LAN 电缆未连接时的发端侧、目标侧各自的连接异常区域相关位数的 ON/OFF 状态。 而且在本例中,将 2 台 TOYOPUC-Nano 中的左边 1 台称为 A,右边 1 台称为 B,并将 A 作为发端侧,将 B 作为目标侧使用。另外,假设双方都使用了连接编号 0。(根据连接编号,表示连接异常区域相关连 接的特殊寄存器的位数位置(以下用 S3*8-0 表示)将会发生变化。)构成例 ATOYOPUC-Nano IP 地址 192.168.1.1 发端A 的发端连接的连接异常区域的状态 因配线未连接等而没有连接对象连接 未连接约 40 秒 S3*8-0 ONOFF电源 ONB 的目标连接的连接异常区域的状态交换式集线器 B          配线未连接TOYOPUC-Nano IP 地址 192.168.1.2 目标            连接               因配线未连接等而没有连接对象 连接 未连接S3*8-0 ON OFF电源 ON 连接        9-119
9.10.5.2 特殊继电器 表示通信状态的特殊继电器有以下几种。    地址       内容      VA0 VA4 VA8 VAC VB0 VB4 VB8 VBC   链接 No.1 链接 No.2 链接 No.3 链接 No.4 链接 No.5 链接 No.6 链接 No.7 链接 No.8 OFF: 一个连接也没有建立时。ON: 所设定的连接中,已建立一个以上的连接时。     VA1 VA5 VA9 VAD VB1 VB5 VB9 VBD      链接 No.1 链接 No.2 链接 No.3 链接 No.4 链接 No.5 链接 No.6 链接 No.7 链接 No.8       链接参数异常OFF: 链接参数异常未发生时。 ON: 链接参数异常正在发生时。      VA2 VA6 VAA VAE VB2 VB6 VBA VBE 链接 No.1 链接 No.2 链接 No.3 链接 No.4 链接 No.5 链接 No.6 链接 No.7 链接 No.8   通信异常OFF: 连接异常未发生时。(在选项设定中,当“Notification of fault toCPU = Do no(t 异常时的 CPU 通告 = 不进行)”时,始终为 OFF ON: 在选项设定中,设定在“NotificationoffaulttoCPU=Do(异常时 的 CPU 通告 = 进行)”上的情况下,有一个以上的连接异常发生时     VC4        特殊模块异常(通信模块故障)    VF2   特殊模块的分配异常(链接参数的机架 No.、插槽 No.、链接模块名称与安装状态不同。)   9-120)
9.10.6 通信重置EtherNet/IP 中的通信重置为通信异常履历的重置。通过进行通信重置,特殊寄存器 S3*8~S3*F 的信息将被清除。(*符号将根据链接 No.而变化。详细内容, 请参照“9.15.5.1 链接用特殊寄存器”。)可通过使通信重置用特殊继电器由“OFF” → “ON”的方法对通信进行重置。 各链接 No.的通信重置用特殊继电器的 I/O 地址如下表所示。        链路 No.   I/O 地址            1    V80       2   V81       3   V82       4   V83       5   V84       6   V85       7   V86       8     V87  注意1: 通信复位功能仅在特殊继电器启动时有效。注意2: “Error code 0051 Duplicate IP address(错误代码:0051 IP 地址重复异常)”、“Error code 0052 Limit of processing performance(错误代码:0052 处理能力限度异常)”、“Error code 0053 Reception of frame from own node(错误代码:0053 自身节点帧接收异常)”的状态下的通信 重置将无效。注意3: TOYOPUC-Nano 为发端的设定时,在没有连接对象的状态下进行通信重置后,通信重置后约 40 秒钟,不会向连接异常区域通告异常。          因配线未连接等而没有连接对象V8# ON OFF约 40 秒 S3*8-0 ONOFF电源 ON 连接 连接未连接          约 40 秒            9-121
注意4: 目标侧仅在正常状态的连接出现异常时,连接异常区域的位数将会为 ON。因此,如下所示,目 标侧的连接从正常状态,因断线等变为异常,并在其状态下进行通信重置时,连接异常区域的位 数将保持 OFF 不变。  发生断线等 特殊寄存器的*部根据链接No.来确定。因断线等持续保持未连接状态 连接 未连接V8# ON OFFS3*8-0 ON OFF电源 ON 特殊继电器的#部根据链接No.来确定。  连接              从正常变成了异常, 所以为 ON通信重置后,连接由正常 → 变 为异常为止为 OFF。    链路 No.    1   2    3  4   5    6   7    8    #            0        1          2      3        4          5        6        7      链路 No.       1           2         3        4       5         6         7         8      *    0   2    4  6   8    A   C   E   9-122
9.10.7 脱离功能某个发端或目标从通信网络上脱离时,连接异常状态区域的相关连接位数将变为 ON,且链接参数中设定在“notification of a communication error(通告通信异常)”上时,会向 CPU 通告通信异常。所谓脱离功能,是指确认指定脱离的连接出现通信异常的状况,并对其他正常的连接继续进行通信的功能。 另外,链接参数中设定在“notification of a communication error(通告通信异常)”上时,脱离时将向 CPU 通告异常。根据该功能,可并未发生连接异常的情况下,使特定的发端或目标从通信网络上脱离。 分离状态下的通信 特殊寄存器的*部根据链接No.来确定。 脱离对象的指定 仅在链接参数中设定了脱离寄存器区域地址时,可在所设定的寄存器中设定各发端或目标的脱离状态。        脱离 I/O 的状态 OFF/保持     通信正常   通信异常    正常状态 (S3*0~S3*7) I/O 数据的状态    异常履历状态 (S3*8~S3*F)  I/O 数据的状态  0       OFF  1 通信的 I/O 数据交换    1  OFF 数据    保持    1  通信的 I/O 数据交换     1    异常发生前的数据  1    OFF 1OFF 数据交换  0 OFF 数据    保持  1 通常的 I/O 数据交换     0  异常发生前的数据   链路 No.    1   2    3  4   5    6   7    8    *            0        2          4      6        8          A        C        E   各位数 No.表示连接编号。 偏移 MSBLSB    15   14    13  12    11  10    9   8  7    6  5    4  3    2   1    0   31    30       29 28       27 26       25    24 23       22 21       20 19       18    17   16   47      46          45      44        43      42        41         40    39        38      37        36      35        34         33      32   63 62  6160  5958  57 5655  5453  5251  50 49 48   79    78       77 76       75 74       73    72 71       70 69       68 67       66    65   64   95    94       93 92       91 90       89    88 87       86 85       84 83       82    81   80   111      110          109      108        107      106        105         104    103        102      101        100      99        98         97      96   127   126    125  124    123  122    121   120  119    118  117    116  115    114   113   112   +0+1+2+3+4+5+6+7各位 = 1:指定分离 各位 = 0:未指定分离9-123
9.10.8 异常时输入输出的设定可用链接参数来设定 EtherNet/IP 的通信出现异常时的输入数据和 RUN 停止时的输出数据。 输入设定是保留通信异常或脱离时输入区域中的数据还是使其为 OFF。注意: 电源接入及 CPU 重置启动时,模块的通信部分会被重置,因此,与保留、OFF 的设定无关,输 入区域将变为 0。保留:通信异常时:将保留发生异常之前接收到的数据。  对方设备 输出数据 1111h  输入区域的数据 1111h 输入区域的数据 2222h 输入区域的数据 3333h 输入区域的数据 3333h 输出数据 2222h      保留数据TOYOPUC-Nano· · ·通信异常   OFF:发生通信异常时,使输入区域的数据为 0000h。   输入区域的数据 1111h 输入区域的数据 2222h 输入区域的数据 3333h 输入区域的数据 0000h     使数据为 OFFTOYOPUC-Nano· · ·通信异常   9-124输出数据 3333h 输出数据 4444h  对方设备 输出数据 1111h 输出数据 2222h 输出数据 3333h 输出数据 4444h
 输出设定是保留 RUN 停止时输出区域中的数据还是使其为 OFF。保留:RUN 停止时,将输出区域中的数据输出。TOYOPUC-Nano 对方设备   输出区域的数据 1111h 输出区域的数据 2222h 输出区域的数据 3333h       发生 RUN 停止 将输出区域中的 数据输出  输出区域的数据 3333h· · ·输入数据 1111h 输入数据 2222h 输入数据 3333h输入数据 3333h对方设备输入数据 1111h 输入数据 2222h 输入数据 3333h输入数据 0000h    OFF:RUN 停止时,使输出数据为 0000h。(输出区域(寄存器)的值不会变化。)   输出区域的数据 1111h 输出区域的数据 2222h 输出区域的数据 3333h       发生 RUN 停止TOYOPUC-Nano· · ·  输出区域的数据 3333h输出数据0000h     使输出数据为OFF 9-125
10 显示器TOYOPUC-Nano 的信息显示器中有 STATUS 显示器和 USB OP 显示器等两种。有 CPU 的“运行状态监控”、“错误代码监控”、“链接通信状态监控”等 3 种监控模式。    USB OP 显示器10.1 STATUS显示器 10.1.1 运行状态显示器<运行状态监控画面> • RUN 状态时左侧 7SEG 的 8 字点亮。STATUS 显示器               10.1.2 错误代码监控因发生错误导致停机时在 7SEG 上显示错误代码。有多个错误时循环显示错误代码。此外,在 CPU 处于RUN 状态时,右侧的 7SEG 上 1 位 1 位显示错误代码。                    10-1 10
10.1.3 链路通信状态监控通过按下 RESET、START 开关,即可轻易地进行“锁定解除”→“L1 状态监控”→“L2 状态监控”→“L3 状态监控”→“L4 状态监控”→“运行状态监控”的切换。             L4 状态显示显示自节点号码 显示打开的连接器 显示主机节点号码<L2 的状态显示> 与 L1 的显示相同。<L3 的状态显示>L3 具有计算机链接、PC 链接、SIO、SN-I/F、MODBUS 等 5 种链接功能。选择 CMP 链路时 选择 PC 链路时 选择 SIO 时 按下后解除锁定(圆点点亮)<L1 的显示方法与显示内容>L1 具有 FL-net/以太网/FL 远程/以太网 IP/以太网 Cat 等 5 种链接功能。选择 FL-net 时再按一次 (L1 点亮)   以太网 选择以太网 IP 时以太网 Cat 选择 FL 远程时                                   10-2CPU 状态显示 L1 状态显示     L2 状态显示 L3 状态显示 
  选择 SN-I/F 时 选择 MODBUS 时          <L4 的状态显示>L4 有 PC 链路、计算机链路、SIO 3 种链路功能* 参照 L3 的状态显示10-3
11 工具刀具拥有以下功能。• I/O 操作面板• I/O 检查(输出用)详细内容请参照“Pcwin2”的使用说明书。 11.1 I/O操作面板本功能是可在未连接实际输入设备的状态下进行 I/O 操作的调试支援功能。通过 I/O 操作面板进行的输入,可忽略顺控程序的输入,强制性地对 I/O 进行 ON/OFF。注意: 在 I/O 操作面板的功能中,不能进行针对输出的强制输出。关于与[Forced ON/OFF of IO(I/O 的强制 ON/OFF)]的差异。• I/O 的强制 ON/OFF: 虽然是对 I/O 进行强制设定,但之后将变为实际的输入状态。• I/O 操作面板(输入保持): I/O 操作设定后仍然保持 I/O 状态。设定种类• 输入保持: 保持来自 I/O 操作面板的输入状态。           (可忽略实际的顺控程序的输入)• 1 注射: 进行仅限 1 次的强制设定。执行后,实际的顺控程序的输入将变为有效。(是与[I/OForced ON/OFF(I/O 强制 ON/OFF)]相同的功能)I/O 按钮设定的[type(类型)]为输入保持,且 CPU 为正常 RUN 状态时,按下执行开始后,右侧的 7SEG 下部将如图所示开始闪烁。闪烁          11-112 11
11.2 I/O检查(输出用)本功能以设备启动时输出的配线检查为目的。通过 I/O 检查功能进行的输出,可忽略顺控程序的输出,强制性地对 I/O 进行 ON/OFF。 请避免在正在运行的设备中使用。另外,使用时请充分注意安全。注意: 在 I/O 检查的功能中,不能进行针对输入的强制输出。CPU 为正常 RUN 状态时,按下执行开始后,右侧的 7SEG 上部将如图所示开始闪烁。闪烁        11-2
12 限制事项TOYOPUC-Nano 的版本和功能的组合如下所示。模块 端口           功能/单元 对应功能 详细规格 对应 Ver.                       TCP/IP 8 端口对应1.00~ 1.30~ 1.30~ 1.00~ 1.30~ 1.20~ 1.20~ 1.30~ 1.20~ 1.30~      计算机链路 TCP/IP UDP32 端口对应             TCP/IP 8 端口对应      Ethernet文件存储 TCP/IP32 端口对应      UDP             通用命令TCP/IP 数据容量 1024 byte 以下 TCP/IPUDP 数据容量 1024 byte 以下 UDP                        FL-netI/O 通信 1.20~中继命令对应 SPR、SPW 正在执行的中继命令中 - 发生错误                FL 远程I/O 通信 1.20~信息功能 - 命令通信对应 特殊命令 -SPW 对应 -                   I/O 通信 1.20~EtherCAT 停止时处理 通信异常时、全局通信中的清除 - 通信异常时、RUN 停止选择 -                    Ethernet/IP -                                EthernetTCP/IP计算机链路 TCP/IPUDP TCP/IP文件存储 TCP/IP UDP8 端口对应32 端口对应8 端口对应32 端口对应数据容量 1024 byte 以下1.00~ 1.30~- 1.00~ 1.30~ 1.20~ 1.30~- - -                   通用命令TCP/IP TCP/IP      UDP 数据容量 1024 byte 以下UDP                  FL-netI/O 通信 1.20~中继命令对应 SPR、SPW 正在执行的中继命令中 - 发生错误                 FL 远程I/O 通信 1.20~信息功能 - 命令通信对应 特殊命令 -SPW 对应 -                     Ethernet/IP -                内置串行端口计算机链路 PC 链路 SN-I/F MODBUS1.00~ 1.00~ 1.00~ 1.00~                     计算机链路 内置串行端口 PC 链路MODBUS1.00~ 1.00~ 1.00~                              L1 CPUL2           L3L4      12-1-:未对应
   模块       端口         功能/单元        对应功能      详细规格         对应 Ver.                 CPU                  USB 存储 器 读出/写入   -    I/O BUS          增设机架对应   SL 对应     1.00~          BUS-EX                       BUS-EX 对应  基本功能     1.20~  2PORT-MNET 对应      1.30~    脉冲输出对应  1.30~  DLINK-M, S2 对应     1.30~  EF10 对应     1.30~  内置 L1、L2 同时使用      1.30~       -         输出、输入输出 模块     I/O 电源状态监视器功能对应  1.30~ 短路诊断功能对应     1.30~   其他     链接:4 个以上对应(2ET:最大 7 个)       1.00~    特殊模块对应  1.00~   内置以外的 SPR/SPW 对应       -   -:未对应   模块       端口         功能/单元        对应功能     详细规格         对应 Ver. SL      -       输出、输入输出模 块    I/O 电源状态监视器功能对应        1.10~ 短路诊断功能对应      1.10~                      模块端口功能/单元对应功能详细规格对应 Ver.                                  O-28 O-29 O-12 O-18 O-19 IO-328 IO-329输出、输入输出模 块I/O 电源状态监视器功能对应1.40~1.40B~(仅 O-29)              -短路诊断功能对应1.40~1.40B~(仅 O-29)       O-29 由于自 Ver.1.40B 开始硬件发生了变更, 无法从低于 Ver.1.30 的版本进行升级(软件更新)。  12-2
13 BUS-EX功能13.1 Nano-CPU BUS-EX功能可有效利用以往机型——PC10 系列、Plus 系列的各模块。 可连接 BUS-EXP(TCU-6367)或 Plus BUS-EX(TCU-6900)。与 Nano-CPU 连接时,请使用下述以上的版本。软件注: 与 Nano-CPU 的连接,根据版本的不同,有部分限制事项。 详细内容请参照“12. 限制事项”。     产品名称   版本     Nano-CPU   1.30~     BUS-EXP (TCU-6367)   2.00~     Plus BUS-EX (TCU-6900)      2.00~       产品名称   版本     PCwin2      1.2 R04~  13-1
13.2 与连接PC10P系列时的不同点连接 Nano-CPU 和 BUS-EXP 时,与连接 PC10P 系列时相比,有下述的不同点。(1) 接通电源的顺序Nano-CPU 侧的电源和 BUS-EXP 侧的电源接入顺序,原则上为同时接通电源。(2) BUS-EXP 的机架 No.连接 Nano-CPU 和 BUS-EXP 时的 BUS-EXP 实际机架 No.为机架 0。Plus BUS-EX 为机架1。(3) BUS-EXP 机架上的 I/O 地址Nano-CPU 中,BUS-EXP 机架上的 I/O 地址分配在 GX/GY000~区域。 (X/Y 区域分配给了 Nano 机架上的 I/O。)Plus BUS-EX 也一样,分配在 GX/GY000~区域。(4) BUS-EXP 上的刷新数据数量Nano-CPU 中,BUS-EXP 上的通信模块刷新字节数量合计中存在限制。与顺控程序的同步刷新(DLNK-M、高速远程 I/O)(5) 连接 Plus BUS-EX 时的 Plus BUS-EX 状态通告连接 Plus BUS-EX 时,向特殊寄存器 P1-S026~通告的状态信息,在 Nano-CPU 中变更分配到 P2-S026~中。    PC10P 系列 <-> BUS-EXP      BUS-EXP 侧的电源 ON 最大允许延迟 10 秒       Nano-CPU <-> BUS-EXP    同时电源 ON      PC10P 系列 <-> BUS-EXP   机架 No.=1(机架 No.=0 用于 PC10P 的本体)    Nano-CPU <-> BUS-EXP          机架 No.=0      PC10P 系列 <-> BUS-EXP       X/Y000~    Nano-CPU <-> BUS-EXP       GX/GY000~      输入字节数量限制        全部输入刷新合计 64 kbyte 以下      输出字节数量限制    全部输出刷新合计 64 kbyte 以下       输入字节数量限制    同步型全部输入刷新合计 4 kbyte(32,768 点)以下     输出字节数量限制       同步型全部输出刷新合计 4 kbyte(32,768 点)以下  13-2
13.3 BUS-EX功能规格     No.   项目   规格        1      通信规格    USB2.00 480 Mbps     2   Nano 侧连接器   USB 类型 miniB 连接器     3      设置     配置在同一盘内  推荐电缆   USB 电缆     形状         生产厂家       型号     长度     ELECOM(株)           U2C-M05BK          0.5 m A(公)-miniB(公)型* 符合 RoHS 标准的产品                 U2C-M10BK     1.0 m   U2C-M15BK       1.5 m    U2C-M20BK  2.0 m   U2C-M30BK       3.0 m    U2C-M50BK    5.0 m  13-3
13.4 13.4.1与Plus BUS-EX的连接使用Plus BUS-EX时的I/O模块分配列表使用 Plus BUS-EX 时的 I/O 模块分配如下表所示。 请结合 Plus BUS-EX 安装状态,用 PCwin2 进行设定。    支架号    插槽 No.   模块名称 1                   0      Plus BUS-EX    1    Plus DLNK-M Plus CLNK-M    2    Plus EFR・Plus EFR2 Plus EX・Plus EX2 Plus CLNK-S    3 Plus EFR・Plus EFR2 Plus EX・Plus EX2 Plus CLNK-S     4      Plus IO24/16P    5 Plus IO24/16P     6   Plus IO24/16P     7      Plus IO24/16P    2        0    Plus MCML    1 -     2      -    3 -  3            0      Plus MCML    1    -    2 -     3      -  没有机架 No.0 的设定。 机架插槽的位置-:无设定        机架 1、插槽 2机架 1、插槽 3机架 1、插槽 1             13-4
使用 Plus IO24/16P 时的注意事项将 Plus IO24/16P 安装在 Plus BUS-EX 上使用时,Plus IO24/16P 的开关设定和 PCwin 中的 I/O 模块的 设定如下表所示。与在 Plus CPU 上安装 Plus IO24/16P 使用时有所不同,请多加注意。Plus IO24/16P 开关的位置                  插槽 No.的设定安装后即无法变更,因此,请务必在安装前设定增设 I/O(Plus IO24/16P)的插槽 No.。        SW1                                         时隙号4321                     4OFFOFFOFFOFF                5OFFOFFOFFON                6OFFOFFONOFF                7OFFOFFON            OFF 固定*1ON           *1 SW1的3、4为OFF固定。为 ON 时,有时会无法正常动作。注意: 插槽 No.在设定时要避免重复。13-5出厂设定
13.4.2 链接参数设定列表 <链接参数的设定>        模块名称       链路号码         支架号       时隙号           周边装置上的链接参数设定               Plus BUS-EX  任意   1   0    FL-net以太网 FL-远程 M    任意1  4 PC 链路 计算机链路 SIO MODBUS   未设定 未设定   未设定  (SN-I/F)         扩展板          Plus DLNK-M      任意    1      1      DLNK-M2   Plus CLNK-M       任意   1   1    CLNK-M       第1段           Plus EX    以太网端 口  任意  1   2    FL-net以太网 FL-远程 M    内置串行 任意1  5 PC 链路 计算机链路 SIO MODBUS Plus EX2       以太网端 口   任意 1     2   FL-net以太网 FL-远程 M EtherNet/IP     内置串行     任意 1     5   PC 链路 计算机链路 SIO MODBUS   Plus EFR       任意    1      2      FL-net以太网 FL-远程 M   Plus EFR2  任意1  2 FL-net以太网 FL-远程 M EtherNet/IP   Plus CLNK-S      任意  1      2    CLNK-S 13-6
        模块名称                 链路号码         支架号       时隙号           周边装置上的链接参数设定        扩展板             第2段           Plus EX    以太网端 口  任意  1   3    FL-net以太网 FL-远程 M    内置串行 任意1  5 PC 链路 计算机链路 SIO MODBUS Plus EX2       以太网端 口   任意 1     3   FL-net以太网 FL-远程 M EtherNet/IP     内置串行     任意 1     5   PC 链路 计算机链路 SIO MODBUS   Plus EFR       任意    1      3      FL-net以太网 FL-远程 M   Plus EFR2  任意1  3 FL-net以太网 FL-远程 M   Plus CLNK-S       任意 1     3   CLNK-S    增设板      Plus MCML      任意    2      0      Plus MCML    任意   3   0    Plus MCML  13-7
13.5 与BUS-EXP的连接 系统构成例CPU 基板 机架 0I/O 电缆机架 1增设基板机架 2机架 3安装 BUS-EXP 的机架为机架 0。 最大可连接 8 个机架。I/O 模块分配在 GX/GY000~区域。I/O 模块 通信模块 特殊模块 或为空  BUS-EXP                              CPU 基板8 插槽选择器基板6 插槽选择器基板4 插槽选择器基板                                                                         13-8CPU モジュール POWER 模块 POWER 模块 POWER 模块 POWER 模块
13.6 PCwin2 中的设定方法 13.6.1 I/O模块的设定方法在 PCwin2 中进行 I/O 模块的设定。1) 双击 PCwin2 的[Project(项目)]-[Parameter(参数)]-[I/O Module(I/O 模块)]时,显示 I/O 模块设定画面。2) 结合所使用的增设总线,在 BUS-EX, Plus BUS-EX 的其中之一上加入勾选。3) 进行各个机架的各插槽中使用的模块的设定。安装 BUS-EXP 的机架为机架 0。另外,最大可连接 8 个机架。使用 Plus BUS-EX 时,请参照“13.4.1 使用 Plus BUS-EX 时的 I/O 模块分配列表”。4) 所使用的所有模块的设定结束后,按下 OK,退出设定。注: Nano-CPU 中,BUS-EX 上的 I/O 地址分配在 GX/GY000~区域。    13-9
13.6.2 链接参数的设定在 PCwin2 中设定链接参数。1) 链路模块名的设定双击 PCwin2 中的[Project(项目)]-[Parameter(参数)]-[Link Parameter(链接参数)],打开链接 参数的设定画面。接着,点击[Link setup(链接设定)],打开链接的设定画面。在 BUS-EX 上加入勾选,并结合所使用的链接,设定机架 No.、插槽 No.、链接模块名称。链接模块名称的设定方法请参照下述使用说明书中各链接的章节。BUS-EXP:PC10 系列使用说明书(t-335n)中各链接的章节 链接模块名称的设定 Plus BUS-EX:Plus 系列使用说明书(t-380n)中各链接的章节 链接模块名称的设定2) 链接参数详细设定链接参数的详细设定请参照下述使用说明书中各链接的章节。BUS-EXP:PC10 系列使用说明书(t-335n)中各链接的章节 链接参数详细设定 Plus BUS-EX:Plus 系列使用说明书(t-380n)中各链接的章节 链接参数详细设定3) 所使用的所有链接参数的设定结束后,按下 OK,退出设定。 13-10    
13.7 Plus BUS-EX状态通告连接 Nano-CPU 与 Plus BUS-EX 时,向特殊寄存器 P2-S026~通告状态信息。(1) 通信模块LED信息(机架 0 信息) 向特殊寄存器通告各通信的 LED 状态。 P2-S026 P2-S027 P2-S028 P2-S029P2-S02AP2-S02B P2-S02C P2-S02D P2-S02E P2-S02F7 段信息 (内置选配 LED 信息) (插槽 0 预备) (插槽 0 预备)DeviceNet 7 段信息 (插槽 1 预备)7 段信息 (插槽 2 预备) 7 段信息 (插槽 3 预备)RED GR 内置输入滤波器时间(1~5ms)*1输入滤波器值 (PWR_ON 时:5 msbitF bitE bitD bitC bitB bitA bit9 bit8 bit7 bit6 bit5 bit4 bit3 bit2 bit1 bit0 用途主机000 NS_G NS_R MS_G MS_R DeviceNet LED 信息(内置标准 LED 信息) (插槽 0 模块代码)(插槽 1 模块代码) (插槽 2 模块代码) (插槽 3 模块代码)RED GR *2 RED GR *3 *1 内置以太网/FL-net/FL 远程 LED 信息*2 机架 0 插槽 2 以太网 /FL-net/FL 远程/EtherNet/IP LED 信息*3 机架 0 插槽 3 以太网 /FL-net/FL 远程/EtherNet/IP LED 信息P2-S029 从 P2-S026 通告 Plus CPU 内置功能的信息。*1 内置以太网/FL-net/FL 远程 LED 信息P2-S026 bit0,bit1 表示以太网/FL-net/FL 远程的通信状态。(bit0:GR(绿色)、bit1:RED(红色))这些 bit 表示通信状态。亮灯=1,灭灯=0。 • 使用以太网/FL-net) P2-S026 P2-S027 P2-S028 P2-S0297 段信息 (内置选配 LED 信息) (插槽 0 预备) (插槽 0 预备)RED GR 内置输入滤波器时间(1~5 ms)*1输入滤波器值 (PWR_ON 时:5 ms)bitF bitE bitD bitC bitB bitA bit9 bit8 bit7 bit6 bit5 bit4 bit3 bit2 bit1 bit0 用途(内置标准 LED 信息) (插槽 0 模块代码)          bit0:GR     bit1:RED     通信状态      亮绿灯  1   0   正在确立 100 Mbps 通信     闪绿灯  1/0   0   正在进行 100 Mbps 通信     红绿同时亮灯  1   1   正在确立 10 Mbps 通信    红绿同时闪灯  1/0 *1 1/0 *1 正在进行 10 Mbps 通信   亮红灯    0   1   链接参数异常   红色闪烁    0   1/0   连接异常/链路通信异常    熄灯    0     0     未连接电缆         注: 1/0为1和0交替显示。*1 闪橙灯为 bit0(GR)与 bit1(RED)在同一时间点上 1 和 0 交替显示。13-11
• FL远程时        bit0:GR     bit1:RED     通信状态      亮绿灯  1   0   远程操作中     闪绿灯  1/0   0   FL 参加中    亮红灯  0 1 链接参数异常    红色闪烁    0     1/0     通信异常    闪红绿灯  1/0 *1 0/1 *1 设定异常   熄灯    0   0    未连接电缆       注: 1/0为1和0交替显示。*1 闪红绿灯为 bit0=1 和 bit1=0 的组合与 bit0=0 和 bit1=1 的组合交替显示。P2-S026 bit8~bitF 保存着以往向 7 段显示器通告的信息。 详细内容请参照“(1-2)特殊寄存器中的 7 段信息的通告”。P2-S027 bit0~bit7、P2-S027 bit8~bitF 通告下表所示模块的信息。        信息通告寄存器     种类         链接 No.           支架号        插槽 No.        模块名称     基本模块  P2-S027 bit0~bit7  CPU    任意 内置 标准 PC 链路 计算机链路 SIO MODBUS  扩展板      P2-S027 bit8~bitF  EX or EX2(内置串行)        任意   内置   可选   PC 链路 计算机链路 SIO MODBUS    未设定      未设定     未设定     (SN-I/F)  各模块的信息内容如下所示。   模块名称    bit7 bit6     bit5 bit4    bit3 bit2     bit1  bit0   备注   PC-LINK      0   0      0    0     0   0      0     1/0    bit0:通信中闪烁   SIO  00  00  00  1/0 1/0 bit0=1:有接收数据 bit1=1:发送中   SN-I/F      0   0      0    0     0   0      0     1/0    bit0:通信中闪烁    CMP-LINK命令接收数量计数     MODBUS     0 0      0  0     0 0      0   0    注: 闪烁或 1/0 的表记表示 1 和 0 交替显示。P2-S028:是内置数字输入滤波器的时间设定寄存器。详细内容请参照 Plus 系列使用说明书(t-380n)“10. 数字输入滤波器”。13-12
P2-S02A,P2-S02B 将通告设备网的信息。 bitF bitE bitD bitC bitB bitA bit9 bit8 bit7 bit6 bit5 bit4 bit3 bit2 bit1 bit0 用途P2-S02A DeviceNet 7 段信息 主机 0 0 0 NS_G NS_R MS_G MS_R DeviceNet LED 信息P2-S02B (插槽 1 预备) (插槽 1 模块代码)P2-S02A bit0~bit3 将显示以下的状态。   指示灯名称       颜色      bit 的状态     状态定义    内容        MS    G        1 正常状态 模块正常状态  1/0    未设定状态    开关设定读入中   R        1 致命故障 硬件异常  1/0    轻微故障    开关设定错误等   G,R 0 没有供给电源 • 未向 DLNK-M2 供电 • 正在复位• 初期处理开始等待       NS           G          1   正常状态  网络正常状态  1/0    未连接状态    网络正常,但未确立通信状态   R   1 致命的通信异常 检测出无法在网络上进型通信的异常 • 节点地址重复• Busoff 检测   1/0  通信异常  部的子局通信异常     G, R      0     网络电源异常    通信用电源未供电  注: 1/0 的表记表示 1 和 0 交替显示。P2-S02A bit7(主机)在 DeviceNet 作为主局时为 1,作为子局时为 0。P2-S02A bit8~bitF 通告 DeviceNet 的 7 段信息。详细内容请参照“(1-2)特殊寄存器中的 7 段信息的通 告”。13-13
向 P2-S02C,P1-S02D 通告分配到插槽 2 中的模块信息。 向 P2-S02E,P1-S02F 通告分配到插槽 3 中的模块信息。*1 机架 0 插槽 2 以太网 /FL-net/FL 远程/EtherNet/IP LED 信息*2 机架 0 插槽 3 以太网 /FL-net/FL 远程/EtherNet/IP LED 信息P2-S02C 和 P2-S02E 的 bit0,bit1 表示以太网/FL-net/FL 远程/ EtherNet/IP 的通信状态。(bit0:GR(绿色)、 bit1:RED(红色))这些 bit 表示通信状态。亮灯=1,灭灯=0。 • 使用以太网/FL-net P2-S02C P2-S02D P2-S02E P2-S02F7 段信息 (插槽 2 预备) 7 段信息 (插槽 3 预备)(插槽 2 模块代码) (插槽 3 模块代码)RED GR RED GR*1*2bitF bitE bitD bitC bitB bitA bit9 bit8 bit7 bit6 bit5 bit4 bit3 bit2 bit1 bit0 用途          bit0:GR     bit1:RED     通信状态      亮绿灯  1   0   正在确立 100 Mbps 通信     闪绿灯  1/0   0   正在进行 100 Mbps 通信     红绿同时亮灯  1   1   正在确立 10 Mbps 通信    红绿同时闪灯  1/0 *1 1/0 *1 正在进行 10 Mbps 通信   亮红灯    0   1   链接参数异常   红色闪烁    0   1/0   连接异常/链路通信异常    熄灯    0     0     未连接电缆         注: 1/0为1和0交替显示。*1 闪橙灯为 bit0(GR)与 bit1(RED)在同一时间点上 1 和 0 交替显示。• FL远程时注: 1/0为1和0交替显示。*1 闪红绿灯为 bit0=1 和 bit1=0 的组合与 bit0=0 和 bit1=1 的组合交替显示。        bit0:GR     bit1:RED     通信状态      亮绿灯  1   0   远程操作中     闪绿灯  1/0   0   FL 参加中    亮红灯  0 1 链接参数异常    红色闪烁    0     1/0     通信异常    闪红绿灯  1/0 *1 0/1 *1 设定异常    熄灯    0     0     未连接电缆        13-14
• EtherNet/IP 时        bit0:GR     bit1:RED     通信状态      亮绿灯  1   0   确立最低 1 个以上的连接     闪绿灯  1/0   0   IP 地址已设定,连接未确立    亮红灯  0 1 IP 地址重复    红色闪烁    0     1/0     目标连接超时    闪红绿灯  1/0 *1 0/1 *1 电源接入时的测试   熄灯    0   0    IP 地址未设定       注: 1/0为1和0交替显示。*1 闪红绿灯为 bit0=1 和 bit1=0 的组合与 bit0=0 和 bit1=1 的组合交替显示。P2-S02C 和 P2-S02E 的 bit8~bitF 分别表示 7 段的信息。详细内容请参照“(1-2)特殊寄存器中的 7 段信 息的通告”。(2) 向特殊寄存器通告 7 段信息Plus CPU 将以往向信息显示器通告的信息作为 7 段信息通告给特殊寄存器。 关于保存目的地的特殊寄存器,请参照“(1)通信模块 LED 信息(机架 0 信息)”。正常通信时,通告“链接通信状态”,发生异常时,通告“错误代码”。 通告的内容根据所使用的功能,如下表所示。          正常通信时    发生异常时    FL-net 用 2 位的 16 进制来显示节点编号(局号)。 显示错误代码。另外,FL-net 网络中只有自局,未进行通信时,显示 “00”。     以太网  显示正在开放的连接。参照下图*1   显示错误代码。     FL 远程  用 2 位的 16 进制来显示主机的节点编号。   显示错误代码。     EtherNet/IP     0000    0000    DeviceNet  用 10 进制(00~63)来显示主机模块的节点地 址。通常显示 00。 交替显示错误代码(16 进制)和发送异常节点地址(10 进制)。发生多个异常时,如下图*2 所示,依次进行显示。 注: 关于错误代码的内容,请参照各功能的“5. 异常通告”相关章节。 *1 以太网正常时的连接显示   模块名称     bitF bitE    bitD bitC   bitB    bitA  bit9   bit8   备注   连接 No.      8  7     6 5    4     3  2   1    开放时,各位数中输入 1 *2 DeviceNet 的错误代码显示顺序 灭灯*30.1 秒 1 个异常灭灯*3 0.3 秒灭灯*3 0.1 秒1 个异常    错码 1秒发生异常 节点地址             *3 灭灯=00。13-15错码 1秒发生异常 节点地址
(3) 增设I/O端口状态(机架 1 信息)bitF bitE bitD bitC bitB bitA bit9 bit8 bit7 bit6 bit5 bit4 bit3 bit2 bit1 bit0 P2-S030P2-S031P2-S032 rg_enP2-S033 rg_enP2-S034 P2-S035 P2-S036 P2-S037P2-S038 P2-S039 P2-S03A P2-S03B P2-S03C P2-S03D P2-S03E P2-S03F-- err -- erriniok iniok插槽3 插槽2 插槽1 插槽0 未连接设定标志插槽3 插槽2 插槽1 插槽0 设定局无连接标志←插槽 1 状态 ←插槽 3 状态rg_en -- rg_en --插槽3 插槽2 插槽1 插槽0 通信请求标志插槽3 插槽2 插槽1 插槽0 通信中标志err iniok ←插槽 0 状态 err iniok ←插槽 2 状态增设 I/O 设定信息 机架 息增设 I/O 通信状态 增设 I/O 的状态 异常信息增设 I/O 当前值插槽 1 异常检出次数 插槽 3 异常检出次数 成帧异常检出次数 断裂异常检出次数-----插槽 0 输入字节数 -----插槽 1 输入字节数 -----插槽 2 输入字节数 -----插槽 3 输入字节数插槽 0 异常检出次数插槽 2 异常检出次数 奇偶异常检出次数通信 1 扫描时间(0.1ms 单位)插槽 0 安装模块代码 插槽 0 输出字节数 插槽 1 安装模块代码 插槽 1 输出字节数 插槽 2 安装模块代码 插槽 2 输出字节数 插槽 3 安装模块代码 插槽 3 输出字节数通信请求标志:未连接设定标志:通信中标志:设定局无连接:iniok err rg_en插槽*异常检出次数:奇偶异常检出次数:成帧异常检出次数:通信1扫描时间(0.1ms单位): 断裂异常检出次数:初始化时,所有插槽以 ON 开始。 关闭参数设定中设定为未安装,实际上没有应答的插槽。 打开参数设定中设定为未安装的插槽。打开通信中的插槽。 但是,初始化时没有应答,设定局无连接的标志为 ON 的插槽 即使之后通信开始时,在 CPU 复位之前,也不会为 ON。 有参数的设定,初始化时没有应答时为 ON。初始化时有应答时,输入 1。没有应答时为 0。用 I/O 检测硬件异常时,输入 1。解除异常后为 0。 可访问数字滤波器时输入 1。不可访问时为 0。是检出插槽*和 CPU 通信异常的次数。*为 0~3。 用复位/启动来进行复位。有 I/O 参数的设定,有安装时,对通信异常的检出次数进行计数。 没有 I/O 参数的设定,没有安装时为 1。有 I/O 参数的设定,没有安装时,通信异常的检出次数将继续增加。 没有 I/O 参数的设定,有安装时,对通信异常的检出次数进行计数。是在所有与 I/O 的通信中检出的奇偶校验异常的总数。 是在所有与 I/O 的通信中检出的成帧异常的总数。输入所有与I/O的通信全部进行一遍所需的时间。 是在所有与 I/O 的通信中检出的断裂异常的总数。13-16
P2-S040 P2-S041 P2-S042 P2-S043 P2-S044 P2-S045 P2-S046 P2-S047P2-S048 P2-S049 P2-S04A P2-S04B P2-S04C P2-S04D P2-S04E P2-S04F增设 I/O 设定用增设 I/O 板寄存器控制可设定、确认增设 I/O 板的输入滤波器时间。使用方法的详细内容请参照 Plus 系列使用说明书(t-380n)“10.1 数字输入功能”。    插槽 0 设定寄存器 1     插槽 0 设定寄存器 0       WR         插槽 0 设定寄存器 2   插槽 1 设定寄存器 1  插槽 1 设定寄存器 0       WR         插槽 1 设定寄存器 2   插槽 2 设定寄存器 1  插槽 2 设定寄存器 0       WR         插槽 2 设定寄存器 2   插槽 3 设定寄存器 1  插槽 3 设定寄存器 0       WR        插槽 3 设定寄存器 2      插槽 0 设定寄存器 1     插槽 0 设定寄存器 0       RD    软件版本 *1     插槽 0 设定寄存器 2   插槽 1 设定寄存器 1  插槽 1 设定寄存器 0       RD    软件版本 *1     插槽 1 设定寄存器 2   插槽 2 设定寄存器 1  插槽 2 设定寄存器 0       RD    软件版本 *1     插槽 2 设定寄存器 2   插槽 3 设定寄存器 1  插槽 3 设定寄存器 0       RD   软件版本 *1        插槽 3 设定寄存器 2  增设 I/O 模块寄存器 0:X000~X007 的滤波器时间 寄存器 1:X008~X00F 的滤波器时间 寄存器 2:X010~X017 的滤波器时间 WR: 写入请求标志RD: 确认请求标志(1~5 ms:电源接入时 5 ms) (1~5 ms:电源接入时 5 ms) (1~5 ms:电源接入时 5 ms)*1 软件版本的读出对应 Plus IO24/16P Ver.1.10~。Plus IO24/16P Ver1.10 以下时,在软件版本处输入 0。 Plus IO24/16P 的软件版本读出对应 Plus CPU Ver2.00~。13-17增设 I/O 确认用
 資料1. 外形尺寸图 資料1-1. CPU 模块110資料1-2. TOYOPUC-Nano AAA 107.5110(突起部)100 8 55TOYOPUC-Nano资 1-1121(突起部) 15.3[mm]121USB OPTUC-6941USB OP PUSHMS L1NSMS L2NSI/O BUSSTATUSBATTERYSTART PUSHRESET PCwinBUS-EXL3L(+) L(-) SG FG L(+) L(-) SG FG L455RUN E/A W BUS -EX[mm]
 資料1-3. 电源模块、输入输出模块、特殊模块、通信模块1 个插槽尺寸的模块全部为共通尺寸,仅端子台等的突起部有所不同。(1) PW2110110(突起部) 100 1227PW2PWRSTATUS TUV-6942RUN1 RUN2 24V 0V (NA)(2) I-22, I-12, O-29, O-28, O-19, O-18, O-12, AD, DA, CT, 2ML 共通 (端子台的磁极数量虽然各模块会有所不同,但外形尺寸为共通。)100(突起部) 812127资 1-2121[mm][mm]
(3) 2ET, SW, IO-329, IO-328, SL 共通 (连接器、开关类的布局虽然各模块会有所不同,但外形尺寸为共通。)100  27                            110   121            [mm]     (4) DL(突起部)100 4 27121                                     110                        [mm]     资 1-3
 資料1-4. 主板(1) 4BS,6BS, 8BS 外形尺寸、安装尺寸A: 安装间距[mm] B: 侧面宽度[mm]8BS(8 插槽基板)293.5 311.56BS(6 插槽基板)237.5 255.54BS(4 插槽基板)181.5 199.58.586 1109.5 17(释放时)[mm](2) 8BS 外观12 7.8 38.73656.73.54-R5(3) 6BS 外观12 7.8938.73656.73.5B:侧面宽度:311.5 A:安装间距:293.5B:侧面宽度:255.5 A:安装间距:237.598.586 1109.5 17(释放时)[mm]94-R54-R34-R3资 1-49
 12 7.8 38.73656.73.594-R598.5(4) 4BS 外观B:侧面宽度:199.5 A:安装间距:181.5(5) 将模块组装到基板上时的纵深 (不含 DIN 轨道的高度)TOYOPUC-Nano-AAA 以外时 112(不含端子台突起部)121TOYOPUC-Nano-AAA 时4-R386 1109.5 17(释放时)[mm][mm][mm]资 1-5
 ・ 本书的内容可能会由于产品改良而进行更改,恕不另行通知。・ 本书内容方面,我们一直希望能做到万无一失,但是万一您发现有可疑之处、错误之处以及遗漏之处,请与我们联系。 ・ 本书的内容之一部分或全部,不得转载。・初版・2015年 9月 ・8版・ 2017年 3月
●我们可以随时满足您的维护请求。请联系刈谷工厂呼叫中心TEL +81-566-21-8621 +81-566-25-8291 FAX +81-566-25-5469             设备工具和机电一体化部门刈谷工厂 〒448-8652 爱知县刈谷市朝日町 1-1         株式会社 太格特 2© 捷格对 可015-2017.使用说明书编号 T-10008Ch           * 产品规* 外汇及 出口许 可能会由外贸易管 。于改良而进行更改,恕不另行通知。 理法规定,相当于战略物资等(或作用)的产品出口至日本之外时,需要日本政府的