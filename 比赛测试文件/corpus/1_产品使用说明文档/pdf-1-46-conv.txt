前言   本系列说明书全面地介绍了 HNC-818 数控系统的特性、系统组成、 各部分的系统命令及其使用、操作步骤、用户编程方法及示例等, 是用户快速学习和使用本系统的基本说明书。本说明书的更新和升 级事宜,由武汉华中数控股份有限公司授权并组织实施。未经本公 司授权或书面许可,任何单位或个人无权对本说明书内容进行修改 或更正,本公司概不负责由此而造成的客户损失。HNC-818 数控系统用户说明书中,我们将尽力叙述各种与该系统操 作相关的事件。由于篇幅限制及产品开发定位等原因,不能也不可 能对系统中所有不必做或不能做的事件进行详细的叙述。因此,本 说明书中没有特别描述的事件均可视为“不可能”或“不允许”的 事件。此说明书的版权归武汉华中数控股份有限公司,任何单位与个人进 行出版或复印均属于非法行为,我公司将追究其法律责任。
HNC-818 数控系统用户说明书目录 目录前言 .............................................................................................................................................................................. i 目录 ............................................................................................................................................................................ iiiI 概述 ..................................................................................................................................................................... 11 概述 ............................................................................................................................................................. 22 规格表 ......................................................................................................................................................... 3II NC 功能 .............................................................................................................................................................. 41 概述 ............................................................................................................................................................. 51.1 数控机床的程序编制 ................................................................................................................. 61.2 机床坐标系 ................................................................................................................................. 71.3 机床零点 ..................................................................................................................................... 91.4 机床参考点 ............................................................................................................................... 101.5 工件坐标系与工件原点 ............................................................................................................111.6 编程零点 ................................................................................................................................... 121.7 绝对坐标系与相对坐标系 ....................................................................................................... 132 准备功能(G 代码) ............................................................................................................................... 142.1 G 代码一览表(T) ................................................................................................................. 152.2 G 代码一览表(M) ................................................................................................................ 173 程序构成 ................................................................................................................................................... 193.1 指令字的格式 ........................................................................................................................... 203.2 程序段的格式 ........................................................................................................................... 213.3 程序的一般结构 ....................................................................................................................... 223.4 程序的文件名 ........................................................................................................................... 233.5 程序文件属性 ........................................................................................................................... 243.6 子程序 ....................................................................................................................................... 254 辅助功能 ................................................................................................................................................... 264.1 M 指令....................................................................................................................................... 274.2 S 指令 ........................................................................................................................................ 324.3 T 指令 ........................................................................................................................................ 335 插补功能 ................................................................................................................................................... 355.1 线性进给(G01)..................................................................................................................... 365.2 圆弧进给(G02,G03).......................................................................................................... 395.3 圆柱螺旋线插补(G02,G03).............................................................................................. 445.4 虚轴指定及正弦线插补(G07)............................................................................................. 465.5 NURBS 样条插补(NURBS) ................................................................................................ 475.6 螺纹切削(G32)..................................................................................................................... 505.7 HSPLINE 样条插补(HSPLINE).......................................................................................... 535.8 跳转功能(G31)..................................................................................................................... 556 进给功能 ................................................................................................................................................... 56
目录HNC-818 数控系统用户说明书 iv7 8910111213146.1 快速进给(G00)..................................................................................................................... 576.2 第二进给速度(E) ................................................................................................................. 586.3 单方向定位(G60)................................................................................................................. 596.4 进给速度单位的设定(G93,G94,G95) ........................................................................... 616.5 准停检验(G09)..................................................................................................................... 636.6 切削模式(G61,G64).......................................................................................................... 646.7 进给暂停(G04)..................................................................................................................... 66参考点 ....................................................................................................................................................... 67 7.1 返回参考点(G28,G29,G30)........................................................................................... 68 坐标系 ....................................................................................................................................................... 718.1 机床坐标系编程(G53)......................................................................................................... 738.2 工件坐标系 ............................................................................................................................... 748.3 局部坐标系设定(G52)......................................................................................................... 788.4 坐标平面选择(G17,G18,G19)....................................................................................... 79坐标值与尺寸单位 ................................................................................................................................... 809.1 绝对指令和增量指令(G90,G91)...................................................................................... 819.2 尺寸单位选择(G20,G21).................................................................................................. 839.3 极坐标编程(M)(G16,G15) ............................................................................................ 849.4 直径与半径编程(T)(G36,G37) ..................................................................................... 87刀具补偿功能 ................................................................................................................................... 8810.1 刀具偏置(T) ......................................................................................................................... 8910.2 刀尖半径补偿(T)(G40,G41,G42)............................................................................... 9210.3 刀具半径补偿(M)(G40,G41,G42)概要说明............................................................ 10010.4 刀具半径补偿(M)(G40,G41,G42)详细说明............................................................ 10310.5 刀具长度补偿(M)(G43,G44,G49) ............................................................................112简化编程功能 ..................................................................................................................................11611.1 镜像功能(M)(G24,G25) ...............................................................................................11711.2 缩放功能(M)(G50,G51) .............................................................................................. 12111.3 旋转变换(M)(G68,G69) .............................................................................................. 12411.4 直接图纸尺寸编程(T) ....................................................................................................... 126固定循环 ......................................................................................................................................... 12912.1 铣床钻孔固定循环(M) ...................................................................................................... 13012.2 车床简单循环(T) ............................................................................................................... 17012.3 车床钻孔固定循环(T) ....................................................................................................... 18312.4 车床复合循环(T) ............................................................................................................... 18912.5 固定循环中的特殊情况 ......................................................................................................... 206用户宏程序 ..................................................................................................................................... 20713.1 变量 ......................................................................................................................................... 20813.2 运算指令 ................................................................................................................................. 21313.3 宏语句 ..................................................................................................................................... 21513.4 宏程序调用 ............................................................................................................................. 219主轴功能 ......................................................................................................................................... 22514.1 恒线速度切削控制(T)(G96,G97) ............................................................................... 226
HNC-818 数控系统用户说明书 目录 15 1617III1234514.2 15.116.1 16.217.1 17.2 17.3 17.4 17.5 17.6C/S 轴切换功能(CTOS,STOC) ...................................................................................... 228 可编程数据输入 ............................................................................................................................. 229 可编程数据输入(G10,G11)............................................................................................ 230 轴控制功能 ..................................................................................................................................... 234 旋转轴的循环功能 ................................................................................................................. 235 带距离编码的光栅尺回零 ..................................................................................................... 236 其他功能 ......................................................................................................................................... 238 停止预读(G08)................................................................................................................... 239 回转轴角度分辨率重定义(G115) ..................................................................................... 240 轴释放(G101)及轴获取(G102).................................................................................... 241 指令通道加载程序(G103)及运行(G103.1) ................................................................. 243 通道同步(G104)................................................................................................................. 244 报警(G110)......................................................................................................................... 245操作 ......................................................................................................................................................... 246操作设备 ................................................................................................................................................. 2471.1 显示器 ..................................................................................................................................... 2481.2 NC 键盘................................................................................................................................... 2501.3 机床控制面板 ......................................................................................................................... 2511.4 手持单元 ................................................................................................................................. 2531.5 系统操作界面 ......................................................................................................................... 254上电、关机、急停 ................................................................................................................................. 2552.1 上电 ......................................................................................................................................... 2562.2 复位 ......................................................................................................................................... 2572.3 返回机床零点 ......................................................................................................................... 2582.4 急停 ......................................................................................................................................... 2592.5 超程解除 ................................................................................................................................. 2602.6 关机 ......................................................................................................................................... 261机床手动操作 ......................................................................................................................................... 2623.1 坐标轴移动 ............................................................................................................................. 2633.2 主轴控制 ................................................................................................................................. 2663.3 机床锁住、MST 锁住、Z 轴锁住 ......................................................................................... 2683.4 其他手动操作 ......................................................................................................................... 2693.5 手动数据输入(MDI)运行.................................................................................................. 273设置 ......................................................................................................................................................... 2754.1 刀具管理(T 系列) .............................................................................................................. 2764.2 刀具管理(M 系列) ............................................................................................................. 2794.3 坐标系的设置 ......................................................................................................................... 2804.4 相对清零 ................................................................................................................................. 2834.5 参数 ......................................................................................................................................... 284程序编辑与管理 ..................................................................................................................................... 2995.1 程序选择 ................................................................................................................................. 3005.2 程序编辑 ................................................................................................................................. 3055.3 程序管理 ................................................................................................................................. 308
目录HNC-818 数控系统用户说明书 vi6785.4 任意行 ..................................................................................................................................... 3105.5 程序校验 ................................................................................................................................. 3125.6 停止运行 ................................................................................................................................. 3135.7 重运行 ..................................................................................................................................... 314运行控制 ................................................................................................................................................. 3156.1 启动、暂停、中止 ................................................................................................................. 3166.2 空运行 ..................................................................................................................................... 3176.3 程序跳段 ................................................................................................................................. 3186.4 选择停 ..................................................................................................................................... 3196.5 单段运行 ................................................................................................................................. 3206.6 加工断点保存与恢复 ............................................................................................................. 3216.7 运行时干预 ............................................................................................................................. 324位置信息 ................................................................................................................................................. 3267.1 坐标显示 ................................................................................................................................. 3277.2 正文显示 ................................................................................................................................. 3287.3 图形显示 ................................................................................................................................. 3297.4 联合显示 ................................................................................................................................. 333诊断 ......................................................................................................................................................... 3348.1 报警显示 ................................................................................................................................. 3358.2 报警历史 ................................................................................................................................. 3368.3 梯图监控 ................................................................................................................................. 3378.4 输入输出 ................................................................................................................................. 3408.5 状态显示 ................................................................................................................................. 3418.6 宏变量 ..................................................................................................................................... 3428.7 伺服调整 ................................................................................................................................. 3438.8 加工信息 ................................................................................................................................. 3508.9 版本 ......................................................................................................................................... 351用户使用与维护信息 ............................................................................................................................. 3529.1 环境条件 ................................................................................................................................. 3539.2 接地 ......................................................................................................................................... 3549.3 供电条件 ................................................................................................................................. 3559.4 风扇过滤网清尘 ..................................................................................................................... 3569.5 长时间闲置后使用 ................................................................................................................. 3579
I 概述1
1. 概述1 概述HNC-818 数控系统用户说明书    本说明书叙述如下型号的数控系统:    类型名    缩略词     HNC-818     HNC-818A 车削数控单元(带手摇)  HNC-818A-TU-H HNC-818A 车削数控单元(无手摇)  HNC-818A-TU-X HNC-818B 车削数控单元  HNC-818B-TU HNC-818A 铣削数控单元  HNC-818A-MU HNC-818B 铣削数控单元   HNC-818B-MU      2
HNC-818 数控系统用户说明书2. 规格表 2 规格表   本书中使用下列符号,其含义如下:M:表示只有在铣削系列中有效的说明; T:表示只有在车削系列中有效的说明;IP_:表示任意轴的组合,诸如 X_ Y_ Z_ ...。紧跟地址之后的底划 线处,将输入坐标值等数值。3
4IINC功能
HNC-818 数控系统用户说明书1. 概述 1 概述   本章包含以下内容:1.1 数控机床的程序编制 1.2 机床坐标系1.3 机床零点1.4 机床参考点1.5 工件坐标系与工件原点 1.6 编程零点1.7 绝对坐标系与相对坐标系5
1. 概述 HNC-818 数控系统用户说明书 1.1 数控机床的程序编制CNC 机床是按事先编好的加工程序进行零件加工的。程序编制的好 坏直接影响零件加工质量、生产率和刀具寿命等。一个好的编程员 应该是一个好的工艺员、设备员和能熟练掌握、灵活运用 CNC 机床 编程功能的操作员。所谓程序编制,就是编程员根据加工零件的图样和加工工艺,将零 件加工的工艺过程、工艺参数、加工路线以及加工中需要的辅助动. 作,如换刀、冷却、夹紧、主轴正反转等,按照加工顺序和所用 CNC 机床规定的指令代码及程序格式变成加工程序单。再将程序单中的 全部内容输入到数控装置中,从而指挥 CNC 机床加工。这种根据零 件图样和加工工艺转换成数控语言并输入到数控装置的过程称为数 控加工的程序编制。 程序编制的一般方法和步骤,如下图所示:   运 动 轨 迹 计 算手自 工动 编编 程程 或    工 件 图制 定 工 艺程 序 输 入程首 序件 校试 验切机床加工       6修改
HNC-818 数控系统用户说明书1. 概述 1.2 机床坐标系 机床坐标系是为了确定工件在机床上的位置、机床运动部件的特殊 位置以及运动范围等而建立的几何坐标系,是机床上固有的坐标系。 在机床坐标系下,始终认为工件静止,而刀具是运动的。这就使编 程人员在不考虑机床上工件与刀具具体运动的情况下,依据零件图 样,确定机床的加工过程。标准机床坐标系采用右手直角笛卡尔坐标系,其坐标命名为 X、Y、 Z,常称为基本坐标系,如下图所示。其规定遵循右手定则,伸出右 手的大拇指、食指和中指,并互相垂直,则大拇指的指向为 X 坐标 的正方向,食指的指向为 Y 坐标的正方向,中指的指向为 Z 坐标的 正方向。围绕 X、Y、Z 坐标轴或与 X、Y、Z 坐标轴平行的坐标轴线旋转的 圆周进给坐标分别用 A、B、C 表示,根据右手螺旋定则,大拇指的 指向为 X、Y、Z 坐标中任意一轴的正向,则其余四指的旋转方向即 为旋转坐标 A、B、C 的正向。 Z坐标的确定规定平行于主轴轴线的坐标为 Z 坐标,对于没有主轴的机床, 则规定垂直于工件装夹表面的方向作为 Z 坐标轴的方向。Z 轴 的正方向是使刀具离开工件的方向。 X坐标的确定在刀具旋转的机床上,如铣床、钻床、镗床等,若 Z 轴是水平 的,则从刀具(主轴)向工件看时,X 轴的正方向指向右边; 如果 Z 轴是垂直的,则主轴向立柱看时,X 轴的正方向指向右 边。上述方向都是刀具相对工件运动而言的。在工件旋转的机床上,如车床、磨床等,X 轴的运动方向是工 件的径向并平行于横向拖板,刀具离开工件旋转中心的方向是 X    +Y+Y+C +Z+X+X +A+X, +Y, +Z +A, +B, +C      +Z7
1. 概述HNC-818 数控系统用户说明书 轴的正方向。  Y坐标的确定在确定了 X、Z 轴的正方向后,可按右手直角笛卡尔坐标系,用 右手螺旋法则来确定 Y 坐标的正方向,即在 ZX 平面内,从+Z 转到+X 时,右螺旋应沿+Y 方向前进。不同的机床类型可能会完全不同。例如六轴加工中心坐标系, 如下图所示。  8
HNC-818 数控系统用户说明书1. 概述 1.3 机床零点 机床坐标系的原点称为机床零点(X=0,Y=0,Z=0)。机床零点是机 床上的一个固定点,由制造厂确定。它是其它所有坐标系,如工件 坐标系、编程坐标系,以及机床参考点的基准点 CNC 铣床的零点位 置,各生产厂家不一致。有的设置在机床工作台中心,有的设置在 进给行程范围的终点。  9
1. 概述1.4 机床参考点HNC-818 数控系统用户说明书机床参考点是由机床制造厂家在每个进给轴上用限位开关精确调整 好的,坐标值已输入数控系统中,其固定位置由各轴向的机械挡块 来确定。一般数控机床开机后,用控制面板上的“手动返回参考点” 按钮使刀具或工作台退离到该点。通常在数控铣床和加工中心上, 机床参考点与机床原点是重合的,如下图所示。    10
HNC-818 数控系统用户说明书 1. 概述 1.5 工件坐标系与工件原点工件坐标系是用于确定工件几何要素(点、直线、圆弧)的位置而 建立的坐标系。工件坐标系的原点即是工件零点。选择工件零点时, 最好把工件零点放在工件图的尺寸能够方便地转换成坐标值的地 方。铣床工件零点,一般设在工件外轮廓的某一个角上,进刀深度 方向的零点,大多取在工件表面。在加工时,工件随夹具在机床上安装后,测量工件原点与机床原点 间的距离(通过测量某些基准面、线之间的距离来确定),这个距离 称为工件原点偏置(是机床原点在工件坐标系中的绝对坐标值),如 下图所示。在零件加工之前,将该偏置值预存到数控系统中,加工 时,工作原点偏置值会自动附加到工件坐标系上,使数控机床实现 准确的坐标移动。因此,编程人员可以不考虑工件在机床上的安装 位置,直接按图纸尺寸编程。  YY工件原点偏置 机床坐标系O 工工件坐标系XY  11
1. 概述1.6 编程零点HNC-818 数控系统用户说明书编程零点即是程序零点,一般对于简单零件,工件零点就是编程零 点。而对形状复杂的零件,需要编制几个程序或子程序。为了编程 方便和减少许多坐标值的计算,编程零点就不一定设在工件零点上, 而设在便于程序编制的位置。机床上的坐标系及相关点,如下图所示。     M:机床零点 R:机床参考点 W:工件零点 12
HNC-818 数控系统用户说明书 1. 概述 1.7 绝对坐标系与相对坐标系 数控系统中描述运动轨迹移动量的方式有两种:绝对坐标系与相对坐标系:- 绝对坐标系是指所有坐标点均以某一固定原点计量的坐标系;- 相对坐标系是指运动轨迹的终点坐标相对于起点来计量的坐标 系。如下图所示,A、B 为坐标中的两点,在绝对坐标系中,A、B 两点 的坐标分别为xA , yA  40,40,xB , yB  15,20;如果在以 A 点为原点建立的相对坐标系中,则 B 点的相对坐标为xB , yB   25,20。    YYA      X   B   O1525 X 40  13202040
2. 准备功能HNC-818 数控系统用户说明书 2 准备功能(G 代码) 模态分组G 代码按其有效期可分为两种:- 非模态 G 代码:只有指定该 G 代码时才有效,未指定时无效;- 模态 G 代码:该类 G 代码执行一次后由 CNC 系统存储,在同 组其它代码执行之前一直有效。G 代码按其功能类别分为若干个组,其中 00 组为非模态 G 代码,其 它组均为模态 G 代码。同一程序段中可以指定多个不同组的 G 代码, 若在同一程序段中指定了多个同组代码,只有最后指定的代码有效。   14
HNC-818 数控系统用户说明书2. 准备功能 2.1 G 代码一览表(T) 注意系统上电后,表中标注“【 】”符号的为同组中初始模态,标注“『 』” 符号的为该 G 代码的等效宏名。    G代码  组号  功能  G00  01   快速定位   【G01】   线性插补   G02 顺时针圆弧插补/顺时针圆柱螺旋插补   G03  逆时针圆弧插补/逆时针圆柱螺旋插补 G04  00 暂停  G07  00  虚轴指定   G08  关闭前瞻功能   G09  准停校验  G10 07  可编程数据输入   【G11】  可编程数据输入取消  G17   02  XY 平面选择   G18 ZX 平面选择   【G19】  YZ 平面选择  G20  08  英制输入   【G21】 公制输入  G28   00  返回参考点   G29  从参考点返回   G30 返回第 2、3、4、5 参考点 G32  01 螺纹切削  【G36】  17  直径编程   G37 半径编程  【G40】   09  刀具半径补偿取消   G41  左刀补   G42 右刀补  G52 00  局部坐标系设定   G53  直接机床坐标系编程  G54.x11  扩展工件坐标系选择   【G54】   工件坐标系 1 选择   G55    工件坐标系 2 选择   G56  工件坐标系 3 选择   G57   工件坐标系 4 选择   G58    工件坐标系 5 选择   G59  工件坐标系 6 选择 G60  00  单方向定位              15
2. 准备功能 HNC-818 数控系统用户说明书     【G61】  12   精确停止方式   G64 切削方式 G65  00 宏非模态调用  G71 06  内(外)径粗车复合循环   G72  端面粗车复合循环   G73   闭合车削复合循环   G76    螺纹切削复合循环   G80  内(外)径切削循环   G81    端面切削循环   G82   螺纹切削循环   G74  端面深孔钻加工循环   G75   外径切槽循环   G83    轴向钻循环   G87  径向钻循环   G84   轴向刚性攻丝循环   G88   径向刚性攻丝循环  【G90】 13  绝对编程方式   G91  增量编程方式 G92  00 工件坐标系设定  G93  14  反比时间进给   【G94】   每分钟进给   G95 每转进给  【G97】 19  圆周恒线速度控制关   G96  圆周恒线速度控制开  G108 『STOC』   00   主轴切换为 C 轴   G109 『CTOS』 C 轴切换为主轴   G115  回转轴角度分辨率重定义        16
HNC-818 数控系统用户说明书 2. 准备功能 2.2 G 代码一览表(M)注意 系统上电后,表中标注“【 】”符号的为同组中初始模态,标注“『 』” 符号的为该 G 代码的等效宏名。    G代码  组号  功能  G00  01   快速定位   【G01】  线性插补   G02   顺时针圆弧插补/顺时针圆柱螺旋插补   G03 逆时针圆弧插补/逆时针圆柱螺旋插补  G04 00  暂停   G07   虚轴指定   G07.1  圆柱面插补   G08   关闭前瞻功能   G09   准停校验  G10 07  可编程数据输入   【G11】  可编程数据输入取消  G12  18  极坐标插补方式开启   【G13】 极坐标插补方式取消  【G15】 16  极坐标编程取消   G16  极坐标编程开启  【G17】  02  XY 平面选择   G18   ZX 平面选择   G19 YZ 平面选择  G20 08  英制输入   【G21】  公制输入  G24  03  镜像功能开启   【G25】 镜像功能关闭  G28   00  返回参考点   G29  从参考点返回   G30 返回第 2、3、4、5 参考点  【G40】  09  刀具半径补偿取消   G41   左刀补   G42 右刀补  G43  10  刀具长度正向补偿   G44   刀具长度负向补偿   【G49】 刀具长度补偿取消  【G50】 04  缩放功能关闭   G51  缩放功能开启  G52 00   局部坐标系设定   G53  直接机床坐标系编程              17
2. 准备功能 HNC-818 数控系统用户说明书     G54.x 11   扩展工件坐标系选择   【G54】  工件坐标系 1 选择   G55   工件坐标系 2 选择   G56    工件坐标系 3 选择   G57  工件坐标系 4 选择   G58   工件坐标系 5 选择   G59   工件坐标系 6 选择 G60  00 单方向定位 【G61】  12 精确停止方式 G64   切削方式 G65  00 宏非模态调用  G68 05  旋转变换开始   【G69】  旋转变换取消  G7306  深孔钻削循环   G74   反攻丝循环   G76    精镗循环   【G80】  固定循环取消   G81   中心钻循环   G82    带停顿钻孔循环   G83  深孔钻循环   G84    攻丝循环   G85   镗孔循环   G86  镗孔循环   G87   反镗循环   G88    镗孔循环(手镗)   G89  镗孔循环  【G90】  13  绝对编程方式   G91 增量编程方式 G92  00 工件坐标系设定  G93   14  反比时间进给   【G94】  每分钟进给   G95 每转进给  【G98】 15  固定循环返回起始点   G99  固定循环返回参考点  G108 『STOC』  00 主轴切换为 C 轴   G109 『CTOS』  C 轴切换为主轴   G115   回转轴角度分辨率重定义  NURBS 00   NURBS 样条插补   HSPLINE  HSPLINE 样条插补             18
HNC-818 数控系统用户说明书3. 程序构成 3 程序构成   一个零件程序是一组被传送到数控装置中去的指令和数据。一个零件程序是由遵循一定结构、句法和格式规则的若干个程序段 组成的,而每个程序段是由若干个指令字组成的。如下图所示。 程序程序段指令字  %1000N01 G91 G00 X50 Y60N...... N200 N10 G01 X100 Y500 F150 S300 M03 M02   19
3. 程序构成HNC-818 数控系统用户说明书 3.1 指令字的格式 20一个指令字是由地址符(指令字符)和带符号(如定义尺寸的字) 或不带符号(如准备功能字 G 代码)的数字数据组成的,如:G01 X100 Z-90。程序段中不同的指令字符在不同的环境下有不同的含义,详细可以 参看各功能指令章节描述。
HNC-818 数控系统用户说明书3. 程序构成 3.2 程序段的格式 一个程序段定义一个将由数控装置执行的指令行。程序段的格式定义了每个程序段中功能字的句法,如下图所示。  N..  G.. X.. F.. M..S..程序段      程序段号尺寸字 准备功能工艺功能字主轴功能字 辅助功能字 21
3. 程序构成3.3 程序的一般结构起始符程序结束注释符单行指令HNC-818 数控系统用户说明书一个零件程序必须包括起始符和结束符。一个零件程序是按程序段的输入顺序执行的,而不是按程序段号的顺序执行的,但书写程序时,建议按升序书写程序段号。%(或 O)后跟数字,如:%3256。程序起始符应单独一行,并从程 序的第一行、第一格开始。后接的数字必须为 4 位阿拉伯数字。M02:程序结束; M30:程序结束并返回程序头括号()内或分号; 后的内容为注释文字。注意区分;和; 。在编写加工 G 代码程序时,有些指令必须是单独一行编写。如:M30、 M02、M99、CTOS、STOC、G16、G15 等指令。  22
HNC-818 数控系统用户说明书3. 程序构成 3.4 程序的文件名文件名命名规则CNC 装置可以装入许多程序文件,以磁盘文件的方式读写。 Oxxxxx; xxxxx 代表文件名本系统通过调用文件名来调用程序,进行加工或编辑。可以使用如下字符组成文件名:- 26 个字母,大小写均可;- 数字; 包括以上字符文件名最多设定 7 个字符;另外 CNC 保留如下文件名,这些不能被指定为用户程序名: USERDEF.CYC、MILLING.CYC、TURNING.CYC。 23
3. 程序构成HNC-818 数控系统用户说明书 3.5 程序文件属性禁止编辑对于程序文件,可以设置其访问属性。通过界面操作可将当前加载程序设置为只读属性,此时文件将不能 被改写,直到通过界面操作将它设置为可写属性为止。另外,也可以通过工程面板的钥匙开关也可以控制程序的访问属性, 只不过此钥匙开关是对程序管理器中的所有程序起作用,即是当开 关关闭时,所有程序将变为只读状态,直到开关打开为止。关于程序文件属性控制的详细描述请参见本说明书的第III章的 5.2.5 节。 24
HNC-818 数控系统用户说明书3. 程序构成 3.6 子程序执行过程当一个程序中有固定加工操作重复出现时,可通过将这部分操作为子程序事先输入到程序中,以简化编程。  主程序 子程序 1001 子程序 1002子程序 2001    ...... M98P1001; ...... M98P2001; ...... M98P1001; ...... M30;%1001; ...... M98P1002 ;......%1002; ...... ...... M99;    %2001; ...... ...... M99;子程序调用通过 M98 和 G65 调用子程序。M98 调用子程序方法请见第四章辅助 功能中 M98 指令说明,G65 调用子程序具体调用方法见用户宏程序 章节。25
4. 辅助功能4 辅助功能HNC-818 数控系统用户说明书    26本章包含以下内容:4.1 M 指令 4.2 S 指令 4.3 T 指令
HNC-818 数控系统用户说明书4. 辅助功能 4.1 M指令 模态模态分组前后属性辅助功能代码由地址字 M 及其后的数字组成,主要用于控制零件程 序的走向、机床各种辅助开关动作以及指定主轴启动、主轴停止、 程序结束等辅助功能。通常,一个程序段只有一个 M 代码有效。本系统中,一个程序段中 最多可以指定 4 个 M 代码(同组的 M 代码不要在一行中同时指定)。M00,M01,M02,M30,M99 等 M 代码要求单行指定,即含上述 M 代码的程序行,不仅只能有一个 M 代码,且不能有 G 指令,T 指 令等其它执行指令。M 代码和功能之间的对应关系,依赖于机床制造商的具体设定。M 功能有非模态 M 功能和模态 M 功能两种形式:- 非模态 M 功能(只当前段有效);- 模态 M 功能(续效代码);模态 M 指令是根据功能不同进行分组的,指定的 M 模态指令一旦被 执行,就一直有效,直到被同一组的 M 模态指令注销位置。模态 M 功能组中包含一个缺省功能,系统上电时将被初始化为该功 能。M 功能还可分为前作用 M 功能和后作用 M 功能二类: - 前作用M功能在程序段编制的轴运动之前执行; - 后作用M功能  在程序段编制的轴运动之后执行。27
4. 辅助功能HNC-818 数控系统用户说明书 4.1.1 CNC 内定的辅助功能 M00程序暂停当 CNC 执行到 M00 指令时,将暂停执行当前程序,以方便操作者 进行刀具和工件的尺寸测量、工件调头、手动变速等操作。暂停时,机床进给停止,而全部现存的模态信息保持不变,欲继续 执行后续程序,重按操作面板上的“循环启动”键。M00 为非模态后作用 M 功能。选择停如果用户按亮操作面板上的“选择停”键。当 CNC 执行到 M01 指 令时,将暂停执行当前程序,以方便操作者进行刀具和工件的尺寸 测量、工件掉头、手动变速等操作。暂停时,机床的进给停止,而 全部现存的模态信息保持不变,欲继续执行后续程序,重按操作面 板上的“循环启动”键。如果用户没有激活操作面板上的“选择停”键。当 CNC 执行到 M01 指令时,程序就不会暂停而继续往下执行。M01 为非模态后作用 M 功能。程序结束M02 编在主程序的最后一个程序段中。当 CNC 执行到 M02 指令时,机床的主轴、进给、冷却液全部停止, 加工结束。使用 M02 的程序结束后,若要重新执行该程序,就得重新调用该程 序,或在自动加工子菜单下,按“重运行”键(请参考本说明书的 操作部分),然后再按操作面板上的“循环启动”键。M02 为非模态后作用 M 功能。 程序结束并返回(注意:此指令必须以单独一行形式才能有效)M30 和 M02 功能基本相同,只是 M30 指令还兼有控制返回到零件 程序头(%)的作用。使用 M30 的程序结束后,若要重新执行该程序,只需再次按操作面 板上的“循环启动”键。M01M02M3028
HNC-818 数控系统用户说明书 M98/M994. 辅助功能 子程序调用功能如果程序含有固定的顺序或频繁重复的模式,这样的一个顺序或模 式可以在存储器中存储为一个子程序以简化该程序。子程序被调用次数(L)最大为 10000 次。 可以从主程序调用一个子程序。 另外,一个被调用的子程序也可以再调用另一个子程序。 子程序的结构%xxxx; 子程序号 ......; 子程序内容 M99; 子程序返回子程序调用(M98) M98 P□□□□ L△△△  □□□□:被调用的子程序号(为阿拉伯数字)  △△△:子程序重复调用的次数子程序嵌套调用 当主程序调用子程序时,被当做一级子程序调用。子程序调用最多可嵌套 8 级,如下所示:     %1000... M98P1001 ...M30%1001... M98P1002 ...M99%1002... M98P1003 ...M99%1008 ...... M99  ......  在主程序中使用 M99如果在主程序中执行 M99,则控制返回到主程序的开始处,从头开 始执行主程序。29
4. 辅助功能HNC-818 数控系统用户说明书 4.1.2 PLC 设定的辅助功能 M3/4/5主轴控制M03 启动主轴以程序中编制的主轴速度顺时针方向(从 Z 轴正向朝Z 轴负向看)旋转。M04 启动主轴以程序中编制的主轴速度逆时针方向旋转。M05 使主轴停止旋转。M03、M04 为模态前作用 M 功能;M05 为模态后作用 M 功能,M05 为缺省功能。M03、M04、M05 可相互注销。M06 用于在加工中心上调用一个欲安装在主轴上的刀具。当执行该 指令刀具将被自动地安装在主轴上。如:M06 T01;则01号刀将被 安装到主轴上。M06 为非模态后作用 M 功能。 对于斗笠式刀库机床,其换刀过程如下(如将主轴上的 15 号刀换程01 号刀,即执行 M06 T01 指令):(1) 主轴快移到固定的换刀位置(该位置已由调试人员设置完成);(2) 主轴旋转定向;(3) 刀库旋转到该刀位置(即刀库表中的,0 组刀号位置 15);(4) 气缸推动刀库,卡住主轴上刀具;(5) 主轴上气缸松开刀具,吹气清理主轴;(6) 主轴上移,并完全离开刀具;(7) 刀库旋转到将更换刀具的位置(即 01 号位置,此时刀库表中的, 0 组刀号位置变为 01);(8) 主轴向下移动,接住刀具;(9) 主轴上气缸夹紧刀具;(10)刀库退回原位; (11)主轴解除定向。M06 换刀30
HNC-818 数控系统用户说明书 M7/8/94. 辅助功能 M64M19/M20M07、M08 为模态前作用 M 功能;M09 为模态后作用 M 功能,M09 为缺省功能。计件M64 指令将使系统加工统计中的工件完成数目累加。主轴定向M19 指令主轴定向 M20 指令取消主轴定向冷却液控制M07、M08 指令将打开冷却液管道。M09 指令将关闭冷却液管道。31
4. 辅助功能4.2 S指令直接指定主轴转速的方法用代码指定主轴转速的方法HNC-818 数控系统用户说明书主轴功能 S 控制主轴转速,其后的数值表示主轴速度,单位为转/分 钟(r/min)。S 是模态指令,S 功能只有在主轴速度可调节时有效。在有些机械变档的车床中,通过在 S 后指定一个数值,则给机床输 入一个代码信号,由此来控制机床端的主轴转速。这种方式需要在梯形图中进行处理。  32
HNC-818 数控系统用户说明书4. 辅助功能 4.3 T指令铣削系统(M 系列)T 代码用于选刀,其后的数值表示选择的刀具号,T 代码与刀具的关 系是由机床制造厂规定的。在加工中心上执行 T 指令,即给机床输入一个代码信号或选通脉冲 信号,由此来控制刀库转动至所选择的刀具,然后等待,直到 M06 指令作用时自动完成换刀。对于斗笠式刀库,要求 M06 指令和 T 指 令写在同一程序段中。换刀时要注意刀库表中,0 组刀号(如是:15) 为主轴上所夹持刀具在刀库中的位置号,该刀具在换其它刀具时, 要将该刀具还给刀库中该位置(即 15 号位),此时刀库中该位置不 得有刀具,否则将发生碰撞。刀库表中的刀具为系统自行管理,一 般不得修改,开机时刀库中正对主轴的刀位(如是:15),应与刀库 表中 0 组刀号相同(应为:15),且刀库上该位不得有刀具。因此刀库上刀时,建议先将刀具安装在主轴上,然后在 MDI 模式下, 运行 M 和 T 指令(如:M06 T01),通过主轴将刀具安装到刀库中。T 代码用于选刀和换刀,其后的 4/6/8 位数字表示选择的刀具号和刀 具补偿号。TXX XX(4 位数字),前两位数字指刀具号,后两位数字是刀具补 偿号TXXX XXX(6 位数字),前三位数字指刀具号,后三位数字是刀具 补偿号TXXXX XXXX(8 位数字),前四位数字指刀具号,后四位数字是刀 具补偿号T 代码与刀具的关系是由机床制造厂规定的,请参考机床厂家的说明 书。可以通过设置参数来确定 T 代码后带数字位数,通常默认为 4 位。 当参数P000061为2时,T代码后带4位数字。 当参数P000061为3时,T代码后带6位数字。同一把刀可以对应多个刀具补偿,比如说 T0101、T0102、T0103。 也可以多把刀对应一个刀具补偿,比如说 T0101、T0201、T0301。执行 T 指令,转动转塔刀架,选用指定的刀具。同时调入刀补寄存 器中的补偿值(刀具的几何补偿值即偏置补偿与磨损补偿之和)。执 行 T 指令时并不立即产生刀具移动动作,而是当后面有移动指令时 一并执行。 车削系统(T 系列)33
4. 辅助功能HNC-818 数控系统用户说明书 当一个程序段同时包含 T 代码与刀具移动指令时:先执行 T 代码指令,而后执行刀具移动指令。%0012N01 T0101N02 M03 S460N03 G00 X45 Z0N04 G01 X10 F100N05 G00 X80 Z30N06 T0202N07 G00 X40 Z5N08 G01 Z-20 F100N09 G00 X80 Z30M10 M30 刀具补偿功能详细参见刀具补偿功能章节。 34
HNC-818 数控系统用户说明书5. 插补功能 5 插补功能   本章包含以下内容:5.1 线性进给5.2 圆弧进给5.3 圆柱螺旋线插补 5.4 虚轴指定5.5 NURBS 样条插补 5.6 螺纹切削5.7 HSPLINE 样条插补 5.8 跳转功能35
5. 插补功能HNC-818 数控系统用户说明书 5.1 线性进给(G01)格式说明G01 可以使刀具从起始点沿线性轨迹进给到终点。 G01 IP_ F_G01 指令刀具以联动的方式,按 F 规定的合成进给速度,从当前位 置按线性路线移动到程序段指令的终点。G01 是模态代码,可由 G00、G02、G03 或 G34 功能注销。 进给速度 F 一直有效,不需要每程序段都指定。 沿各轴各方向的速度如下:G91 G01 Xα Yβ Zγ Ff;X 轴向的速度 Fα=α×f/L; X 轴向的速度 Fβ=β×f/L; X 轴向的速度 Fγ=γ×f/L;L 2 2 2 对于旋转轴来说,其进给速度由线速度来指定。直线插补直线轴α(如 X)和旋转轴β(如 C)时,C 以 deg 为单 位,X 以 mm 为单位的α、β笛卡尔坐标系中的切线速度为由 F (mm/min)所指令的速度。β轴的速度是通过上式求出所需时间后 再将其换算为 deg/min 而求得的。例如,G91 G01 X20.0 C40.0 F300.0; 假定以公制输入时的 C 轴的 40.0deg 为 40mm。 分配所需时间为:202 402 300     参数  含义  IP 在 G90 时为终点在工件坐标系中的坐标; 在 G91 时为终点相对于起点的位移量;  F 进给速度    旋转轴的速度 ≒0.14907min 36
HNC-818 数控系统用户说明书5. 插补功能 C 轴的速度为:40 deg ≒268.3deg/min 0.14907 min  Y200.0进给速度 300mm/min终点0(起点) 300.0 X G91 G01 X300.0 Y200.0 F300   线性插补  起点90进给速度 300 度/分终点G91 G01 C-90 F300 旋转插补37
5. 插补功能 HNC-818 数控系统用户说明书 举例 如图所示,使用 G01 编程:要求从 A 点线性进给到 B 点(此时的进 给路线是从 A→B 的直线)。 Y45A15 O从A到B线性进给 绝对值编程:G90 G01 X90 Y45 F800增量值编程:G91 G01 X70 Y30 F800 实际路径B90  20X编程路径38
HNC-818 数控系统用户说明书 5. 插补功能 5.2 圆弧进给(G02,G03) 刀具在指定平面(G17、G18、G19)沿指定圆弧方向运行到终点。  G17G02X _YI _ J _F _ G03  R_ G18G02X _ZI_K_F_ G03  R_ G19G02Y _ Z J _ K _F _ G03  R _ XY平面圆弧插补ZX平面圆弧插补YZ 平面圆弧插补格式    参数  说明  G17 指定 XY 平面上进行圆弧插补  G18 指定 ZX 平面上进行圆弧插补  G19 指定 YZ 平面上进行圆弧插补  G02 顺时针圆弧插补  G03 逆时针圆弧插补  X 圆弧插补 X 轴的移动量或圆弧终点 X 轴坐标  Y 圆弧插补 Y 轴的移动量或圆弧终点 Y 轴坐标  Z 圆弧插补 Z 轴的移动量或圆弧终点 Z 轴坐标  R 圆弧半径(带符号,“+”劣弧,“-”优弧)  I 圆弧起始点 X 轴距离圆弧圆心的距离(带符号)  J 圆弧起始点 Y 轴距离圆弧圆心的距离(带符号)  K 圆弧起始点 Z 轴距离圆弧圆心的距离(带符号)  F 进给速度,模态有效 参数说明             圆弧插补方向各平面中顺时针与逆时针方向的定义为:在直角坐标系中从Z轴由正 到负的方向看XY平面决定该平面的顺时针和逆时针。同理,从Y轴 由正到负的方向看ZX平面决定该平面的顺时针和逆时针,从X轴由 正到负的方向看YZ平面决定该平面的顺时针和逆时针。顺时针与逆时针方向的定义如下图所示。39
5. 插补功能HNC-818 数控系统用户说明书    YXZ G03 G02G03G03G02G02G17X G18Z G19Y圆弧终点用位置指令(X,Y,Z)指定圆弧的终点。若为绝对值(G90)方式,(X,Y,Z)指定的是圆弧终点的绝对位 置,若为增量值(G91)方式,则(X,Y,Z)指定的是从圆弧起点 到终点的距离。如下图所示。 终点(X2, Y2)圆弧终点表示: G90 时:X_=X2 Y_=Y2G91 时:X_=X2-X1 Y_=Y2-Y1 起点(X1, Y1)UVW 编程除了使用 XYZ 指定圆弧终点外,还可以使用 UVW 指定。对于车削系统(T 系列)而言,当通道参数【UVW 增量编程使能】 (040033)置 1 时,可以用 UVW 代替 XYZ 表示 G02/G03 在 XYZ 轴上的移动量(增量),并且还可以用 XYZ 与 UVW 混合编程。注意,使用前提是 UVW 轴没有被指定为运行轴。40
HNC-818 数控系统用户说明书 起点到圆弧中心的距离5. 插补功能用指令(I, J,K)指定圆弧中心的位置。 (I,J,K)指令的参数是从起点向圆弧中心看的矢量分量,并且不管是 G90 还是 G91 总是增量值。 (I,J,K)的指令参数必须根据方向指定其符号正或负。 圆弧中心的表示如下图所示。  终点(X2, Y2)圆心(X0, Y0) I G17 I_=X0-X1J_=Y0-Y1终点(Z2, X2)  起点起点(Z1, X1)(X1, Y1) JI      圆心(Z0, X0) G18终点(Y2, Z2)K K_=Z0-Z1I _=X0-X1 起点(Y1, Z1) K   圆心(Y0, Z0) JG19J_=Y0-Y1 K_=Z0-Z1整圆编程圆弧半径若编程时位置指令(X,Y,Z)全部省略,则表示起点和终点重合, 此时用(I,J,K)编程指定的是一个整圆。如用 R 指定,则成为 0 度的弧,此时系统报警。圆弧中心除了可以由上面所说的(I,J,K)指定外,还可以用圆弧 的半径指定。当用圆弧半径指定圆心时,包括两种情况:(1) 中心角小于180°的圆弧; (2) 中心角大于180°的圆弧。因此,在编程时应明确指定的是哪一个圆弧。这由圆弧半径R的正负 号来确定。如下图所示。41
5. 插补功能HNC-818 数控系统用户说明书  圆心角大于 180°的圆弧21起点圆弧1(圆心角小于 180°)G91 G02 X70 Y80 R50 F500; 终点圆弧2(圆心角大于 180°) G91 G02 X70 Y80 R-50 F500;         圆心角小于 180°的圆弧注意事项 圆弧插补相关参数如圆弧的起点和终点半径差值大于【圆弧插补轮廓误差】 (000010)中的设定值,或者(圆弧起始半径和终点半径之差 值)/(实际半径)的比值超过【圆弧编程端点半径允许偏差】 (000011)中的设定值时,系统将产生报警。 同时指定I/J/K和R如果在非整圆圆弧插补指令中同时指定 I、J、K 和 R,则以 R指定的圆弧有效。 指定在非指定平面内的轴如果指定不在平面内的轴就会产生报警。  用R指定一个半圆如半圆或中心角接近180度的圆弧用R指定,中心位置的计算会 产生误差。这种情况用I,J,K来指定圆弧中心。 Y 10060 40090 120 140R60200起点X    R50终点  举例42
HNC-818 数控系统用户说明书5. 插补功能 如上图所示的刀具轨迹编程如下:(1) 绝对值编程G92 X200.0 Y40.0 Z0;G90 G03 X140.0 Y100.0 R60.0 F300.; G02 X120.0 Y60.0 R50.0;或G92 X200.0 Y40.0Z0;G90 G03 X140.0 Y100.0 I-60.0 F300.; G02 X120.0 Y60.0 I-50.0;(2) 增量值编程G91 G03 X-60.0 Y60.0 R60.0 F3000.; G02 X-20.0 Y-40.0 R50.0;或G91 G03 X-60.0 Y60.0 I-60.0 F300.; G02 X-20.0 Y-40.0 I-50.0;43
5. 插补功能 HNC-818 数控系统用户说明书 5.3 圆柱螺旋线插补(G02,G03)G02、G03 除了可以指定圆弧插补外,通过指定第三轴的移动距离还 格式可以实现螺旋线插补。 G17G02X _ Y _ Z I _ J _F _ G03  L_ G18G02X _Z_YI_K_F_ G03  L_ G19G02Y _ Z _ X J _ K _F _ G03  L _ XY 平面圆弧插补ZX平面圆弧插补YZ 平面圆弧插补    参数  说明  G17 指定 XY 平面上进行圆弧插补  G18 指定 ZX 平面上进行圆弧插补  G19 指定 YZ 平面上进行圆弧插补  G02 顺时针圆弧插补  G03 逆时针圆弧插补  X 圆弧插补 X 轴的移动量或圆弧终点 X 轴坐标  Y 圆弧插补 Y 轴的移动量或圆弧终点 Y 轴坐标  Z 绝对编程时是 Z 轴终点坐标,增量编程时是 Z 轴相对起 点的增量(即使有 L 也是如此)  R 圆弧半径(带符号,“+”劣弧,“-”优弧)  I 圆弧起始点 X 轴距离圆弧圆心的距离(带符号) 圆锥线插补选择 YZ 平面时为螺旋一周的高度增减量  J 圆弧起始点 Y 轴距离圆弧圆心的距离(带符号)  K 圆弧起始点 Z 轴距离圆弧圆心的距离(带符号)  F 进给速度,模态有效  L 螺旋线旋转圈数(不带小数点的正数) 参数说明              旋转方向             螺旋线插补的旋转方向参考其投影到二维平面的圆弧方向。44
HNC-818 数控系统用户说明书 整圆编程举例5. 插补功能若编程时位置指令(X,Y,Z)全部省略,则表示起点和终点重合, 此时用(I,J,K)编程指定的是一个整圆。如用 R 指定,则成为 0 度的弧,此时系统报警。加工如下所示螺旋线:   Z 50O 15YK=5X(1) 绝对值编程X30 Y0 Z0G90 G03 X0 Y0 Z50 I-15 J0 K0 L10 F3500 M30(2) 增量编程X30 Y0 Z0G91 G03 X-30 Y0 Z50 I-15 J0 K0 L10 F3500 M3045
5. 插补功能 HNC-818 数控系统用户说明书 5.4 虚轴指定及正弦线插补(G07) 格式 G07 IP_说明 若轴被指定为虚轴,则此轴只参与插补计算,但不运动。如 G07 X0 指令指定 X 轴为虚轴,在直到指令 G07 X1 之前,X 轴都不会运动。正弦曲线插补 用 G07 可进行正弦曲线插补,即在螺旋线插补前,将参加圆弧插补 的某一轴指定为虚轴,则螺旋线插补变为正弦线插补。注意 如需要取消虚轴指定,只需将虚轴指定为实轴即可,如 G07 X1。 举例 使用 G03 对下图所示的正弦线编程。     参数  含义  IP 虚轴指定标志  0:虚轴  1:实轴    ...M3S1000G90 G00 X-50 Y0 Z0G07 X0 G91G03 X0 Y0 I0 J50 Z60 F800 ...Y10050Z O 60 46
HNC-818 数控系统用户说明书 5. 插补功能 5.5 NURBS 样条插补(NURBS)通过指定 NURBS 曲线的 3 个参数(控制点、加权、节点)进行 NURBS 单样条 NURBS 格式样条插补。NURBS P_ K_ IP_ W_ F_ E_;    参数  含义  P NURBS 曲线的阶数,只支持 3 次样条,P 为 4  K 节点  IP 控制点坐标  W 加权  F 进给速度  E 第二进给速度       取消插补曲线阶数节点NURBS 属于 01 组模态,通过指定 G01 或 G00 等可以解除 NURBS 插补模态。P 指定 NURBS 曲线的阶数: P=4表示3次NURBS曲线;P 为模态地址字,P 将一直保持有效直至被改变或指定了 01 组模态 其他指令。在 NURBS 插补中,必须指定将第一控制点作为起点,将最终控制点 作为终点。此外,指定首段程序的节点时,请使用如下格式:  单样条:NURBS P4 K{0,0,0,0,1} X1 Y0 Z0 双样条:NURBSB P4 K{0,0,0,0,0.5} Q{10,0,0,38.28,0,28.28} W1F60加权即为相同程序段内中所指定的控制点的权重。当省略时,默认 值为 1.0。加权47
5. 插补功能 第二进给速度HNC-818 数控系统用户说明书进给速度 F 指定 NURBS 曲线插补运行中进给速度,但为了避免 NURBS插补终点速度降至很低,使用第二进给速度E指定插补结束 进给速度。与 F 不同,E 为非模态指令,不指定 E 则默认 E=0。注意:在进行 NURBS 曲线插补时,最后一段必须显式指定 E 为非 0 正数,否则插补结束时速度将会降为 0,也即是采用了默认第二进给 速度 E。在 NURBS 曲线插补方式中不能使用刀具半径补偿。 单样条 NURBS 一般用于三轴小线段插补。双样条 NURBS 一般用于五轴小线段插补。 使用单样条 NURBS 样条插补如下整圆,R=50mm。 补偿说明单样条示例 Y 100(100, 100)X  -100 (100, -100)48%0001G54G90G17F500G64G01x0y0z0NURBS P4 K{0.0,0.0,0.0,0.0,0.5} X0.0Y0.0Z0.0 W1.0 K0.5 X0.0000 Y100.0 W0.3333K0.5 X100.0 K1.0 X100.0 K1.0 X100Y100.0 W0.3333 Y0.0 W1.0 Y-100.0 W0.3333
HNC-818 数控系统用户说明书5. 插补功能 K1.0 X0.0 K1.0 X0.0 M30Y-100 W0.3333 Y0.0 W1.049
5. 插补功能HNC-818 数控系统用户说明书 5.6 螺纹切削(G32)格式主轴旋转的同时刀具进给运行,这样可以加工出不同种类的螺纹, 如变螺距螺纹、多头螺纹等。G32 X_ Z_ F_ P_ R_ E_     参数  含义  XZ 螺纹终点坐标(G90) 螺纹终点相对起点距离(G91)  F 公制螺纹螺距(长轴方向上)  P 螺纹起始点角度  R Z 方向退尾量,增量指定,如需免退刀槽,参数可省略  E X 方向退尾量,增量指定,如需免退刀槽,参数可省略       等螺距                                                                                          多头螺纹指定螺纹起始角度 P 可以加工多头螺纹,如 P=180 度可以加工双头 螺纹。  50
HNC-818 数控系统用户说明书 退尾量5. 插补功能通过 R、E 参数可指定螺纹切削的退尾量,R(Z 方向退尾量)、E(X 方向退尾量)在绝对或增量编程时都是以增量方式指定,其为正表 示沿 Z、X 正方向回退,为负表示沿 Z、X 负向回退。R、E 可以省 略,表示不用回退功能。根据螺纹标准 R 一般取 2 倍的螺距,E 取螺纹牙型高。注意:如果使用退尾量,为了避免损伤螺纹,螺纹切削方向与 R、E 方向必须相互协调,如朝 Z 负方向切削螺纹,此时 R 就只能取负值, 否则有可能对已加工好的螺纹产生损伤。(1) 在螺纹切削期间请勿修改进给修调和主轴修调;(2) 不停主轴而停止螺纹切削刀具进给是非常危险的这将会突然增 加切削深度因此在螺纹切削时进给暂停功能无效。如果在螺纹 切削期间按了进给保持按钮,进给保持无效。进给保持只在非 螺纹加工段有效;(3) 当在单程序段状态执行螺纹切削时在第一个没有指定螺纹切削 的程序段开始处刀具停止;(4) 在螺纹切削期间,工作方式不允许由自动方式变为手动、增量 或回零方式。对下图所示的圆柱螺纹编程。螺纹导程为 1.5mm,  =1.5mm,   =1mm,每次吃刀量(直径值)分别为 0.8mm、0.6 mm、0.4mm、0.16mm。 注意举例  10080                                    51M30×1.5
5. 插补功能HNC-818 数控系统用户说明书 52%3316N1 T0101N2 G00 X50 Z120N3 M03 S300N4 G00 X29.2 Z101.5 (到螺纹起点,升速段1.5mm,吃刀深0.8mm)N5 G32 Z19 F1.5 N6 G00 X40N7 Z101.5N8 X28.6N9 G32 Z19 F1.5 N10 G00 X40 N11 Z101.5N12 X28.2N13 G32 Z19 F1.5 N14 G00 X40 N15 Z101.5N16 U-11.96(切削螺纹到螺纹切削终点,降速段1mm) (X轴方向快退)(Z轴方向快退到螺纹起点处) (X轴方向快进到螺纹起点处,吃刀深0.6mm)(切削螺纹到螺纹切削终点) (X轴方向快退)(Z轴方向快退到螺纹起点处) (X轴方向快进到螺纹起点处,吃刀深0.4mm)(切削螺纹到螺纹切削终点) (X轴方向快退)(Z轴方向快退到螺纹起点处) (X轴方向快进到螺纹起点处,吃刀深0.16mm)(设立坐标系,选一号刀) (移到起始点的位置) (主轴以300r/min旋转)N17 G32 W-82.5 F1.5 (切削螺纹到螺纹切削终点)N18 G00 X40 N19 X50 Z120 N20 M05N21 M30(X轴方向快退) (回对刀点)(主轴停) (主程序结束并复位)
HNC-818 数控系统用户说明书 5. 插补功能 5.7 HSPLINE 样条插补(HSPLINE) 格式Hermite 插补功能同样能够提高小线段加工效果,使加工表面光顺。 与 NURBS 曲线不同的是,Hermite 曲线通过控制点,而 Nurbs 曲线 不通过控制点。 系统通过指定 Hermite 曲线的控制点以及矢量进行 样条插补。HSPLINE P_ X_ Y_ Z_ I_ J_ K_ F_    参数  含义  XYZ 控制点坐标注意:坐标位置必须与上一行的终点位置相同  IJK 控制点矢量  F Hermite 曲线阶数    取消插补 HSPLINE 属于 01 组模态,通过指定 G01 或 G00 等可以解除 HSPLINE 插补模态。曲线次数 P 指定 HSPLINE 样条曲线的次数,目前这个值必须为 3。 补偿 在 HSPLINE 曲线插补方式中不能使用刀具半径补偿。53
5. 插补功能 示例HNC-818 数控系统用户说明书 使用 3 次 Hermite 样条插补如下空间曲线。  V1Q2V2 Q1 Q3 Q4V3V454%0001G54G0X0Y0Z0G90G17 F1000G64X0.005y-0.987z0.04HSPLINE P3 X0.005 Y-0.987 Z0.040 I1.000 J-0.026 K-0.002 ;Q1 X0.748 Y-0.727 Z0.027 I0.756 J0.655 K-0.016 ;Q2 X1.049 Y-1.097 Z0.023 I0.967 J0.256 K-0.011 ;Q3 X1.249 Y-0.727 Z0.053 I0.497 J0.866 K0.050 ;Q4 M30
HNC-818 数控系统用户说明书5. 插补功能 5.8 跳转功能(G31) 格式说明在 G31 指令之后指定轴移动,就象 G01 一样指令了直线插补。在 该指令执行期间,如果输入一个外部跳转信号,则中断指令的执行, 转而执行下个程序段。当程序中没有指定加工终点,而是用来自机床的信号指定加工终点 时,使用跳转功能。例如:磨削加工。跳转功能还可用于测量工件 的尺寸。G31 L_IP_; L 后数字为触发点编号,与 PLC 中的触发点一致 G31:非模态 G 代码跳转信号接通时的坐标值可以在用户宏程序中使用,因为它们被储 存在用户宏程序系统变量#1000~#1002 中,如下所示:#1000 X 轴坐标值#1001 Y 轴坐标值#1002 Z 轴坐标值如下所示,当执行 N1 段过程中,如果 X7.6 信号产生,则立刻跳转 到 N2 行继续执行%1111......N1G31 L1 X100 Y100 N2G01 Z10M30举例 X7.6 ESC BLK 0155
6. 进给功能HNC-818 数控系统用户说明书 6 进给功能   56本章包含以下内容:6.1 快速进给6.2 第二进给速度6.3 单方向定位6.4 进给速度单位的设定 6.5 准停检验6.6 切削模式6.7 进给暂停
HNC-818 数控系统用户说明书6. 进给功能 6.1 快速进给(G00)格式说明在 G00 方式下,轴以快移速度进给到指定位置。 G00 IP_G00 指令中的快移速度由轴参数【快移进给速度】(100034 轴 0)对 各轴分别设定,不能用 F 指定。G00 一般用于加工前快速定位或加工后快速退刀。在由 G00 启动的 定位方式中,刀具在程序段起点加速至事先确定的速度,并在接近 目标位置的地方减速,在被确定到位之后,执行下一程序段。快移速度可由面板上的快速修调旋钮修正。G00 为模态功能,可由 G01、G02、G03 等功能注销。     参数  含义  IP 绝对指令 G90 时为终点在工件坐标系中的坐标; 相对指令 G91 时为终点相对于起点的位移量;  57
6. 进给功能HNC-818 数控系统用户说明书 6.2 第二进给速度(E)模态限制区别与进给速度 F,第二进给速度 E 一般用于限制程序段结束时的 进给速度,如在 NURBS 曲线插补中,F 指令指定插补中的进给速度, E 指定插补结束时的进给速度。进给速度 F 为模态指定,但第二进给速度 E 为非模态指定,在需要 使用第二进给速度的场合,如果不指定 E 则默认 E=0。第二进给速度主要用于较为复杂的插补控制中,目前仅在 NURBS 曲线插补中使用。 58
HNC-818 数控系统用户说明书6. 进给功能 6.3 单方向定位(G60)    起始点定位方向 偏移量终点   起始点 格式说明偏移值G60 IP_为了消除反向间隙的影响,可以指令轴沿一个方向实现定位。如图所示,当运动方向与定位方向一致时,按常规的方式定位;当 运动方向与定位方向不一致时,先沿运动方向多移动一个偏移量,再 沿定位方向移动一个偏移距离,到达定位终点。运行 G60 指令,还需要指定偏置值和偏移方向。以下参数正负分别 表示 G60 偏移方向。(1) 即使刀具移动距离为零,也执行单方向定位;(2) 单方向定位的过冲量设定值应大于对应轴的反向间隙,否则单 方向定位时无法完全消除反向间隙。    参数  含义  IP 绝对值方式(G90)时,为单方向定位的终点位置; 增量值方式(G91)时为刀具当前位置到终点位置的距离;      坐标轴 参数索引号  参数说明  第一轴 Parm100030 第一轴 G60 偏移值矢量  第二轴 Parm101030 第二轴 G60 偏移值矢量  第三轴 Parm102030 第三轴 G60 偏移值矢量    注意59
6. 进给功能 举例HNC-818 数控系统用户说明书(设 100030 值为 10,G60 终点-参数 10X030 的值=G60 中间点) %0008G54G00X20G60X0;先走到 X-10 处,再走到 0 M30 60
HNC-818 数控系统用户说明书 6. 进给功能 6.4 进给速度单位的设定(G93,G94,G95)CNC 加工零件时,直线插补(G01)、圆弧插补(G02、G03)等的 进给速度由紧跟 F 后的数值来决定。进给速度单位由 G93、G94、 G95 设置。 M:有三种指令方法:(1) 每分钟进给(G94)在紧跟 F 后,指定每分钟进给刀具的量。(2) 每转进给(G95)在紧跟 F 后,指定每绕主轴一圈进给刀具的量。(3) 反比时间进给(G93)紧跟 F 后,指定反比时间(FRN)。 T:有两种指令方法: (1)(2)格式 G93; G94; G95;G94 每分钟进给每分钟进给(G94)在紧跟 F 后,指定每分钟进给刀具的量。 每转进给(G95)在紧跟 F 后,指定每绕主轴一圈进给刀具的量。  反比时间进给方式指定  每分钟进给方式指定  每转进给方式指定当指定 G94,即每分钟进给方式时,移动指令的进给速度 F 指定刀 具每分钟的移动量,单位为 mm/min(G21 方式)或 in/min(G20 方 式)。61
6. 进给功能 G95G93注意举例HNC-818 数控系统用户说明书每转进给G95 将刀具每绕主轴移动一圈的移动量作为移动指令的进给速度 F,单位为 mm/r(G21 方式)或 in/r(G20 方式)。 只有当主轴配备编码器时才能指定 G95 方式。反比时间进给反比时间进给功能是通过指定速度的倒数,也就是执行当前程序段 所用的时间来实现的,它能够实现恒表面进给速度,在五轴加工复 杂曲面时使用广泛。(1) G93、G94、G95 为模态功能,可相互注销,G94 为缺省模态。 (2) 反比时间进给方式时,计算速度超过最大切削速度时,实际速度被限制在最大切削进给速度上。(3) 反比时间进给方式 G93 指令要单独一行。%0008G54X0Y0Z0;以下每种模式的 F 都是 1000 G94G01X50F1000M3S500G95G01Y50F2G93G01Z50F20;移动距离乘 F = 最终进给速度 M30 62
HNC-818 数控系统用户说明书6. 进给功能 6.5 准停检验(G09)格式说明控制刀具在程序段终点准确停止。G09; 单行指定一个包括 G09 的程序段在继续执行下个程序段前,准确停止在本程 序段的终点。该功能用于加工尖锐的棱角。G09 为非模态指令,仅在其被规定的程序段中有效。G09 与 G61 的区别在于,前者在程序段中有效,后者是模态有效。 63
6. 进给功能 HNC-818 数控系统用户说明书 6.6 切削模式(G61,G64) 切削模式用于控制进给速度。  YO2到位检测    指定准确停止时的刀具路径1切削方式或攻丝方式时的刀具路径X      说明 (1)G61:准确停止方式在 G61 后的各程序段编程轴都要准确停止在程序段的终点,然后再继续执行下一程序段。 (2) G64:连续切削方式在 G64 之后的各程序段编程轴刚开始减速时(未到达所编程的 终点)就开始执行下一程序段。但在定位指令(G00,G60)或 有准停校验(G09)的程序段中,以及在不含运动指令的程序段 中,进给速度仍减速到 0 才执行定位校验。注意 (1) G61 方式的编程轮廊与实际轮廓相符。 (2) G61 与 G09 的区别在于 G61 为模态指令。(3) G64 方式的编程轮廓与实际轮廓不同。其不同程度取决于 F 值的 大小及两路径间的夹角,F 越大,其区别越大。(4) G61、G64 为模态指令,可相互注销。(5) G64 方式在小线段程序运行之后,从自动切到单段,会将前瞻缓 冲中拼接好的样条执行完之后,才会接着按编程的程序段单段执 行。因此会出现,一个单段会连续执行若干个程序段的情况。小 线段程序既包括 CAM 生成的程序,也包括宏运算生成的程序。64
HNC-818 数控系统用户说明书 6. 进给功能 举例 例 1:编制如图所示轮廓的加工程序:要求编程轮廊与实际轮廓相符。   Y 10030 20X 50 150 %0061G92 X0 Y0 Z0G91 G00 G43 Z-10 H01 G41 X50 Y20 D01G01 G61 Y80 F300 X100...       例 2:编制如图所示轮廓的加工程序:要求程序段间不停顿。  Y 10030 20X 50 150 %0061G92 X0 Y0 Z0G91 G00 G43 Z-10 H01 G41 X50 Y20 D01G01 G64 Y80 F300 X100...  实际轨迹     65
6. 进给功能HNC-818 数控系统用户说明书 6.7 进给暂停(G04)格式注意在系统自动运行过程中,可以指定 G04 暂停刀具进给,暂停时间到 达后自动执行后续的程序段。G04P_; 暂停G04 X_;X: 单位:秒 P: 单位:毫秒(1) 最小指定暂停时间为 1 个插补周期(Parm000001),如指定暂 停时间不足 1 个插补周期的按照 1 个插补周期指定。(2) X 后跟的数字不可超过 2000,否则系统不会执行该行程序。 66
HNC-818 数控系统用户说明书7. 参考点 7 参考点   参考点为数控机床上某一固定位置,系统可以建立基于此点的工件 坐标系,或在这点进行换刀等其他固定动作。本章包含以下内容:7.1 返回参考点67
7. 参考点 HNC-818 数控系统用户说明书 7.1 返回参考点(G28,G29,G30)参考点是指机床上的固定点,共有五个参考点:第一参考点、第二 参考点、第三参考点、第四参考点和第五参考点。用返回参考点指 令很容易使刀具移动到这些参考点的位置。参考点可用作刀具交换 的位置。以轴 0 为例,在轴参数中用参考点位置参数(100017、100021 到 100024)可在机床坐标系中设定 5 个参考点。执行过程 返回参考点时,刀具经过中间点自动地快速移动到参考点的位置, 同时,指定的中间点被 CNC 存储,刀具从参考点经过中间点沿着指                 定轴自动地移动到指定点。                 返回参考点和参考点返回过程如下图所示:  返回参考点的起始点中间点从参考点返回的目标点      参考点自动返回参考点 G28G30 P2 IP_G30 P3 IP_ G30 P4 IP_ G30 P5 IP_;返回第 1 参考点;返回第 2 参考点(可省略 P2) ;返回第 3 参考点;返回第 4 参考点;返回第 5 参考点IP_    参数  含义  IP 绝对值方式(G90)时指定中间点的绝对位置,相对值方式 (G91)时指定中间点距起始点的距离。不需要计算中间点 和参考点之间的具体的移动量。  68IP 指令的坐标为工件坐标系下的值。自动返回参考点指令执行时, 只有指令了中间点的轴才移动,未指令中间点的轴不移动。
HNC-818 数控系统用户说明书 从参考点返回7. 参考点 G29 IP_;IP 指令的坐标为工件坐标系下的值。 中间点为之前指定的 G28、G30 的中间点。 相对值(G91)的运行方式如下表示例所示:    参数  含义  IP 绝对值方式(G90)时指定返回目标点的位置,相对值方式 (G91)时 G29 的中间点一定是上一次 G28 设定的中间点, G29 后的坐标值在 G28 中间点基础上执行 G91。      执行程序  工件坐标 x,y,z  G54X0Y0Z0 G91G28X10Y10Z10 X100Y100Z100 G29X10Y10Z10 0,0,010,10,10--------->0,0,0100,0,0100,100,0100,100,100 10,10,10--------->20,20,20 先到G28中间点 再执行G91  注意举例G29 应该在 G28、G30 执行后才可执行,否则没有存储中间点可能 会执行异常; Y从参考点的移动(G29)R(参考点)C(从参考点移 动的目的地)1300 X500300 200B(中间点)A(返回参考点的起点)200 1000自动返回参考点(G28)A→B→R R→B→C%1234G54G00 X200Y300G28 G90 X1000.0 Y500.0 移动到参考点 R;编写从 A 到 B 的程序。经过中间点 B,69
7. 参考点HNC-818 数控系统用户说明书 70T6 ;M06;在参考点换刀;编写从 B 到 C 的程序。从参考点 R 经过G29 X1300.0 Y200.0中间点 B,移动到由 G29 指定的 CM30
HNC-818 数控系统用户说明书8. 坐标系 8 坐标系   在机床加工中,给 CNC 预置一个刀具到达的位置,刀具就能移动到 该位置。而这个位置要用某一个坐标系中的坐标值来给定。坐标值 由程序轴的分量来指定,这样才能按程序加工出所需的工件。 铣削加工时(用 X40.0 Y50.0 Z25.0 指定的刀具位置) Z 25.0       40.0 X50.0Y 车削加工时(用 X50.0 Z40.0 指定的刀具位置)  X原点Z  50.040.0 本系统支持以下三种坐标系供用户选择使用: (1) 机床坐标系(2) 工件坐标系(3) 局部坐标系71
8. 坐标系HNC-818 数控系统用户说明书 72本章包含以下内容:8.1 机床坐标系编程 8.2 工件坐标系设定 8.3 局部坐标系设定 8.4 坐标系平面选择
HNC-818 数控系统用户说明书 8. 坐标系 8.1 机床坐标系编程(G53)机床上有一个固定的机械点,可作为该机床得基准点,该点称为机 床原点,它的位置由回零档块或光栅零点决定。通过这点作为原点 建立的坐标系称为机床坐标系。接通电源后,通过手动参考点返回来建立机械坐标系。机械坐标系 一旦被建立之后,在切断电源之前,一直保持不变。格式 G53 IP_;机床坐标系设定 在调用 G53 之前,系统必须通过参考点返回操作建立机床坐标系。 系统参考点与机床坐标系原点并不重合,它们之间的关系如下图所示。     参数  含义  IP 机床坐标系的目标位置    机床原点β参考点机床坐标系α注意 (1) G53 为非模态指令,在需要执行直接机床坐标系编程时,必须 在当前行指定 G53;(2) G53 所指定的目标位置不能是相对编程,只能使用绝对指令编 程;(3) 当指定 G53 指令时,就清除了刀具半径补偿、刀具长度补偿、 刀尖半径补偿等补偿功能;(4) 在指定 G53 指令之前,必须设置机床坐标系,因此通电后必须 进行手动返回参考点或由 G28 指令自动返回参考点。当采用绝 对位置编码器时,就不需要该操作。73
8. 坐标系HNC-818 数控系统用户说明书 8.2 工件坐标系 为加工一个工件所使用的坐标系称为工件坐标系。工件坐标系事先设定在 CNC 中(设定工件坐标系)。在所设定的工件坐标系中编制程序并加工工件(选择工件坐标系)。移动所设定的工件坐标系的原点,可以改变工件坐标系(改变工件 坐标系)。8.2.1 设定工件坐标系(G92)                 有三种方法可以设定工件坐标系(1) 通过 G92 指令来设定工件坐标系;(2) 使用工件坐标系选择 G 代码的方法来设定工件坐标系;事先用 HMI 界面的工件坐标系设置来设定 6 个标准工件坐标 系(G54~G59)和 60 个扩展工件坐标系(G54.X)(对铣床加 工中心),并通过相应的程序指令来设定工件坐标系;(3) 对于车床来说,在绝对刀偏补偿方式下,可以通过 T 指令来设 定工件坐标零点(参见 10.1 节刀具偏置部分内容);                 当使用绝对指令时,工件坐标系必须用上述方法之一来建立。格式 G92 IP_;建立坐标系 G92 指令通过设定刀具起点(对刀点)与坐标系原点的相对位置建 立工件坐标系。工件坐标系一旦建立,绝对值编程时的指令值就是在此坐标系中的坐标值。    参数  含义  IP 坐标系原点到刀具起点的有向距离。  74
HNC-818 数控系统用户说明书 注意8. 坐标系(1) 执行此程序段只建立工件坐标系,刀具并不产生运动;(2) G92 指令为非模态指令;(3) 在铣床刀具长度补偿方式中用 G92 设定工件坐标系,设定成为 应用补偿前的位置所指定的位置的坐标系。但是,无法与刀具 长度补偿矢量发生变化的程序段同时指令本 G 代码。例如在如 下程序段中就无法运行; 指令了 G43/G44 的程序段; 在 G43/G44 方式中且指令了 H 代码的程序段; 在 G43/G44 方式中且指令了 G49 的程序段; 在 G43/G44 方式中通过 G28,G53 等暂时取消补偿矢量的 状态下,且该矢量恢复的程序段;此外,通过 G92 指令设定工件坐标系时,在其之前的程序段停止, 不可改变通过 MDI 等选择的刀具长度补偿量。使用 G92 编程,建立如下图所示的工件坐标系。 G92 X30.0 Y30.0 Z20.0 举例 Z 20.0    刀具起点  30.0X程序原点30.0Y75
8. 坐标系 HNC-818 数控系统用户说明书 8.2.2 工件坐标系选择(G54~G59) 操作者可以选用下面已设定的工件坐标系:(1) 用 G92 指令设定的工件坐标系,建立好工件坐标系后,指定的 绝对指令,就成为该坐标系中的位置;(2) 选择 G54~G59 这几个标准工件坐标系;(3) 对铣床和加工中心来说,选择 G54.X 这 60 个扩展工件坐标系;(4) 对车床来说,在绝对刀偏方式下,可以通过 T 指令来选择工件 坐标系,具体方法请参见 10.1 节刀具偏置部分内容。举例 %1234 G54G90 G00 X100 Y100 Z50 ;定位到 G54 坐标系下 X=100 Y=100 Z=50 的位置M308.2.3 改变工件坐标系(G10) 通过改变一个外部工件原点偏置量或工件原点偏置量,可以改变以下工件坐标系设定的工件坐标系 (1) G54~G59 设定的工件坐标系 利用HMI界面坐标系设置的方法(请参见操作部分相关章 节); 用工件坐标系选择G代码指令直接设定工件坐标系; 使用可编程数据输入 G10 指令更改坐标系原点值(具体细节请参见第 15 章可编程数据输入); (2) 铣床扩展坐标系 G54.X 设定的工件坐标系 利用HMI界面坐标系设置的方法(请参见操作部分相关章 节); 用工件坐标系选择G代码指令直接设定工件坐标系; 使用可编程数据输入 G10 指令更改坐标系原点值(具体细 节请参见第 15 章可编程数据输入);76
HNC-818 数控系统用户说明书8. 坐标系 (3) 车床绝对刀偏设定的工件坐标系 利用HMI界面坐标系设置的方法(请参见操作部分相关章 节); 用工件坐标系选择G代码指令直接设定工件坐标系。8.2.4 扩展工件坐标系选择(G54.x)除了 G54~G59 指定的六个工件坐标系供用户选择外,铣床系统还提供扩展工件坐标系供用户选择。 系统提供 60 个扩展工件坐标系供用户选择。格式 G54.x; 选择 x 号扩展工件坐标系举例 %1234 G54.18G90 G00 X100 Y100 Z50 ; 定位到第 18 个扩展坐标系下 X=100 Y=100 Z=50 的位置M30    参数  含义  x 扩展工件坐标系索引号,范围是 1~60,共 60 个。  77
8. 坐标系 HNC-818 数控系统用户说明书 8.3 局部坐标系设定(G52) 在工件坐标系上编程时,为了方便起见,可以在工件坐标系中再创                 建一个子工件坐标系。这样的子坐标系称为局部坐标系。格式 G52 IP_ ; 设定局部坐标系 ......G52 IP 0 ; 取消局部坐标系说明 使用 G52 IP_;指令,可在所有的工件坐标系内设定局部坐标系。各 自的局部坐标系的原点,成为各自的工件坐标系中的 IP_的位置。一旦设定了局部坐标系,之后指定的轴的移动指令为局部坐标系下 的坐标;如果要取消局部坐标系或在工件坐标系中指定坐标值时,将局部坐 标系原点和工件坐标系原点重合。举例 %1234G55 ;选择G55,假设 G55在机床坐标系中的坐标为(10,20)G1 X10Y10F1000 ;移至机床坐标系(20,30)G52X30Y30 ;在所有工件坐标系的基础上建立局部坐标系,局部坐 标系原点为(30,30)     参数  含义  IP 指定局部坐标系的原点  78G1 X0Y0 G52 X0Y0 G1 X10Y10 M30;移至局部坐标系原点,(当前机床坐标系位置为(40,50)) ;取消局部坐标系设定,系统恢复到 G55 坐标系;移至机床坐标系(20,30)
HNC-818 数控系统用户说明书 8. 坐标系 8.4 坐标平面选择(G17,G18,G19)坐标平面选择 G17/18/19 指令用于圆弧插补、刀具半径补偿(M)、旋转变换(M)等操作中加工平面选择。说明注意 G17、G18、G19 为模态功能,可相互注销。移动指令与平面选择无关。例如指令G17 G01 Z10时,Z轴仍然会 移动。     G代码  平面  G17 XY 平面  G18 ZX 平面  G19 YZ 平面    79
9. 坐标值与尺寸单位HNC-818 数控系统用户说明书 9 坐标值与尺寸单位   80本章包含以下内容:9.1 绝对指令和增量指令 9.2 尺寸单位选择9.3 极坐标编程(M) 9.4 直径与半径编程(T)
HNC-818 数控系统用户说明书 9. 坐标值与尺寸单位 9.1 绝对指令和增量指令(G90,G91)                 指定刀具移动有两种方法:绝对指令和增量指令。 绝对指令是对刀具移动的终点位置的坐标值进行编程的方法。 增量指令是对刀具的移动量进行编程的方法。 格式 M 系列: 绝对指令 G90 IP_ ; 增量指令 G91 IP_ ; T系列(两种格式): 第一种:绝对指令 G90 IP_ ; 增量指令 G91 IP_ ;第二种:UVW 指令增量编程当 UVW 没有被配置为坐标轴,通道参数【UVW 增量 编程使能】(040033)使能指定为 1 时, UVW 分别表示 XYZ 的增量值说明 选择合适的编程方式可使编程简化。当图纸尺寸由一个固定基准点 给定时,采用绝对方式编程较为方便;而当图纸尺寸是以轮廓顶点                 之间的间距给出时,采用增量方式编程较为方便。举例  M系列 G90 X40.0 Y70.0 ; G91 X-60.0 Y40.0;Y 70.030.0绝对指令 增量指令终点40.0起点100.0   X81
9. 坐标值与尺寸单位HNC-818 数控系统用户说明书  T系列刀具从 P 移动到 Q(X 轴为直径值的指令) 绝对指令:G90X400Z50 增量指令:G91X200Z-400 或 U200W-400 XQ (400,50)     Φ400P (200,450)Φ200Z  50Φ450   82
HNC-818 数控系统用户说明书 9. 坐标值与尺寸单位 9.2 尺寸单位选择(G20,G21)用户可以通过 G20、G21 选择 G 代码中输入尺寸的单位。格式说明注意 (1) G20、G21 为模态功能,可相互注销,G21 为上电缺省值;(2) G 代码中输入数据的单位与 HMI 界面显示数据单位没有任何关 联。G20/21 只是用来选择加工 G 代码中输入数据的单位,而不 能改变 HMI 界面上显示的数据单位。NC 参数中【英制/公制显 示选择】(000025)用来设置界面显示坐标的数据单位。举例 %0007 G54G01 x10y10z10 G20x2y2z2M30     G20  英制输入模式  G21 公制输入模式     G代码  线性轴  旋转轴 英制输入(G20)  inch(英寸) deg(度) 公制输入(G21)  mm(毫米)  deg(度)   83
9. 坐标值与尺寸单位 HNC-818 数控系统用户说明书 9.3 极坐标编程(M)(G16,G15)编制加工零件 G 代码中,在某些场合下采用在半径和角度的极坐标 上输入终点坐标值的编程方法更加方便和快捷。从指定极坐标指令的平面的第一轴的正方向,沿逆时针方向的角度 为正,沿顺时针方向的角度为负。在绝对指令/增量指令(G90、G91)下都可以指定半径和角度。   指定极坐标 所在平面      G17  XZ 平面:X 轴指定极半径,Y 轴指定极角度  G18 ZX 平面:Z 轴指定极半径,X 轴指定极角度  G19 YZ 平面:Y 轴指定极半径,Z 轴指定极角度 指定极坐标 系原点    G90 指定工件坐标系零点为极坐标系原点,从该 点测量半径  G91 指定当前位置作为极坐标系原点,从该点测 量半径  G16 极坐标编程指令开始  G15 极坐标编程指令结束 格式      极坐标系原点设置设置极坐标系原点有两种方法:(1) 设定当前工件坐标系零点作为极坐标系原点;  以绝对值指定半径值。  工件坐标系的原点为极坐标的原点。在使用局部坐标系(G52)时,局部坐标系的原点为极坐标的原 点   指令位置 半径角度当前位置工件坐标系零点 a)角度用绝对值指令 指令位置 半径角度当前位置工件坐标系零点 b)角度用绝对值指令84
HNC-818 数控系统用户说明书9. 坐标值与尺寸单位 (2) 设定当前位置作为极坐标系原点。 以增量值指定半径值。 当前位置被设为极坐标的原点。   当前位置指令位置 角度工件坐标系零点 a)角度用绝对值指令 指令位置角度 当前位置工件坐标系零点 b)角度用增量值指令注意(1) 有关伴有如下指令的轴指令,不会被视为极坐标指令;  暂停G04 可编程数据输入G10  局部坐标系G52 工件坐标系变更G92  机械坐标系选择G53  坐标旋转G68 比例缩放G51(2) 在极坐标方式下,不能指定任意角度的角度/拐角 R; (3) 在极坐标方式下,不能使用固定循环 G 代码指令;(4) 对于极坐标编程,用绝对方式指定半径,设置工件原点为极坐 标原点;用增量方式指定半径,设置当前位置为极坐标原点。 但是指令中只指定角度时,无论是绝对方式还是增量方式, 都 将工件原点设为极坐标原点。85
9. 坐标值与尺寸单位 举例HNC-818 数控系统用户说明书 86(1) 半径值和角度为绝对指令时%1000;G54G00 X0Y0Z0G17 G90 G16;G01 X100.0 Y30.0F1500 Y150.0;Y270.0;G15M30(2) 半径值为绝对指令而角度为增量指令时%1000G54G00 X0Y0Z0G17 G90 G16;G01 X100.0 Y30.0F1500 G91Y120.0;Y120.0;G15M30
HNC-818 数控系统用户说明书 9. 坐标值与尺寸单位 9.4 直径与半径编程(T)(G36,G37) 格式 G36; 直径编程方式G37; 半径编程方式说明 数控车床的工件外形通常是旋转体,其 X 轴尺寸可以用两种方式加 以指定:直径方式和半径方式。G36 为缺省值,机床出厂一般设为直径编程。(3) 单一固定循环中使用的 X 轴的进刀量等的参数 R 为半径值指 定;(4) 对于车床或车削中心系统默认是 G36,即是直径编程;(5) 轴向进给速度以半径的变化指定; Z 轴指令输入与直、半径编程无关;注意 (1)(2) 当指定 G02、G03 时参数 R、I、K 为半径值指定;    254    +X    16044                          举例    直径编程方式:  半径编程方式:  %3341N1 G92 X180 Z254N2 G36 G01 X20 W-44 N3 U30 Z204N4 G00 X180 Z254N5 M30 %3342N1 G92 X90 Z254N2 G37 G01 X10 W-44 N3 U15 Z204N4 G00 X90 Z254N5 M30  87Φ50Φ20 Φ180
10. 刀具补偿功能HNC-818 数控系统用户说明书 10 刀具补偿功能   88本章包含以下内容:10.1 刀具偏置(T)10.2 刀尖半径补偿(T)10.3 刀具半径补偿(M)概要说明 10.4 刀具半径补偿(M)详细说明 10.5 刀具长度补偿(M)
HNC-818 数控系统用户说明书10. 刀具补偿功能 10.1 刀具偏置(T) 10.1.1 刀具偏置的 T 代码车床编程轨迹实际上是刀尖的运动轨迹,但实际中不同的刀具的几 何尺寸、安装位置各不相同,其刀尖点相对于刀架中心的位置也就 不同。因此需要将各刀具刀尖点的位置值进行测量设定,以便系统 在加工时对刀具偏值值进行补偿。从而在编程是不用考虑因刀具的 形状和安装的位置差异,而导致的刀尖位置不一致,以简化编程的 工作量。刀具使用一段时间后磨损,也会使产品尺寸产生误差,因此需要对 其进行补偿。该补偿与刀具偏置补偿存放在同一个寄存器的地址号 中。各刀的磨损补偿只对该刀有效(包括标刀)。刀具的补偿功能由 T 代码指定,其后的 4 位数字分别表示选择的刀 具号和刀具偏置补偿号(详细说明请参见本书 4.3 节)。T 代码的说明如下: T     刀具几何偏置号刀具号选择刀具偏置号是刀具偏置补偿寄存器的地址号,该寄存器存放刀具的 X 轴和 Z 轴偏置补偿值、刀具的 X 轴和 Z 轴磨损补偿值。T 加补偿号表示开始偏置功能。偏置号为 00 表示偏置量为 0,即取 消偏置功能。系统对刀具的补偿或取消都是通过拖板的移动来实现的。刀具几何偏置号可以和刀具号相同,也可以不同,即一把刀具可以 对应多个偏置号(值)。89
10. 刀具补偿功能 HNC-818 数控系统用户说明书 绝对补偿方式90如下图所示,如果刀具轨迹相对编程轨迹具有 X、Z 方向上补偿值(由 X,Z 方向上的补偿分量构成的矢量称为补偿矢量),那么程序段中 的终点位置加或减去由 T 代码指定的补偿量(补偿矢量)即为刀具 轨迹段终点位置。 补偿轨迹补偿矢量(由 X,Z 方向的分量组成)编程轨迹 包含 T 代码的程序段  10.1.2刀具偏置补偿和刀具磨损补偿车床编程轨迹实际上是刀尖的运动轨迹,但实际中不同的刀具的几 何尺寸、安装位置各不相同,其刀尖点相对于刀架中心的位置也就 不同。因此需要将各刀具刀尖点的位置值进行测量设定,以便系统 在加工时对刀具偏置值进行补偿。从而在编程是不用考虑因刀具的 形状和安装的位置差异,而导致的刀尖位置不一致,以简化编程的 工作量。     1号刀Z轴偏置值 2号刀Z 轴偏置值       Z2机床零点 Z1             工件零点X2/22号刀X 轴偏置值X1/2        绝对刀偏即机床回到机床零点时,工件零点相对于刀架工作位上各 刀刀尖位置的有向距离。当执行刀偏补偿时,各刀以此值设定各自 的加工坐标系。故此,虽刀架在机床零点时,各刀由于几何尺寸不 一致。各刀刀位点相对工件零点的距离不同,但各自建立的坐标系 均与工件坐标系(编程)重合。
HNC-818 数控系统用户说明书 10. 刀具补偿功能 举例 如下图,先建立刀具偏置磨损补偿,后取消刀具偏置磨损补偿。  X 10050    刀补轨迹      编程轨迹Z 100 200 250T0202G01 X50 Z100 Z200X100 Z250 T0200 M3091
10. 刀具补偿功能 HNC-818 数控系统用户说明书 10.2 刀尖半径补偿(T)(G40,G41,G42)数控程序一般是针对刀具上的某一点即刀位点,按工件轮廓尺寸编 制的。车刀的刀位点一般为理想状态下的假想刀尖 A 点或刀尖圆弧 圆心 O 点。但实际加工中的车刀,由于工艺或其他要求,刀尖往往 不是一理想点,而是一段圆弧。当切削加工时刀具切削点在刀尖圆 弧上变动;造成实际切削点与刀位点之间的位置有偏差,故造成过 切或少切。这种由于刀尖不是一个理想点而是一段圆弧,造成的加 工误差,可用刀尖圆弧半径补偿功能来消除。  刀尖R工件无补偿时切削深度无补偿的刀具轨迹有补偿的刀具轨迹 注意 半径补偿不支持中断式指令如 G31。10.2.1 假想刀尖92在下图中,在位置 A 的刀尖实际上并不存在。把实际的刀尖半径中 心设在起始位置要比把假想刀尖设在起始位置困难得多,因而需要 假想刀尖(注)。当使用假想刀尖时,程编中不需要考虑刀尖半径。当刀具设定在起始位置时,位置关系如下图所示。
HNC-818 数控系统用户说明书10. 刀具补偿功能        起始位置 起始位置 使用刀尖中心编程时 使用假想刀尖编程时说明格式刀尖园弧半径补偿是通过 G41、G42、G40 代码及 T 代码指定的刀尖 园弧半径补偿号,加入或取消半径补偿。G40:取消刀尖半径补偿; G41:左刀补(在刀具前进方向左侧补偿),如下图; ZX G42 沿着刀具运动方向看刀具在工件右侧G41 沿着刀具运动方向看 刀具在工件左侧       G42:右刀补(在刀具前进方向右侧补偿),如下图; Z XG41 沿着刀具运动方向看 刀具在工件右侧G42 沿着刀具运动方向看 刀具在工件左侧       93
10. 刀具补偿功能HNC-818 数控系统用户说明书 10.2.2 刀尖方位定义后刀架车刀刀尖的方向号定义了刀具刀位点与刀尖圆弧中心的位置关系, 其从 0~9 有十个方向,如下图所示。  X483Z                5097162● 代表刀具刀位点 A,+ 代表刀尖园弧圆心 O                           Z X1625097483● 代表刀具刀位点 A,+ 代表刀尖园弧圆心 O                                前刀架注意(1) G40、G41、G42 都是模态代码,可相互注销;(2) G41/G42 不带参数,其补偿号(代表所用刀具对应的刀尖半径 补偿值)由 T 代码指定。其刀尖圆弧补偿号与刀具偏置补偿号 对应;(3) 刀尖半径补偿的建立与取消只能用 G00 或 G01 指令,不得是 G02 或 G03。94
HNC-818 数控系统用户说明书 起刀10. 刀具补偿功能从G40方式变为G41或G42方式的程序段叫做起刀程序段。G40_;G41_;(起刀程序段)在起刀程序段中执行刀具偏置过渡运动。在起刀段的下一个程序段的起点位置,刀尖中心定位于程编轨迹的垂线上。   G42工件G40G42(起动) 偏置取消由G41或G42方式变为G40方式的那个程序段叫做偏置取消程序段。G41_;G40_;(偏置取消程序段)在取消程序段之前的程序段中刀尖中心运动到垂直于程编轨迹的位 置。刀具定位于偏置取消程序段(G40)的终点位置如下图所示。  G40 G42工件终点位置 95
10. 刀具补偿功能 举例HNC-818 数控系统用户说明书 考虑刀尖半径补偿,编制如下图所示零件的加工程序。   40   31   27    R5     R15                 96%3323N1 T0101N2 M03 S400N3 G00 X40 Z5N4 G00 X0N5 G01 G42 Z0 F60 N6 G03 U24 W-24 R15 N7 G02 X26 Z-31 R5 N8 G01 Z-40N9 G00 X30N10 G40 X40 Z5N11 M30(换一号刀,确定其坐标系) (主轴以 400r/min 正转)(到程序起点位置)(刀具移到工件中心)(加入刀具园弧半径补偿,工进接触工件) (加工 R15 圆弧段)(加工 R5 圆弧段) (加工Φ26 外圆) (退出已加工表面)(取消半径补偿,返回程序起点位置)(主轴停、主程序结束并复位)Φ26 Φ22
HNC-818 数控系统用户说明书10. 刀具补偿功能 10.2.3 刀尖半径补偿的使用内径/外径切削循环(G80)或端面 切削循环(G81)的刀尖半径补偿(1) 假想刀具方向上运动轨迹刀具轨迹方向通常是平行与编程轨迹的。图中标示了 9 种刀尖 方向情况下使用刀尖半径补偿的刀具轨迹与编程轨迹。(2) 偏置的方向                                           G80                                97
10. 刀具补偿功能HNC-818 数控系统用户说明书                                     切削循环的刀尖半径补偿当指定以下循环切削时,刀具将偏移一个刀尖半径补偿矢量,在循 环过程中不进行交点计算。注意:半径补偿的建立和取消必须在复合循环的 P/Q 段之间。  G71内(外)径粗车复合循环 G72端面粗车复合循环 G73闭环车削复合循环补偿运动如下:倒角时的刀尖半径补偿  (G42) 编程轨迹(G41)98
HNC-818 数控系统用户说明书 10. 刀具补偿功能 拐角圆弧时的刀尖半径补偿   (G42) 编程轨迹(G41) 99
10. 刀具补偿功能 HNC-818 数控系统用户说明书 10.3 刀具半径补偿(M)(G40,G41,G42)概要说明 注意 半径补偿不支持中断式指令如 G31。 10.3.1 铣床刀具半径补偿在 G41/G42 到 G40 中间的程序段中,G0 自动转为 G01。通常在编程时只是对刀具中心轨迹进行编程(即将刀具半径假设为 0),而进行实际加工时,由于刀具半径不为 0 的影响,需要将刀心 轨迹进行一定的偏置(偏置距离等于刀具半径,偏置方向可为左偏 置或右偏置,视具体工件偏程而定),此时需要用到刀具半径补偿功 能。格式 G17(或 G18/G19) G41(或 G42) G00(或 G01)IP_ D_;注意 (1) 刀具半径补偿不支持变半径;(2) 刀具半径补偿中不支持改变G41/G42状态;建立刀补 G17/G18/G19: G41/G42:D: 刀具半径补偿取消 G40 IP_;指定补偿平面,分别为 XY、YZ、ZX 平面。 刀具半径补偿有效。G41:左刀补;G42:右刀补。 指定刀具半径的补偿号G40:刀具半径补偿取消(G40、G41、G42 都是模态代码,可相互 注销);IP_:轴移动的指令值;偏置方向 刀具半径补偿功能由 G41 或 G42 指定: G41:向刀具移动方向的左侧进行偏置(如下图 a 所示)。G42:向刀具移动方向的右侧进行偏置(如下图 b 所示)。100
HNC-818 数控系统用户说明书10. 刀具补偿功能    编程轨迹a) 左刀补编程轨迹b) 右刀补刀补轨迹刀补轨迹10.3.2 刀补建立与取消10.3.3 改变刀具半径补偿量10.3.4 补偿量的设定范围通过 G00 或 G01 指令来建立或取消半径补偿。 如果指定圆弧插补(G02、G03)来建立或取消刀补,将发生报警。刀具半径补偿量的改变通常在取消方式下换刀时进行。补偿量范围和“NC 参数”26 号参数相关,如下表所示:    NC【26】  范围(单位:毫米)  4 -9999.9999~9999.9999  3 -9999.999~9999.999  2 -9999.99~9999.99    10.3.5 刀具半径补偿量的指定利用 D 代码,通过指定刀具半径补偿量的编号,指定刀具半径补偿量。在另一 D 代码被指定之前,D 代码一直有效。101
10. 刀具补偿功能10.3.6 平面选择和矢量HNC-818 数控系统用户说明书偏置计算在 G17、G18、G19 确定的平面上进行。进行偏置计算的平 面成为偏置平面。偏置平面外的轴上的坐标值,不受偏置的影响,变成指令值按原样 使用。在同时 3 轴控制中,刀具以投射在偏置平面上的形状被偏置 的方式移动。在偏置取消方式下切换偏置平面。如果在偏置方式中切换平面,则 会有报警(刀具半径补偿中不可以切换坐标平面)发出,刀具停止。  P2’ P2rP0 P0’P1 P1’P3’P3RP5P4 P4’ P1’’举例102%0504N01 G92 X0 Y0N02 G0 X-40 Y-26.66N03 G90 G41 G0 X0 Y0 D3N04 G1 X-20 Y30 F2000N05 G1 X43.135529 Y156.271057 N06 G2 X175.554 Y73.70 R80 N07 G1 X20 Y-30N08 G1 X0 Y0N09 G40 G0 X-40 Y-26.66N10 M30
HNC-818 数控系统用户说明书 10. 刀具补偿功能 10.4 刀具半径补偿(M)(G40,G41,G42)详细说明 10.4.1 起刀时的刀具移动 刀具绕内边移动 (α≥180°)下面说明从偏置取消方式进入偏置方式时的刀具移动。 直线→直线αSL L编程路径刀具中心路径 工件    G42r   起点   直线→圆弧起点α  G42r工件SC L 刀具中心路径 编程路径103
10. 刀具补偿功能 刀具绕外边移动(90°≤α<180°)HNC-818 数控系统用户说明书  直线→直线起点G42 LrrSLL编程路径刀具中心路径             交点α工件 直线→圆弧起点G42αrrSLL 交点L  工件刀心轨迹 编程路径   C 直线→直线L Sα G42 rLL起点       工件  L Lr  编程路径刀具中心路径        刀具绕外边移动 (α<90°)104
HNC-818 数控系统用户说明书 10. 刀具补偿功能  直线→圆弧L Sα rC刀具中心路径起点G42     rLL  L 工件编程路径     10.4.2 偏置方式下的刀具移动刀具绕内边移动 (α≥180°) 直线→直线 α 工件S交点L编程路径  L刀具中心路径  直线→圆弧起点α交点L   工件刀具中心路径 编程路径C S    105
10. 刀具补偿功能 HNC-818 数控系统用户说明书  圆弧→直线α 工件SLC编程路径刀具中心路径   交点 圆弧→圆弧 α交点S刀具中心路径工件 CC 编程路径 直线→直线LS交点α 工件 L编程路径刀具中心路径      刀具绕外边移动 (90°≤α<180°)106
HNC-818 数控系统用户说明书 10. 刀具补偿功能    直线→圆弧编程路径刀具中心路径 LαrSL交点工件C          圆弧→直线 α 工件 rCSL交点 L 刀具中心路径   编程路径      圆弧→圆弧编程路径SL L C交点  αrrC工件    刀具中心路径107
10. 刀具补偿功能 HNC-818 数控系统用户说明书 刀具绕外边移动(α<90°)  直线→直线Lrαr      LSL工件编程路径刀具中心路径    LL 直线→圆弧S L     Lr L   αrLC刀具中心路径 编程路径     工件          圆弧→直线CLSrαr工件                     L编程路径刀具中心路径    L108
HNC-818 数控系统用户说明书10. 刀具补偿功能  圆弧→圆弧编程路径C LSr               Lαr 工件       LC刀具中心路径  10.4.3 偏置方式取消方式下的刀具移动 在具有移动的取消程序段中,刀具绕内边移动时 (α≥180°) 直线→直线编程路径 刀具中心路径αG40LSL 工件  r     直线→圆弧    工件r G42αG40  CS 编程路径 刀具中心路径L   109
10. 刀具补偿功能 HNC-818 数控系统用户说明书 在具有移动的取消程序段中,刀具绕钝角外边移动时 (90°≤α<180°)  直线→直线  G40LSL交点 工件 α    编程路径 刀具中心路径G42r       圆弧→直线G40 αrL       工件     SL CL  编程路径交点 刀具中心路径110
HNC-818 数控系统用户说明书 10. 刀具补偿功能 在具有移动的取消程序段中,刀具绕锐角外边移动时 (α<90°)  直线→直线编程路径 刀具中心路径L G4αr LLS     工件rLL         直线→圆弧工件 编程路径L αrrL     L CSL刀具中心路径 111
10. 刀具补偿功能 HNC-818 数控系统用户说明书 10.5 刀具长度补偿(M)(G43,G44,G49)通常,编程时指定的刀具长度与实际使用的刀具的长度不一定相等, 它们之间有一个差值。为了操作及编程方便,可以将该差值存储于 CNC 的刀具偏置存储器中,然后用刀具长度补偿代码补偿该差值。 这样,即使使用不同长度的刀具进行加工,只要知道该刀具与编程 使用的刀具长度之间的差值,就可以在不修改加工程序的前提下进 行正常加工。  编程时使用的刀具实际使用的刀具刀具长度补偿值            注意 长度补偿不支持中断式指令,如 G31。概要 根据可以进行道具长度补偿的轴的种类,使用如下三种刀具长度补 偿的方法:(1) 刀具长度补偿 A补偿沿基本 Z 轴方向的刀具长度值;(2) 刀具长度补偿 B 补偿所选平面的垂直方向的刀具长度值;(3) 刀具长度补偿 C 补偿沿指定轴方向的刀具长度值;112
HNC-818 数控系统用户说明书 格式10. 刀具补偿功能     类型  格式  刀具长度补偿 A G43/G44 Z_H_  刀具长度补偿 B G17 G43/G44 Z_H_ G18 G43/G44 Y_H_ G19 G43/G44 X_H_  刀具长度补偿 C G43/G44 X_H_ G43/G44 Y_H_ G43/G44 Z_H_ ......  刀具长度补偿取消 G49 IP_     说明刀具长度补偿由 G43 和 G44 指令指定: G43:刀具长度正向补偿(将刀具长度补偿值加到刀轴方向的理论位置上)。G44:刀具长度负向补偿(在刀轴方向的理论位置上减去刀具长度补 偿值)。G17:XY 平面选择;G18:ZX 平面选择;G19:YZ 平面选择;H : 刀具长度补偿量在刀补表中的编号;(1) 刀具长度补偿方向总是垂直于 G17/G18/G19 所选平面; (2) 偏置号改变时,新的偏置值并不加到旧偏置值上,例如:注意H1:刀具长度补偿量 20.0 G90 G43 Z100 H01G90 G43 Z100 H02H2:刀具长度补偿量 30.0 ;Z 将达到 120;Z 将达到 130(3) G43、G44、G49 都是模态代码,可相互注销;(4) G49 后不跟刀补轴移动是非法的。113
10. 刀具补偿功能 例1HNC-818 数控系统用户说明书 考虑刀具长度补偿,编制如下图所示零件的加工程序:要求建立如图所示的工件坐标系,按箭头所指示的路径进行加工。   #16#3 203030     139#2     1  Y补偿量=4mm编程位置30 183     X120 30 50实际位置35        2  12          5 478101122             114H1 = -4.0 (刀具长度补偿量)%3325G92 X0 Y0 Z0G91 G00 X120 Y80 M03 S600 1 G43 Z-32 H01 2 G01 Z-21 F300 3 G04 P2000 4 G00 Z21 5 X30 Y-50 6 G01 Z-41 7 G00 Z41 8
HNC-818 数控系统用户说明书10. 刀具补偿功能 X50 Y30 G01 Z-25 G04 P2000 G00 G49 Z57 X-200Y-60 M05M309 10 11 12 13115
11. 简化编程功能HNC-818 数控系统用户说明书 11 简化编程功能   116本章包含以下内容:11.1 镜像功能(M)(G24,G25) 11.2 缩放功能(M)(G50,G51) 11.3 旋转变换(M)(G68,G69) 11.4 直接图纸尺寸编程 (T)
HNC-818 数控系统用户说明书 11. 简化编程功能 11.1 镜像功能(M)(G24,G25)当工件相对于某一轴具有对称形状时,可以利用镜像功能和子程序 功能,只对工件的一部分进行编程,而能加工出工件的对称部分, 这就是镜像功能。格式 G24 IP_; 建立镜像 ......G25 IP0; 取消镜像     参数  含义  IP 镜像轴位置  注意 (1)通过指定 G24 α_可以建立 β 轴对称镜像;在已经建立了 β 轴镜像的前提下,指定 G25 α0 取消 β 轴镜像。 如指定 G24 X0Y0 建立点对称镜像,通过指定 G25 X0 可以取消 Y 轴对称镜像,仅仅指定 X 轴对称镜像。α 代表所选平面的第一轴,β 代表所选平面的第二轴。(2) 单独指令 G24、G25 的程序段;(3) 在镜像功能结束后用 G25 予以取消;(4) G25 后不带轴则取消所有镜像。 β60镜像轨迹 1程序编制轨迹镜像轨迹 3α50                 镜像轨迹 2说明(1) 镜像轨迹 1 与编程轨迹为轴对称,对称轴为 α=50;;(2) 镜像轨迹 2 与编程轨迹为点对称,对称点为(50,60);(3) 镜像轨迹 3 与编程轨迹为轴对称,对称轴为 β=60。117
11. 简化编程功能 轴对称镜像HNC-818 数控系统用户说明书(G17/G18/G19) G24 α_/β_;...... ;G25; G17/G18/G19:选择镜像的平面,该平面应包含刀具编程轨迹。G24 α_/β_:指定镜像的对称轴。α_和β_中只能且必须指定一个。α 代表所选平面的第一轴,β 代表所选平面的第二轴。若指定了非选定 平面的轴,则程序报警。......:刀具轨迹编程指令。 G25α0/β0:镜像功能取消。运行程序时只写 G25 或 G25 后 a 与 b 给任意值,可取消镜像功能。(G17/G18/G19) G24 α_ β_;...... ;G25;G17/G18/G19:选择镜像的平面,该平面应包含刀具编程轨迹。G24 α_ β_:指定镜像的对称点。α_或 β_省略时,默认为刀具当前位 置。若指定了非选定平面的轴,则程序报警。......:刀具轨迹编程指令。G25α0β0:镜像功能取消。运行程序时只写 G25 或 G25 后 a 与 b 给 任意值,可取消镜像功能。 点对称镜像118
HNC-818 数控系统用户说明书 举例11. 简化编程功能 使用镜像功能编制如下图所示轮廓的加工程序:设刀具起点距工件上表面 100mm,切削深度 5mm。  Y3021 10-30-10 1030-10 34-30X%3331 主程序G92 G91 M98 G24 M98 G24 M98 G25 M98 G25 M30X0 Y0 Z100 G17 M03 S600P100 X0P100 Y0P100 X0P100 x0 Y0;加工1;Y 轴镜像,镜像位置为 X=0 ;加工2;X、Y 轴镜像,镜像位置为(0,0) ;加工3;X 轴镜像继续有效,取消 Y 轴镜像 ;加工4;取消镜像;子程序(1的加工程序): G00 X10 Y4 D01Z10 H01G90 Z-3 F300Y26X10 Y-10 I10 J0%100 N100 G41 N120 G43 N130 G01 N140 G91 N150 X10 N160 G03119
11. 简化编程功能HNC-818 数控系统用户说明书 120N170 G01 Y-10N180 X-25N185 G00 Z10N190 G90 G49 G00 Z100 N200 G40 X0 Y0N210 M99
HNC-818 数控系统用户说明书 11. 简化编程功能 11.2 缩放功能(M)(G50,G51)执行比例缩放功能时程序编制的程序轨迹按给定的比例系数放大或 缩小。等比缩放 G51 IP_ P_; 缩放开始 ......G50; 缩放取消      参数  含义  IP 指定缩放中心点坐标,不指定则指定当前点为缩放中心点。 本指令始终指定缩放中心在工件坐标系中的绝对位置。  P 指定各轴缩放系数。所有轴均按照此系数缩放   刀具补偿 在有刀具补偿的情况下,先进行缩放,然后才进行刀具半径补偿、 刀具长度补偿。比例缩放不会改变刀具半径补偿值和刀具长度补偿值。注意 (1) 单独指令 G51 的程序段;(2) 在比例缩放结束后用 G50 予以取消;(3) 在 G51 程序段,无论是增量方式(G91)还是绝对方式(G90)下,比 例缩放的中心坐标 IP_是指在工件坐标系中的绝对位置。121
11. 简化编程功能 举例HNC-818 数控系统用户说明书使用缩放功能编制如下图所示轮廓的加工程序:已知三角形 ABC 的 顶点为 A(10,30),B(90,30),C(50,110),三角形 A'B'C'是 缩放后的图形,其中'缩放中心为 D(50,50),缩放系数为 0.5 倍, 设刀具起点距工件上表面 50mm。   OA (10, 30)10 Z 6YC (50, 110) C’ DA’ BB (90, 30) XX    122%3332G92 X0 Y0 Z60G17 M03 S600 F300 G43 G00 Z14 H01 X110 Y0#51=0M98 P100#51=6G51 X50 Y50 P0.5 M98 P100G50G49 Z60G00 X0 Y0M05 M30;主程序;加工三角形 ABC;缩放中心(50,50),缩放系数 0.5 ;加工三角形 A'B'C';取消缩放
HNC-818 数控系统用户说明书11. 简化编程功能 ;子程序(三角形 ABC 的加工程序) %100 N100 N120 N150 N160 N170 N180 N200 N210G41 G00 Y30 D01 Z[#51]G01 X10X50 Y110G91 X44 Y-88 G90 Z[#51]G40 G00 X110 Y0 M99123
11. 简化编程功能 HNC-818 数控系统用户说明书 11.3 旋转变换(M)(G68,G69)使用旋转变换功能,可以将程序编制的加工轨迹绕旋转中心旋转指 定角度。如工件的形状由许多相同的图形组成,则可将图形单元编 程子程序,然后用主程序的旋转变换指令调用。                 这样可以简化编程,既节省时间也节省存储空间。格式 G17/G18/G19; 选择旋转平面 G68 IP_ P_; 建立旋转变换......G69; 取消旋转变换      参数  含义  IP 指定旋转中心坐标点。若不指定则为刀具当前点。 无论是绝对方式或相对方式均指定工件坐标系中的绝对位 置  P 旋转角度(单位:度)   旋转角度 旋转角度 P 的取值范围是-360~360,逆时针为正,顺时针为负,无 论 G90 或 G91 指定,P 始终是参考指定平面内第一轴正方向的角度绝对值。刀具补偿 在坐标系旋转之后执行刀具半径补偿刀具长度补偿刀具偏置和其它 补偿操作。在需要即旋转又缩放时,应先编写开启旋转功能后编写缩放功能,否则将提示“变换嵌套次序错”。注意 (1) 在坐标旋转方式下,不能指定与参考相关的 G 代码(G28、G29、 G30 等)和用来改变坐标系的指令(G52、G54~G59、G54.X、G92 等)。否则请先取消坐标旋转指令;(2) 在刀具半径补偿方式下指定 G68 和 G69,旋转平面必须与刀具半径补偿平面一致;(3) 在旋转变换结束后用 G69 指令予以取消;(4) 单独指令 G68 的程序段。124
HNC-818 数控系统用户说明书 举例11. 简化编程功能使用旋转功能编制如下图所示轮廓的加工程序:设刀具起点距工件 上表面 50mm,切削深度 5mm。  Y3Y’ 2020210X’X      45°1     20  10      %3333N10 G92 X0 Y0 Z50N15 G90 G17 M03 S600 N20 G43 Z-5 H02N25 M98 P200N30 G68 X0 Y0 P45N40 M98 P200N60 G68 X0 Y0 P90N70 M98 P200N20 G49 Z50N80 G69 M05 M30%200G41 G01 X20 Y-5 D02 F300 N105 Y0N110 G02 X40 I10N120 X30 I-5N130 G03 X20 I-5N140 G00 Y-6N145 G40 X0 Y0N150 M99;主程序;加工1 ;旋转 45° ;加工2 ;旋转 90° ;加工3;取消旋转 ;子程序1的加工程序125
11. 简化编程功能 HNC-818 数控系统用户说明书 11.4 直接图纸尺寸编程(T)直线的角度、倒角值、拐角圆弧过渡值以及加工图纸上的其他尺寸 值,可以直接输入这些值来进行编程。此外,任意倾角的直线间可 以插入倒角或过渡圆弧。这种编程方式称为直接图纸尺寸编程。本编程方式仅限于车床系统 G01 使用。指令格式 此种编程方式共有 8 种指令方式。其中各地址字含义如下: X_/Z_:直线目标位置地址字;A_:直线运动方向与 Z 轴正方向的夹角,顺时针为负,逆时针为正, 单位:度。C_:倒角边长; R_:倒圆半径; (1) 指令一条直线   X(X2, Z2) X1_Z1_X2_( Z2_)A_;A (X1, Z1)Z需要注意:目标位置只需要指定一个方向的位移量。例如:Z50a45 或 X100a45。(2) 连续指令直线 X(X3, Z3) X1_Z1_ A1_; X3_Z3_A2_;A2A1  (X2, Z2) (X1, Z1)Z126
HNC-818 数控系统用户说明书11. 简化编程功能 (3) 倒圆 X X2_Z2_R1_; X3_Z3_或A1_R1_;X3 Z3 A2 ;(X3, Z3)A2 R1(X2, Z2)A1 (X1, Z1)     Z(4) 倒角 X2_Z2_C1_; X3_Z3或A1_C1_; X3_Z3_A2_;(X3, Z3)A2X    C1A1 (X1, Z1) (X2, Z2) Z(5) 连续倒圆 X X2_Z2_R1_;X3_Z3_R2_; X4_Z4_或A1_R1_; X3_Z3_A2_R2; X4_Z4_;(X4, Z4)R2(X2, Z2) (X3, Z3)A2 R1   A1Z127
11. 简化编程功能HNC-818 数控系统用户说明书 (6) 连续倒角 X X2_Z2_C1_;X3_Z3_C2_; X4_Z4_或A1_C1_; X3_Z3_A2_C2; X4_Z4_;C2(X4, Z4) C1(X3, Z3) A2(X2, Z2)A1            Z(7) 先倒圆再倒角 X2_Z2_R1_; X3_Z3_C2_; X4_Z4_或A1_R1_; X3_Z3_A2_C2; X4_Z4_;X(X4, Z4)C2(X3, Z3)A2 R1(X2, Z2)         A1Z(8) 先倒角再倒圆 X2_Z2_C1_; X3_Z3_R2_; X4_Z4_或A1_C1_; X3_Z3_A2_R2; X4_Z4_;X (X4, Z4)R2(X3, Z3) A2C1(X2, Z2)      A1Z注意为了避免本功能所使用的地址字与轴名冲突,因此使用本功能时务 必设置通道参数的Parm040035【角度编程使能】(通道0)。128
HNC-818 数控系统用户说明书12. 固定循环 12 固定循环 数控加工中,某些加工动作循环已经典型化。例如,钻孔、镗孔、 铣削、车削等,这样一系列典型的加工动作已经预先用宏程序编制 好,存储在系统中,可用 G 代码形式调用,从而简化编程工作。本 章包括以下内容:12.1 铣床钻孔固定循环 12.2 车床简单循环 12.3 车床钻孔固定循环 12.4 车床复合循环12.5 固定循环中的特殊情况129
12. 固定循环 HNC-818 数控系统用户说明书 12.1 铣床钻孔固定循环(M) 铣床钻孔固定循环指令表     G指令钻孔(-Z 方向)  孔底动作  回退(+Z 方向)  G70切削进给  暂停 快速回退  G71切削进给  暂停 快速回退  G73间歇切削进给  暂停 快速回退  G74切削进给  暂停—主轴正转 切削回退  G76切削进给  主轴定向 快速回退  G78切削进给  暂停 快速回退  G79切削进给  暂停 快速回退  G81切削进给  —— 快速回退  G82切削进给  暂停 快速回退  G83切削进给  暂停 快速回退  G84切削进给  暂停—主轴反转 切削回退  G85切削进给  —— 切削回退  G86切削进给  暂停—主轴停止 快速回退  G87切削进给  主轴正转 快速回退  G88切削进给  暂停—主轴停止 手动  G89切削进给  暂停 切削回退  G80——  —— ——                  钻孔动作分解一般来说,钻孔循环有以下六个动作顺序: 顺序动作 1:X、Y 轴定位顺序动作 2:快速移动到 R 平面顺序动作 3:执行钻孔动作顺序动作 4:在孔底动作顺序动作 5:退刀到 R 平面 顺序动作 6:快速回退到初始 Z 平面130
HNC-818 数控系统用户说明书 12. 固定循环   动作1动作2 动作6R点动作4初始点               动作5 动作3   快速移动 进给  定位平面 G17 平面(X、Y 轴)钻孔轴 Z轴钻孔数据 G73、G74、G76 和 G81 至 G89 都是模态 G 代码指令,在其被取消 之前一直都有效。在这些钻孔循环指令中指定的参数也是模态数据,                 也就是这些参数被保持直到被修改或清除。返回到参考平面 G99 通过 G99 指令,固定循环结束时返回到由 R 参数设定的参考点平面。 初始高度R点   131
12. 固定循环 返回到起始平面 G98HNC-818 数控系统用户说明书 通过 G98 指令,固定循环结束时返回到指令固定循环的起始平面。  初始高度R点   取消固定循环符号解释使用 G80 或 01 组 G 代码可以取消固定循环    P定位(快速移动 G00) 切削进给(直线插补 G01) 手动进给暂停注意(1) 在执行不包含X、Y、Z移动轴指令的固定循环程序段时,本行 将不产生刀具移动,但是当前行的循环参数模态值将被保存;(2) 指定第1组G代码或指定G80时将取消当前固定循环G代码模态, 同时也将清除循环参数模态值;(3) 如需通过指定L重复执行固定循环,当L指定为0时,将会出现报 警信息。(4) 在固定循环程序段中使用G53指令时,其定位数据X、Y还是原 来工件坐标系数据,而不是G53指定坐标系数据。132
HNC-818 数控系统用户说明书 示例:12. 固定循环;定位,钻1孔,返回R点 ;定位, 钻2孔,返回R点;定位, 钻3孔,返回R点;定位, 钻4孔,返回R点;定位, 钻5孔,返回R点;定位, 钻6孔,返回初始位置平面 ;取消固定循环,返回参考点 %5647G54G90 X0 Y0 Z80M3 S1000;G90 G99 G81 X300 Y-250 Z-150 R-120 F120Y-550Y-750X1000Y-550G98 Y-750G80 G28 G91 X0 Y0 Z0 M5;M30133
12. 固定循环 HNC-818 数控系统用户说明书 12.1.1 圆周钻孔循环(G70)说明 在 X、Y 指定的坐标为中心所形成半径为 I 的圆周上,以 X 轴和角 度 J 形成的点开始将圆周做 N 等分,做 N 个孔的钻孔动作,每个孔 的动作根据 Q、K 的值执行 G81 或 G83 标准固定循环。孔间位置的移动以 G00 方式进行。G70 为模态,其后的指令字为非模态。   初始B点 参照初始B点 参照R点孔底 Z点 R点 QkG98G99孔底延时 P 秒      Q Qk    孔底 Z点 格式 (G98 / G99) G70 X_ Y_ Z_ R_ I_ J_ N_【Q_K_P】_ F_ L_    参数  含义  XY 圆周孔循环的圆心坐标  Z 孔底坐标  R 绝对编程时是参照 R 点的坐标值;增量编程时是参照 R 点 相对与初始 B 点的增量值。  I 圆半径  J 最初钻孔点的角度,逆时针方向为正  N 孔的个数,正值表示逆时针方向钻孔,负值表示顺时针方 向钻孔.  Q 每次进给深度,为有向距离。  K 每次退刀后,再次进给时,由快速进给转换为切削进给时 距上次加工面的距离。  P 刀具在孔底暂停时间,单位为毫秒。当 Q 大于零或 K 小于零时报错;进刀距离 Q 小于退刀距离 K 时报错;当 Q 或 K 为零或没有定义,每个孔的动作执行 G81 中心钻孔循环,此时 P 无效;当 Q、K 两者的值均正 确时,每个孔的动作执行 G83 深孔加工循环,此时 P 有效。  F 指定切削进给速度。  L 重复次数(一般用于多孔加工,故 X 或 Y 应为增量值,L=1 时可省略)。            134
HNC-818 数控系统用户说明书 例1例2例3例4例512. 固定循环 表示在 X、Y 平面四个轴方向上钻四个逆圆的孔,此循环执行两次,孔底执行 G81 钻孔动作。G98 G70 X10 Y10 Z0 R20 I10 J0 N4 F200 L2表示在 X、Y 平面 45 度起钻四个顺圆的孔,此循环执行一次,孔底 执行 G81 钻孔动作。G99 G70 X10 Y10 Z10 R50 I10 J45 N-4 F200表示在 X、Y 平面-45 度起钻四个顺圆的孔,此循环执行一次,孔底 执行 G81 钻孔动作。G99 G70 X10 Y10 Z10 R50 I10 J-45 N-4 F200表示在 X、Y 平面-45 度起钻四个顺圆的孔,此循环执行一次,Q 值 无效,孔底执行 G81 钻孔动作G99 G70 X10 Y10 Z10 R50 I10 J-45 N-4 Q-10 F200表示在 X、Y 平面-45 度起钻四个顺圆的孔,此循环执行一次,孔底 执行 G81 钻孔动作。G99 G70 X10Y10Z10R50 I10J-45N-4 Q0 F200 G99 G70 X10Y10Z10R50 I10J-45N-4 K0 F200 G99 G70 X10Y10Z10R50 I10J-45N-4 Q0K0 F200 135
12. 固定循环 例 6HNC-818 数控系统用户说明书 表示在 X、Y 平面-45 度起钻四个顺圆的孔,此循环执行一次,执行G83 深孔循环。G99 G70 X10Y10Z10R50 I10J-45N-4 Q-10 K5 F200  Y40Z 3030度X 40X            136用Φ10 钻头,加工图示孔%3358N10 G55 G00 X0 Y0 Z80N20 G98G70G90X40Y40R35Z0I40J30N6P2000Q-10K5F100 N30 G90 G00 X0 Y0 Z80N40 M30
HNC-818 数控系统用户说明书 12. 固定循环 12.1.2 圆弧钻孔循环(G71)说明 在 X、Y 指定的坐标为中心所形成半径为 I 的圆弧上,以 X 轴和角 度 J 形成的点开始,间隔 O 角度做 N 个点的钻孔,每个孔的动作根 据 Q、K 的值执行 G81 或 G83 标准固定循环。孔间位置的移动以 G00方式进行。G71 为模态,其后的指令字为非模态。格式 (G98/G99) G71 X_ Y_ Z_ R_ I_ J_ O_ N【Q_K_P】_ F_ L_    参数  含义  XY 圆弧的中心坐标  Z 孔底坐标  R 绝对编程时是参照 R 点的坐标值;增量编程时是参照 R 点 相对与初始 B 点的增量值。  I 圆弧半径  J 最初钻孔点的角度,逆时针方向为正  O 孔间角度间隔,正值表示逆时针方向钻孔,负值表示顺时 针方向钻孔。  N 包括起点在内的孔的个数  Q 每次进给深度,为有向距离。  K 每次退刀后,再次进给时,由快速进给转换为切削进给时 距上次加工面的距离。  P 刀具在孔底暂停时间,单位为毫秒。当 Q 大于零或 K 小于零时报错;进刀距离 Q 小于退刀距离 K 时报错;当 Q 或 K 为零或没有定义,每个孔的动作执行 G81 中心钻孔循环,此时 P 无效;当 Q、K 两者的值均正 确时,每个孔的动作执行 G83 深孔加工循环,此时 P 有效。  F 指定切削进给速度。  L 重复次数(一般用于多孔加工,故 X 或 Y 应为增量值,L=1 时可省略)。             注意 圆弧总角度 N×O 不能大于或等于 360 度,否则不予执行。137
12. 固定循环 举例HNC-818 数控系统用户说明书 用Φ10 钻头,加工图示孔 YZ 204028度55度XX              138%3359N10 G55 G00 X0 Y0 Z80N20 G98G71G90X40Y0G90R25Z0I40J55O28N4P2000Q-10K5F100 N30 G90 G00 X0 Y0 Z80N40 M30
HNC-818 数控系统用户说明书 12. 固定循环 12.1.3 高速深孔加工循环(G73)说明 该固定循环用于 Z 轴的间歇进给,使深孔加工时容易断屑、排屑、加入冷却液、且退刀量不大,可以进行深孔的高速加工。G73 的动作序列如下图所示。图中虚线表示快速定位,q 表示每次进给深度,k 表示每次的回退值。   初始平面kqkqZ点  R点 qG98       R点 R点平面qqkqZ点  kG99      格式 (G98/G99) G73 X_ Y_ Z_ R_ Q_ P_ K_ F_ L_;    参数  含义  XY 绝对编程(G90)时是孔中心在 XY 平面内的坐标位置;增 量编程(G91)时是孔中心在 XY 平面内相对于起点增量值。  Z 绝对编程(G90)时是孔底 Z 点的坐标值;增量编程(G91) 时是孔底 Z 点相对与参照 R 点的增量值。  R 绝对编程(G90)时是参照 R 点的坐标值;增量编程(G91) 时是参照 R 点相对与初始 B 点的增量值。  Q 为每次向下的钻孔深度(增量值,取负)。  P 刀具在孔底的暂停时间,以 ms 为单位。  K 为每次向上的退刀量(增量值,取正)。  F 钻孔进给速度。  L 循环次数(需要重复钻孔时)         钻孔动作 (1) 刀位点快移到孔中心上方 B 点; (2) 快移接近工件表面,到 R 点;(3) 向下以 F 速度钻孔,深度为 q 量; (4) 向上快速抬刀,距离为 k 量;139
12. 固定循环HNC-818 数控系统用户说明书 注意示例(5) 步骤 3、4 往复多次;(6) 钻孔到达孔底 Z 点;(7) 孔底延时 P 秒(主轴维持旋转状态); (8) 向上快速退到 R 点(G99)或 B 点(G98)。(1) 如果 Z、K、Q 移动量为零时,该指令不执行; (2) |Q|>|K|;加工如下图示孔: Y25Z 20 35X 40X                           140%3337N10 G92 X0 Y0 Z80N15 M03 S700N20 G00 Y25N30 G98 G73 G91 X20 G90 R40 P2000 Q-10 K2 Z-3 L2 F80 N40 G00 X0 Y0 Z80N45 M30
HNC-818 数控系统用户说明书 12. 固定循环 12.1.4 反向攻丝循环(G74)说明               刚性攻丝方式中用伺服主轴电机控制攻丝过程。此时主轴电机的工                 作方式和伺服电机一样都是在位置控制方式下工作,由攻丝轴和主                 轴之间的插补来执行攻丝,这时主轴每旋转一转沿攻丝轴进给一个                 螺纹导程的距离,即使在加减速期间这种进给关系也不变化。G74的动作如下图所示。沿X和Y轴定位后快速移动到R点,然后主轴 反转,从R点到Z点执行攻丝。当攻丝完成后主轴停止并执行暂停, 然后主轴正转,刀具退回到R点,主轴停止,如果是G98方式 ,还 将快速移动到初始位置。  初始平面 主轴停止R点Z点P主轴停止  主轴反转       G74(G98)主轴正转  初始平面 主轴停止R点Z点P主轴停止 主轴反转        G74(G99)主轴正转格式 (G98/G99)G74 X_ Y_ Z_ Q_ R_ P_ F_ L_H_J_;    参数  含义  XY 绝对值方式(G90)时,指定孔的绝对位置; 增量值方式(G91)时,指定刀具从当前位置到孔位的 距离。  Z 绝对值方式(G90)时,指定孔底的绝对位置; 增量值方式(G91)时,指定孔底到 R 点的距离。  Q 分段攻丝每次的进刀量。H2 时不必指定  R 绝对值方式(G90)时,指定 R 点的绝对位置; 增量值方式(G91)时,指定 R 点到初始平面的距离。  P 指定攻丝到孔底时的暂停时间,以 ms 为单位。  F 指定螺纹导程。  H H1 分段攻丝,每次回退到 R 平面 H2 直接钻到孔底  L 重复次数(L=1 时可省略)。  J J1 A 轴攻丝;J2 B 轴攻丝;J3 C 轴攻丝          141
12. 固定循环HNC-818 数控系统用户说明书 攻丝中的 F 进给速度攻丝方式注意刚性攻丝时程序中指定的 F(进给速度)无效,沿攻丝轴的进给速度 由下式计算:进给速度 = 主轴转速×螺纹导程。C 轴攻丝:将伺服主轴当作 C 轴,采用插补的方法攻丝,可以实现 高速高精度攻丝。(1) 攻丝轴必须为 Z 轴;(2) Z 点必须低于 R 点平面,否则程序报警;(3) G74 指令数据被作为模态数据存储,相同的数据可省略; (4) Z 的移动量为零时候,本循环不执行;(5) 在反向攻丝过程中,忽略进给速度倍率和进给保持。(6) 在反攻丝指令 G74 使用前,请注意将主轴伺服电机的控制方式 由速度方式切换为位置方式,使用 STOC 指令切换。攻丝完成 后,可以使用 CTOS 指令将主轴伺服电机的控制方式由位置方 式切换为速度方式,将伺服主轴当作普通主轴使用。(7) 使用反攻丝指令 G74 前,请使用相应的 M 代码使主轴反转。(8) 调用 G74 刚性攻丝后必须由编程者恢复原进给速度,否则进给 速度会为刚性攻丝速度即 s*螺距。142
HNC-818 数控系统用户说明书 举例12. 固定循环 用 M10×1 反丝锥攻丝。 Y     50 35XXZ          %3339G92 X0 Y0 Z80 F200M04 S300STOC G98G74X50Y40R40P10000G90Z-5F1 CTOSG0 X0 Y0 Z80M30 143
12. 固定循环HNC-818 数控系统用户说明书 12.1.5 精镗循环(G76) 说明精镗时,主轴在孔底定向停止后,向刀尖反方向移动,然后快速退 刀。刀尖反向位移量用地址 I、J 指定,其值只能为正值。I、J 值是 模态的,位移方向由装刀时确定。  初始平面    R点G98 Z点 偏移量(I,J)          R 点平面 R点G99Z点 偏移量(I,J)         格式(G98/G99) G76 X_ Y_ Z_ R_ I_ J_ P_ F_ L_;    参数  含义  XY 孔位数据,绝对值方式(G90)时为孔位绝对位置,增 量值方式(G91)时为刀具从当前位置到孔位的距离。 不支持 UW 编程。  Z 指定孔底位置。绝对值方式(G90)时为孔底的 Z 向绝 对位置,增量值方式(G91)时为孔底到 R 点的距离。  R 指定 R 点的位置。绝对值方式(G90)时为 R 点的 Z 向 绝对位置,增量值方式(G91)时为 R 点到初始平面的 距离。  I X 轴方向偏移量,只能为正值。  J Y 轴方向偏移量,只能为正值。  P 孔底暂停时间(单位:秒)。  F 切削进给速度。  L 重复次数(L=1 时可省略)。         工作步骤(1) 刀位点快移到孔中心上方B点; (2) 快移接近工件表面,到R点;(3) 向下以F速度镗孔,到达孔底Z点; (4) 向下以F速度镗孔,到达孔底Z点;144
HNC-818 数控系统用户说明书12. 固定循环 注意举例(5) 孔底延时P秒(主轴维持旋转状态);(6) 主轴定向,停止旋转;(7) 镗刀向刀尖反方向快速移动I或J量;(8) 向上快速退到R点高度(G99)或B点高度(G98);(9) 向刀尖正方向快移I或J量,刀位点回到孔中心上方R点或B点; (10) 主轴恢复正转。(1) 钻孔轴必须为 Z 轴;(2) Z 点必须低于 R 点平面,否则程序报警;(3) G76 指令数据被作为模态数据存储,相同的数据可省略; (4) 使用指令 G76 前,请使用相应的 M 代码使主轴旋转。 Y30 15        20 40 35XXZ              用单刃镗刀镗孔。%3341N10 G54N12 M03 S600N15 G00 X0 Y0 Z80N20 G98G76X20Y15R40P2000I5Z-4F100 N25 X40Y30N30 G00 G90 X0 Y0 Z80N40 M30145
12. 固定循环 HNC-818 数控系统用户说明书 12.1.6 角度直线孔循环(G78)说明 以 X、Y 指定的坐标为起点,在 X 轴和角度 J 所形成的方向用间隔 I 区分成 N 个孔做钻孔循环,每个孔的动作根据 Q、K 的值执行 G81 或 G83 标准固定循环。孔间位置的移动以 G00 方式进行。G78 为模态,其后的指令字为非模态。格式 (G98/G99) G78 X_ Y_ Z_ R_ I_ J_ N_【Q_K_P】_ F_ L_    参数  含义  XY 第一个孔的坐标  Z 孔底坐标  R 绝对编程时是参照 R 点的坐标值;增量编程时是参照 R 点 相对与初始 B 点的增量值。  I 孔间距  J 斜线与 X 轴正方向形成的起始角度,逆时针方向为正  N 包括起点在内的孔的个数  Q 每次进给深度,为有向距离。  K 每次退刀后,再次进给时,由快速进给转换为切削进给时 距上次加工面的距离。  P 刀具在孔底暂停时间,单位为毫秒。当 Q 大于零或 K 小于零时报错;进刀距离 Q 小于退刀距离 K 时报错;当 Q 或 K 为零或没有定义,每个孔的动作执行 G81 中心钻孔循环,此时 P 无效;当 Q、K 两者的值均正 确时,每个孔的动作执行 G83 深孔加工循环,此时 P 有效。  F 指定切削进给速度。  L 重复次数(一般用于多孔加工,故 X 或 Y 应为增量值,L=1 时可省略)。            146
HNC-818 数控系统用户说明书 举例12. 固定循环 用Φ10 钻头,加工图示孔 Y10Z 102020XX       30度           %3360N10 G55 G00 X0 Y0 Z80N20 G98G78G90X20Y10G90R15Z0I20J30N3P2000Q-10K5F100 N30 G90 G00 X0 Y0 Z80N40 M30147
12. 固定循环 HNC-818 数控系统用户说明书 12.1.7 棋盘孔循环(先进行 X 方向钻孔)(G79)说明 以 X、Y 指定的坐标为起点,在 X 轴平行方向以间隔 I 做 N 个孔做 钻孔循环,再以 Y 轴方向间隔 J,做 X 轴方向钻孔,共循环 O 次, 每个孔的动作根据 Q、K 的值执行 G81 或 G83 标准固定循环。孔间位置的移动以 G00 方式进行。G78 为模态,其后的指令字为非模态。 格式 (G98/G99) G79 X_ Y_ Z_ R_ I_ N_ J_ O_【Q_K_P】_ F_ L_    参数  含义  XY 第一个孔的坐标  Z 孔底坐标  R 绝对编程时是参照 R 点的坐标值;增量编程时是参照 R 点 相对与初始 B 点的增量值。  I X 方向孔间距,正表示向 X 轴正方向钻孔,负表示向 X 轴 负方向钻孔。  N X 方向包括起点在内的孔的个数  J Y 方向孔间距, 正表示向 Y 轴正方向钻孔,负表示向 Y 轴 负方向钻孔。  O Y 方向包括起点在内的孔的个数  Q 每次进给深度,为有向距离。  K 每次退刀后,再次进给时,由快速进给转换为切削进给时 距上次加工面的距离。  P 刀具在孔底暂停时间,单位为毫秒。当 Q 大于零或 K 小于零时报错;进刀距离 Q 小于退刀距离 K 时报错;当 Q 或 K 为零或没有定义,每个孔的动作执行 G81 中心钻孔循环,此时 P 无效;当 Q、K 两者的值均正 确时,每个孔的动作执行 G83 深孔加工循环,此时 P 有效。  F 指定切削进给速度。  L 重复次数(一般用于多孔加工,故 X 或 Y 应为增量值,L=1 时可省略)。             148
HNC-818 数控系统用户说明书 举例12. 固定循环 用Φ10 钻头,加工图示孔  15 Y20Z 2020XX       15               %3361N10 G55 G00 X0 Y0 Z80N20 G98G79G90X20Y20G90R25Z0I15N3J15O3P2000Q-10K5F100 N30 G90 G00 X0 Y0 Z80N40 M30149
12. 固定循环 HNC-818 数控系统用户说明书 12.1.8 钻孔循环(中心钻)(G81)说明 该循环用作正常钻孔。切削进给执行到孔底,然后刀具从孔底快速移动退回。G81 的动作序列如下图所示。图中虚线表示快速定位。   初始平面R点Z点 G81(G98)    R 点平面 R点Z点 G81(G99)格式 (G98/G99) G81 X_ Y_ Z_ R_ F_ L_ ;    参数  含义  XY 孔位数据,绝对值方式(G90)时为孔位绝对位置,增 量值方式(G91)时为刀具从当前位置到孔位的距离。  Z 指定孔底位置。绝对值方式(G90)时为孔底的 Z 向绝 对位置,增量值方式(G91)时为孔底到 R 点的距离。  R 指定 R 点的位置。绝对值方式(G90)时为 R 点的 Z 向 绝对位置,增量值方式(G91)时为 R 点到初始平面的 距离。  F 切削进给速度。  L 重复次数(L=1 时可省略,一般用于多孔加工,故 X 或 Y 应为增量值)。      工作步骤 (1) 刀位点快移到孔中心上方B点; (2) 快移接近工件表面,到R点;(3) 向下以F速度钻孔,到达孔底Z点;(4) 主轴维持旋转状态,向上快速退到R点(G99)或B点(G98);150
HNC-818 数控系统用户说明书 注意举例12. 固定循环 (1) 如果 Z 的移动位置为零,该指令不执行;(2) 钻孔轴必须为 Z 轴;(3) G81 指令数据被作为模态数据存储,相同的数据可省略; (4) 使用指令 G81 前,请使用相应的 M 代码使主轴旋转。加工如下图示孔: Y30 15        20 40 15XXZ              %3343N10 G92 X0 Y0 Z80N15 M03 S600N20 G98 G81 G91 X20 Y15 G90 R20 Z-3 L2 F200 N30 G00 X0 Y0 Z80N40 M30151
12. 固定循环 HNC-818 数控系统用户说明书 12.1.9 带停顿的钻孔循环(G82)说明 此指令主要用于加工沉孔、盲孔,以提高孔深精度。该指令除了要在孔底暂停外,其他动作与 G81 相同。G82 的动作序列如下图所示。   初始平面R点Z点暂停G82(G98)     R 点平面 R点Z点暂停G82(G99) 格式 (G98/G99) G82 X_ Y_ Z_ R_ P_ F_ L_;    参数  含义  XY 绝对值方式(G90)时,指定孔的绝对位置; 增量值方式(G91)时,指定刀具从当前位置到孔位的距 离。  Z 绝对值方式(G90)时,指定孔底的绝对位置; 增量值方式(G91)时,指定孔底到 R 点的距离。  R 绝对值方式(G90)时,指定 R 点的绝对位置; 增量值方式(G91)时,指定 R 点到初始平面的距离。  P 指定在孔底的暂停时间(单位:ms)。  F 指定切削进给速度。  L 循环次数(一般用于多孔加工的简化编程,L=1 时可省 略)。       工作步骤 (1) 刀位点快移到孔中心上方B点; (2) 快移接近工件表面,到R点;(3) 向下以F速度钻孔,到达孔底Z点;(4) 主轴维持原旋转状态,延时P秒;(5) 向上快速退到R点(G99)或B点(G98)。152
HNC-818 数控系统用户说明书 注意举例12. 固定循环 (1) 钻孔轴必须为 Z 轴;(2) 如果 Z 的移动量为零,该指令不执行;(3) G82 指令数据被作为模态数据存储,相同的数据可省略; (4) 使用指令 G82 前,请使用相应的 M 代码使主轴旋转。加工如下图示孔: Z90°Φ12 435X  %3345N10 G92 X0 Y0 Z80N15 M03 S600N20 G98 G82 G90 X25 Y30 R40 P2000 Z25 F200 N30 G00 X0 Y0 Z80N40 M30153
12. 固定循环 HNC-818 数控系统用户说明书 12.1.10 深孔加工循环(G83)说明 该固定循环用于 Z 轴的间歇进给,每向下钻一次孔后,快速退到参 照 R 点,退刀量较大、更便于排屑好、方便加冷却液。G83 的动作序列如下图所示。     R点 qq q初始平面kG98kZ点                  R点 R点平面q q q           k kZ点G99       格式 (G98/G99) G83 X_ Y_ Z_ R_ Q_ K_ F_ L_ P_;    参数  含义  XY 绝对值方式(G90)时,指定孔的绝对位置; 增量值方式(G91)时,指定刀具从当前位置到孔位的 距离。  Z 绝对值方式(G90)时,指定孔底的绝对位置; 增量值方式(G91)时,指定孔底到 R 点的距离。  R 绝对值方式(G90)时,指定 R 点的绝对位置; 增量值方式(G91)时,指定 R 点到初始平面的距离。  Q 为每次向下的钻孔深度(增量值,取负)  K 距已加工孔深上方的距离(增量值,取正)。 注意:K 不能大于 Q  F 指定切削进给速度。  L 重复次数(一般用于多孔加工的简化编程,L=1 时可省 略)。  P 指定在孔底的暂停时间(单位:ms)。         工作步骤 (1) 刀位点快移到孔中心上方B点; (2) 快移接近工件表面,到R点;(3) 向下以F速度钻孔,深度为q量;154
HNC-818 数控系统用户说明书12. 固定循环 注意举例(4) 向上快速抬刀到R点;(5) 向下快移到已加工孔深的上方,k距离处; (6) 向下以F速度钻孔,深度为(q+k)量; (7) 重复步骤4、5、6。到达孔底Z点;(8) 孔底延时P秒(主轴维持原旋转状态); (9) 向上快速退到R点(G99)或B点(G98)。(1) 钻孔轴必须为 Z 轴;(2) 如果 Z、Q、K 的移动量为零,该指令不执行;(3) G83 指令数据被作为模态数据存储,相同的数据可省略; (4) 使用指令 G83 前,请使用相应的 M 代码使主轴旋转;加工如下图所示孔: Y25Z 20 35X 40X                           %3347N10 G55 G00 X0 Y0 Z80N15 Y25N20 G98G83G91X20G90R40P2Q-10K5G91Z-43F100L2 N30 G90 G00 X0 Y0 Z80N40 M30155
12. 固定循环HNC-818 数控系统用户说明书 12.1.11 攻丝循环(G84) 说明G84指令与G74指令攻丝原理相同。G84是主轴正转攻丝到孔底后反 转回退。其动作如下图所示。  初始平面 主轴停止R点Z点P主轴停止  主轴正转       G84(G98)主轴反转  初始平面 主轴停止R点Z点P主轴停止 主轴正转        G84(G99)主轴反转格式G84 X_ Y_ Z_ R_ Q_ P_ F_ L_H_J_;    参数  含义  XY 绝对值方式(G90)时,指定孔的绝对位置; 增量值方式(G91)时,指定刀具从当前位置到孔位的 距离。  Z 绝对值方式(G90)时,指定孔底的绝对位置; 增量值方式(G91)时,指定孔底到 R 点的距离。  R 绝对值方式(G90)时,指定 R 点的绝对位置; 增量值方式(G91)时,指定 R 点到初始平面的距离。  Q 分段攻丝每次的进刀量。H2 时不必指定  P 指定在孔底的暂停时间(单位:ms)  F 指定螺纹导程。  L 重复次数(一般用于多孔加工,故 X 或 Y 应为增量值, L=1 时可省略)。  J J1 A 轴攻丝;J2 B 轴攻丝;J3 C 轴攻丝         攻丝中的进给速度刚性攻丝时程序中指定的 F(进给速度)无效,沿攻丝轴的进给速度 由下式计算:进给速度 = 主轴转速×螺纹导程156
HNC-818 数控系统用户说明书 攻丝方式注意12. 固定循环 C 轴攻丝:将伺服主轴当作 C 轴,采用插补的方法攻丝,可以实现高速高精度攻丝;(1) 攻丝轴必须为 Z 轴;(2) Z 点必须低于 R 点平面,否则程序报警;(3) G84 指令数据被作为模态数据存储,相同的数据可省略;(4) Z 的移动量为零时候,本循环不执行;(5) 在正向攻丝过程中,忽略进给速度倍率,主轴修调和进给保持。(6)在攻丝指令 G84 使用前,请注意将主轴伺服电机的控制方式由 速度方式切换为位置方式,使用 STOC 指令切换。攻丝完成后, 可以使用 CTOS 指令将主轴伺服电机的控制方式由位置方式切 换为速度方式,将伺服主轴当作普通主轴使用。(7) 使用攻丝指令 G84 前,请使用相应的 M 代码使主轴正转。 (8)调用 G84 刚性攻丝后必须由编程者恢复原进给速度,否则进给速度会为刚性攻丝速度即 s*螺距。%3349N10 G92 X0 Y0 Z80N15 M03 S300G108N20 G98G84X0Y0Z-15R10P2000F1 G109N30 G90 G0 X0 Y0 Z80N40 M30 举例157
12. 固定循环HNC-818 数控系统用户说明书 12.1.12 镗孔循环(G85) 说明该指令主要用于精度要求不太高的镗孔加工。G85 的动作序列如下 图所示。   初始平面R点Z点 G85(G98)   R 点平面 R点Z点 G85(G99)格式(G98/G99) G85 X_ Y_ Z_ R_ F_ L_;    参数  含义  XY 绝对值方式(G90)时,指定孔的绝对位置; 增量值方式(G91)时,指定刀具从当前位置到孔位的 距离。  Z 绝对值方式(G90)时,指定孔底的绝对位置; 增量值方式(G91)时,指定孔底到 R 点的距离。  R 绝对值方式(G90)时,指定 R 点的绝对位置; 增量值方式(G91)时,指定 R 点到初始平面的距离。  F 指定切削进给速度。  L 重复次数(一般用于多孔加工的简化编程,L=1 时可省 略)。      工作步骤(1) 刀位点快移到孔中心上方B点; (2) 快移接近工件表面,到R点; (3) 向下以F速度镗孔;(4) 到达孔底Z点;(5) 向上以F速度退到R点(主轴维持旋转状态); (6) 如是G98状态,则还要向上快速退到B点。158
HNC-818 数控系统用户说明书 注意12. 固定循环 举例(1) 钻孔轴必须为 Z 轴;(2) Z 点必须低于 R 点平面,否则程序报警;(3) 如果 Z、Q、K 的移动量为零,该指令不执行;(4) G85 指令数据被作为模态数据存储,相同的数据可省略; (5) 使用指令 G85 前,请使用相应的 M 代码使主轴旋转;加工如下图所示孔: Y30 15        20 40 15XXZ              %3351N10 G92 X0 Y0 Z80N15 M03 S600N20 G98 G85 G91 X20 Y15 G90 R20 Z-3 L2 F100 N30 G90 G00 X0 Y0 Z80N40 M30159
12. 固定循环HNC-818 数控系统用户说明书 12.1.13 镗孔循环(G86) 说明格式G86 执行的动作与 G81 相同,但在孔底主轴停止,然后快速退回, 主要用于精度要求不太高的镗孔加工。(G98/G99) G86 X_ Y_ Z_ R_ F_ L_;    参数  含义  XY 绝对值方式(G90)时,指定孔的绝对位置; 增量值方式(G91)时,指定刀具从当前位置到孔位的 距离。  Z 绝对值方式(G90)时,指定孔底的绝对位置; 增量值方式(G91)时,指定孔底到 R 点的距离。  R 绝对值方式(G90)时,指定 R 点的绝对位置; 增量值方式(G91)时,指定 R 点到初始平面的距离。  F 指定切削进给速度。  L 循环次数(一般用于多孔加工的简化编程,L=1 时可省 略)。      工作步骤(1) 刀位点快移到孔中心上方B点; (2) 快移接近工件表面,到R点; (3) 向下以F速度镗孔;(4) 到达孔底Z点;(5) 主轴停止旋转;(6) 向上快速退到R点(G99)或B点(G98); (7) 主轴恢复正转。(1) 如果 Z 的移动位置为零,该指令不执行;(2) G86 指令数据被作为模态数据存储,相同的数据可省略; (3) 钻孔轴必须为 Z 轴;(4) Z 点必须低于 R 点平面,否则程序报警。注意160
HNC-818 数控系统用户说明书 举例12. 固定循环 加工如下图所示孔: Y30 15        20 40 15XXZ              %3353;用铰刀铰孔。N10 G92 X0 Y0 Z80N15 G98 G86 G90 X20 Y15 R20 Z-2 F200 N20 X40 Y30N30 G90 G00 X0 Y0 Z80N40 M30161
12. 固定循环HNC-818 数控系统用户说明书 12.1.14 反镗循环(G87) 说明该指令一般用于镗削上小下大的孔,其孔底 Z 点一般在参照点 R 的 上方,与其它指令不同。  初始点 偏移(I,J) Z点定位R点 R点 反向偏移(I,J)格式(G98/G99) G87X_ Y_ Z_ R_ I_ J_ P_ F_ L_;    参数  含义  XY 孔位数据,绝对值方式(G90)时为孔位绝对位置; 增量值方式(G91)时为刀具从当前位置到孔位的距离。  Z 指定孔底位置。 绝对值方式(G90)时为孔底的 Z 向绝对位置; 增量值方式(G91)时为孔底到 R 点的距离。  R 指定 R 点的位置。绝对值方式(G90)时为 R 点的 Z 向绝对位置; 增量值方式(G91)时为 R 点到初始平面的距离。  I X 轴方向偏移量。  J Y 轴方向偏移量。  P 孔底暂停时间(单位:ms)。  F 指定切削进给速度。  L 重复次数(一般用于多孔加工,故 X 或 Y 应为增量值, L=1 时可省略)。         162
HNC-818 数控系统用户说明书 工作步骤12. 固定循环(1) 刀位点快移到孔中心上方 B 点;(2) 主轴定向,停止旋转;(3) 镗刀向刀尖反方向快速移动 I 或 J 量;(4) 快速移到 R 点;(5) 镗刀向刀尖正方向快移 I 或 J,刀位点回到孔中心 X、Y 坐标处; (6) 主轴正转;(7) 向上以 F 速度镗孔,到达孔底 Z 点;(8) 孔底延时 P 秒(主轴维持旋转状态);(9) 主轴定向,停止旋转;(10) 刀尖反方向快速移动 I 或 J 量;(11) 向上快速退到 B 点高度(G98);(12) 向刀尖正方向快移 I 或 J,刀位点回到孔中心上方 B 点处;(13) 主轴恢复正转。(1) 钻孔轴必须为 Z 轴;(2) 如果 Z 的移动量为零,该指令不执行;(3) Z 点必须高于 R 点平面,否则程序报警;(4) G87 指令数据被作为模态数据存储,相同的数据可省略; (5) G87 指令只能使用 G98;(6) 使用指令 G87 前,请使用相应的 M 代码使主轴旋转; 注意163
12. 固定循环 HNC-818 数控系统用户说明书 举例  Y 15Z3520XX 2×Φ28          20 40 2×Φ20                164%3355N10 G92 X0 Y0 Z80N15 M03 S600N20 G00 Y15 F200N25 G98G87 G91X20 I5 R-83 P2000 Z23 L2 N30 G90 G00 X0 Y0 Z80 M05 N40 M30
HNC-818 数控系统用户说明书 12. 固定循环 12.1.15 镗孔循环(手镗)(G88)说明 该指令在镗孔前记忆了初始 B 点或参照 R 点的位置,当镗刀自动加 工到孔底后机床停止运行,手动将工作方式转换为“手动”,通过手 动操作使刀具抬刀到 B 点或 R 点高度上方,并避开工件。然后工作 方式恢复为自动,再循环启动程序,刀位点回到 B 点或 R 点。用此                 指令一般铣床就可完成精镗孔,不需主轴准停功能。     初始B点 参照R点返回B点后 主轴正转返回R点后主轴正转G98孔底Z点 孔底延时、主轴停止               参照R点G99                            孔底 Z 点        格式 G98(G99)G88 X_ Y_ Z_ R_ P_ F_ L_    参数  含义  XY 孔位数据,绝对值方式(G90)时为孔位绝对位置,增 量值方式(G91)时为刀具从当前位置到孔位的距离。  Z 指定孔底位置。绝对值方式(G90)时为孔底的 Z 向绝 对位置,增量值方式(G91)时为孔底到 R 点的距离。  R 指定 R 点的位置。绝对值方式(G90)时为 R 点的 Z 向绝对位置,增量值方式(G91)时为 R 点到初始平面 的距离。  P 孔底暂停时间(单位:ms)。  F 镗孔进给速度。  L 循环次数(一般用于多孔加工,故 X 或 Y 应为增量值)。       工作步骤 (1) 刀位点快移到孔中心上方 B 点; (2) 快移接近工件表面,到 R 点;(3) 向下以 F 速度镗孔,到达孔底 Z 点; (4) 孔底延时 P 秒(主轴维持旋转状态); (5) 主轴停止旋转;165
12. 固定循环HNC-818 数控系统用户说明书 (6) 手动移动刀具,直到高于 R 点(G99)或 B 点(G98)高度;(7) 自动方式下按循环启动,刀具快速到 R 点(G99)或 B 点(G98) 位置;(8) 主轴自动恢复正转;(1) 钻孔轴必须为 Z 轴;(2) 如果 Z 的移动量为零,该指令不执行;(3) Z 点必须低于 R 点平面,否则程序报警;(4) G88 指令数据被作为模态数据存储,相同的数据可省略; (5) 如果程序中使用 G99,手动移动刀具必须高于 R 点; (6) 如果程序中使用 G98,手动移动刀具必须高于 B 点; (7) 使用指令 G88 前,请使用相应的 M 代码使主轴旋转。 注意 Y30 15        20 40 35XXZ              举例166%3357; 用单刃镗刀镗孔。 N10 G54N12 M03 S600N15 G00 X0 Y0 Z80N20 G98G88G91X20Y15R-42P2000Z-40L2F100 N30 G00 G90 X0 Y0 Z80N40 M30
HNC-818 数控系统用户说明书12. 固定循环 12.1.16 镗孔循环(G89) 说明该循环用于镗孔。该循环几乎与 G86 相同,不同的是该循环在孔底执行暂停。在指定 G89 之前用辅助功能 M 代码旋转主轴。当 G89 指令和 M 代码在同 一程序段中指定时,在第一个定位动作的同时执行 M 代码,然后系 统处理下一个镗孔动作。当指定重复次数 L 时只在镗第一个孔时执 行 M 代码,对后续的孔不再执行 M 代码。G89 的动作序列如下图所示。   初始平面R 点平面 R点Z点暂停G89(G98)      R 点平面 R点Z点暂停G89(G99) 格式(G98/G99) G89 X_ Y_ Z_ R_ P_ F_ L;    参数  含义  XY 绝对值方式(G90)时,指定孔的绝对位置; 增量值方式(G91)时,指定刀具从当前位置到孔位的 距离。  Z 绝对值方式(G90)时,指定孔底的绝对位置; 增量值方式(G91)时,指定孔底到 R 点的距离。  R 绝对值方式(G90)时,指定 R 点的绝对位置; 增量值方式(G91)时,指定 R 点到初始平面的距离。  P 孔底暂停时间(单位:ms)。  F 指定切削进给速度。  L 循环次数(一般用于多孔加工,故 X 或 Y 应为增量值)。       167
12. 固定循环 注意HNC-818 数控系统用户说明书(1) 钻孔轴必须为 Z 轴;(2) Z 点必须低于 R 点平面,否则程序报警;(3) G89 指令数据被作为模态数据存储,相同的数据可省略; (4) G89 指令与 G86 指令相同,但在孔底有暂停;(5) 如果 Z 的移动量为零,G89 指令不执行;(6) 使用指令 G89 前,请使用相应的 M 代码使主轴旋转;M3 S1000; “主轴开始旋转G90 G99 G89 X300 Y-250 Z-150 R-120 P1000 F120;“定位,镗 5 孔,然后返回到 R 点 “定位,镗 6 孔,然后返回初始位置平面 “取消镗孔,返回到参考点 “主轴停止旋转 举例168Y-550;Y-750;X1000;Y-550;G98 Y-750;G80 G28 G91 X0 Y0 Z0; M5;“定位,镗 1 孔,然后返回到 R 点在孔底暂停 1 秒 “定位,镗 2 孔,然后返回到 R 点“定位,镗 3 孔,然后返回到 R 点“定位,镗 4 孔,然后返回到 R 点
HNC-818 数控系统用户说明书12. 固定循环 12.1.17 钻孔固定循环取消(G80)说明 该指令用于取消钻孔固定循环。格式 G80注意 (1) 取消所有钻孔固定循环,之后恢复正常操作; (2) R 平面和 Z 平面取消;(3) 其它钻孔参数数据也被取消;169
12. 固定循环HNC-818 数控系统用户说明书 12.2 车床简单循环(T) 对于车床系统而言,有五种简单循环供用户使用,分别是:    G指令  功能  G80 内(外)径切削循环  G81 端面切削循环  G82 螺纹切削循环  G74 端面深孔钻加工循环 G75 外径切槽循环      注意本章节循环是用一个含 G 代码的程序段完成用多个程序段指令的加 工操作,使程序得以简化。(1) 本章节所描述之循环只能用于车床系统。(2) 指令 G83、G87、G84、G88 均不带定位功能,定位需在固定循 环外使用 G01、G00 等。170
HNC-818 数控系统用户说明书 12. 固定循环 12.2.1 内(外)径切削循环(G80) 本循环可用于圆柱面内(外)径切削或圆锥面内(外)径切削。圆柱面切削G80 X_/U_ Z_/W_ F_切削过程如下图所示 A→B→C→D→A 的轨迹动作:    参数  含义  X/U Z/W 绝对值编程时,为切削终点 C 在工件坐标系下的坐标; 增量值编程时,为切削终点 C 相对于循环起点 A 的有 向距离,图形中用 U、W 表示,其符号由轨迹 1 和 2 的 方向确定  F 进给速度(表示以指定速度 F 移动)(mm/min)     +Xzw        D3F4R A1R 2F退刀点     循环起点              C切削终点 x/2     u/2B 切削起点 +Z       圆锥面切削G80 X_/U_ Z_/W_ I_ F_    参数  含义  X /U Z/W 绝对值编程时,为切削终点C在工件坐标系下的坐标; 增量值编程时,为切削终点 C 相对于循环起点 A 的有 向距离,图形中用 U、W 表示,其符号由轨迹 1 和 2 的方向确定  I 为切削起点 B 与切削终点 C 的半径差。其符号为差的 符号(无论是绝对值编程还是增量值编程)  F 进给速度(表示以指定速度 F 移动)(mm/min)    切削过程如下图所示 A→B→C→D→A 的轨迹动作:171
12. 固定循环HNC-818 数控系统用户说明书    +XzwDC               4R 3FAB+Zu/2 i   1R        2F    x/2 举例 1加工如下图所示工件,用 G80 指令,分粗、精加工简单园锥零件。           Φ30Φ35     50      172%3320N1 T0101N2 M03 S460N3 G00 X90Z20N4 X40 Z3N5 G80 X31 Z-50 F100 N6 G80 X30 Z-50 F80 N7 G00X90 Z20N8 M30
HNC-818 数控系统用户说明书 举例 2:12. 固定循环 加工如下图所示工件,用 G80 指令,分粗、精加工简单园锥零件。              Φ30Φ2650Φ35               %3321N1 T0101N2 G00 X100Z40 M03 S460 N3 G00 X40 Z5N4 G80 X31 Z-50 I-2.2 F100 N5 G00 X100 Z40N6 T0202N7 G00 X40 Z5N8 G80 X30 Z-50 I-2.2 F80 N9 G00 X100 Z40N10 M05N11 M30173
12. 固定循环 HNC-818 数控系统用户说明书 12.2.2 端面切削循环(G81) 本循环可进行端平面切削和圆锥端面切削。端平面切削G81 X_/U_ Z_/W_ F_切削过程如下图所示 A→B→C→D→A 的轨迹动作:    参数  含义  X /U Z/W 绝对值编程时,为切削终点 C 在工件坐标系下的坐标; 增量值编程时,为切削终点 C 相对于循环起点 A 的有 向距离,图形中用 U、W 表示,其符号由轨迹 1 和 2 的方向确定  F 进给速度(表示以指定速度 F 移动)(mm/min)    +Xzw B      切削起点1R2F u/23FD 退刀点 x/2+Z    A循环起点4R     C切削终点             圆锥端面切削G81 X_/U_ Z_/W_ K_ F_    参数  含义  X /U Z/W 绝对值编程时,为切削终点 C 在工件坐标系下的坐标; 增量值编程时,为切削终点 C 相对于循环起点 A 的有 向距离,图形中用 U、W 表示,其符号由轨迹 1 和 2 的方向确定  K 为切削起点 B 相对于切削终点 C 的 Z 向有向距离  F 进给速度(表示以指定速度 F 移动)(mm/min)    174切削过程如下图所示 A→B→C→D→A 的轨迹动作:
HNC-818 数控系统用户说明书12. 固定循环   +XB2F kwAu/2x/2+Z              1R4R 3F           zCD   举例加工如下图所示工件,用 G81 指令编程,点画线代表毛坯。 33.58      3                                         %3323 N1 T0101;设立坐标系,选一号刀 ;移到循环起点的位置 ;主轴正转 ;加工第一次循环,吃刀深 2mm ;每次吃刀均为 2mm,N2 G00 N3 M03 N4 G81 N5 X25 N6 X25N7 X25N8 M05 N9 M30X60 Z45 S460X25 Z31.5 K-3.5 F100 Z29.5 K-3.5Z27.5 K-3.5Z25.5 K-3.5;加工第四次循环,吃刀深 2mm;主轴停 ;主程序结束并复位;每次切削起点位,距工件外圆面 5mm,故 K 值为-3.5175Φ55Φ25
12. 固定循环 HNC-818 数控系统用户说明书 12.2.3 螺纹切削循环(G82) 本循环可用于加工直螺纹或锥螺纹。直螺纹切削循环 G82 X_/U_ Z_/W_ R_ E_ C_ P_ F_    参数  含义  X /U Z/W 绝对值编程时,为螺纹终点 C 在工件坐标系下的坐标; 增量值编程时,为螺纹终点 C 相对于循环起点 A 的有向 距离,图形中用 U、W 表示,其符号由轨迹 1 和 2 的方 向确定  RE 螺纹切削的退尾量,R、E 均为向量,R 为 Z 向回退量; E 为 X 向回退量,正值表示朝 X、Z 正方向退尾,负值 表示朝 X、Z 负方向退尾。R、E 可以省略,表示不用回 退功能  C 螺纹头数,为 0 或 1 时切削单头螺纹  P 单头螺纹切削时,为主轴基准脉冲处距离切削起始点的 主轴转角(缺省值为 0);多头螺纹切削时,为相邻螺纹头 的切削起始点之间对应的主轴转角  F 公制螺纹导程;(mm/r)      该指令执行如下图所示 A→B→C→D→E→A 的轨迹动作。    Xex/2zw          D3R          C4R A 1R  2F r L      u/2B+Z                   176
HNC-818 数控系统用户说明书 锥螺纹切削循环12. 固定循环 G82 X_/U_ Z_/W_ I_ R_ E_ C_ P_ F_    参数  含义  X /U Z/W 绝对值编程时,为螺纹终点 C 在工件坐标系下的坐标; 增量值编程时,为螺纹终点 C 相对于循环起点 A 的有向 距离,图形中用 U、W 表示  I 为螺纹起点 B 与螺纹终点 C 的半径差。其符号为差的符 号(无论是绝对值编程还是增量值编程)  RE 螺纹切削的退尾量,R、E 均为向量,R 为 Z 向回退量; E 为 X 向回退量,R、E 可以省略,表示不用回退功能  C 螺纹头数,为 0 或 1 时切削单头螺纹  P 单头螺纹切削时,为主轴基准脉冲处距离切削起始点的 主轴转角(缺省值为 0);多头螺纹切削时,为相邻螺纹头 的切削起始点之间对应的主轴转角  F 公制螺纹导程;(mm/r)       该指令执行如下图所示 A→B→C→D→A 的轨迹动作。    +Xex/2zw         D3R4R         A1R           rC 2F   Lu/2 iB+Z                      注意(1) 若需要回退功能,注意 R、E 值的正负号要与螺纹切削方向协调, 朝螺纹加工反方向退尾有可能损伤螺纹。同时可以只指定 R 而 不指定 E,但是若指定了 E 则必须指定 R;(2) 螺纹切削循环同 G32 螺纹切削一样,在进给保持状态下,该循 环在完成全部动作之后才停止运动。177
12. 固定循环 举例HNC-818 数控系统用户说明书 加工如下图所示工件,用 G82 指令编程,毛坯外形已加工完成。              100   80                   178%3324N1 G54 G00 X35 Z104 ;选定坐标系 G54,到循环起点 N2 M03 S300 ;主轴以 300r/min 正转N3 G82 X29.2 Z18.5 C2 P180 F3 ;第一次循环切螺纹,切深 0.8mmN4 X28.6 Z18.5 C2 P180 F3 N5 X28.2 Z18.5 C2 P180 F3 N6 X28.04 Z18.5 C2 P180 F3 N7 M30;第二次循环切螺纹,切深 0.4mm ;第三次循环切螺纹,切深 0.4mm ;第四次循环切螺纹,切深 0.16mm;主轴停、主程序结束并复位M30×1.5(双头)
HNC-818 数控系统用户说明书 12. 固定循环 12.2.4 端面深孔钻加工循环(G74) 本循环可对端面进行深孔钻削加工。如下图所示。   W    Z          pU ieX        △K格式 G74 X_/U_Z_/W_ Q(△K)_R(e)_ I(i)_P(p)_    参数  含义  X/U 绝对值编程时,为孔底终点在工件坐标系下 X 方向的坐 标;增量值编程时,为孔底终点相对于循环起点的有向距 离,图形中用 U 表示。此值可以不填。  Z/W 绝对值编程时,为孔底终点在工件坐标系下 Z 方向的坐 标;增量值编程时,为孔底终点相对于循环起点的有向距 离,图形中用 W 表示。  R Z 方向的退刀量,只能为正值,可以不填。  Q 每次进刀的深度,只能为正值  I 钻宽孔时每刀的宽度,只能为正值,可以不填。  P X方向的退刀量,当I有值时,P只能为正值;I没给定时, P 值可以为正负。可以不填。       179
12. 固定循环 示例HNC-818 数控系统用户说明书 G74 端面深孔钻加工循环编程实例 60 10XZ    180%1234T0101M03S500G01 X0 Z10F2000G74 X-10Z-60R1Q5I3P1 M30
HNC-818 数控系统用户说明书 12. 固定循环 12.2.5 外径切槽循环(G75) 本循环用于对工件外径进行切槽加工,如下图所示。 W iZ       p    △K eU/2  X 格式 G75X_/U_Z_/W_ Q(△K)_R(e)_ I(i)_P(p)_    参数  含义  X/U 绝对值编程时,为孔底终点在工件坐标系下 X 方向的 坐标;增量值编程时,为孔底终点相对于循环起点的有 向距离,图形中用 U 表示。  Z/W 绝对值编程时,为孔底终点在工件坐标系下 Z 方向的 坐标;增量值编程时,为孔底终点相对于循环起点的有 向距离,图形中用 W 表示。此值可以不填。  R X 方向的退刀量,只能为正值,可以不填。  Q 每次进刀的深度,只能为正值  I 槽宽,只能为正值,可以不填  P Z 方向的退刀量,当 I 有值时,P 只能为正值;I 没给 定时,P 值可以为正负。可以不填。       181
12. 固定循环 示例HNC-818 数控系统用户说明书 G75 外径切槽循环编程实例:   Φ8050ZX                 182%1234T0101M03S500G01 X50 Z50F2000 G75 X10Z60R1Q5I3P2 M30
HNC-818 数控系统用户说明书 12. 固定循环 12.3 车床钻孔固定循环(T) 车床钻孔固定循环指令表     G指令  功能  G83 轴向钻循环  G87 径向钻循环  G84 轴向刚性攻丝循环  G88 径向刚性攻丝循环     注意 以下指令均不带定位功能,定位需在固定循环外使用 G01、G00 等。183
12. 固定循环 HNC-818 数控系统用户说明书 12.3.1 轴向钻循环(G83)/ 径向钻循环(G87)此循环执行高速深孔钻循环。以切削进给速度钻孔,以指定的回退 距离回退,周期性地重复进行这样的循环直至孔底。在回退时把切 屑排出孔外。格式 G83Z(W)_R_Q_K_P_F_H_ G87X(U)_R_Q_K_P_F_H_     参数  含义  X/Z 孔底坐标  R 初始平面到 R 平面的距离  Q 每次切削的切深  P 孔底暂停时间  F 进给速度  K 回退距离  H1 以指定的回退距离 K 回退  H2 回退到R点  H3 直接钻孔到孔底           H1方式  qdMα 初始平面 M(α+1)  点RP2         q qd       点Z G83 或 G87(G98)P1   MαM(α+1), P2点R 点Rq q      qd          d   点Z G83 或 G87(G99)P1 184
HNC-818 数控系统用户说明书12. 固定循环  H2方式  Mα点R qq q初始平面M(α+1) P2d点Z P1            d             G83 或 G87(G98)    点R qq qMαM(α+1), P2d点Z P1         d             G83 或 G87(G99) H3方式      初始平面R 点平面 M(α+1), P2P1G83 或 G87(G98)Mα     点Z      MαP1G83 或 G87(G99)R 点平面 M(α+1), P2     点Z  185
12. 固定循环 举例HNC-818 数控系统用户说明书 注意当 H=1 时,以指定的回退距离 K 回退。固定循环内规定当以 H1 和 H2 的攻丝工艺攻丝时必须指定进刀量 Q 和退刀量 k。186%1111g54x0z50 g98g83z-10r10q5k2p1000f200h1 g99g83z-10r10q5k2p1000f200h1 g0x0z50 g98g83z-10r10q5k2p1000f200h2 g99g83z-10r10q5k2p1000f200h2 g0x0z50 g98g83z-10r10q5k2p1000f200h3 g99g83z-10r10q5k2p1000f200h3 m30%1111g54z0x50 g98g87x-10r10q5k2p1000f200h1 g99g87x-10r10q5k2p1000f200h1 g0z0x50 g98g87x-10r10q5k2p1000f200h2 g99g87x-10r10q5k2p1000f200h2 g0z0x50 g98g87x-10r10q5k2p1000f200h3 g99g87x-10r10q5k2p1000f200h3 m30
HNC-818 数控系统用户说明书 12. 固定循环 12.3.2 轴向刚性攻丝循环(G84)/ 径向刚性攻丝循环(G88) 该循环执行攻丝。该循环中,当到达孔底时,主轴反转。格式 1 G84 Z(W)_R_P_Q_E_J_K_F_H_    参数  含义  Z 孔底坐标  R 初始平面到 R 平面的距离  P 孔底暂停时间  F 进给速度  Q 进刀量  K 退刀量  E1 正攻丝  E2 反攻丝  J1 以第一主轴 C 轴攻丝  J2 以第二主轴 A 轴攻丝  H1 以指定的回退距离 K 回退  H2 回退到R点  H3 直接到孔底              格式 2 G88X(U)_R_E_Q_K_H_P_F_(只能以第二主轴 A 轴攻丝)    参数  含义  E1 正攻丝  E2 反攻丝  Q 进刀量  K 退刀量  H1 以指定的回退距离 K 回退  H2 回退到R点  H3 直接到孔底        187
12. 固定循环HNC-818 数控系统用户说明书         初始平面主轴顺时针转M(α+1), P2主轴反时针转主轴顺时针转        Mα R点MαR点 R点平面主轴反时针转G84 或 G88(G99)M(α+1), P2            P1点ZP1 点Z      G84 或 G88(G98)举例M3 S1=1000;转动 1 号主轴 G0X50Z50M5 G84Z-10R20P1000F1000H1 M33 S2=1000;转动 2 号主轴 G4P1000M55 G84Z-10R20P1000F1H2 G88X-10R20P1000F1 M30188
HNC-818 数控系统用户说明书12. 固定循环 12.4 车床复合循环(T) 注意这种固定循环可简化编程,用精加工的形状数据描述粗加工的刀具 轨迹。系统提供四种复合循环供用户使用:G71: 内(外)径粗车复合循环;G72: 端面粗车复合循环;G73: 封闭轮廓复合循环;G76: 螺纹切削复合循环;运用复合循环指令,只需指定精加工路线和粗加工的吃刀量,系统 会自动计算粗加工路线和走刀次数。本章节描述之循环仅能用于车床系统。对于 G71、G72、G73 复合循环需要注意以下:(1) 地址 P 指定的程序段,应有准备机能 01 组的 G00 或 G01 指令, 否则产生报警;(2) 在 MDI 方式下,不能运行复合循环指令;(3) 在复合循环 G71,G72,G73 中由 P,Q 指定顺序号的程序段之间,不应包含 M98 子程序调用及 M99 子程序返回指令;(4) 在复合循环 G71,G72,G73 中由 P,Q 指定顺序号的程序段之 间才能进行刀具补偿。189
12. 固定循环 HNC-818 数控系统用户说明书 12.4.1 内(外)径粗车复合循环(G71) 本循环可分为无凹槽和有凹槽内(外)径粗车复合循环。无凹槽内/外径粗车复合循环格式G71 U(d) R(r) P(ns) Q(nf) X(x) Z(z) F(f) S(s) T(t);    参数  含义  U 切削深度(每次切削量),指定时不加符号,方向由矢量 AA′决定  R 每次退刀量  P 精加工路径第一程序段(即下图中的 AA')的顺序号  Q 精加工路径最后程序段(即下图中的 B'B)的顺序号。  X X 方向精加工余量  Z Z 方向精加工余量  FST 粗加工时 G71 中编程的 F、S、T 有效,而精加工时处于 ns 到 nf 程序段之间的 F、S、T 有效        说明该指令执行如图下图所示的粗加工,并且刀具回到循环起点。精加 工路径A→A'→B'→B的轨迹按后面的指令循序执行。  +X           z  rA●              r            A1  d  x/2    +Z            ●      190
HNC-818 数控系统用户说明书 XZ 符号12. 固定循环G71切削循环下,切削进给方向平行于Z轴,X(U)和Z(W) 的符号 如下图所示。其中(+)表示沿轴正方向移动,(-)表示沿轴负方 向移动。  A   X(+) Z(-)   BA′ A′B X(+) Z(+) A A   X(-) Z(-)   BA′ A A′ AB     X(-)Z(+)   AA′ A′                                                                             X(+) Z(-) ABBAABBA X(-) Z(-)X(-)Z(+)X(+)             注意示例 11) 在Q所对应的精加工路径最后程序段落中要有X向(径向)移动。 2) 在G71外径粗车复合循环中,循环起点必须是最高点,内径粗车  复合循环中必须是最低点。用外径粗加工复合循环编制下图所示零件的加工程序:要求循环起 始点在 A(46,3),切削深度为 1.5mm(半径量)。退刀量为 1mm, X 方向精加工余量为 0.4mm,Z 方向精加工余量为 0.1mm,其中点 划线部分为工件毛坯。  8262523525                                             R7      R5 2×45°         %3325T0101 ;设立坐标系,选一号刀 N1 G00 G00 X80 Z80 ;到程序起点位置191Φ44 Φ34Φ20 Φ10
12. 固定循环HNC-818 数控系统用户说明书 示例 2用内径粗加工复合循环编制下图所示零件的加工程序:要求循环起 始点在 A(46,3),切削深度为 1.5mm(半径量)。退刀量为 1mm,X 方向精加工余量为 0.4mm,Z 方向精加工余量为 0.1mm,其中点划 线部分为工件毛坯。192N2 M03 S400N3 G01 X46 Z3 F100N4 G71U1.5R1P5Q14X0.6 Z0.1N5 G00 X0N6 G01 X10 Z-2N7 Z-20N8 G02 U10 W-5 R5 N9 G01 W-10N10 G03 U14 W-7 R7 N11 G01 Z-52N12 U10 W-10N13 W-20N14 U1N15 X50N16G00 X80 Z80 N17 M05N18 M30;粗切量:1.5mm 精切量:X0.6mm Z0.1mm ;精加轮廓起始行到倒角延长线;精加工 2×45°倒角;精加工Φ10 外圆;精加工 R5 圆弧 ;精加工Φ20 外圆 ;精加工 R7 圆弧 ;精加工Φ34 外圆 ;精加工外圆锥 ;精加工Φ44 外圆;精加工轮廓结束行 ;退出已加工面 ;回对刀点;主轴停 ;主程序结束并复位;主轴以 400r/min 正转 ;刀具到循环起点位置
HNC-818 数控系统用户说明书12. 固定循环     3 255526282                      R5    R7                2×45°                                              %3326N1 T0101N2 G00 X80 Z80N3 M03 S400N4 X6 Z5 G71U1R1P8Q16X-0.6Z0.1 F100 N5 G00 X80 Z80N6 T0202N7 G00 G41X6 Z5N8 G00 X44N9 G01 Z-20 F80N10 U-10 W-10N11 W-10N12 G03 U-14 W-7 R7N13 G01 W-10N14 G02 U-10 W-5 R5N15 G01 Z-80N16 U-4 W-2N17 G40 X4N18 G00 Z80;换一号刀,确定其坐标系 ;到程序起点或换刀点位置;主轴以 400r/min 正转 ;到循环起点位置 ;内径粗切循环加工 ;粗切后,到换刀点位置 ;换二号刀,确定其坐标系 ;二号刀加入刀尖园弧半径补偿 ;精加工轮廓开始,到Φ44 外圆处 ;精加工Φ44 外圆;精加工外圆锥 ;精加工Φ34 外圆 ;精加工 R7 圆弧 ;精加工Φ20 外圆 ;精加工 R5 圆弧 ;精加工Φ10 外圆;精加工倒 2×45°角,精加工轮廓结束 ;退出已加工表面,取消刀尖园弧半径补偿;退出工件内孔193Φ8 Φ10Φ20Φ34 Φ44
12. 固定循环有凹槽内(外)径粗车复合循环格式HNC-818 数控系统用户说明书 ;回程序起点或换刀点位置;主轴停、主程序结束并复位 G71 U(d) R(r) P(ns) Q(nf) E(e) F(f) S(s) T(t); N19 X80 N20 M30    参数  含义  U 切削深度(每次切削量),指定时不加符号,方向由矢量 AA′决定  R 每次退刀量  P 精加工路径第一程序段(即下图中的 AA')的顺序号  Q 精加工路径最后程序段(即下图中的 B'B)的顺序号  E 精加工余量,其为 X 方向的等高距离;外径切削时为正, 内径切削时为负  FST 粗加工时 G71 中编程的 F、S、T 有效,而精加工时处于 ns 到 nf 程序段之间的 F、S、T 有效。       说明该指令执行如下图所示的粗加工和精加工,其中精加工路径为 A→A'→B'→B 的轨迹。    B       1A   r      d                     A’      B’                 e       注意(1) G71 指令必须带有 P,Q 地址 ns、nf,且与精加工路径起、止顺 序号对应,否则不能进行该循环加工。(2) ns 的程序段必须为 G00/G01 指令,即从 A 到 A'的动作必须是直 线或点定位运动。(3) 在顺序号为 ns 到顺序号为 nf 的程序段中,不应包含子程序 (4.03)。194
HNC-818 数控系统用户说明书 举例12. 固定循环 用有凹槽的外径粗加工复合循环编制下图所示零件的加工程序,其中点划线部分为工件毛坯。              10561.532.5                              R10(8)   45°17 12R4 2×45°   30°                                       %3327N1 T0101N2 G00 X80 Z100M03 S400N3 G00 X42 Z3N4G71U1R1P8Q19E0.3F100 ;有凹槽粗切循环加工N5 G00 X80 Z100 N6 T0202N7 G00 G42 X42 Z3 N8 G00 X10N9 G01 X20 Z-2 F80 N10 Z-8N11 G02 X28 Z-12 R4 N12 G01 Z-17N13 U-10 W-5 N14 W-8N15 U8.66 W-2.5;粗加工后,到换刀点位置 ;换二号刀,确定其坐标系 ;二号刀加入刀尖园弧半径补偿 ;精加工轮廓开始,到倒角延长线处 ;精加工倒 2×45°角;精加工Φ20 外圆 ;精加工 R4 圆弧 ;精加工Φ28 外圆 ;精加工下切锥 ;精加工Φ18 外圆槽 ;精加工上切锥;换一号刀,确定其坐标系 ;到程序起点或换刀点位置 ;主轴以 400r/min 正转 ;到循环起点位置195Φ40 Φ30.66Φ22.66 Φ26.66Φ18 Φ28 Φ20
12. 固定循环HNC-818 数控系统用户说明书 196N16 Z-37.5N17 G02 X30.66 W-14 R10 N18 G01 W-10N19 X40N20 G00 G40 X80 Z100 N21 M30;精加工Φ26.66 外圆;精加工 R10 下切圆弧 ;精加工Φ30.66 外圆 ;退出已加工表面,精加工轮廓结束 ;取消半径补偿,返回换刀点位置 ;主轴停、主程序结束并复位
HNC-818 数控系统用户说明书 12. 固定循环 12.4.2 端面粗车复合循环(G72) 格式本循环与 G71 类似,只是切削是由平行 X 轴的操作。 G72 W(△d) R(r) P(ns) Q(nf) X(△x) Z(△z) F(f) S(s) T(t);    参数  含义  W 切削深度(每次切削量),指定时不加符号,方向由矢量 AA′决定  R 每次退刀量  P 精加工路径第一程序段(即下图中的 AA')的顺序号  Q 精加工路径最后程序段(即下图中的 B'B)的顺序号  X X 方向精加工余量  Z Z 方向精加工余量  FST 粗加工时 G72 中编程的 F、S、T 有效,而精加工时处于 ns 到 nf 程序段之间的 F、S、T 有效。        说明该指令执行如下图所示的粗加工和精加工,其中精加工路径为 A→A'→B'→B 的轨迹。 z+XA’ Ad       d             d             r   B’rx/2 +Z                              B’   XZ 值符号G72 切削循环下,切削进给方向平行于 X 轴,X(U)和 Z(W) 的符 号如下图所示。其中(+)表示沿轴的正方向移动,(-)表示沿轴 负方向移动。197O
12. 固定循环HNC-818 数控系统用户说明书  A A'A' AA A'A' A X(+) Z(-) X(+) Z(+) X(-) Z(-) X(-) Z(+)BXBBZB               BZBBXX(-) Z(-) ABX(+) Z(+)A' A'       A' A'X(-) Z(+) AAAX(+) Z(-)注意(1) G72 指令必须带有 P,Q 地址,否则不能进行该循环加工;(2) 在 ns 的程序段中应包含 G00/G01 指令,进行由 A 到 A'的动作,且该程序段中不应编有 X 向移动指令;(3) 在顺序号为 ns 到顺序号为 nf 的程序段中,可以有 G02/G03 指令,不应包含子程序。编制如下图所示零件的加工程序:要求循环起始点在 A(80,1), 切削深度为 1.2mm。退刀量为 1mm,X 方向精加工余量为 0.2mm, Z 方向精加工余量为 0.5mm,其中点划线部分为工件毛坯。示例 1  60   50 40        26                 R4R215  2×45°                                     198%3328N1 T0101N2 G00 X80 Z80 N3 M03 S400;换一号刀,确定其坐标系 ;到程序起点位置;主轴以 400r/min 正转Φ74Φ54 Φ30Φ10
HNC-818 数控系统用户说明书12. 固定循环 示例 2编制如下图所示零件的加工程序:要求循环起始点在 A(6,3),切 削深度为 1.2mm。退刀量为 1mm,X 方向精加工余量为 0.2mm,Z 方向精加工余量为 0.5mm,其中点划线部分为工件毛坯。N4 X80 Z1 ;到循环起点位置 N5G72W1.2R1P8Q17X0.2Z0.5F100 ;外端面粗切循环加工N6 G00 X100 Z80N7 G42 X80 Z1N8 G00 Z-53N9 G01 X54 Z-40 F80 N10 Z-30N11 G02 U-8 W4 R4 N12 G01 X30N13 Z-15N14 U-16N15 G03 U-4 W2 R2 N16 G01 Z-2N17 U-6 W3N18 G00 X50N19 G40 X100 Z80 N20 M30;粗加工后,到换刀点位置 ;加入刀尖园弧半径补偿 ;精加轮廓开始到锥面延长线 ;精加工锥面;精加工Φ54 外圆 ;精加工 R4 圆弧 ;精加工 Z26 处端面 ;精加工Φ30 外圆 ;精加工 Z15 处端面 ;精加工 R2 圆弧 ;精加工Φ10 外圆;精加工倒 2×45°角,精加工轮廓结束 ;退出已加工表面;取消半径补偿,返回程序起点位置 ;主轴停、主程序结束并复位 60    113410   10                                          R4   2×45°  R2          199Φ8 Φ10Φ30 Φ54Φ74
12. 固定循环HNC-818 数控系统用户说明书 200%3329N1 T0101N2 G00 X100 Z80N3 M03 S400N4 G00 X6 Z3N5 G72W1.2R1P6Q16X-0.2Z0.5F100 ;内端面粗切循环加工N6 G00 Z-61N7 G01 U6 W3 F80 N8 W10N9 G03 U4 W2 R2;精加工轮廓开始,到倒角延长线处 ;精加工倒 2×45°角;精加工Φ10 外圆 ;精加工 R2 圆弧 ;精加工 Z45 处端面 ;精加工Φ30 外圆 ;精加工 Z34 处端面 ;精加工 R4 圆弧 ;精加工Φ54 外圆 ;精加工锥面;精加工Φ74 外圆,精加工轮廓结束 ;返回对刀点位置;主轴停、主程序结束并复位N10 G01 N11 Z-34 N12 X46 N13 G02 N14 G01 N15 U20 N16 Z3 N17 G00 N18 M30X30U8 W4 R4 Z-20W10X100 Z80;设立坐标系 ;移到起始点的位置;主轴以 400r/min 正转 ;到循环起点位置
HNC-818 数控系统用户说明书 12. 固定循环 12.4.3 闭合车削复合循环(G73) 本循环可以车削固定的图形。这种切削循环可以有效地切削铸造成                 型、锻造成型或已粗车成型的工件。无凹槽 G73 U(I) W(K) R(r) P(ns) Q(nf) X(△x) Z(△z) F(f) S(s) T(t)    参数  含义  U X 轴方向的粗加工总余量  W Z 轴方向的粗加工总余量  R 粗切削次数  P 精加工路径第一程序段(即下图中的 AA')的顺序号  Q 精加工路径最后程序段(即下图中的 B'B)的顺序号  X X 方向精加工余量  Z Z 方向精加工余量  FST 粗加工时 G73 编程的 F、S、T 有效,而精加工时处于 ns 到 nf 程序段之间的 F、S、T 有效。         说明 该功能在切削工件时刀具轨迹为如下图所示的封闭回路,刀具逐渐 进给,使封闭切削回路逐渐向零件最终形状靠近,最终切削成工件的形状,其精加工路径为 A→A'→B'→B。             +XΔzk+z A   I+x/2         A                    A’●     ΔzA’Δx/2Δx/2                    注意 (1) ΔI 和ΔK 表示粗加工时总的切削量,粗加工次数为 r,则每次 X,Z 方向的切削量为ΔI/r,ΔK/r;(2) 按 G73 段中的 P 和 Q 指令值实现循环加工,要注意△x 和△z, △I 和△K 的正负号。201
12. 固定循环 举例HNC-818 数控系统用户说明书编制如下图所示零件的加工程序:设切削起始点在 A(60,5);X、 Z 方向粗加工余量分别为 3mm、0.9mm; 粗加工次数为 3;X、Z 方 向精加工余量分别为 0.6mm、0.1mm。其中点划线部分为工件毛坯。    62 5    2    35          25                      R7     R52×45°        202%3330N1 T0101N2 G00 X80 Z80N3 M03 S400N4 G00 X60 Z5N5 G73U3W0.9R3P6Q13X0.6Z0.1F120;设立坐标系,选一号刀 ;到程序起点位置 ;主轴以400r/min正转 ;到循环起点位置 ;闭环粗切循环加工N6 G00 X0 Z3N7 G01 U10 Z-2 F80 N8 Z-20N9 G02 U10 W-5 R5 N10 G01 Z-35N11 G03 U14 W-7 R7 N12 G01 Z-52N13 U10 W-10N14 U10N15 G00 X80 Z80 N16 M30;精加工轮廓开始,到倒角延长线处 ;精加工倒2×45°角;精加工Φ10外圆 ;精加工R5圆弧;精加工Φ20外圆 ;精加工R7圆弧;精加工Φ34外圆;精加工锥面 ;退出已加工表面,精加工轮廓结束;返回程序起点位置 ;主轴停、主程序结束并复位Φ44 Φ34Φ20 Φ10
HNC-818 数控系统用户说明书 12. 固定循环 12.4.4 螺纹切削复合循环(G76)格式 G76 C(c) R(r) E(e) A(a) X(x) Z(z) I(i) K(k) U(d) V(dmin) Q(d) P(p) F     参数  含义  C 精整次数(1~99),为模态值  R 螺纹Z向退尾长度,为模态值  E 螺纹X向退尾长度,为模态值  A 刀尖角度(二位数字),为模态值; 取值要大于10°,小于80°  XZ 绝对值编程时,为有效螺纹终点 C 的坐标;增量值编程 时,为有效螺纹终点 C 相对于循环起点 A 的有向距离; (用 G91 指令定义为增量编程,使用后用 G90 定义为绝 对编程)  I 螺纹两端的半径差,如 i=0,为直螺纹(圆柱螺纹)切削 方式  K 螺纹高度。该值由x轴方向上的半径值指定  U 精加工余量(半径值)  V 最小切削深度(半径值);当第n次切削深度 (d n  d n 1),小于dmin时,则切削深度设定为dmin    Q 第一次切削深度(半径值)  P 主轴基准脉冲处距离切削起始点的主轴转角  F 螺纹导程(同G32),F代表公制             说明 螺纹切削固定循环 G76 执行如下图所示的加工轨迹。 +XD A          (R)(R)     u/2i x/2zwK B+Z       e(F) C(R)  d                          r                      203
12. 固定循环HNC-818 数控系统用户说明书 其单边切削及参数如下图所示。   α1d n      Δdk     d2n       注意(1) 按 G76 段中的 X(x)和 Z(z)指令实现循环加工,增量编程时,要 注意 u 和 w 的正负号(由刀具轨迹 AC 和 CD 段的方向决定)。(2) G76 循环进行单边切削,减小了刀尖的受力。第一次切削时切 削深度为 d,第 n 次的切削总深度为d n ,每次循环的背吃刀量为d(n n1)。(3) 在单边切削图中,B 到 C 点的切削速度由螺纹切削速度指定,  而其它轨迹均为快速进给。用螺纹切削复合循环 G76 指令编程,加工螺纹为 ZM60×2,工件尺 寸见下图,其中括弧内尺寸根据标准得到。(tan1.79=0.03125)   举例   30 46      (18)     有效长度     (12)    (1.79°)基面                        204ZM60×2 (Φ60)(Φ59.25) Φ90
HNC-818 数控系统用户说明书12. 固定循环 %3331N1 T0101N2 G00 X100 Z100N3 M03 S400N4 G00 X90 Z4N5 G80 X61.125 Z-30 I-1.063 F80 ;加工锥螺纹外表面N6 G00 X100 Z100 M05 N7 T0202N8 M03 S300N9 G00 X90 Z4;到程序起点或换刀点位置 ;换二号刀,确定其坐标系;主轴以 300r/min 正转 ;到螺纹循环起点位置N10 G76C2R-3E1.3A60X58.15Z-24I-0.875K1.299U0.1V0.1Q0.45F2N11 G00 X100 Z100 N12 M05N13 M30;返回程序起点位置或换刀点位置 ;主轴停;主程序结束并复位;换一号刀,确定其坐标系 ;到程序起点或换刀点位置;主轴以 400r/min 正转 ;到简单循环起点位置205
12. 固定循环 HNC-818 数控系统用户说明书 12.5 固定循环中的特殊情况铣床使用 G80 取消固定循环,车床使用 G00/G01/G02 等取消固定循 环。在固定循环语句后,固定循环未取消前,所有的语句都被系统 识别为固定循环语句。    错误编程   正确编程 %1111T0101G0X50Z20X32Z0G80X30Z-30 M98P12;调用固定循环中的%12 M30%12 G0X10Z10 X30Z30 M99   %1111T0101G0X50Z20X32Z0G80X30Z-30G01 M98P12;调用本程序中的%12 M30%12 G0X10Z10 X30Z30 M99   206暂不支持固定循环与旋转/镜像/缩放和 G91 同时使用。
HNC-818 数控系统用户说明书13. 用户宏程序 13 用户宏程序   用户宏程序是一种类似于高级语言的编程方法,它允许用户使用变 量、算术和逻辑运算及条件转移,这使得编制相同的加工程序比传 统方式更加方便。同时也可将某些相同加工操作用宏程序编制成通 用程序,供用户循环调用,如下图中所示螺栓孔圆加工。  rb a在上图中用宏编制一个螺栓孔圆的加工程序,存储到 CNC 中,之后 用户可以随时调用本程序加工螺栓孔圆,只需调用时填入孔数、偏 差角等螺栓孔属性即可,这样就好比是用户在 CNC 中加入了螺栓孔 圆功能一样。207
13. 用户宏程序HNC-818 数控系统用户说明书 13.1 变量注意变量种类常量宏程序中用户可以在准备功能指令和轴移动距离的参数中使用变 量,如 G00 X[#43],此时#34 即是变量,用户在调用之前可以对其进 行赋值等操作。用户宏程序不允许直接使用变量名。变量用变量符号(#)和后面的变 量号指定。根据变量号,可以将变量分为局部变量、全局变量、系统变量,各 类变量的用途各不相同。另外,对不同的变量的访问属性也有所不 同,有些变量属于只读变量。系统内部定义了一些值不变的常量供用户使用,这些常量的属性为 只读。PI: 圆周率 ΠTRUE: 真,用于条件判断,表示条件成立 FALSE:假,用于条件判断,表示条件不成立常量 PI 在使用时,由于其有计算误差,编程时在结束条件时需做处 理,否则会出现异常情况。局部变量是指在宏程序内部使用的变量,即是在当前时刻下调用宏 程序 A 中使用的局部变量#i 与另一时刻下调用宏程序 A 中使用的#i 不同。因此,在如多层调用一样从宏 A 中调用宏 B 时,有可能在宏 B 中错误使用在宏 A 中正在使用的局部变量,导致破坏该值。系统提供#0~#49 为局部变量,它们的访问属性为可读可写。 系统提供 8 层嵌套,相应的每层局部变量如下,这些局部变量的访 注意局部变量208问属性为可读: #200~#249 #250~#299 #300~#3490 层局部变量 1 层局部变量 2 层局部变量
HNC-818 数控系统用户说明书13. 用户宏程序 全局变量系统变量未定义变量与局部变量不同,全局变量在主程序调用各子程序以及各子程序、 各宏程序之间通用,其值不变。即,在某一宏中使用的 #i 与在其他 宏中使用的 #i是相同的。此外,由某一宏运算出来的公共变量#i, 可以在别的宏中使用。系统提供#50~#199 为全局变量,它们的访问属性为可读可写。系统变量是在系统中其用途被固定的变量。其属性共有 3 类:只读、 只写、可读/写,根据各系统变量而属性不同。系统中未定义的变量,其值默认为 0 例:%1234 #350~#399 #400~#449 #450~#499 #500~#549 #550~#5993 层局部变量 4 层局部变量 5 层局部变量 6 层局部变量 7 层局部变量G54G01 X10Y10 X[#1]Y30 M30;工件坐标系坐标值为(0,30)   变量号  属性  描述    通道变量通道 00:(00000~03999)  #0~#49  R/W 当前局部变量 #50~#199  R/W 通道全局变量 #200~#249  R 0 层局部变量 #250~299  R 1 层局部变量 #300~#349  R 2 层局部变量 #350~#399  R 3 层局部变量 #400~#449  R 4 层局部变量 #450~#499  R 5 层局部变量 #500~#549  R 6 层局部变量 #550~#599  R  7 层局部变量 与通道相关的变量         209
13. 用户宏程序 HNC-818 数控系统用户说明书    #1000~#1008  R  当前通道轴(9 轴)机床位置 #1009  R 车床直径编程 #1010~#1018  R 当前通道轴(9 轴)程编机床位置 #1019   保留 #1020~#1028  R 当前通道轴(9 轴)程编工件位置 #1029   保留 #1030~#1038  R 当前通道轴(9 轴)的工件原点 #1039  R 坐标系 #1040~#1048  R 当前通道轴(9 轴)的 G54 原点 #1049  R G54 轴掩码 #1050~#1058  R 当前通道轴(9 轴)的 G55 原点 #1059  R G55 轴掩码 #1060~#1068  R 当前通道轴(9 轴)的 G56 原点 #1069  R G56 轴掩码 #1070~#1078  R 当前通道轴(9 轴)的 G57 原点 #1079  R G57 轴掩码 #1080~#1088  R 当前通道轴(9 轴)的 G58 原点 #1089  R G58 轴掩码 #1090~#1098  R 当前通道轴(9 轴)的 G59 原点 #1099  R G59 轴掩码 #1100~#1108  R 当前通道轴(9 轴)的 G92 原点 #1109  R G92 轴掩码 #1110~#1118  R 当前通道轴(9 轴)的 中断位置 #1119  R 断点轴标记 #1120~#1149   保留 #1150~#1189  R G 代码0~39 组模态 #1190  R 用户自定义输入 #1191  R 用户自定义输出 #1192~#1199   保留 #1200~#1209  R AD 输入 #1210~#1219  R DA 输出 #1220~1299   保留 #1300~#1308  R 当前通道轴(9 轴)的相对零点 #1309   保留 #1310~1318  R 当前通道轴(9 轴)的剩余进给 #1319   保留 #1320~#1328  R G28 位置 #1329  R G28 轴掩码 #1330~#1338  R G52 原点 #1339   保留 #1340~#3999    保留                                         210
HNC-818 数控系统用户说明书 13. 用户宏程序 用户自定义变量与轴相关的变量       用户自定义变量:50000~54999  #50000~#54999  R/W  当前局部变量       轴数据:60000~69999每个占用轴 100 个号、100 个轴共占用 10000 个号 第 0 轴相对编码范围:000~099第 1 轴相对编码范围:100~199第 100 个轴相对编码范围:9900~9999  #60000  R 所属通道号和逻辑轴号 #60001  R 轴变量的数据标志 #60002~60003  R 加工螺纹时轴的启动加速位置 #60004~60005  R 加工螺纹时轴的同步位置 #60006~#60007  R 加工螺纹时轴的减速位置 #60008~#60009  R 加工螺纹时轴的停止位置 #60010~#60011  R 测量信号获得时的指令位置 #60012~#60013  R 测量信号获得时的实际位置 #60014~#60015  R 测量信号获得时的 2 号编码器位置 #60016~#60017  R 测量信号获得时的速度 #60018~#60019  R 距离码回零第一个零点的实际位置 #60020~#60021  R 距离码第 2 个零点的绝对位置 #60022~#60023  R 同步轴零点初始偏移量 #60024~#60025  R 引导轴在引导轴零点时的位置 #60026~#60027  R 引导轴在从轴零点时的位置 #60028~#60029  R 从轴检查引导距离 #60030~#60037   保留 #60038~#60039  R 从轴的标准同步偏差 #60040~#60041  R 轴的积分时间内的周期累积增量 #60042~#60043  R 参考点坐标 #60044~#60045  R 轴锁定时的指令位置 #60046~#60047  R 轴锁定时的指令脉冲位置 #60048~#60099    保留                       211
13. 用户宏程序 HNC-818 数控系统用户说明书 与刀具相关的变量       刀具数据:#70000~#89999每把刀具占用 200 个号,共 100 把刀具,共占用 20000 个号 第 0 号刀相对编码范围:000~199第 1 号刀相对编码范围:200~399第 99 号刀相对编码范围:18000~19999  #70000  R 车刀刀尖方向 #70001  R 铣刀刀具长度或车刀 X 偏置值 #70002  R 保留 #70003  R 车刀Z偏置值 #70004   保留 #70005   保留 #70006  R 铣刀刀具半径或车刀刀尖半径 #70007~#70023   保留 #70024  R 刀具磨损值(轴向) #70025~#70028   保留 #70029  R 刀具磨损值(径向) #70030~#70047   保留 #70048  R 车刀 X 试切标志 #70049  R 车刀 Z 试切标志 #70050~#70071   保留 #70072  R S 转速限制 #70073  R F 转速限制 #70074~#70095   保留 #70096  R 刀具监控类型 #70097  R 最大寿命 #70098  R 预警寿命 #70099  R 实际寿命 #70100  R 最大计件数 #70101  R 预警计件数 #70102  R 实际计件数 #70103  R 最大磨损 #70104  R 预警磨损 #70105  R 实际磨损 #70106~#70199    保留                             212
HNC-818 数控系统用户说明书 13. 用户宏程序 13.2 运算指令 在宏语句中可灵活运用算术运算符、函数等操作,很方便实现复杂 的编程需求。如下表所示。    运算种类 运算指令  含义   算术运算      #i = #i + #j 加法运算,#i 加#j  #i = #i - #j 减法运算,#i 减#j  #i = #i * #j 乘法运算,#i 乘#j  #i = #i / #j 除法运算,#i 除#j     条件运算        #i EQ #j 等于判断(=)  #i NE #j 不等于判断(≠)  #i GT #j 大于判断(>)  #i GE #j 大于等于判断(≥)  #i LT #j 小于判断(<)  #i LE #j 小于等于判断(≤)   逻辑运算    #i = #i & #j 与逻辑运算  #i = #i | #j 或逻辑运算  #i = ~#i 非逻辑运算               函数                  #i= SIN[#i] 正弦(单位:弧度)  #i=ASIN[#i] 反正弦  #i=COS[#i] 余弦(单位:弧度)  #i=ACOS[#i] 反余弦  #i=TAN[#i] 正切(单位:弧度)  #i=ATAN[#i] 反正切  #i=ABS[#i] 绝对值  #i=INT[#i] 取整(向下取整)  #i=SIGN[#i] 取符号  #i=SQRT[#i] 开方  #i=POW[#i] 平方  #i=LOG[#i] 对数  #i=PTM[#i] 脉冲转 mm  #i=PTD[#i] 脉冲转度  #i=RECIP[#i] 倒数  #i=EXP[#i]  指数,以 e(2.718)为底数的指数                              213
13. 用户宏程序 程序例子HNC-818 数控系统用户说明书 214下面的程序例求出 1~10 之和。 O9500#1=0;................................................ 解的初始值 #2=1;................................................ 加数的初始值N1 IF[#2 LE 10] ;加数不能超过 10,否则跳转到 ENDIF 后的 N2 #1 =#1 + #2;....................................... 计算解#2 =#2 +1;.......................................... 下一个加数 ENDIF;............................................. 转移到 N1N2 M30;............................................. 程序的结尾
HNC-818 数控系统用户说明书13. 用户宏程序 13.3 宏语句 表达式凡是出现了“+”、“-”、“*”、“/”、“[”、“]”、SIN 等符号的计算式, 均称为表达式。如下1. -#12. SIN[#1+#2]*COS[[#1+#2]/#3]注意:1. [ ]内优先级高于+-*/,例如[[#1+#2]/#3],先计算[#1+#2],再计 算 /#32. 对于表达式,为了保证计算正确性,建议使用[ ]将表达式包含 在内,例如[-#2]。不推荐-[#2]这种用法把常数或表达式的值传送给一个宏变量称为赋值,这条语句称为赋 值语句,如下:#2 = 175 / SQRT[2] * COS[55*PI/180] #3 = 124.0系统支持两种条件判断语句: 赋值语句条件判断语句IF [条件表达式]; ......ENDIFIF [条件表达式]; ......ELSE......ENDIF类型 1类型 2对于 IF 语句中的条件表达式,可以使用简单条件表达式,也可以使 用复合条件表达式,如下例所示:215
13. 用户宏程序HNC-818 数控系统用户说明书 循环语句当#1 和#2 相等时,将 0 赋值给#3。 IF [#1 EQ #2]#3 = 0ENDIF当#1 和#2 相等,并且#3 和#4 相等时,将 0 赋值给#3。 IF [#1 EQ #2] AND [#3 EQ #4]#3 = 0ENDIF当#1 和#2 相等,或#3 和#4 相等时,将 0 赋值给#3,否则将 1 赋值 给#3。IF [#1 EQ #2] OR [#3 EQ #4] #3 = 0ELSE#3 = 1ENDIF在 WHILE 后指定条件表达式,当指定的条件表达式满足时,执行从 WHILE 到 ENDW 之间的程序。当指定条件表达式不满足时,推出 WHILE 循环,执行 ENDW 之后的程序行。调用格式如下: WHILE [条件表达式] ......ENDW当把 WHILE 中的条件表达式永远写成真即可实现无限循环,如: WHILE [TRUE];或者 WHILE [1]......ENDWGOTO _使用 GOTO 可以跳转到指定标号处无限循环跳转语句216
HNC-818 数控系统用户说明书嵌套13. 用户宏程序 GOTO 后跟数字,例如 GOTO 4 将跳转到 N4 程序段(该程序段头必须写 N4)。对于 IF 语句或者 WHILE 语句而言,系统允许嵌套语句,但有一定 的限制规则,具体如下:IF 语句最多支持 8 层嵌套调用,大于 8 层系统将报错; WHILE 语句最多支持 8 层嵌套调用,大于 8 层将报错;系统支持 IF 语句与 WHILE 语句混合使用,但是必须满足 IF-ENDIF 与 WHILE-ENDW 的匹配关系。如下面这种调用方式,系统将报错。IF [条件表达式 1] WHILE [条件表达式 2] ENDIFENDW编辑椭圆加工程序(椭圆表达式:X=a×COSα;Y =b×SINα)。 举例 α%0001#0=5 ;定义刀具半径 R 值#1=20 ;定义 a 值#2=10;定义 b 值#3=0 ;定义步距角 α 的初值,单位:度 N1 G92 X0 Y0 Z10N2 G00 X[2*#0+#1] Y[2*#0+#2]217
13. 用户宏程序HNC-818 数控系统用户说明书 218N3 G01 Z0N4 G41 X[#1] D01N5 WHILE #3 GE [-360]N6 G01 X[#1*COS[#3*PI/180]] Y[#2*SIN[#3*PI/180]] N7 #3=#3-5ENDWG01 G91 Y[-2*#0]G90 G00 Z10G40 X0 Y0M30
HNC-818 数控系统用户说明书13. 用户宏程序 13.4 宏程序调用 13.4.1 自变量指定规则 自变量指定规则系统支持一下两种方式调用宏程序: (1) 非模态调用:G65(2) 用 G 代码调用:固定循环(3) M 指令调用子程序当用户调用宏程序时,系统会将当前程序段中的自变量(A~Z)的 内容拷贝到相应的用户宏程序当前层的局部变量#0~#25 中去,同时 也拷贝当前通道九个轴(XYZABCUVW)的工件坐标系的绝对位置 到当前通道局部变量#30~#38 中去。    宏变量自变量名  宏变量自变量名  宏变量  自变量名  #0A  #1B  #2 C  #3D  #4E  #5 F  #6G  #7H  #8 I  #9J  #10K  #11 L  #12M  #13N  #14 O  #15P  #16Q  #17 R  #18S  #19T  #20 U  #21V  #22W  #23 X  #24Y  #25Z  #26 预留  #27预留  #28预留  #29 预留  #30X 轴位置  #31Y 轴位置  #32 Z 轴位置  #33A 轴位置  #34B 轴位置  #35 C 轴位置  #36U 轴位置   #37 V 轴位置   #38  W 轴位置              用例%1234 ;主程序 G92 X0 Y0 Z50 G91 G01 Z10 F400 M98 P111G4X1219
13. 用户宏程序HNC-818 数控系统用户说明书 宏变量被定义判断%111 G01x10y10z10 ...M99格式: AR[#变量号]返回值:0: 表示该变量没有被定义;90:表示该变量被定义为绝对方式 G90;91:表示该变量被定义为相对方式 G91说明:用系统宏 AR[]来判别宏变量是否被定义以及被定义为增量或绝对方式;%1234G92X0Y0Z0M98P9990X20Y30Z40M30%9990IF [AR[#23] EQ 0] OR [AR[#24] EQ 0] OR [AR[#25] EQ 0] ;如果没 有定义X或Y或Z值,则返回M99ENDIFG91 ;用增量方式编写宏程序用例220IF AR[#23] EQ 90 #23=#23-#30 ENDIF........M99;如果 X 值是绝对方式 G90;将 X 值转换为增量方式,#30 为 X 的绝对坐标
HNC-818 数控系统用户说明书13.4.2 非模态调用(G65)格式注意示例13. 用户宏程序当指定 G65 时,跟随参数 P 所指定的用户宏程序被调用,同时将自 变量与用户宏程序需要用到的变量传递到用户宏程序中去。G65 P_ L_ [自变量地址字](1) G65 是非模态指令,每次调用宏程序都需要在本行中指定 G65; (2) 子程序要在同一个文件中。%0032G54G0X100Z100 G65P100L5X50Z-30F1000 G00X50Z10M30%100 G01X[#23]Z[#25]F[#5] G81X[#23]Z[#25] G0X100Z50M30除了非模态(G65)调用宏程序外,用户还可以通过 G 代码的形式 调用宏程序,目前暂时只支持固定循环的 G 代码形式宏程序调用, 具体代码见钻孔、铣削章节详细介绍。     参数  含义  P 需要调用的程序号  L 重复调用次数  自变量地址字 用户需要传递到宏程序中去的数据    13.4.3 G 代码调用宏程序221
13. 用户宏程序13.4.4 M 指令调用子程序 格式13.4.5 宏程序用例 举例 1(铣削)HNC-818 数控系统用户说明书 M98 P_    参数  含义  P 本程序中需要调用的程序号  M 指令调用宏程序参见辅助功能章节 M98 部分,M98 执行时先在程 序段中查找要调用的子程序号,如果程序段中无此子程序号,则报 错。如图用球头铣刀加工 R5 倒圆曲面 Z30 15Y40 30R5XX  R6  222%0001 (刀位点为球心)G92 X-30 Y-30 Z25#0=5 (倒圆半径)#1=4 (球刀半径)#2=180 (步距角γ的 初值。单位:度) WHILE #2 GT 90G01 Z[25+[#0+#1]*SIN[#2*PI/180]] (计算 Z 轴高度) #101=ABS[[#0+#1]*COS[#2*PI/180]]-#0 (计算半径偏移量) G01 G41 X-20 D01Y14G02 X-14 Y20 R6 G01 X14
HNC-818 数控系统用户说明书13. 用户宏程序 G02 X20 Y14 R6 G01 Y-14G02 X14 Y-20 R6 G01 X-14G02 X-20 Y-14 R6 G01 X-30G40 Y-30 #2=#2-10ENDW M30223
13. 用户宏程序 用例 2(车削)HNC-818 数控系统用户说明书 用宏程序编制如图所示抛物线在 A 区间[0,8]内的程序。                                       32A8B抛物线 B=-A2/2 在 A 区间[0,8]Ф16       32 224%3401N1 T0101N2 G37N3 #10=0;A 坐标N4 M03 S600N5 WHILE #10 LE 8N6 #11=#10*#10/2N7 G90 G01 X[#10] Z[-#11] F500 N8 #10=#10+0.08N9 ENDWN10 G00 Z0 M05N11 G00 X0N12 M30
HNC-818 数控系统用户说明书14. 主轴功能 14 主轴功能   本章包含以下内容:14.1 恒线速度切削控制 14.2 C/S 轴切换功能225
14. 主轴功能 HNC-818 数控系统用户说明书 14.1 恒线速度切削控制(T)(G96,G97)在 S 之后指定圆周速度(在刀具和工件之间的相对速度)。相对于刀                 具位置的变化,使主轴时刻以指定的圆周速度旋转。格式 G96 P_ S_ ; 激活指定轴恒线速度控制功能 G46 X_ P_; 极限主轴转速限定G97 S_ ; 取消主轴恒线速度控制功能     参数  含义  P 在 G96 指令中指定的恒线速度控制轴,0 指定的轴由系 统轴参数决定,1~3 分别表示 X、Y、Z 轴;在 G46 指令指定恒线速时主轴最高速限定(r/min);  S 在G96指令中指定恒线速度(mm/min或inch/min); 在G97指令中取消恒线速度后,指定的主轴转速(r/min);  X 恒线速时主轴最低速限定(r/min);    说明 (1) G96/G97 为相互注销的一对模态指令;(2) G46 指令功能只在恒线速度功能有效时有效;(3) 使用恒线速度功能,主轴必须能自动变速。(如:伺服主轴、变 频主轴);(4) 进行恒速控制时,当主轴的转速大于最大主轴转速时,被钳制 在最大转速。注意 G96 后面必须跟 G46,限制主轴最高及最低转速。226
HNC-818 数控系统用户说明书 举例14. 主轴功能             R5403127     R15                       %3318N1 T0101;N2 G00 X40 Z5;N3 M03 S460;N4 G96 P0 S80 ;N5 G46 X400 P900;N6 G00 X0 ; (刀到中心,转速升高,直到主轴到最大限速 900r/min) N7 G01 Z0 F60; (工进接触工件)N8 G03 U24 W-24 R15;(加工 R15 圆弧段)N9 G02 X26 Z-31 R5; N10 G01 Z-40;N11 X40 Z5;N12 G97 S300;N13 M30;(加工 R5 圆弧段) (加工Φ26 外圆)(主轴停、主程序结束并复位)(设立坐标系,选一号刀) (移到起始点的位置)(主轴以 460r/min 旋转) (恒线速度有效,线速度为 80m/min) (限定主轴转速范围:400~900 r/min)(回对刀点) (取消恒线速度功能,设定主轴按 300r/min 旋转)227Φ26 Φ22
18. 主轴功能 HNC-818 数控系统用户说明书 14.2 C/S轴切换功能(CTOS,STOC)在复杂应用场合,例如刚性攻丝功能等,主轴除了当做通常主轴使 用外,还需要当做旋转使用。这就需要用到 C/S 轴切换功能。格式 STOC/G109 IP; CTOS/G108 IP;注意 (1) 在同一个 G 代码程序中,最好不频繁使用 STOC/CTOS 这对宏 指令;(2) 当主轴切换为 C 轴后,C 轴单位是 deg/min;(3) STOC 和 CTOS 间不允许使用任意行功能进行跳转,也不允许使用任意行从别处跳转到 STOC 和 CTOS 间; (4) 任意行不支持 STOC 的 C 轴。举例 %900 程序名 G54M03S600STOC ;将主轴切换到 C 轴 G28 C0 ;C 轴回零G1 C45 F2000...CTOS ;将 C 轴切换回主轴 M03S600M30注意 M30 不能恢复 C/S 轴的状态。 228      参数  含义  IP IP 可以取 A/B/C ,后面的数字表示通道中的主轴号,取 值范围为 0~3 当STOC后不写IP时,默认是将0号主轴变为C轴 当CTOS后不写IP时,默认是将C轴变为0号主轴  
HNC-818 数控系统用户说明书15. 可编程数据输入 15 可编程数据输入   通过可编程数据输入的方式可以在程序中动态修改系统数据。如下: (1) 改变工件坐标系原点;(2) 改变扩展工件坐标系原点;229
15. 可编程数据输入 HNC-818 数控系统用户说明书 15.1 可编程数据输入(G10,G11) 格式说明G54~G59 工件坐标系原点G10 L_ P_ IP_;......;G11;可编程数据输入开启 不允许有其它的 G 或 M 指令 可编程数据输入取消用户可以在程序中动态修改系统数据,通过 G10/G11 指定。更改的 系统数据及时生效。G10 为模态指令,当指定 G10 进入可编程数据输入方式直到调用 G11 取消该方式为止。G10 L2 Pp IP_    参数  含义  Pp 指定相对工件坐标系 1-6 的工件原点偏置值:  1对应G54工件坐标系 2对应G55工件坐标系 3对应G56工件坐标系 4对应G57工件坐标系  5对应G58工件坐标系  6对应G59工件坐标系  IP 若是绝对指令,是每个轴的工件原点偏置值 若是增量指令,累加到每个轴原设置的工件原点偏置值上   举例 1:%0002G54 ;G54 初始值G01X100Y100Z100G10L2P1X100Y100Z50 ;更改 G54 工件坐标系零点为(100,100,50) G11G01X20Y20Z20 ;机床坐标系指令值为(120,120,70)M30230
HNC-818 数控系统用户说明书 G54.X 扩展工件坐标系原点15. 可编程数据输入 举例 2%0002G54.1G01X100Y100Z100G10L20P1X100Y100Z50;更改 G54.1 工件坐标系零点为(100,100,50) G11G01X20Y20Z20M30在车削系统中,在直径编程方式下,G10 指令定义中的 X 值为半径 值。将系统参数输出到 Rr 指定的当前通道变量中,#0~#49 G10 L53 Pp RrG11注意系统参数输出G10 L20 Pp IP_    参数  含义  Pp 设定工件原点偏置值的工件坐标系的指定代码 n:1~60, 对应 G54.X 坐标系中 X 值;  IP 若是绝对指令,是每个轴的工件原点偏置值;若是增量指 令,累加到每个轴原设置的工件原点偏置值上;       参数  含义  Pp 参数 ID 索引号  IP 变量地址(0~49)   取消用户自定义输入231
15. 可编程数据输入 举例3HNC-818 数控系统用户说明书比如使用机床用户参数中的从 P40~P48 九个参数 参数编号 010340~010348由于 P 参数的设置范围是 500000~-500000,如果误差范围比较大的 话可以使用G54G01X0Y0Z0G10L53P010340R1 G10L53P010341R2 G10L53P010342R3 G10L53P010343R4 G10L53P010344R5 G10L53P010345R6 G10L53P010346R7 G10L53P010347R8 G10L53P010348R9G11 G01X[#1/1000]Y[#2/1000]Z[#3/1000] G01X[#4/1000]Y[#5/1000]Z[#6/1000] G01X[#7/1000]Y[#8/1000]Z[#9/1000] M30G10 L10 Pp Rr;G10 L12 Pp Rr; 铣削刀具几何补偿值 H 输入铣削刀具几何补偿值 D 输入    参数  含义  Pp 刀具偏置号  Rr 刀具补偿数据       参数  含义  Pp 刀具偏置号  Rr 刀具补偿数据   232
HNC-818 数控系统用户说明书 15. 可编程数据输入 车削刀具补偿值输入 G10 L14 Pp X_ Z_ R_ Q_ Y_ J_ K_;     参数  含义  Pp 刀具偏置号  X 刀具补偿数据 X  Z 刀具补偿数据 Z  R 刀尖半径补偿值 R  Q 假想刀尖方向  Y 刀具补偿数据 Y  J 刀具径向磨损 J  K 刀具轴向磨损 K         233
16. 轴控制功能HNC-818 数控系统用户说明书 16 轴控制功能   234本章包括以下内容:16.1 旋转轴的循环功能16.2 带距离编码的光栅尺回零
HNC-818 数控系统用户说明书16. 轴控制功能 16.1 旋转轴的循环功能 概述说明用例如果使用旋转轴循环功能,可以防止旋转轴坐标值的溢出。旋转轴的循环功能,可以通过设定设置相应的参数来使之有效。以 C 轴为例,需将坐标轴参数中轴 4 的【轴类型】参数(104001) 设为 3,设备接口参数中相应设备中的【反馈位置循环使能】数 (505014)设为 1。增量指令时,移动量就是指令值。绝对指令时,可以通过设置坐标轴参数中相应的轴的【旋转轴短路 径选择使能】参数(104082)为 1,可以把旋转轴旋转方向设定为起 点到终点的移动量短的方向。    G90 C0N1 G90 C-150.0 N2 G90 C540.0 N3 G90 C-620.0 N4 G91 C380.0 N5 G91 C-840.0            顺序号 实际移动量  完成移动后的绝对坐 标值  N1 -150 210  N2 -30 180  N3 -80 100  N4 380 120  N5  -840  0      注意在有些机床带旋转轴的情况下(如工作台),由于机械结构的原因, 旋转轴在运动过程中只能朝一个方向旋转。这时旋转轴就尽量不使 用绝对指令,而采用增量指令编程,否则有可能出现由于编程考虑 不周导致旋转轴朝相反的方向运动的情况。235
16. 轴控制功能 HNC-818 数控系统用户说明书 16.2 带距离编码的光栅尺回零概述 使用带距离编码参考点标志的线性测量系统,可以不必为返回参考 点而在机床安装减速开关,并返回一个固定的机床参考点,这样在                 实际使用中可以带来了许多方便。原理 带距离编码参考点标志的线性测量系统的原理是采用包括一个标准 线性的栅格标志和一个与此相平行运行的另一个带距离编码参考点 标志通道,每组两个参考点标志的距离是相同的,但两组之间两个相邻参考点标志的距离是可变的,每一段的距离加上一个固定的值, 因此数控轴可以根据距离来确定其所处的绝对位置,如图下所示: (LS486C 为例)。                 参考点标志             10.02 10.04 10.06 10.0810.10     20.02 20.02 20.02 20.0220 20 20 20 20ABCDE例如从 A 点移动到 C,中间经过 B 点,系统检测到 10.02 就知道 轴现在在是哪一个参考点位置,同样从 B 点移动到 D,中间经过 C 点,系统从 C 点到 D 点的距离是 10.04 就知道轴现在在是哪一个参 考点位置,所以只要轴任意移动超过两个参考点距离(20mm)就能 得到机床的绝对位置。           236
HNC-818 数控系统用户说明书 参数设置16. 轴控制功能 以 X 轴为例来说明带距离码线性光栅尺的参数设置;                 10.0210.04     0 距离码参考点间距 20 40(1) 回参考点模式设置设置坐标轴参数轴 0 中的【回参考点模式】参数(100010),当距离码回零反馈量与回零方向一致时设置为 4,否则设置为 5。(2) 距离码参考点间距设置设置坐标轴参数轴 0 中的【距离码参考点间距】参数(100018), 此参数表示带距离编码参考点的增量式测量系统相邻参考点标 记间隔距离,如上图所示,距离码参考点间距设置为 20。(3) 距离码偏差设置设置坐标轴参数轴 0 中的【间距编码偏差】参数(100019),此 参数表示带距离编码参考点的增量式测量系统参考点标记变化 间隔,如上图中的 10.02 与 10.04 之间的增量值 0.02,距离码偏 差设置为 0.02。(4) 参考点零位设定当距离码回零成功后,在认定的某处完成一次回零,如将此点 设为机床零点。则当前回零完成后的坐标值设置到坐标轴参数 轴 0 中的【参考点坐标值】参数(100017),下次再在某处回零 时将以此点为机床原点确定坐标系。237
17. 其他功能HNC-818 数控系统用户说明书 17 其他功能   238本章节包括以下内容17.1 停止预读(G08)17.2 回转轴角度分辨率重定义(G115)17.3 轴释放(G101)17.4 指令通道加载程序(G103)及运行(G103.1) 17.5 通道同步(G104)17.6 报警(G110)
HNC-818 数控系统用户说明书17. 其他功能 17.1 停止预读(G08) 格式 G08举例 %0003 G54G01 X10 Y10 Z10 G08G01 X100Y100Z100 G01 X30M30;单独程序行指定本代码;停止预读程序执行时遇到本指令后,系统停止后续行的解释,只到前面已解 释的指令执行完毕,系统才继续接着解释运行。在进行实时坐标读 取、状态判断时经常使用该指令。239
17. 其他功能 HNC-818 数控系统用户说明书 17.2 回转轴角度分辨率重定义(G115) 格式 G115 IP_说明 修改回转轴的分辨率,系统缺省的角度分辨倍数为度 1/100000。.在 刚性攻丝时需要在一条指令中产生较大的角度增量,此时需要将角                 度分辨率适当降低,以避免当量长度超过限制。注意 (1) 必须单行使用;(2) 一条指令只能修改一个回转轴的指令;(3) 指定的轴必须是回转的轴;(4) 指定的新倍率必须能被标准倍率整除。举例 %1234 STOCG54G90 C0G115 C 1000G01 C3000G115 C0 ;将 C 轴分辨率恢复为系统缺省的角度分辨率 1/100000 度 CTOS     参数  含义  IP 设置旋转轴分辨率的倒数值,设置为 0 时恢复系统缺省 的角度分辨率,该设置值不能小于 0;  240;将 C 轴分辨率改为 1/1000 度。
HNC-818 数控系统用户说明书 17. 其他功能 17.3 轴释放(G101)及轴获取(G102) 格式 G101 IP_G102 IP_说明 G101 是通道释放此轴的控制权,G101 指令后的地址字可以跟任何 数字,但建议使用数字 0。G102 是通道获取此轴的控制权,G102 指令后的地址字跟的数字是 逻辑轴号。     参数  含义  IP 设置释放的轴,可选值为X/Y/Z/A/B/C/U/V/W/S0/S1/S2/S3      参数  含义  IP 设置获取的轴,可选值为X/Y/Z/A/B/C/U/V/W/S0/S1/S2/S3  注意 (1)一般情况下,同一个逻辑轴同时只能属于一个通道;(2) 当一个通道获取了轴后,需要设置此轴的 G5X 零点。如果设置 界面下不能设置此轴的 G5X 零点,则可以考虑使用 G10 指令设 置;(3) 轴在移动过程中不可获取与释放。241
17. 其他功能 举例HNC-818 数控系统用户说明书 铣床如何在 X/Y 轴方向上钻孔?下例中,假设通道配置里,X 轴逻辑轴号为 0,Y 轴逻辑轴号为 1,Z 轴逻辑轴号为 2 %1111G54G101 Y0 Z0;释放 Y 轴及 Z 轴G102 Y2 Z1;互换 Y 轴和 Z 轴的逻辑轴号 ;以下开始钻孔G0X0Y0Z60M3S700 G99G73X20Y25R5P2Q-3K2Z-32F80 G0X0Y0Z60M30 242
HNC-818 数控系统用户说明书 17. 其他功能 17.4 指令通道加载程序(G103)及运行(G103.1) 格式 G103 P="程序名" Q={通道号,...}G103.1 Q={通道号,...}说明 执行 G103.1 时,必须保证要装载程序的通道为自动模式 执行 G103 时,必须保证要装载程序的通道没有选择程序                 这两条指令一般用于多通道的情况举例 假设有一个双通道机床,通道 1 要让通道 2 加载并执行程序 O01。 %1N1G54N2G103 P="O01" Q={2}N3G103.1 Q={2}.......;M30当通道 1 执行完 N3 行后,通道 2 开始运行程序 O01     参数  含义  P 要装载的程序名  Q 要装载程序的通道号,如果有多个通道,以,分隔       参数  含义  Q 要运行程序的通道号,如果有多个通道,以,分隔  243
17. 其他功能HNC-818 数控系统用户说明书 17.5 通道同步(G104) 格式说明举例G104 P_ Q={通道号,}G104 指令主要用于多个通道间工序的同步。 假设一个双通道铣床,X 轴是公用轴,配置如下     参数  含义  Q 要同步的通道号,如果有多个通道,以,分隔  P 信号值,取值范围为 0~40      通道 0 逻辑轴号    通道 1 逻辑轴号    X轴0  ---  Y轴1    3    Z轴2   4        通道1程序    通道2程序    %1N1G54X0Y0Z0 N2G02X10Y10R20 N3G1X0Y0Z0N4G101 X0;释放 X 轴N5G104 P1 Q={1,2};同步语句 1 N6G104 P2 Q={1,2};同步语句 2 N7G102 X0N8G0X100N9M30  %2N1G104 P1 Q={1,2};同步语句 1 N2G102 X0;获取 X 轴 N3G54X0Y0Z0 N4G02X10Y10R20 N5G0X0Y0Z0N6G101 X0;释放 X 轴N7G104 P2 Q={1,2};同步语句 2 N8M30 244如上表所列,通道 1 和通道 2 装载了各自的程序后循环启动。 (1) 通道1执行N1到N4,通道2在N1处循环等待(2) 通道 1 执行到 N5,通道 2 可以向下执行(3) 通道1在N6处循环等待,通道2执行N2到N6(4) 通道 2 执行 N7,通道 1 可以向下执行(5) 通道 2 执行到 N8 完成,通道 1 继续执行 N7~N9
HNC-818 数控系统用户说明书17. 其他功能 17.6 报警(G110) 格式注意G110 P_用户自定义报警号,为-8000 ~ -9999 用户可以自己编写报警信息,保存在 USR_SYTAX.TXT(名字全部是大写)中,编写格式如下例所示: -8000 铣削循环:刀具未定义-8001 铣削循环:参考平面未定义 ............然后用户在 G 代码中编写如下语句G110 P-8000;当系统执行到此行时,就会产生报警:铣削循环:刀具 未定义     参数  含义  P 报警号,必须是个负数  245
246III 操作
HNC-818 数控系统用户说明书1. 操作设备 1 操作设备   本章主要介绍 HNC-818 数控系统的操作台以及系统操作界面:  显示器 NC键盘 机床控制面板 手持单元 系统操作界面247
1. 操作设备HNC-818 数控系统用户说明书 1.1 显示器 HNC-818A-TU(带手摇) 8.4寸彩色液晶显示器(分辨率为800×600);显示器功能键 主菜单键MDI 键盘机床控制面板 8.4寸彩色液晶显示器(分辨率为800×600); 8.4寸彩色液晶显示器(分辨率为800×600);       HNC-818A-TU(无手摇) HNC-818A-MU   248
HNC-818 数控系统用户说明书 HNC-818B-TU1. 操作设备  HNC-818B-MU 10.4寸彩色液晶显示器(分辨率为800×600) 10.4寸彩色液晶显示器(分辨率为800×600); 249
1. 操作设备HNC-818 数控系统用户说明书 1.2 NC 键盘 HNC-818A 车/铣NC 键盘包括精简型 MDI 键盘、六个主菜单键和十个功能键,主要 用于零件程序的编制、参数输入、MDI 及系统管理操作等。- MDI 键盘:大部分键具有上档键功能,同时按下“Shift”键和字 母/数字键,输入的是上档键的字母/数字;- 六个主菜单键:程序、设置、MDI、刀补、诊断、位置; - 十个功能键与系统菜单的十个菜单按钮一一对应。     HNC-818B 车/铣           250
HNC-818 数控系统用户说明书1. 操作设备 1.3 机床控制面板HNC-818A-TU(带手摇)机床控制面板用于直接控制机床的动作或加工过程。   HNC-818A-TU(无手摇) HNC-818A-MU251
1. 操作设备 HNC-818 数控系统用户说明书 HNC-818B-TUHNC-818B-MU   252
HNC-818 数控系统用户说明书1. 操作设备 1.4 手持单元  注意手持单元由手摇脉冲发生器、坐标轴选择开关组成,用于手摇方式 增量进给坐标轴。手持单元的结构如下图所示(外观以实际定货为 准)。HNC-818A 车的控制面板上已附带手持单元: 253
1. 操作设备HNC-818 数控系统用户说明书 1.5 系统操作界面  HNC-818数控系统的操作界面如下: 123 4(1) 标题栏 主菜单名:显示当前激活的主菜单按键; 工位信息:显示当前工位号;567 8         254 加工方式:系统工作方式根据机床控制面板上相应按键的 状态可在自动(运行)、单段(运行)、手动(运行)、 增 量(运行)、回零、急停之间切换; 通道信息:显示每个通道的工作状态“运行正常”、“进给 暂停”、“出错”; 系统时间:当前系统时间(机床参数里可选); 系统报警信息。(2) 图形显示窗口:这块区域显示的画面,根据所选菜单键的不同而不同。(3) G 代码显示区:预览或显示加工程序的代码。(4) 菜单命令条:通过菜单命令条中对应的功能键来完成系统功能 的操作。(5) 标签页:用户可以通过切换标签页,查看不同的坐标系类型。(6) 辅助机能:自动加工中的 F、S 信息,以及修调信息。(7) 刀具信息:当前所选刀具。(8) G 模态&加工时间(在“程序”主菜单下):显示加工过程中的 G 模态,以及系统本次加工的时间。
HNC-818 数控系统用户说明书 2. 上电、关机、急停 2 上电、关机、急停   本章主要介绍机床、数控装置的上电、关机、急停、复位、回参考 点和超程解除。255
2. 上电、关机、急停HNC-818 数控系统用户说明书 2.1 上电 操作步骤(1) 检查机床状态是否正常;(2) 检查电源电压是否符合要求,接线是否正确; (3) 按下“急停”按钮;(4) 机床上电;(5) 数控上电;(6) 检查面板上的指示灯是否正常;(7) 接通数控装置电源后,系统自动运行系统。此时,工作方式为 “急停”; 256
HNC-818 数控系统用户说明书2. 上电、关机、急停 2.2 复位 操作步骤系统上电进入系统操作界面时,初始工作方式显示为“急停”,为控 制系统运行,需右旋并拔起操作台右下角的“急停”按钮使系统复 位,并接通伺服电源。系统默认进入“回参考点”方式,系统操作 界面的工作方式变为“回零”。 257
2. 上电、关机、急停HNC-818 数控系统用户说明书 2.3 返回机床零点   注意控制机床运动的前提是建立机床坐标系,为此,系统接通电源、复 位后首先应进行机床各轴回参考点操作。方法如下:(1) 如果系统显示的当前工作方式不是回零方式,按一下控制面板 上面的“回参考点”按键,确保系统处于“回零”方式;(2) 根据 X 轴机床参数“回参考点方向”, 按一下“X”以及方向 键(“回参考点方向”为“+”), X 轴回到参考点后,“X”按键 内的指示灯亮;(3) 用同样的方法使用“Z”按键,使 Z 轴回参考点。 (4) 所有轴回参考点后,即建立了机床坐标系。(1) 在每次电源接通后,必须先完成各轴的返回参考点操作,然后 再进入其他运行方式,以确保各轴坐标的正确性;(2) 同时按下轴方向选择按键(X,Y,Z),可使轴(X,Y,Z)同 时返回参考点;(3) 在回参考点前,应确保回零轴位于参考点的“回参考点方向” 相反侧(如 X 轴的回参考点方向为负,则回参考点前,应保证 X 轴当前位置在参考点的正向侧);否则应手动移动该轴直到满足 此条件;(4) 在回参考点过程中,若出现超程,请按住控制面板上的“超程 解除”按键,向相反方向手动移动该轴使其退出超程状态;(5) 系统各轴回参考点后,在运行过程中只要伺服驱动装置不出现 报警,其它报警都不需要重新回零(包括按下急停按键);(6) 在回参考点过程中,如果用户在压下参考点开关之前按下“复 位”键,则回零操作被取消;(7) 在回参考点过程中,如果用户在压下参考点开关之后按下“复 位”键,按此键无效,不能取消回零操作;258
HNC-818 数控系统用户说明书2. 上电、关机、急停 2.4 急停注意机床运行过程中,在危险或紧急情况下,按下“急停”按钮,数控 系统即进入急停状态,伺服进给及主轴运转立即停止工作(控制柜 内的进给驱动电源被切断);松开“急停”按钮(右旋此按钮,自动 跳起),系统进入复位状态。解除急停前,应先确认故障原因是否已经排除,而急停解除后,应 重新执行回参考点操作,以确保坐标位置的正确性。在上电和关机之前应按下“急停”按钮以减少设备电冲击。  259
2. 上电、关机、急停HNC-818 数控系统用户说明书 2.5 超程解除      注意在伺服轴行程的两端各有一个极限开关,作用是防止伺服碰撞而损 坏。每当伺服碰到行程极限开关时,就会出现超程。当某轴出现超 程(“超程解除”按键内指示灯亮)时,系统视其状况为紧急停止, 要退出超程状态时,可进行如下操作:(1) 置工作方式为“手动”或“手摇”方式;(2) 一直按压着“超程解除”按键(控制器会暂时忽略超程的紧急 情况);(3) 在手动(手摇)方式下,使该轴向相反方向退出超程状态;(4) 松开“超程解除”按键;(5) 若显示屏上运行状态栏“运行正常”取代了“出错”,表示恢复 正常,可以继续操作。在操作机床退出超程状态时,请务必注意移动方向及移动速率,以 免发生撞机。260
HNC-818 数控系统用户说明书2. 上电、关机、急停 2.6 关机 操作步骤(1) 按下控制面板上的“急停”按钮,断开伺服电源; (2) 断开数控电源;(3) 断开机床电源。  261
3. 机床手动操作HNC-818 数控系统用户说明书 3 机床手动操作   262机床手动操作主要由手持单元和机床控制面板组成,本章介绍机床 的手动操作,主要包括以下一些内容: 手动移动机床坐标轴;  手动控制主轴; 机床锁住; 其它手动操作; 手动数据输入(MDI)运行;
HNC-818 数控系统用户说明书3. 机床手动操作 3.1 坐标轴移动3.1.1 手动进给手动移动机床坐标轴的操作由手持单元和机床控制面板上的方式选 择、轴手动、增量倍率、进给修调、快速修调等按键共同完成。按一下“手动”按键(指示灯亮),系统处于手动运行方式,可点动 移动机床坐标轴(下面以点动移动 X 轴为例说明):(1) 按下“X”按键以及方向键(指示灯亮),X 轴将产生正向或负 向连续移动;(2) 松开“X”按键以及方向键(指示灯灭),X 轴即减速停止。 用同样的操作方法,使用“Z”按键可使 Z 轴产生正向或负向连续移动。在手动运行方式下,同时按压 X、Z 方向的轴手动按键,能同时手动控制 X、Z 坐标轴连续移动。在手动进给时,若同时按压“快进”按键,则产生相应轴的正向或 负向快速运动。在自动方式或 MDI 运行方式下,当 F 代码编程的进给速度偏高或偏 低时,可旋转进给修调波段开关,修调程序中编制的进给速度。修 调范围为 0%-120%。在手动连续进给方式下,此波段开关可调节手动进给速率。      3.1.2 手动快速移动3.1.3 进给修调        263
3. 机床手动操作HNC-818 数控系统用户说明书 3.1.4 快移修调3.1.5 增量进给根据不同的控制面板,快移修调的操作方法不同:(1) 修调波段开关:在自动方式或 MDI 运行方式下,旋转快移修调 波段开关,修调程序中编制的快移速度。修调范围为 0%-100%。(2) 修调倍率按钮:在自动方式或 MDI 运行方式下,按下相应的快 移修调倍率按钮。按一下控制面板上的“增量”按键(指示灯亮),系统处于增量进给 方式,可增量移动机床坐标轴(下面以增量进给 X 轴为例说明):(1) 按一下“X”键以及方向键(指示灯亮),X 轴将向正向或负向 移动一个增量值;(2) 再按一下“X”键以及方向键,X 轴将向正向或负向继续移动一 个增量值;(3) 用同样的操作方法,使用“Z”按键可使 Z 轴向正向或负向移动 一个增量值。同时按一下 X、Z 方向的轴手动按键,能同时增量进给 X、Z 坐标轴。根据不同的控制面板,增量值的按键不同:增量进给的增量值由机床控制面板的“×1”,“×10”,“×100”,“× 1000” 四个增量倍率按键控制。增量倍率按键和增量值的对应关系 如下表所示:注意:这几个按键互锁,即按下其中一个(指示灯亮),其余几个会 失效(指示灯灭)。         3.1.6 增量值选择     增量倍率按键  ×1 ×10 ×100  ×1000 增量值(mm)  0.001 0.01  0.1  1  264
HNC-818 数控系统用户说明书3. 机床手动操作 3.1.7 手摇进给3.1.8 手摇倍率选择当手持单元的坐标轴选择波段开关置于“X”、“Y”、“Z”、“4TH” 档(对车床而言,只有“X”、“Z”有效)时,按一下控制面板上的 “增量”按键(指示灯亮),系统处于手摇进给方式,可手摇进给机 床坐标轴。以 X 轴手摇进给为例:(1) 手持单元的坐标轴选择波段开关置于“X”档;(2) 顺时针/逆时针旋转手摇脉冲发生器一格,可控制 X 轴向正向或 负向移动一个增量值。用同样的操作方法使用手持单元,可以控制 Z 轴向正向或负向移动 一个增量值。手摇进给方式每次只能增量进给一个坐标轴。手摇进给的增量值(手摇脉冲发生器每转一格的移动量)由手持单 元的增量倍率波段开关“×1”,“×10”,“×100”控制。增量倍率 波段开关的位置和增量值的对应关系如下表:    位置 ×1 ×10  ×100  增量值(mm) 0.001  0.01  0.1 265
3. 机床手动操作HNC-818 数控系统用户说明书 3.2 主轴控制3.2.1 主轴正转3.2.2 主轴反转3.2.3 主轴停止主轴手动控制由机床控制面板上的主轴手动控制按键完成。在手动方式下,按一下“主轴正转”按键(指示灯亮),主轴电机以 机床参数设定的转速正转,直到按压“主轴停止”或“主轴反转” 按键。在手动方式下,按一下“主轴反转”按键(指示灯亮),主轴电机以 机床参数设定的转速反转,直到按压“主轴停止”或“主轴主转” 按键。在手动方式下,按一下“主轴停止”按键(指示灯亮),主轴电机停 止运转。注意:“主轴正转”、“主轴反转”、“主轴停止”这几个按键互锁,即 按一下其中一个(指示灯亮),其余两个会失效(指示灯灭)。在手动方式下,可用“主轴点动”按键,点动转动主轴:按压“主 轴点动”按键(指示灯亮),主轴将产生正向连续转动;松开“主轴 点动”按键(指示灯灭),主轴即减速停止。主轴正转及反转的速度可通过主轴修调调节:旋转主轴修调波段开关,倍率的范围为 50%和 120%之间;机械齿 轮换档时,主轴速度不能修调。         3.2.4 主轴点动3.2.5 主轴速度修调        266
HNC-818 数控系统用户说明书 3. 机床手动操作 3.2.6 主轴升档(HNC-818A-TU无手摇,HNC-818B-TU)若主轴有多个档位,在手动方式下,按一下“主轴升档”按键,主 轴将由低向高变化一个档位。3.2.7 主轴降档(HNC-818A-TU无手摇,HNC-818B-TU)若主轴有多个档位,在手动方式下,按一下“主轴降档”按键,主 轴将由高向低变化一个档位。3.2.8 主轴定向(HNC-818A-TU带手摇,M系列)         3.2.9 主轴制动(M系列)如果机床上有换刀机构,通常就需要主轴定向功能,这是因为换刀 时,主轴上的刀具必须定位完成,否则会损坏刀具或刀爪。在手动方式下,当“主轴制动”无效时(指示灯灭),按一下“主轴 定向”按键,主轴立即执行主轴定向功能,定向完成后,按键内指 示灯亮,主轴准确停止在某一固定位置。在手动方式下,主轴处于停止状态时,按一下“主轴制动”按键(指 示灯亮),主轴电机被锁定在当前位置。     267
3. 机床手动操作 HNC-818 数控系统用户说明书 3.3 机床锁住、MST 锁住、Z 轴锁住 3.3.1 机床锁住   3.3.2 MST 锁住(T 系列)3.3.3 Z 轴锁住(M 系列)机床锁住禁止机床所有运动。在手动运行方式下,按一下“机床锁住”按键(指示灯亮),此时再 进行手动操作,显示屏上的坐标轴位置信息变化,但不输出伺服轴 的移动指令,所以机床停止不动。注意:“机床锁住”按键只在手动方式下有效,在自动方式下无效。该功能用于禁止 M、S、T 辅助功能。在只需要机床进给轴运行的情 况下,可以使用“MST 锁住”功能:在手动方式下,按一下“MST 锁住”按键(指示灯亮),机床辅助功能 M 指令、S 指令、T 指令均 无效。该功能用于禁止进刀。在只需要校验 XY 平面的机床运动轨迹时, 我们可以使用“Z 轴锁住”功能。在手动方式下,按一下“Z 轴锁住” 按键(指示灯亮),再切换到自动方式运行加工程序,Z 轴坐标位置 信息变化,但 Z 轴不进行实际运动。注意:“Z 轴锁住”键在自动方式下按压无效。          268
HNC-818 数控系统用户说明书3. 机床手动操作 3.4 其他手动操作 3.4.1 冷却启动与停止3.4.2 润滑启动与停止3.4.3 防护门开启与关闭3.4.4 工作灯在手动方式下,按一下“冷却”按键,冷却液开(默认值为冷却液 关),再按一下为冷却液关,如此循环。在手动方式下,按一下“润滑”按键,机床润滑开(默认值为机床 润滑关),再按一下为机床润滑关,如此循环。在手动方式下,按一下“防护门”按键,防护门打开(默认值为防 护门关闭),再按一下为防护门关闭,如此循环。在手动方式下,按一下“工作灯”或“机床照明”按键,打开工作 灯(默认值为关闭);再按一下为关闭工作灯。                       3.4.5 液压开启与关闭(T系列)   3.4.6 自动断电(M系列)在手动方式下,按一下“液压启动”按键,液压打开(默认值为液 压关闭),再按一下为液压关闭,如此循环。在手动方式下,按一下“自动断电”,当程序出现 M30 时,在定时 器定时结束后机床自动断电。   3.4.7 排屑正转(T系列,HNC-818B-MU)在手动方式下,按一下“排屑正转”按键,排屑器“向前”转动, 能将机床中的切屑排出。          269
3. 机床手动操作 HNC-818 数控系统用户说明书 3.4.8 排屑停止(HNC-818B-TU,HNC-818B-MU)                 在手动方式下,按一下“排屑停止”按键,排屑器停止转动。3.4.9 排屑反转(T系列,HNC-818B-MU)在手动方式下,按一下“排屑反转”按键,排屑器反转,能有利于 清除排屑器中的堵塞物和切屑。3.4.10 手动换刀(T 系列,HNC-818A-MU)               3.4.11 卡盘松紧(T 系列)在手动方式下,按一下“手动换刀”按键,系统会预先计数转塔刀 架转动一个刀位,依次类推,按几次“手动换刀”键,系统就预先 计数转塔刀架转动几个刀位,松开后,转塔刀架才真正转动至指定 的刀位。此为预选刀功能,可避免因换刀不当而导致的撞刀。操作示例如下:当前刀位为 1 号刀,要转换到 4 号刀,可连续按“手 动换刀”键 3 次,4 号刀就会转至正确的位置。在手动方式下,按一下“卡盘松/紧”按键,松开工件(默认值为夹 紧),可以进行更换工件操作;再按一下为夹紧工件,可以进行加工 工件操作,如此循环。  3.4.12 进给保持II(T 系列,HNC-818A-MU)在程序自动运行的过程中,需要将各进给轴和主轴都暂停运行,可 按下述步骤操作:(1) 在程序运行的任何位置,按一下机床控制面板上的“进给保持 II” 按键(指示灯亮),系统处于进给保持状态,“进给保持” 按键指示灯亮,各进给轴将停止运动,主轴停转;(2) 再按机床控制面板上的“循环启动”按键(指示灯亮),机床又 开始自动运行调入的零件加工程序,各进给轴恢复运动,主轴 恢复转动。     270
HNC-818 数控系统用户说明书 3. 机床手动操作 3.4.13 中心架(HNC-818B-TU)     3.4.14 尾台松紧(T 系列)3.4.15 换刀允许(M 系列)3.4.16 刀具松紧(M 系列)在手动方式下,按一下“中心架”按键,开关处于 ON 状态下,中心 架手动夹紧。在手动方式下,按一下“尾台松/紧”按键,松开工件(默认值为夹 紧),可以进行更换工件操作;再按一下为夹紧工件,可以进行加工 工件操作,如此循环。在手动方式下,按一下“换刀允许” 按键(指示灯亮),允许刀具 松/紧操作,再按一下又为不允许刀具松/紧操作(指示灯灭),如此 循环。在“换刀允许”有效时(指示灯亮),按一下“刀具松/紧” 按键, 松开刀具(默认值为夹紧),再按一下又为夹紧刀具,如此循环。         3.4.17 吹屑启动与停止(HNC-818B-MU)在手动方式下,按一下“吹屑”按键(指示灯亮),启动吹屑;再按 一下“吹屑”按键(指示灯灭),吹屑停止,如此循环。3.4.18 刀库正转与反转(HNC-818B-MU)在手动方式下,按一下“刀库正转” 按键,刀库以设定的转速正转; 按一下“刀库反转” 按键,刀库以设定的转速反转。注意:“刀库正转”、“刀库反转”这两个按键互锁,即按一下其中一 个(指示灯亮),其余键会失效(指示灯灭)。         271
3. 机床手动操作 HNC-818 数控系统用户说明书 3.4.19 内卡/外卡(HNC-818A-TU 带手摇,HNC-818A-TU 无手摇)                 用户按此键,可以选择内卡或者外卡。3.4.20 尾台连接(HNC-818B-TU)                 用户按此键,可连接尾台。         272
HNC-818 数控系统用户说明书 3. 机床手动操作 3.5 手动数据输入(MDI)运行按 MDI 主菜单键进入 MDI 功能,用户可以从 NC 键盘输入并执行一 行或多行 G 代码指令段如下图所示:注意 (1) 系统进入 MDI 状态后,标题栏出现“MDI 状态”图标; (2) 用户从 MDI 切换到非程序界面时仍处于 MDI 状态;(3) 自动运行过程中,不能进入 MDI 方式,可在进给保持后进入; (4) MDI 状态下,用户按“复位”键,系统则停止并清除 MDI 程序;3.5.1 输入MDI指令段操作步骤 MDI 输入的最小单位是一个有效指令字。因此,输入一个 MDI 运行                 指令段可以有下述两种方法:(1) 一次输入,即一次输入多个指令字的信息;(2) 多次输入,即每次输入一个指令字信息。例如:要输入“G00 X100 Z1000”MDI 运行指令段,可以(1) 直接输入“G00 X100 Z1000”;(2) 按“输入”键,则显示窗口内关键字 X、Z 的值将分别变为 100、 1000;在输入命令时,可以看见输入的内容,如果发现输入错误,可用“BS”、 “►”和“◄”键进行编辑;按“输入”键后,系统发现输入错误, 会提示相应的错误信息,此时可按“清除”键将输入的数据清除。            273
3. 机床手动操作HNC-818 数控系统用户说明书 3.5.2 运行MDI指令段 操作步骤3.5.3 修改某一字段的值 操作步骤在输入完一个 MDI 指令段后,按一下操作面板上的“循环启动”键, 系统即开始运行所输入的 MDI 指令。如果输入的 MDI 指令信息不完整或存在语法错误,系统会提示相应 的错误信息,此时不能运行 MDI 指令。在运行 MDI 指令段之前,如果要修改输入的某一指令字,可直接在 命令行上修改相应的指令字符及数值。例如:在输入“X100”后, 希望 X 值变为 109,可在命令行上修改“100”。3.5.4 清除当前输入的所有尺寸字数据操作步骤 在输入 MDI 数据后,按“清除”对应功能键,可清除当前输入的所 有尺寸字数据(其他指令字依然有效),显示窗口内 X、Z、I、K、R                 等字符后面的数据全部消失。此时可重新输入新的数据。3.5.5 停止当前正在运行的MDI指令操作步骤 在系统正在运行 MDI 指令时,按“停止”对应功能键可停止 MDI运行。3.5.6 保存当前输入的MDI指令操作步骤 操作者可以按“保存”键,将已输入的 G 代码指令,保存为加工程 序。274
HNC-818 数控系统用户说明书4. 设置 4 设置   本章介绍系统的数据设置操作,主要包括:  刀补数据(T系列) 刀补数据(M系列) 坐标系的设置 相对清零  参数275
4. 设置HNC-818 数控系统用户说明书 4.1刀具管理(T 系列) 4.1.1 手工填写法刀具补偿分为刀具偏置补偿和刀具磨损补偿,其中刀具偏置补偿为 刀具头部位置补偿,刀具磨损补偿为刀具头部磨损量的补偿。刀具偏置补偿的设置有两种方法:一种是手工填写,另一种是采用 试切法。输入刀补数据的操作步骤如下:(1) 按“刀补”主菜单键,图形显示窗口将出现刀补数据,可进行刀补数据设置;          276刀具补偿是实际用的刀具与编程的理想刀具之间的差值。(如下图所 示,实线画的是理想刀具,虚线画的是实际加工刀具),也就是建立 正确的工件坐标系。 (2) 用“▲”、“▼”移动光标选择刀偏号; (3) 用“►”、“◄”选择编辑选项;
HNC-818 数控系统用户说明书4. 设置 注意4.1.2 试切法 操作步骤(4) 按“Enter”键,系统进入编辑状态;(5) 修改完毕后,再次按“Enter”键确认;(6) 用户也可以按“刀架平移”键,修改刀架位置。补偿的偏置值会反映到相应的工件坐标系上;试切法指的是通过试切,由试切直径和试切长度来计算刀具偏置值的方法。(1) 用“▲”和“▼”方向键将光标移动到要设置的刀具;(2) 用刀具试切工件的外径,然后沿 Z 轴方向退刀(注意:在此过程中不要移动 X 轴);(3) 测量试切后的工件外径,按下“试切直径”按键,输入试切直径的距离。这样,X 偏置就设置好了;(4) 用刀具试切工件的端面,然后沿 X 轴方向退刀;(5) 计算试切工件端面到该刀具要建立的工件坐标系的零点位置的 有向距离,按下“试切长度”按键,输入试切长度的距离。这 样这把刀的 Z 偏置就设置好了。如果要设置其余的刀具,就重复以上步骤。(1) 工件坐标系的 X 向零点是建立在旋转轴的中心线上;(2) 对刀前,机床必须先回机械零点;(3) 试切工件端面到该刀具要建立的工件坐标系的零点位置的有向 距离也就是试切工件端面在要建立的工件坐标系中的 Z 轴坐标 值;(4) 设置的工件坐标系X轴零点偏置=机床坐标系X坐标-试切直径, 因而试切工件外径后,不得移动 X 轴;(5) 设置的工件坐标系 Z 轴零点偏置=机床坐标系 Z 坐标-试切长度, 因而试切工件端面后,不得移动 Z 轴。注意277
4. 设置4.1.3 刀尖方位的定义HNC-818 数控系统用户说明书车床的刀具可以多方向安装,并且刀具的刀尖也有多种形式,为使 数控装置知道刀具的安装情况,以便准确地进行刀尖半径补偿,定 义了车刀刀尖的位置码。车刀刀尖的位置码表示理想刀具头与刀尖圆弧中心的位置关系,如 下图所示。大多数的刀尖方位为 3 号方位。   162 07         5Z PC      操作步骤(1) 按“刀补→刀补”菜单键;43 8X       278(2) 用“▲”、“▼”移动光标选择刀偏号; (3) 用“►”、“◄”选择编辑选项;(4) 按“Enter”键,系统进入编辑状态; (5) 修改完毕后,再次按“Enter”键确认。
HNC-818 数控系统用户说明书4. 设置 4.2 刀具管理(M 系列) 4.2.1 刀库操作步骤 (1)按“刀补→刀库”键,图形显示窗口出现刀库数据表,可进行刀库数据设置;用“▲”、“▼”移动光标选择要编辑的选项; 按“Enter”键,系统进入编辑状态; 修改完毕,再次按“Enter”键确认;按“刀补”主菜单键,图形显示窗口出现刀补数据表; 用“▲”、“▼”移动光标选择刀号; 用“►”、“◄”选择编辑选项; 按“Enter”键,系统进入编辑状态; 注意:编辑选项的数据有效范围为-10000.0~10000.0。 修改完毕,再次按“Enter”键确认;  (2) (3) (4)4.2.2 刀补操作步骤 (1) (2) (3) (4)(5)279
4. 设置 HNC-818 数控系统用户说明书 4.3 坐标系的设置4.3.1 设置坐标系(T系列)坐标系数据的设置操作步骤如下:(1) 按“设置”主菜单功能键,进入手动建立工件坐标系的方式,如下图所示:(2) 通过“Pgdn”、“Pgup”键选择要输入的工件坐标系 G54、G55、 G56、G57、G58、G59、工件(坐标系零点相对于机床零点的值)、 相对(当前相对值零点)、G54.1-G54.60;(3) 操作者也可以通过按“查找”按钮,查找特定工件坐标系类型; 现在工件坐标系设置的查找的输入主要有两种输入格式: Px表示扩展坐标系x例如:P39,则查找到的为 G54.39 扩展工件坐标系 x表示坐标系编号 例如:2,则查找到的 G55(4) 输入所选坐标系的位置信息,操作者可以采用以下任何一种方 式实现:4.1) 在编辑框直接输入所需数据;4.2) 通过按“当前位置”、“偏置输入”、“恢复”按钮,输入 数据;a) [当前位置]:系统读取当前刀具位置;        280
HNC-818 数控系统用户说明书4. 设置 b)c)[偏置输入]:如果用户输入“+0.001”,则所选轴 的坐标系位置为当前位置加上输入的数据;如果 用户输入“-0.001”,则所选轴的坐标系位置为当 前位置减去输入的数据;[恢复]:还原上一次设定的值;(5) 若输入正确,图形显示窗口相应位置将显示修改过的值,否则 原值不变。4.3.2 设置坐标系(M系列) 坐标系数据的设置操作步骤如下:(1) 按“设置”主菜单功能键,进入手动建立工件坐标系的方式, 如下图所示:(2) 通过“Pgdn”、“Pgup”键选择要输入的工件坐标系 G54、G55、 G56、G57、G58、G59、工件(坐标系零点相对于机床零点的 值)、相对(当前相对值零点)、G54.1-G54.60;(3) 操作者也可以通过按“查找”按钮,查找特定工件坐标系类型; 现在工件坐标系设置的查找的输入主要有两种输入格式: Px表示扩展坐标系x例如:P39,则查找到的为 G54.39 扩展工件坐标系 x表示坐标系编号 例如:2,则查找到的 G55(4) 输入所选坐标系的位置信息,操作者可以采用以下任何一种方 式实现:       281
4. 设置HNC-818 数控系统用户说明书 4.1) 在编辑框直接输入所需数据;4.2) 通过按“当前位置”、“偏置输入”、“恢复”按钮,输入 数据;a) [当前位置]:系统读取当前刀具位置;b) [偏置输入]:如果用户输入“+0.001”,则所选轴 的坐标系位置为当前位置加上输入的数据;如果用 户输入“-0.001”,则所选轴的坐标系位置为当前 位置减去输入的数据;c) [恢复]:还原上一次设定的值;4.3) 通过按“记录I”、“记录II”按钮,系统读取刀具的当 前位置,然后按“分中”按钮,系统计算两点(记录I、 记录II)的中点,将此点作为坐标系的原点位置。若输入正确,图形显示窗口相应位置将显示修改过的值,否则 原值不变。 282(5)
HNC-818 数控系统用户说明书4. 设置 4.4 相对清零 操作步骤为方便对刀,按“设置→相对清零”,进入如图所示界面,在该界面下输入轴名,如输入“X”,则对 X 轴清零,系统坐标系改 为相对坐标系,相应的坐标值变为 0,此时手动移动机床,坐标为相 对当前位置的变化,当退出该界面时,系统坐标系自动恢复为进入 相对坐标系之前的坐标系。  283
4. 设置HNC-818 数控系统用户说明书 4.5 参数 4.5.1 系统参数分类查看 (1)按“设置→参数→系统参数”对应功能键,界面如下所示:      序号查看 (1)(2) 使用“▲”和“▼”选择参数类型;(3) 使用“►”键切换到参数列表,则屏幕下方显示所选参数的具体说明。  按“设置→参数→系统参数→索引”对应功能键;(2) 使用“▲”和“▼”选择参数,系统屏幕下方为所选参数的具 体说明;注意:HNC-818 数控系统的每个参数的具体意义请参见《华中 8 型参数说明书》。编辑权限 如果用户要修改系统参数的值,必须输入相应的口令:(1) 按“设置→参数→系统参数→输入口令”对应功能键;(2) 输入密码;(3) 按“Enter”键,如果口令正确,用户可对系统参数进行修改。284
HNC-818 数控系统用户说明书 编辑参数保存参数置出厂值恢复前值查找参数设备配置4. 设置 (1) 用户输入正确的口令;(2) 按索引或分类方式选择需要编辑的参数,按“确认”键,系统 进入编辑状态;(3) 输入参数值后,再按“确认”键,结束此次编辑操作;(1) 用户完成编辑参数的操作后,可以按“保存”键;(2) 如果用户需要保存修改,则按“Y”键;(3) 如果用户不需要保存修改,则按“N”键; 注:某些参数必须关闭电源、重启系统,才能使参数设置生效。如果用户需要恢复某项系统参数的出厂配置,按“置出厂值”对应 功能键,则选中的参数值将被设置为出厂值(缺省值)。用户完成编辑参数的操作后,按“恢复前值”对应功能键,所选的 参数值将被恢复为修改前的值。注意:此项操作只在参数值保存之前有效。在参数索引的查看方式下,用户可以按“查找”键,直接输入参数 编号,然后按“确认”键后,系统则定位至所选的参数。用户可以使用设备配置导航功能设置设备的编号;(1) 按“设置→参数→系统参数→设备配置”对应功能键,系统显 示硬件连接拓扑图;     285
4. 设置HNC-818 数控系统用户说明书 (2) 使用“▲”和“▼”选择设备类型;(3) 按“确认”键,则显示所选择的设备类型中已配置的轴名、输 入、输出、或其他单元;(4) 按“Alt+n”键,将光标切换至屏幕右边区域; (5) 使用“▲”和“▼”选择需要编辑的数据类型;  通道:轴名、设备号、轴类型、工作模式; 输入输出:设备名称、设备号、起始组号、组数; 其他单元:设备名称、设备号;(6) 按“Enter”键,则可编辑所选的数据类型(设备号除外),对 于设备号的编辑操作:使用“►”和“◄”键移动光标,用户 可在设备配置导航图中选择设备,再按“Enter”键,系统则自 动读入设备号。注:对于每种设备的数据类型的含义,请参见《华中 8 型参数 说明书》。(1) 按“设置→参数→系统参数→自动偏置”对应功能键;(2) 输入逻辑轴号;(3) 按“Enter”键,则系统将相应的“坐标轴参数”的“编码器反 馈偏置量”的值自动进行计算并填入;(4) 用户可按“保存”键,保存修改。 自动偏置4.5.2 显示参数操作步骤             设置系统大字符区域和小字符区域的显示信息。(1) 按“设置→参数→显示参数”对应功能键进入显示设置界面;(2) 使用光标键“▲”和“▼”选择; 显示列1:设定大字符的第一列值;  显示列2:设定大字符的第二列值;  显示列3:设定标签页所显示的值。(3) 使用光标键“►”切换光标至选项列表;(4) 用“▲”和“▼”选择显示的类型;(5) 按“Enter”键以确认;286
HNC-818 数控系统用户说明书 注意4.5.3 时间 操作步骤4. 设置 4.5.4 批量调试在机床参数里如果选择了显示系统时间的选项,则可以通过此操作 重新设置系统时间。(1) 按“设置→参数→时间”对应功能键,进入系统时间设置方式: (2) 使用光标键选择需要设置的时间选项;(3) 按“Enter”键,系统进入编辑状态,用户可以输入数据;(4) 再次按“Enter”键,保存设置。注:此功能机床用户、数控、管理员开放。用户可以批量导入和导出调试文件。(1) 按“设置→参数→批量调试”对应功能键;(2) 默认情况下,系统会选择所有数据类型,用户也可以按“Enter” 键取消某数据类型的选择;(3) 按“窗口切换”键,则系统光标移至文件目录区域,用户可选 择“U 盘”或“CF 卡”;(4) 用户按“备份”键,系统提示“是否备份选中的数据类型文件”; 如果用户按“Y”,系统提示“备份成功”。(5) 用户也可按“载入”键,导入需要的文件。标签页所显示的值也可以按“◄”、“►”切换。     287
4. 设置 注意4.5.5 数据管理HNC-818 数控系统用户说明书 (1) 如果用户将文件备份至 CF 卡。则系统自动将备份文件命名为fileman_backup.tar;(2) 如果用户将文件备份至 U 盘,则系统自动将备份文件命名为fileman_backup_YYMMDDTIME.tar; (3) 备份过程中禁止断电。用户可以载入/备份参数、PLC、固定循环、日志、补偿、示波器文 件。注 1:本节以载入/备份系统参数文件为例,其他文件的载入备份的 操作步骤(除误差补偿文件除外)与此相同。注 2:备份过程中禁止断电。注 3:此功能仅对机床用户、数控、管理员开放。 (1) 按“设置→参数→数据管理”对应功能键;(2) 使用光标键选择需要载入或备份的数据类型,并按“Enter”键;  288
HNC-818 数控系统用户说明书4. 设置      误差补偿文件载入/备份(3) 用户可以使用光标键选择需要载入或备份的文件;(4) 按“窗口切换”按钮,使光标移动至载入或备份的文件路径; (5) 再按“载入”或“备份”按钮。8 型系统软件已支持雷尼绍激光干涉仪生成的螺距误差文本自动导 入功能。(1) 生成螺距误差文本LEC.REN文件。使用雷尼绍激光干涉仪生成的*.rtl文本打开,从菜单中选择 “分析数据”,在下拉菜单中再选择“误差补偿图表”,在弹出 的对话框中设置参数。(2) 在弹出的“误差补偿表格”中进行如下配置: 2.1) 图表类型必须选中“各自补偿”;2.2) 补偿类型必须选中“绝对值”;      289
4. 设置HNC-818 数控系统用户说明书  (3)2.3) 补偿分辨率设置为“1”微米或者“0.001”毫米;2.4) 正负符号转换(+/-)可以“误差值”或者“补偿值”;2.5) 参考点位置设置为“0”;2.6) 补偿起点为补偿起点位置;2.7) 补偿终点为补偿终点位置,起点位置必须小于终点位置;2.8) 补偿间隔为补偿间隔,必须为正值;2.9) 点击“绘制误差补偿图表”后生成LEC.REN的文件 LEC.REN文件是一个临时文件,存储地址在雷尼绍软件安 装目录内(通常为C:\Program Files\Renishaw LaserXL), 将LEC.REN文件拷入u盘中。按“设置→参数→数据管理”对应功能键,选择“误差补偿文 件”,并按“Enter”键;(4) 按“窗口切换”→“U盘”或者“CF卡”→从U盘或者CF卡中选 中LEC.REN→按“载入”;     290
HNC-818 数控系统用户说明书4. 设置 (5) 输入螺距误差数据要导入的轴号,按“Enter”键数据导入完成。(6) 按“设置→参数→系统参数→误差补偿参数”,按“Enter”键 展开补偿参数表后,可查看相应的螺距误差补偿参数, 例如:补 偿轴0—300020、300021、300022、300023、300026 均被设置。(7) 按“设置→参数→系统参数→数据表参数”,可查看相应的参数 (螺距误差补偿文件.REN中的补偿值写入到(710000+轴号 *1000)的数据表参数中)。 单向螺补填数据表规则:负向回零,则将“正向机进方向” 的补偿值正序写入(710000+轴号*1000)开始的数据表内; 否则,则将“负向机进方向”的补偿值正序写入(710000+ 轴号*1000)开始的数据表内;                291
4. 设置HNC-818 数控系统用户说明书 4.5.6 权限管理负向回零,则将“正向机进方向”的补偿值正序写入 (710000+轴号*1000)开始的数据表内,再紧接着在后面 将“反向机进方向”的补偿值正序写入数据表内;否则,则将“正向机进方向”的补偿值正序写入(710000+ 轴号*1000)开始的数据表内,再紧接着在后面将“负向机 进方向”的补偿值正序写入数据表内(正向回零,所有填入 的数据需要减去一个“负向机进方向”列里的最后一个值);安装测试完系统后,一般不用修改这些参数。只有在特殊的情况下,如果需要修改某些参数,首先应选择合适的用户级别,然后输入正确的口令;口令本身也可以修改,其前提是输入正确的口令。双向螺补填数据表规则:用户级别 系统能否发挥出最佳性能,参数的设置影响很大,所以系统对参数 修改有严格的限制:(1) 有些参数则可以由用户来修改;(2) 有些参数只能由数控厂家来修改;(3) 有些参数则可以由机床厂家来修改;(4) 而另外一些参数只能由管理员来修改。                 因此,本系统的用户权限分为四类:用户,机床厂家,数控厂家,                 管理员。用户注销 “设置→参数→权限管理→注销”键,操作者可重新选择用户类型。输入口令 (1) 按“设置→参数→权限管理”键;(2) 选择相应的用户类型,按“登录”按钮;292
HNC-818 数控系统用户说明书4. 设置      修改口令4.5.7 通讯(3) 在输入栏输入相应权限的口令,按“Enter”键确认;(4) 若权限口令输入正确,则可进行此权限级别的参数或口令的修改;否则,系统会提示“输入口令不正确”。(1) 输入正确的权限口令后,按“修改口令”对应功能键;(2) 在编辑框输入新口令,按“Enter”键;(3) 再次输入修改后的口令,按“Enter”键再次确认;(4) 当核对正确后,权限口令修改成功,否则会显示出错信息,权 限口令不变。网络 注意:默认情况下,网络是关闭的,必须通过设置参数【000050】。 网络传输支持两种方式:(1) 网络共享盘:通过 windows 系统网络共享直接实现文件访问; 注:前提:window 中存在用户 administrator,并且密码为空。 a) 在 windows 端设置共享文件夹; 在winxp设置共享文件夹右键选中文件夹→属性→共享→勾选在网络上共享这个文 件夹→共享名输入→勾选允许网络用户更改我的文件→应 用→确定。293
4. 设置HNC-818 数控系统用户说明书   在win7设置共享文件夹 右键点击共享目录→属性→安全→编辑,在“组或用户”增加 Everyone,设置 Everyone 的权限为完全控制;右键点击共享目录→属性→共享→网络和共享中心,设置 网络发现,以及密码保护共享;           294
HNC-818 数控系统用户说明书4. 设置  (2)b) 按“设置→参数→通讯”,移动光标选择网盘映射类型; c) 按“Enter”键,选择“共享盘”方式;  注意:不支持通过网络共享功能,向共享盘拷贝粘贴文件。d) 光标移至服务器 IP 地址,按“Enter”键,输入共享文件夹 所在的PC机的IP号;e) 光标移至本机 IP 地址,按“Enter”键,输入当前数控装置 的IP地址;f) 光标移至服务器根目录,按“Enter”键,输入 PC 机上的共 享文件夹名;g) 按“网络连接”键,系统将提示“网络已连接”;h) 文件下载:程序→选择→NET→右方向键→复制→左方向 键→CF 卡/U 盘/系统盘→粘贴→提示:粘贴成功!此时文 件下载成功。  注意:共享网盘不支持文件上传功能。FTP 服务(数控系统为客户端),需安装第三方软件作为 FTP 服 务器。a) PC 端安装 SERVER-U(V7.3.0.0),具体设置请参照 SERVER-U 官方说明书;如下图所示,用户属性中输入用 户名,密码和数控装置上的服务器登入密码一致,根目录 选中需要上传下载的文件夹路径,再切换到目录访问;295
4. 设置HNC-818 数控系统用户说明书  b) 按“设置→参数→通讯”,移动光标选择网盘映射类型; c) 按“Enter”键,选择“FTP”方式;d) 光标移至服务器 IP 地 址,按“Enter”键,输入安装了 serve-u 的PC机的IP号;e) 光标移至服务器端口号,按“Enter”键,输入 21;f) 光标移至本机 IP 地址,按“Enter”键,输入数控装置的 IP地址,不应该与局域网中的其他 IP 号重号冲突;g) 服务器登入账号、登入密码以及服务器根目录名为 serve-u上的用户信息;h) 按“网络连接”键,系统将提示“网络已连接”;i) 文件下载:程序→选择→NET→右方向键→复制→左方向 键→CF 卡/U 盘/系统盘→粘贴→提示:粘贴成功!此时文 件下载成功。j) 文件上传:CF 卡/U 盘/系统盘→右方向键→复制→NET→ 粘贴→提示:粘贴成功!此时文件上传成功。 296
HNC-818 数控系统用户说明书4. 设置 4.5.8 系统升级 注意(1) 此功能仅限于数控厂家、以及管理员。 (2) 关于软件升级后,加载断点的操作:a) 用户不得使用升级前的断点文件;b) 用户加工完后再升级,如果升级后使用升级前的断点文件,会造成死机等各种问题; (3) 升级过程中,禁止断电。(1) 按“设置→参数→系统升级”对应功能键,进入系统升级设置 界面;注意 1:用户按 Alt+C、Alt+V 进行复制粘贴操作。注意 2:用户只能在“CF 卡”目录里,按“Del”键进行删除 BTF 包的操作。操作步骤 297
4. 设置HNC-818 数控系统用户说明书 (2) 使用光标键选择升级文件,按“Enter”键,进入以下界面;注意:参数升级只针对调试人员使用,在参数结构文件发生改 变后,在对参数进行一次升级。(3) 用户可以使用光标键选择升级类型以及系统备份; 注意:系统备份的默认目录为“CF 卡”目录。(4) 用户可以按“Y”,再次按“Enter”确认升级操作;或者按“N”, 再次按“Enter”取消升级操作。  298
HNC-818 数控系统用户说明书5. 程序编辑与管理 5 程序编辑与管理   本章主要介绍,在程序主菜单下,可以对零件程序进行编辑、存储 等操作。 程序选择  程序编辑  任意行  程序校验  停止运行  重运行299
5. 程序编辑与管理HNC-818 数控系统用户说明书 5.1 程序选择 5.1.1 选择文件程序类型按程序来源分类,程序分为内存程序与交换区程序: 内存程序:程序一次性载入内存中,选中执行时直接从内存中 读取; 交换区程序:程序选中执行时将其载入交换区,从而支持超大 程序的运行;内存程序最大行数为 120000 行,超过该行数限制的程序将被识别为 交换区程序。如果程序内存已满,则即使程序总行数小于 120000 行 也将被识别为交换区程序;如果程序内存已满,则不允许前台新建程序,后台新建程序将被识 别为交换区程序;(1) 由于系统交换区只有 1 个,因此在多通道系统中同一时刻只允 许运行一个交换区程序;(2) 交换区程序不允许进行前台编辑; (3) U 盘程序类型只能是交换区程序;在程序主菜单下按“选择”对应功能键,将出现如下图所示的界面。选择文件的操作方法: 注意          300
HNC-818 数控系统用户说明书5. 程序编辑与管理 (1) 如上图所示,用“▲”和“▼”选择存储器类型(系统盘、U 盘、CF 卡),也可用“Enter”键查看所选存储器的子目录。(2) 用光标键“►”切换至程序文件列表;(3) 用“▲”和“▼”选择程序文件;(4) 按“Enter”键,即可将该程序文件选中并调入加工缓冲区; (5) 如果被选程序文件是只读 G 代码文件,则有[R]标识。(1) 如果用户没有选择,系统指向上次存放在加工缓冲区的一个加 工程序;(2) 程序文件名一般是由字母“O”开头,后跟四个(或多个)数字 或字母组成,系统缺省认为程序文件名是由 O 开头的;(3) HNC-818 系统支持的文件名长度为 8+3 格式:文件名由 1~8 个 字母或数字组成,再加上扩展名(0~3 个字母或数字组成),如 “MyPart.001”、“O1234”等。(1) 使用光标键选择目录“U 盘”标识符; (2) 按“确认”键加载 U 盘;(3) 按“删除”键卸载 U 盘。拔掉 U 盘前应先卸载操作,以免造成不必要的问题。后台编辑就是在系统进行加工操作的同时,用户也可以对其他程序 文件进行编辑工作。(1) 使用章节 5.1.1 的方法,选择加工程序;(2) 按“后台编辑”键,则进入编辑状态。具体操作与编辑相仿,这里不再详述,参见章节 5.2。后台新建就是在加工的同时,也可以创建新的文件。 (1) 按“程序→选择→后台编辑→后台新建”键; 注意U 盘的加载与卸载注意5.1.2 后台编辑 后台编辑后台新建301
5. 程序编辑与管理HNC-818 数控系统用户说明书 5.1.3 固定循环 操作步骤注意5.1.4 复制与粘贴文件 操作步骤5.1.5 查找文件 操作步骤5.1.6 文件排序 操作步骤5.1.7 G 代码加密 操作步骤302(2) 输入文件名;(3) 按“Enter”键后,即可编辑文件。(1) 按“程序→选择→固定循环”键,系统显示固定循环文件; (2) 使用光标键选择文件;(3) 按“Enter”确认载入文件。 此功能只限于机床厂家、数控厂家以及管理员。使用复制粘贴功能,可以将某个文件拷贝到指定路径。 (1) 在“程序→选择”子菜单下,选择需要复制的文件; (2) 按“复制”对应功能键;(3) 选择目的文件夹(注意:必须是不同的目录);(4) 按“粘贴”对应功能键,完成拷贝文件的工作根据输入的文件名,查找相应的文件。(1) 按“程序→选择→查找”键;(2) 输入搜索的文件名,再按“Enter”键,系统高亮显示文件;文件可以按时间/名称进行排序。(1) 按“程序→选择→名称排序”,则文件列表按名称排序; (2) 按“程序→选择→时间排序”,则文件列表按时间排序;(1) 按“设置→参数→系统参数→分类→机床用户参数”;
HNC-818 数控系统用户说明书5. 程序编辑与管理 光标选择参数 010299——G 代码文件密钥,按“Enter”键,输入 G 代码文件密钥; 再次按“Enter”键确认操作;按“保存”键,并重启系统;在 PC 端运行 G 代码文件加密软件,如下图所示;加密:点击“浏览”键,选择 G 代码文件,输入上述的 G 代码 文件密钥,再点击“加密”,系统生成一个加密的 G 代码文件; 密文只读:加密后的文件不能修改;  密文可写:加密后的文件可编辑;  密文不显:系统不显示密文内容;解密:点击“浏览”键,选择加密的 G 代码文件,输入上述的 G 代码文件密钥,再点“解密”。 (2)(3) (4) (5) (6)(7) 303
5. 程序编辑与管理 HNC-818 数控系统用户说明书 G 代码加密分类表    [G 代码密文密码匹配]  显示功能 编辑功能  运行功能 密文不显  空 不支持 可运行 密文可写  可浏览 可编辑 可运行 密文只读  可浏览 不支持  可运行       [G 代码密文密码不匹配]  显示功能 编辑功能  运行功能 密文不显  空 不支持 无法运行 密文可写  乱码 不支持 无法运行 密文只读  乱码 不支持  无法运行    304
HNC-818 数控系统用户说明书5. 程序编辑与管理 5.2 程序编辑 5.2.1 编辑文件系统加工缓冲区已存在程序系统加工缓冲区不存在程序快捷键 用户按“程序→编辑”对应功能键,即可编辑当前载入的文件。 用户按“程序→编辑”对应功能键,系统自动新建一个文件, 用户按“Enter”键后,即可编写新建的加工程序。- Del:删除光标后的一个字符,光标位置不变,余下的字符左移 一个字符位置;- Pgup:使编辑程序向程序头滚动一屏,光标位置不变,如果到 了程序头,则光标移到文件首行的第一个字符;- Pgdn:使编辑程序向程序尾滚动一屏,光标位置不变,如果到 了程序尾,则光标移到文件末行的第一个字符;- BS:删除光标前的一个字符,光标向前移动一个字符位置,余 下的字符左移一个字符位置;- ◄:使光标左移一个字符位置; - ►:使光标右移一个字符位置; - ▲:使光标向上移一行;- ▼:使光标向下移一行;- ALT+B:定义块首; - ALT+E:定义块尾; - ALT+D:块删除; - ALT+X:剪切;- ALT+C:复制;- ALT+V:粘贴;- ALT+F:查找;- ALT+N:查找下一个; 305
5. 程序编辑与管理HNC-818 数控系统用户说明书 注意5.2.2 新建文件 操作步骤注意5.2.3 保存文件 操作步骤注意5.2.4 另存文件 操作步骤5.2.5 块操作 操作步骤- ALT+R:替换;- ALT+L:行删除;- ALT+H:文件首;- ALT+T:文件尾; 用户对文件进行编辑操作后,就必须重运行文件,否则后果自负。(1) 按“程序→编辑→新建”对应功能键;(2) 输入文件名后,按“Enter”键确认后,就可编辑新文件了。 (1) 新建程序文件的缺省目录为系统盘的 prog 目录;(2) 新建文件名不能和已存在的文件名相同。(1) 按“程序→编辑→保存”对应功能键,系统则完成保存文件的 工作。程序为只读文件时,按“保存”键后,系统会提示“保存文件失败”, 此时只能使用“另存为”功能。(1) 按“程序→编辑→另存为”对应功能键;(2) 使用光标键选择存放的目标文件夹;(3) 按“►”键,切换到输入框,输入文件名;(4) 按“Enter”键,用户则可继续进行编辑文件的操作。(1) 按“程序→编辑→块操作”对应功能键;(2) 此部分的操作与章节 5.2.1 所述的快捷键作用相同。306
HNC-818 数控系统用户说明书5. 程序编辑与管理 5.2.6 查找字符串 操作步骤5.2.7 替换 操作步骤根据输入的文件名,查找相应的文件。(1) 按“程序→编辑→查找”键;(2) 输入搜索的关键字,再按“Enter”键,系统高亮显示关键字; (3) 再按“继续查找”按键,系统显示搜索的下一个关键字。(1) 按“程序→编辑→替换”,用户输入被替换的字符串; (2) 按“Enter”键,以确认输入;(3) 再输入用来替换的字符串;(4) 按“Enter”键,系统询问是否全部替换:4.1) 用户按“Y”键,则替换所有字符串;4.2) 用户按“N”键,系统则询问是否替换当前搜索到的字符串;a. 按“Y”键,则替换当前搜索到的字符串;b. 按“N”键,则取消替换的操作。此功能仅限于机床用户、数控厂家、以及管理员。(1) 将文件载入系统加工缓冲区(参见章节 5.1.1);(2) 按“程序→编辑→编辑允许”或“程序→编辑→编辑禁止”对应功能键。- 编辑禁止:只能查看加工程序代码,不能对程序进行修改; - 编辑允许:可以对加工程序进行编辑操作。5.2.8 改变文件属性 注意操作步骤307
5. 程序编辑与管理HNC-818 数控系统用户说明书 5.3 程序管理 5.3.1 删除文件操作步骤注意5.3.2 删除全部文件 操作步骤注意5.3.3 复制与粘贴文件 操作步骤5.3.4 查找文件 操作步骤(1)(2)按“程序→程序管理”,用“▲”和“▼”键移动光标条选中要 删除的程序文件;按“删除”对应功能键,系统出现如下图所示,按“Y”键(或 “ENTER”键)将选中程序文件从当前存储器上删除,按“N”则 取消删除操作。 308删除的程序文件不可恢复。(1) 按“程序→程序管理”,选择文件盘符;(2) 按“删除全部”,系统询问“确定要删除所有文件吗?(Y/N)”;a) 按“Y”键,则删除所选盘符的所有文件; b) 按“N”键,则取消操作。此功能仅限于机床用户、数控厂家、以及管理员。使用复制粘贴功能,可以将某个文件拷贝到指定路径。(1) 在“程序→程序管理”子菜单下,选择需要复制的文件; (2) 按“复制”对应功能键;(3) 选择目的文件夹(注意:必须是不同的目录);(4) 按“粘贴”对应功能键,完成拷贝文件的工作。根据输入的文件名,查找相应的文件。 (1) 按“程序→程序管理→查找”键;
HNC-818 数控系统用户说明书5.3.5 更改文件名 操作步骤注意5.3.6 文件排序 操作步骤5.3.7 新建目录 操作步骤5. 程序编辑与管理 (2) 输入搜索的文件名,再按“Enter”键,系统高亮显示文件;(1) 按“程序→程序管理→重命名”键; (2) 在编辑框中,输入新的文件名;(3) 按“Enter”键以确认操作。用户不能修改正在加工的程序的文件名。文件可以按时间/名称进行排序。(1) 按“程序→选择→名称排序”,则文件列表按名称排序; (2) 按“程序→选择→时间排序”,则文件列表按时间排序;用户可以在不同盘符建立子目录。(1) 按“程序→程序管理”,系统显示文件列表;(2) 使用光标键选择盘符“系统盘”、“U 盘”,或“CF 卡”; (3) 用户也可以按“Enter”键,则可以在子目录中再新建目录; (4) 按“新建目录”键,输入目录名;(5) 再次按“Enter”键确认操作。 309
5. 程序编辑与管理HNC-818 数控系统用户说明书 5.4 任意行 5.4.1 指定行号操作步骤(1) 按机床控制面板上的“进给保持”按键(指示灯亮),系统处 于进给保持状态;(2) 按“程序→任意行→指定行号”对应功能键,系统给出如下图 所示的编辑框,输入开始运行行的行号;(3) 按“Enter”键确认操作;(4) 按机床控制面板上“循环启动”键,程序从指定行号开始运行。(1) 按机床控制面板上的“进给保持”按键(指示灯亮),系统处 于进给保持状态;(2) 按“程序→任意行→指定 N 号”对应功能键,系统给出如下图 所示的编辑框,输入开始运行行的行号;(3) 按“Enter”键确认操作;(4) 按机床控制面板上“循环启动”键,程序从指定行号开始运行。  5.4.2 指定N号 操作步骤 注意 此功能必须满足以下条件才能使用: (1) G 代码文件中必须还有 N 号;(2) 系统可显示 G 代码总行数;     310
HNC-818 数控系统用户说明书5. 程序编辑与管理 5.4.3 蓝色行 操作步骤5.4.4 红色行 操作步骤(1) 按机床控制面板上的“进给保持”按键(指示灯亮),系统处 于进给保持状态;(2) 按“程序→任意行→蓝色行”对应功能键;(3) 按机床控制面板上“循环启动”键,程序从当前行开始运行。(1) 按机床控制面板上的“进给保持”按键(指示灯亮),系统处 于进给保持状态;(2) 用“▲”、“▼”、“PgUp”和“PgDn”键移动光标(红色)到要 开始的运行行;(3) 按“程序→任意行→红色行”对应功能键;(4) 按机床控制面板上“循环启动”键,程序从红色行开始运行。注意 对于上述的任意行操作,用户不能将光标指定在子程序部分,否则 后果自负。5.4.5 查找操作步骤 通过查找关键字,指定系统从关键字所在行运行。 (1) 按“程序→任意行→查找”对应功能键;(2) 输入关键字,按“Enter”键,系统高亮显示搜索的字符串; (3) 用户可以按“继续查找”,搜索下一个字符串;(4) 再次按“Enter”键,系统光标指向关键字所在的行;(5) 按机床控制面板上“循环启动”键,程序从指定行号开始运行。311
5. 程序编辑与管理HNC-818 数控系统用户说明书 5.5 程序校验 操作步骤程序校验用于对调入加工缓冲区的程序文件进行校验,并提示可能 的错误。建议:对于未在机床上运行的新程序,在调入后最好先进行校验运 行,正确无误后再启动自动运行。(1) 调入要校验的加工程序(程序→选择);(2) 按机床控制面板上的“自动”或“单段”按键进入程序 运行方式;(3) 在程序菜单下,按“校验”对应功能键,此时系统操作界面的 工作方式显示改为“自动校验”;(4) 按机床控制面板上的“循环启动”按键,程序校验开始;(5) 若程序正确,校验完后,光标将返回到程序头,且系统操作界 面的工作方式显示改为“自动”或“单段”;若程序有错,命令 行将提示程序的哪一行有错。(1) 校验运行时,机床不动作;(2) 为确保加工程序正确无误,请选择不同的图形显示方式来观察 校验运行的结果(请参考第七章)。注意312
HNC-818 数控系统用户说明书5. 程序编辑与管理 5.6 停止运行 操作步骤在程序运行的过程中,需要暂停运行:(1) 按“程序→停止”对应功能键,系统提示“已暂停加工,取消 当前运行程序(Y/N)?”;(2) 如果用户按“N”键则暂停程序运行,并保留当前运行程序的模 态信息(暂停运行后,可按循环启动键从暂停处重新启动运行);(3) 如果用户按“Y”键则停止程序运行,并卸载当前运行程序的模 态信息(停止运行后,只有选择程序后,重新启动运行)。 313
5. 程序编辑与管理HNC-818 数控系统用户说明书 5.7 重运行 操作步骤在中止当前加工程序后,希望程序重新开始运行:(1) 按“程序→重运行”对应功能键,系统提示“是否重新开始执 行(Y/N)?”;(2) 如果按“N”键则取消重新运行;(3) 如果按“Y”键则光标将返回到程序头,再按机床控制面板上的 “循环启动”按键,从程序首行开始重新运行。 314
HNC-818 数控系统用户说明书6. 运行控制 6 运行控制   本章主要介绍: 启动、暂停、中止 空运行 程序跳段 选择停 单段运行 加工断点保存与恢复  运行时干预315
6. 运行控制HNC-818 数控系统用户说明书 6.1 启动、暂停、中止 6.1.1 启动自动运行6.1.2 暂停运行6.1.3 中止运行 操作步骤系统调入零件加工程序,经校验无误后,可正式启动运行:(1) 按一下机床控制面板上的“自动”按键(指示灯亮),进入程序运行方式;(2) 按一下机床控制面板上的“循环启动”按键(指示灯亮),机床 开始自动运行调入的零件加工程序。在程序运行的过程中,需要暂停运行,可按下述步骤操作:(1) 在程序运行的任何位置,按一下机床控制面板上的“进给保持”按键(指示灯亮),系统处于进给保持状态;(2) 再按机床控制面板上的“循环启动”按键(指示灯亮),机床又 开始自动运行载入的零件加工程序。在程序运行的过程中,需要中止运行,可按下述步骤操作:(1) 在程序运行的任何位置,按一下机床控制面板上的“进给保持” 按键(指示灯亮),系统处于进给保持状态;(2) 按下机床控制面板上的“手动”键,将机床的 M、S 功能关掉;(3) 此时如要退出系统,可按下机床控制面板上的“急停”键,中止程序的运行;(4) 此时如要中止当前程序的运行,又不退出系统,可按下“程序 →重运行”对应功能键,重新装入程序。         316
HNC-818 数控系统用户说明书6. 运行控制 6.2 空运行 注意此功能对螺纹切削无效。只允许在非自动和非单段方式下才能激活空运行。按一下机床控制面板上的“空运行”按键(指示灯亮),CNC 处于空 运行状态。程序中编制的进给速率被忽略,坐标轴以最大快移速度 移动。空运行不做实际切削,目的在于确认切削路径及程序。在实际切削时,应关闭此功能,否则可能会造成危险。      317
6. 运行控制HNC-818 数控系统用户说明书 6.3 程序跳段     如果在程序中使用了跳段符号“/”,当按下该键后,程序运行到有该 符号标定的程序段,即跳过不执行该段程序;解除该键,则跳段功 能无效。 318
HNC-818 数控系统用户说明书6. 运行控制 6.4 选择停     如果程序中使用了 M01 辅助指令,按下该键后,程序运行到 M01 指令即停止,再按“循环启动”键,程序段继续运行,解除该键, 则 M01 辅助指令功能无效。 319
6. 运行控制HNC-818 数控系统用户说明书 6.5 单段运行     按一下机床控制面板上的“单段”按键(指示灯亮),系统处于单段 自动运行方式,程序控制将逐段执行:(1) 按一下“循环启动”按键,运行一程序段,机床运动轴减速停 止,刀具停止运行;(2) 再按一下“循环启动”按键,又执行下一程序段,执行完了后 又再次停止。 320
HNC-818 数控系统用户说明书 6. 运行控制 6.6 加工断点保存与恢复一些大零件,其加工时间一般都会超过一个工作日,有时甚至需要 好几天。如果能在零件加工一段时间后,保存断点(让系统记住此 时的各种状态),关断电源;并在隔一段时间后,打开电源,恢复断 点(让系统恢复上次中断加工时的状态),从而继续加工,可为用户 提供极大的方便。 6.6.1 保存断点操作步骤 (1)按机床控制面板上的“进给保持”按键(指示灯亮),系统处 于进给保持状态;(2) 按“程序→断点”对应功能键,如下图所示;(3) 利用光标键“▲”、“▼”选择需要存放的盘符(按“确认”键, 可以查看所选盘符的文件夹);(4) 按“保存”键,系统将自动建立一个名为当前加工程序名的断 点文件,用户也可将该文件名改为其它名字;(5) 按“Enter”键以确认操作。      321
6. 运行控制6.6.2 载入断点 操作步骤HNC-818 数控系统用户说明书(1) 如果在保存断点后,关断了系统电源,则上电后首先应进行回 参考点操作,否则直接按“程序→断点”键;(2) 利用光标键选择目标文件所在的目录、切换到文件列表,选择 需要载入的断点文件;(3) 按“载入”对应功能键,系统会根据断点文件中的信息,恢复 中断程序运行时的状态。(1) 按“程序→断点”键,使用光标键选择断点文件; (2) 按“删除”键,出现如下提示(3) 按“Y”键(或“ENTER”键)将选中的断点文件从当前存储 器上删除,按“N”则取消删除操作。注意:删除的程序文件不可恢复。       6.6.3 删除断点 操作步骤 322
HNC-818 数控系统用户说明书6. 运行控制 6.6.4 返回断点操作步骤在保存断点后,如果对某些坐标轴,还进行过移动操作,那么在从 断点处继续加工之前,必须先重新定位至加工断点。(1) 手动移动坐标轴到断点位置附近,并确保在机床自动返回断点 时不发生碰撞;(2) 按“MDI→返回断点”对应功能键,系统显示断点文件信息;(3) 按“循环启动”键启动运行,系统将移动刀具到断点位置;(4) 定位至加工断点后,按机床控制面板上的“循环启动”键即可 继续从断点处加工了。在返回断点之前,必须载入相应的零件程序,否则系统会提示:不 能成功恢复断点。 注意323
6. 运行控制6.7 运行时干预6.7.1 进给速度修调6.7.2 快移速度修调6.7.3 主轴修调6.7.4 机床锁住注意HNC-818 数控系统用户说明书在自动方式或 MDI 运行方式下,当 F 代码编程的进给速度偏高或偏 低时,可旋转进给修调波段开关,修调程序中编制的进给速度。修 调范围为 0%-120%。在手动连续进给方式下,此波段开关可调节手动进给速率。根据不同的控制面板,有两种快移修调方式:(1) 在自动方式或 MDI 运行方式下,旋转快移修调波段开关,修调 程序中编制的快移速度。修调范围为 0%-100%。(2) 在自动方式或 MDI 运行方式下,按下相应的快移修调倍率按钮。主轴正转及反转的速度可通过主轴修调调节:旋转主轴修调波段开关,倍率的范围为 50%和 120%之间;机械齿 轮换档时,主轴速度不能修调。禁止机床坐标轴动作。在手动方式下按一下“机床锁住”按键(指示灯亮),此时在自动方 式下运行程序,可模拟程序运行,显示屏上的坐标轴位置信息变化, 但不输出伺服轴的移动指令,所以机床停止不动。这个功能用于校 验程序。(1) 即便是 G28、G29 功能,刀具不运动到参考点;                      324
HNC-818 数控系统用户说明书 6. 运行控制 (2) 在自动运行过程中,按“机床锁住”按键,机床锁住无效; (3) 在自动运行过程中,只在运行结束时,方可解除机床锁住。 (4) 每次执行此功能后,须再次进行回参考点操作。325
7. 位置信息HNC-818 数控系统用户说明书 7 位置信息   326本章主要介绍: (1) 坐标显示 (2) 正文显示 (3) 图形显示 (4) 联合显示
HNC-818 数控系统用户说明书7. 位置信息 7.1 坐标显示           注意在程序运行过程中,按“位置→坐标”,可查看当前加工程序在不同 示值类型的位置信息,如下图:用户可以使用“设置→参数→显示参数”按键,选择显示的示值类 型(参见章节 4.5.2)。327
7. 位置信息HNC-818 数控系统用户说明书 7.2 正文显示 操作步骤在程序运行过程中,按“位置→正文”,可查看程序运行时的 G 代码、 坐标系信息、M 指令及进给速度 F 等,如下图所示:将 G 代码显示方式设为 3,在程序中的行号显示只能显示 9999(具 体请参见《HNC-8 参数说明书》)。      注意328
HNC-818 数控系统用户说明书7. 位置信息 7.3 图形显示 7.3.1 T 系列      图形操作在程序运行过程中,按“位置→图形”,模拟显示加工过程:用户可以使用快捷键改变图形的显示方式: [长度加减]:按“►”或“◄”键调整长度; “►”:增加毛坯长度; “◄”:缩短毛坯长度; [外径加减]:使用“▲”和“▼”调整外径; “▲”:增加毛坯外径; “▼”:减少毛坯外径; [图形缩放]:按“PgUp”或“PgDn”键; PgUp:放大视图;  PgDn:缩小视图;在程序运行过程中,不能对图形进行设置操作。注意329
7. 位置信息 毛坯设置HNC-818 数控系统用户说明书 (1) 按“位置→图形参数”对应功能键,进入图形设置界面;(2) 按“▲”和“▼”选择图形参数:毛坯尺寸;‐ 【外侧长度】的输入范围为:1~20000毫米‐ 【外侧直径】的输入范围为:1~20000毫米‐ 【内侧直径】的输入范围为:0~20000毫米‐ 【零点位置】的输入范围为:-20000~1000毫米    其中内端面是定义的图形模拟显示的左端面相对程序零点    的距离。长度/外径之比范围:小于10000;(3) 按“Enter”键进入编辑状态,用户可以在编辑框中输入相应的数据;(4) 再次按“Enter”键,结束编辑操作;      330
HNC-818 数控系统用户说明书7. 位置信息 7.3.2 M 系列     坐标系在程序运行过程中,按“位置→图形”,模拟显示加工过程:(1) 设置坐标系(参见章节 4.3.2),例如 G54 X10 Y20 Z30;(2) 按“位置→图形→坐标系”,选择坐标系类型,按“G54”;(3) 系统右下方显示图形中心 XYZ 的数据;(1) 按“位置→图形→图形设置”,用户则可以手动设置图形中心, 显示比例,以及视角;(2) 移动系统光标,选择需要设置的选项;(3) 按“Enter”键,进入编辑状态;(4) 再次按“Enter”键,确认操作。(1) 按“位置→图形→定中心”;(2) 移动光标,则用户可以手动设置图形中心;注意:在视角 XY,XZ,YZ 情况下,可以设置。 图形设置定中心331
7. 位置信息 设置还原图形显示方式HNC-818 数控系统用户说明书 注意(2) 系统提示“确认还原设置?(Y/N)”;(3) 用户可以按“Y”,还原系统操作;用户也可以按“N”,取消操 作。用户可以使用快捷键改变图形的显示方式: [切换视图]:用户可以按“1”、“2”、“3”、“4”,“5”键分别显 示不同的视图; 1:XYZ视图 2:XY视图 3:YZ视图 4:XZ视图 5:同时显示上述四种视图; [图形缩放]:按“PgUp”,“PgDn”键;  PgUp:放大视图; PgDn:缩小视图; [图形旋转]:按“+”,“-”,“►”,“◄”,“▲”和“▼”;  “+”、“-”:以Y轴为中心旋转; “►”、“◄”:以Z轴为中心旋转; “▲”、“▼”:以X轴为中心旋转;在程序运行过程中,不能对图形进行设置操作。332(1) 按“位置→图形→设置还原”;
HNC-818 数控系统用户说明书 7. 位置信息 7.4 联合显示操作步骤 在程序运行过程中,按“位置→联合”,显示八种位置信息。      333
8. 诊断HNC-818 数控系统用户说明书 8 诊断   334本章主要介绍:  报警显示  故障历史  梯图监控  示波器 输入输出  状态显示  宏变量  加工信息  版本
HNC-818 数控系统用户说明书8. 诊断 8.1 报警显示     如果在系统启动或加工过程中出现了错误(即系统操作界面的标题 栏上“运行正常”变为“出错”),可用诊断功能诊断出错原因。(1) 按“诊断→报警显示”对应功能键;(2) 用▲、▼、Pgup 和 Pgdn 查看报警信息;  335
8. 诊断HNC-818 数控系统用户说明书 8.2 报警历史 操作步骤(1) 按“诊断→报警历史”键,图形显示窗口将显示系统以前的错 误;(2) 用▲、▼、Pgup、Pgdn 查看错误历史;  336
HNC-818 数控系统用户说明书8. 诊断 8.3 梯图监控 8.3.1 梯图诊断操作步骤(1) 按“诊断→梯图监控→梯图诊断”,即可查看每个变量的值;(2) 默认情况下,系统显示的值以“十进制”表示,用户可以按“十 六进制”对应的功能键,则系统显示的值以“十六进制”表示;(3) 使用光标键选择元件;(4) 按“禁止”或“允许”对应的功能键,屏蔽或激活元件;(5) 按“恢复”对应的功能键,可撤消上述屏蔽或激活元件的操作;(6) 用户可以使用“查找”功能,输入元件名,按“Enter”键,即 可查找元件;用户也可以按“向上查找”或“向下查找”键, 查找下一个同名的元件。 8.3.2 梯图修改注意 此功能仅限于机床用户、数控厂家、以及管理员。查找修改(1) 用户按“诊断→梯图修改→查找”功能,输入元件名,按“Enter” 键,即可查找元件;(2) 用户也可以按“向上查找”或“向下查找”键,查找下一个同 名的元件。(1) 按“诊断→梯图监控→修改”;(2) 使用光标键选择元件,按“Enter”键,系统则进入编辑状态; (3) 用户可以在编辑框输入元件值;(4) 再次按“Enter”键,完成编辑操作;(5) 用户也可按“修改”菜单对应的功能键,进行新建元件的操作; 直线:插入直线; 竖线:插入竖线; 删除元件:删除元件;  删除竖线:删除竖线;337
8. 诊断HNC-818 数控系统用户说明书 命令 常开:常开触点;  常闭:常闭触点;  逻辑输出 取反输出 功能模块(用户可以按元件的首写字母,可直接选择元件) 注意:关于元件的具体含义,参见《华中 8 型 PLC 编程说明书》。(1) 按“诊断→梯图监控→命令”;(2) 用户可以通过按以下按键,进行编辑梯形图; 选择:选择光标所在行; 删除:删除光标所在行; 移动:移动用户所选的元件; 复制:复制用户所选的元件; 粘贴:粘贴用户所选的元件; 插入行:在光标所在行之前插入一行;  增加行:在光标所在行之后插入一行;(1) 按“诊断→梯图监控→载入”,系统则载入当前梯形图信息;(1) 按“诊断→梯图监控→放弃”,可撤消对梯形图的编辑操作;(1) 按“诊断→梯图监控→保存”,可保存对梯形图的编辑操作;载入放弃保存338
HNC-818 数控系统用户说明书8. 诊断 8.3.3 手动调用子程序 操作步骤用户在 PLC 中编写如下梯图:表示调用子程序的外部输入信号; 100:表示程序名 O100。手动调用子程序功能,系统处于自动模式,并且需要一个触发信号。当输入 X484.5 信号有效时,用户再按自动循环键,系统则调用 O100 的子程序。   EVENT100           注意举例F2564.0 触发信号自动 F2564.0 X484.5自动  EVENT100       339
8. 诊断 HNC-818 数控系统用户说明书 8.4 输入输出操作步骤 (1) 按“诊断→输入输出”对应功能键;(2) 用“PgUp”和“PgDn”键选择查看 X、Y 寄存器的状态。      340
HNC-818 数控系统用户说明书8. 诊断 8.5 状态显示 操作步骤(1) 按“诊断→状态显示”对应功能键;(2) 用“▲”和“▼”键选择需要查看的寄存器类型; X:机床输入到PMC; Y:PMC输出到机床; F:CNC输出到PMC; G:PMC输入到CNC; R:中间继电器状态显示;  B:断电保护数据显示;(3) 按“PgUp”和“PgDn”键进行翻页浏览。(4) 按“二进制”、“十进制”,或“十六进制”键,查看寄存器的值。 (5) 使用“查找”按键:精确查找某个寄存器的值。 用户可以分类查看“F 寄存器”,“G 寄存器”,分别按对应的功 能键或快捷键: 系统(Alt+S)  通道(Alt+C)  轴(Alt+A) 用户可以对“B寄存器”进行编辑操作; 注意341
8. 诊断HNC-818 数控系统用户说明书 8.6 宏变量 宏变量HNC-818 数控系统为用户配备了类似于高级语言的宏程序功能,用 户可以使用变量进行算术运算、逻辑运算和函数的混合运算,此外 宏程序还提供了循环语句、分支语句和子程序调用语句,适合编制 各种复杂的零件加工程序,减少乃至免除手工编程时进行繁琐的数 值计算。(1) 按“诊断→宏变量”相应的功能键,可以查看系统的宏变量;(2) 按“查找”相应的功能键,在编辑框输入宏变量的编号,按“确 认”键,即可搜索到。(1) 系统中每个宏变量的具体含义,参见本说明书的编程部分。 (2) 宏变量的取值范围:-2147483648 ~ 2147483648。(1) 按“设置→参数→数据管理→数据类型→自定义配置文件”;(2) 按“窗口切换→U 盘”,选择自定义配置文件,按“载入”,系 统载入文件;(3) 按“诊断→宏变量→用户宏”,系统显示宏变量号,宏变量名称, 宏变量值;(4) 光标选择宏变量值,按“Enter”键,可以对宏变量值进行修改; (5) 用户可以编写宏程序。 注意用户宏 342
HNC-818 数控系统用户说明书8. 诊断 8.7 伺服调整 8.7.1 速度环自动载入 G 代码(1) 按“诊断→伺服调整”键;(2) 如果在自动模式下进入“伺服调整”界面,系统会自动载入测试 G 代码,提示“测试代码已载入,请按循环启动开始采样”; (3) 如果是手动模式,则需要切换到自动模式后按复位键载入 G 代码;(4) 如果需要修改 G 代码,可以按“配置”键修改 G 代码,按“代 码预览”键浏览 G 代码(“配置”界面与“代码预览”界面相对 应);(5) 如果需要修改测试轴,可以按“Alt+方向键”选择轴; 注意:在循环启动开始采样之前,需要手动移动机床到安全位置。(1) 按“诊断→伺服调整”键,使用光标键选择“速度环”;(2) 在手动模式下移动机床到安全位置,然后切换到自动模式,按复位键载入测试 G 代码,按循环启动键开始测量;(3) 测量结束后,得到速度、加速度的测量波形,以及速度波动范 围。测量结果如下图所示:    采样     343
8. 诊断8.7.2 位置环 自动载入 G 代码HNC-818 数控系统用户说明书 (4) 按光标键“→”,可调整每个轴的参数,比如“速度比例增益”和“速度反馈滤波因子”等;(5) 按“Alt+方向键”可以选择轴,则可以对每个轴进行设置; (6) 用户可以反复调整参数,反复测量,以达到预期的效果(1) 按“诊断→伺服调整”键;(2) 如果在自动模式下进入“伺服调整”界面,系统会自动载入测试 G 代码,提示“测试代码已载入,请按循环启动开始采样”; (3) 如果是手动模式,则需要切换到自动模式后按复位键载入 G 代码;(4) 如果需要修改 G 代码,可以按“配置”键修改 G 代码,按“代 码预览”键浏览 G 代码(“配置”界面与“代码预览”界面相对 应);(5) 如果需要修改测试轴,可以按“Alt+方向键”选择轴; 注意:在循环启动开始采样之前,需要手动移动机床到安全位置。(1) 按“诊断→伺服调整”键,使用光标键选择“位置环”;(2) 在手动模式下移动机床到安全位置,然后切换到自动模式,按 复位键载入测试 G 代码,按循环启动键开始测量;    采样 344
HNC-818 数控系统用户说明书8. 诊断 (3) 按光标键“→”,可调整每个轴的参数,比如“位置比例增益”和“位置前馈增益”等;(4) 按“Alt+方向键”可以选择轴,则可以对每个轴进行设置; (5) 用户可以反复调整参数,反复测量,以达到预期的效果;(1) 按“诊断→伺服调整”键;(2) 如果在自动模式下进入“伺服调整”界面,系统会自动载入测试 G 代码,提示“测试代码已载入,请按循环启动开始采样”; (3) 如果是手动模式,则需要切换到自动模式后按复位键载入 G 代码;(4) 按“配置”按钮可以进入测试 G 代码配置界面。通过修改本界 面的各项参数,达到修改 G 代码的目的。修改完成后可以在“代 码预览”界面浏览生成的 G 代码。(5) 如果需要修改测试轴,可以按“Alt+方向键”选择轴;注意:在循环启动开始采样之前,需要手动移动机床到安全位 置。 8.7.3 圆度测试 自动载入 G 代码   345
8. 诊断 采样HNC-818 数控系统用户说明书 (1) 按“诊断→伺服调整”键,使用光标键选择“圆度测试”;(2) 按“采样开始”、循环启动键开始测量,测量结束后界面如下:(3) 按光标键“→”,可调整每个轴的参数;(4) 按“Alt+方向键”可以选择轴,则可以对每个轴进行设置;(5) 用户可以反复调整参数,反复测量,以达到预期的效果;(6) 按“应用”按钮,将系统自动计算出的补偿参数全部填到参数 列表中;(7) 用户可以按“诊断→伺服调整→放大”键,放大图形; (8) 用户可以按“诊断→伺服调整→缩小”键,缩小图形; (9) 用户可以按“诊断→伺服调整→还原”键,还原图形;(1) 按“诊断→伺服调整”键;(2) 如果在自动模式下进入“伺服调整”界面,系统会自动载入测试 G 代码,提示“测试代码已载入,请按循环启动开始采样”; (3) 如果是手动模式,则需要切换到自动模式后按复位键载入 G 代码;(4) 按“配置”按钮可以进入测试 G 代码配置界面。通过修改本界 面的各项参数,达到修改 G 代码的目的。修改完成后可以在“代 码预览”界面浏览生成的 G 代码。      8.7.4 刚性攻丝 自动载入 G 代码346
HNC-818 数控系统用户说明书8. 诊断    采样(5) 如果需要修改测试轴,可以按“Alt+方向键”选择轴; 注意:在循环启动开始采样之前,需要手动移动机床到安全位置。(1) 按“诊断→伺服调整”键,使用光标键选择“位置环”;(2) 在手动模式下移动机床到安全位置,然后切换到自动模式,按复位键载入测试 G 代码,按“采样开始”、循环启动键开始测量;(3) 按光标键“→”,可调整每个轴的参数;(4) 按“Alt+方向键”可以选择轴,则可以对每个轴进行设置; (5) 用户可以反复调整参数,反复测量,以达到预期的效果;     347
8. 诊断HNC-818 数控系统用户说明书 8.7.5 操作与设置图形操作用户可以对上述采样图形进行放大、缩小、改变颜色等操作。(1) 用户可以按“诊断→伺服调整→操作”键,查看图形;- “PgUp”和“PgDn”:选择图形的浏览方式:联合,图一, 图二;- “Alt+↑”或“Alt+↓”:在联合浏览方式下,可在图一与 图二之间选择;- 横轴放大:放大横轴;- 横轴缩小:缩小横轴;- 纵轴放大:放大纵轴;- 纵轴缩小:缩小纵轴;- 视窗放大:放大图形选择区域;- 视窗缩小:缩小图形选择区域;- 还原:还原图形初始比例;- Enter 键:放大视窗选定区域图形;用户可以改变系统显示的图形颜色。(1) 按“诊断→伺服调整→配置→颜色配置”键,下图为速度环图 形的颜色设置界面;颜色设置     348
HNC-818 数控系统用户说明书8. 诊断 导出保存(2) 按“Enter”键,选择背景色颜色;(3) 再次按“Enter”键以确认,随着背景色的改变,系统文字的颜  色、指令速度的颜色、实际速度的颜色、加速度的颜色会改变。用户可以按“诊断→伺服调整→导出”键,即可导出采样数据。用户可以按“诊断→伺服调整→保存”键,保存参数设置。349
8. 诊断8.8 加工信息 查看设置清零日志HNC-818 数控系统用户说明书(1) 按“诊断→加工信息→运行统计”键,则可查看加工信息;此功能仅限于机床用户、数控厂家、以及管理员。(1) 按“诊断→加工信息→预设”键,可设置加工信息; (2) 使用光标键,移动光标选择需设置的选项;(3) 按“Enter”键;此功能仅限于机床用户、数控厂家、以及管理员。(1) 按“诊断→加工信息→清零”键,则清除当前所有加工统计信 息;注意:用户在修改时间后手动清零加工统计时间相关数据,否则会 显示错误的统计数据。(1) 按“诊断→加工信息→日志”键,则显示系统的调试信息;(2) 使用光标键,移动光标选择日志类型;(3) 用户按“导出”键,导出日志文件;(4) 用户可以按“时间顺序”键,系统将按时间顺序排列日志记录。       350
HNC-818 数控系统用户说明书8. 诊断 8.9 版本 查询版本(1) 用户可以通过按“诊断→版本”键,查看系统版本信息。(1) 如上图所示,系统界面上高亮显示“注册”,用户可以按“Enter” 键,用户输入注册码。注意:大小写和中横线。      注册 (2) 再次按“Enter”键以确认。设置机床信息 注意:此功能仅对机床、数控厂家、管理员开放。(1) 用户按“ ”光标键,则光标跳至“机床型号”部分。(2) 用户按“Enter”键,输入机床型号等信息。  351
9. 用户使用与维护信息HNC-818 数控系统软件用户说明书 9 用户使用与维护信息   352本章主要介绍使用本系统的注意事项: - 环境条件- 接地- 供电条件- 风扇过滤网清尘- 长时间闲置后使用
HNC-818 数控系统用户说明书9. 用户使用与维护信息 9.1 环境条件 HNC-818 数控系统的运行环境条件如下表:    环境  条件  工作温度(C) 0~+45 不冻  温度变化 <1.1C/min  相对湿度 90%RH 或更低(不凝) 正常情况:75%或更小 短期(一个月内):最大为 95%  储存温度(C) -20~+60 不冻  储存湿度 不凝  周围环境 室内(不晒) 防腐,烧,雾,尘  高度 海平面以上最大 1000 m(2000 米)  振动(m/s) 10-60Hz 时,5.9(0.6G)或更低         353
9. 用户使用与维护信息HNC-818 数控系统用户说明书 9.2 接地 354在电气装置中,正确的接地是很重要的,其目的是:- 保护工作人员不受反常现象所引起的放电之伤害;- 保护电子设备不受机器本身及其附近的其他电子设备所产生的 干扰之影响,这种干扰可能会引起控制装置工作不正常。在安装机床时,必须提供可靠的接地,不能将电网中的中性线作为 接地线,否则可能造成人员的伤亡或设备损坏,也可能使设备不能 正常运行。
HNC-818 数控系统用户说明书 9. 用户使用与维护信息 9.3 供电条件 HNC-818 数控装置的供电电源由机床电气控制柜提供,机床供电电 源请参见机床安装说明书。355
9. 用户使用与维护信息HNC-818 数控系统用户说明书 9.4 风扇过滤网清尘 356风扇是数控装置通风散热的重要元件,为保证灰尘不至于随风扇进 入装置,在进风和出风口都设有过滤网。由于长时间使用,灰尘会逐渐堵塞过滤网,造成通风条件变差,严 重时会影响设备正常运行,使用者应定期清洗所有过滤网。一般情 况下建议每三个月清洗一次,环境条件较差时应缩短清洗周期。
HNC-818 数控系统用户说明书9. 用户使用与维护信息 9.5 长时间闲置后使用 数控装置长时间闲置后使用,首先应进行清尘、干燥处理,然后检 查数控装置的连线、接地情况,再通电一段时间,在确保系统无故 障后才能重新运行。357