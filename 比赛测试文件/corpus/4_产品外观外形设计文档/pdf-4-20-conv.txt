        设计开发数字技术 与应用    基于摄像头的智能汽车设计吴伟鸿(嘉兴学院机电工程学院 浙江嘉兴 314000)摘要: 智能汽车作为当今科技时代下的新兴产物, 集中运用了计算机、现代传感、信息融合、自动控制、人工智能及通讯等现代科学技术, 是未 来汽车发展的重要方向。本文详细介绍了基于摄像头传感器的智能竞速汽车控制器的设计方案,分别介绍了智能车的硬件组成、路径的检测识别方 法和智能车的控制策略。利用摄像头传感器采集、识别道路信息,规划最优路径,采用PID控制算法控制电机和舵机实现自动控制。关键词:摄像头 智能汽车 设计方案中图分类号:TP391.4 文献标识码:A本设计是基于MK60DN512ZVLL10单片机开发实现的,该系统 采用摄像头采集、识别道路两旁或者中央的引导线,在此基础上利 用合理闭环的算法控制智能车运动,从而实现智能车快速稳定的寻 迹行驶。1 智能车整体结构的选型与设计1.1 图像传感器的选择图像传感器,即数字摄像头。目前市场主流的两种摄像头传感 器:以金属氧化物半导体元件为感光材料的CMOS摄像头和以电荷 耦合元件为感光材料的CCD摄像头。综合两种摄像头解析度、灵敏 度、成本、功耗比、模块电路、体积、重量,CMOS摄像头可以满足于4 米/秒速度以下智能车行驶,并且CMOS摄像头功耗低,工作电压只 需3.3V-7V,完全可以由智能车稳压后得到,稳定经济,所以选择 CMOS摄像头中的OV7725摄像头。1.2 起跑线检测传感器选择起跑用的是发车灯塔控制方式,发车灯塔不仅发出起跑信号, 而且发出终点信号。我们使用基于使用HS0038B传感器的基础电路 作为接收灯塔光信号一个基础电路,OUT口接MK60的C5。1.3 速度检测传感器选择一个完整的控制系统是闭环控制的,所以需要测速装置,用以 精准反映智能车实时速度。我们采用了由欧姆龙公司研制的一款 200线的小型编码器。1.4 车模选型本次设计采用由飞思卡尔半导体公司赞助的G768型车模,即为 竞赛中的C车模。2 智能车硬件电路设计2.1 硬件设计方案本设计方案采用模块化方式完成总设计,模块化设计使思路清 晰,在使用出现错误时容易修理。2.2 电路设计方案本次设计将智能车系统电路分成两个主要部分, 以 MK60N512ZVLQ10为核心的控制电路和以电源为核心的驱动电 路。考虑到MK60最小系统电路板比较大,所以将整个系统电路分为 两块规则PCB板(主控板和驱动板)。2.3 控制电路以MK60为核心的单片机系统的硬件电路设计主要包括以下几 个部分:电源电路、时钟电路、JTAG接口、复位电路。2.4 驱动电路因为本次比赛摄像头组使用的电机是RS-380SH直流电机,小 车驱动芯片决定选用集成的高电流半桥电机驱动应用BTN7971B, 它的输出电流足以带动电机转动并且较稳定。2.5 电源模块比赛使用飞思卡尔专用电池,2000mAh的镍镉电池1块,标准电 压7.2V。文章编号:1007-9416(2016)11-0152-01 3 智能车软件算法设计3.1 软件控制整体设计本次设计所用的软件调试工具支持C语言和汇编语言混合编 程的IAR Embedded Workbench软件,由于C语言操作简单,可修 改和移植性强,所以本次软件设计大部分程序都使用C语言编写,只 有在某些地方加入了汇编语句。3.2 主程序结构在系统初始化方面,我们所用到的底层硬件资源进行初始化和 上层模块初始化。在方案选择及参数设定上,我们在主板上设置了 一组四位的拨码开关和三个按键结合OLED显示屏实现的方案和参 数的可调, 以在比赛时对车作适当地调整。在图像获取上, 对于 Ov7725数字摄像头,使用场中断加高速DMA传输的方式来获取图 像。图像处理则采用黑线提取和中心线提取。3.3 控制算法控制算法是智能车的灵魂,为了使小车能以稳定的速度通过跑 道,精确的速度控制是关键,采用速度闭环控制方案。4 智能车开发与调试4.1 软件开发环境系统编译下载是在IAR IDE开发环境下完成的,Embedded Workbench for ARM是IAR Systems公司为ARM单片机开发的 一个集成开发环境,这一开发环境使用方便、入门容易和代码简明 紧凑。此外,由于在IAR软件中进行编写,调用,修正函数比较复杂繁 琐,所以使用了Source insight 3软件进行辅助编写小车程序。4.2 硬件开发环境本次毕业设计所用的硬件开发平台为著名硬件开发公司 Altium公司的Altium Designer 10,这已开发环境在板级设计特 性、软设计特性、数据管理特性、通用特性都较有优势。4.3 软件调试软件调试主要包括:程序在线仿真调试,上位机调试。在线调试 主要使用的是IAR中的调试器IAR C-SPY。上位机调试主要是通 过蓝牙模块将智能车运行过程中的状态和SD卡采集的图像及时地 反馈到PC机上。4.4 现场调试现场的调试包括摄像头调焦以及固定、PID参数整定、速度控制 算法的参数整定、智能车运行状态等方面的调试。5结语在此次设计中,通过不断不断尝试,不断整改,发现问题,整改 问题,最终达到我们预期的设计目标。在算法方面,首次采用闭环系 统控制智能车,采用改进PID控制算法,对智能车速度及方向进行调 整,使智能车较之前的开环状态更加稳定,最终完成了智能车的制 作,实现了摄像头采集识别,闭环控制等的功能。  收稿日期:2016-09-28作者简介:吴伟鸿(1994 ―),男,汉,浙江杭州人,本科,研究方向:电子设计,智能车研究。 152