2013年6月 西北工业大学学报 June 2013 第 31 卷第 3 期 Journal of Northwestern Polytechnical University Vol.31 No.3电磁引导智能汽车设计与关键技术研究赵凯瑞, 陶 模, 王明亮, 李世良, 谢 兰 (西北工业大学 自动化学院, 陕西 西安 710072)摘 要:基于电磁引导的局部运输系统在工业自动化领域已经广泛应用 ,然而将这种智能引导技术应 用到汽车参与的真实道路交通领域还缺乏充分的安全性保证 ,尚需要深入的系统性研究来提高在现 实交通路况下的适应能力。 基于经典的电磁场原理、结合经典控制理论与方法,研究了基于电磁导引 的智能汽车在智能交通领域应用的关键问题 ,并在模型汽车上实现了一种可行的自动导引控制系统 和节体转向机制。 控制软件应用离散型半模糊控制的 PID 控制算法以及分段等级棒棒 PID 控制算法 实现了整个系统的最优控制 ,样机在实验室模拟道路上进行了验证,行驶表现与现实路况较接近,整 个控制过程平稳顺畅 。关 键 词:电磁引导,模糊控制,PID 控制,棒棒 PID 控制中图分类号:TP273    文献标识码:A   文章编号:1000-2758 (2013 )03 -0487-04    为了实现车辆的智能行驶,最基本的功能要做 到对车道位置等信息的准确感知,而后经过分析处 理并自行做出正确判断。 传统的智能汽车通常以光 电传感器或摄像头为传感器来感知外界环境,但是 以这种方式获取外界环境数据受外界光照条件影响 大,易受干扰,可靠性不高。 相比之下,电磁导引方 法受外界环境因素的干扰则较少,有较好的应用 前景。1 基本原理电磁导引的智能汽车系统,运行时要求在道路 中铺设 1 条通有交变电流的金属线( 为减少电磁干 扰通常以某种频率或调制方式的交变信号),通过 设置在车身上的电磁传感器感受交变磁场,从而产 生感应电动势(模拟信号)。 经过对该信号的滤波、 放大等处理后再送入单片机进行分析。 单片机通过 软件程序判断出车辆是否偏离车道或者与马路边缘 的距离等信息,从而输出控制信号给方向机控制系 统来修正行驶方向,从而实现自主导航。2  系统组成及控制原理分析2 .1  系统结构与模型 本系统所选用的核心控制器为 16 位单片机,系统结构如图 1 所示。图 1 系统组成框图从系统组成结构及各个环节的特性来分析,该 控制系统为一个二阶系统。 系统中: T0 为伺服电机 时间常数;K1 ,K2 为系统主要比例环节的传递函数;  收稿日期:2012-09-04 作者简介:赵凯瑞(1977―),西北工业大学讲师、博士,主要从事先进控制理论应用、飞控系统设计与仿真研究。
・ 488・ 西 北 工 业 大 学 学 报 第 31 卷 H1 为前轮转向器转向角度;H2 为模型车车身微调 转向节角度。为了保证系统合适的响应性能,通过调节使阻 尼比 ε =0.707 左右,控制过程的建模分析以驱动 轮 1 为例。 驱动轮 1 和相关部件组成了一个典型的 二阶系统,其传递函数φ= K1・ K2 (1) s(T0 s +1) +K1 ・ K2 ・ H1 ・ H2  为了论述方便,令 K =K1・ K2 , H =H1・ H2 ,则 根据二阶系统标准形式可得到φ=1 ・ 1 (2) H (T0s+1)/HK+1  于是有T= T0 ,ω=1 = HK,ε= 1 HKnTT0 2THK=1 1 ,将上式ωn 与ε分别带入系统的峰值 2 HKT0时间Tp,超调量σ%,调节时间Ts 的公式则得到峰值 时间、调节时间和超调量Tp = π (3) ωn 1 -ε2σ% =e-επ/ 1-ε2 (4)证较好的实现路径传感器信号的处理。   传感器信号拾取电路的仿真结果如图 3 所示。 其中正弦波形为路径标识导线上的交变电流,下面 的曲线为检测电路的输出,由于电路中滤波电容的 存在导致检测信号滞后约 2 ms。图 3 传感器信号调理电路仿真曲线 3  车模改装及节体转向设计检测电路及系统控制方法验证使用改装的高仿 真车体模型。 经改装使其具有节体转向系统,所谓 节体转向即是在现有车体转向系统( 前轮转向和后 轮差速)的基础上,在车身上增加 1 个可以在水平 面小角度内活动的"关节",使得前轮在转向的同 时,2 个后轮也可以配合前轮转向而向某方向偏转 一个小的角度。 使用节体转向可以有效提高智能车 的转向效率,提高轨迹跟踪能力,当然在实际的汽车 上( 尤其是轿车) 实现节体转向并不容易,但是通过 悬挂系统的改进也是可以实现的。图 4 为节体转向的原理示意图,其核心是在车 体中后部( 靠近后桥) 处增加 1 个可控的活动转向 器。 图中 H1 为前束转角,H2 为节体转角,L1 为前束 中心到节体转轴的间距( 称为前节长) ,L2 为节体转 轴到后桥中心的间距(称为后节长),角度 C 为弧长 L1 段映射到车辆弯道运动中心“O” 处对应的角度, 角度 D 为弧长 L2 段映射到弯道运动中心“O” 处对 应的角度。图中前束中心 a 和后桥中心 e 落在以“ O” 为圆心,r 为半径的弯道圆弧上,其中节转向器控制 b 点实现节体转向。由于节体尺度 L1 、L2 远小于转弯弧线半径 r,近 似认为 L1 、L2 两弦长等于相对应的弧长,因此得到:             Ts =3.5 εωn(5)   峰值时间、调节时间和超调量是控制系统的 3 个重要性能指标,这些指标为软件控制方法的选择 和参数整定提供依据。2 .2  传感器信号调理电路在模型车改装时,考虑到成本因素以及使用环 境相对较好,系统传感器信号检测模块选用了集成 运放为主的简易放大电路(参见图 2)。 交变信号经 过 LM324 进行放大,后端通过二级管、电阻、电容组 成的半波整流处理后送给单片机进行模数变换,进 而实现数字化处理。 电路图中的 R4 起到了提高输 入信号共模电压的作用,能有效解决运算放大器单 电源供电带来的零点偏置电压带来的影响。 这样的硬件处理方式配合单片机强大的数据处理能力,图 2 传感器信号拾取电路保 
第 3 期 赵凯瑞等:电磁引导智能汽车设计与关键技术研究 ・ 489・ L1 =L2 ,又由F =π-D,推出F =π-CL2,而E CD 2 2L1=π- π -H   -C, H2 =π-F -E。由圆周角等获取信号,线圈的布置分为立式、横式和卧式布置。 图 5 是使用 MATLAB 和 Ansoft Maxwell 软件分析传 感器在同一位置“立式”和“横式”布置时的输出信 号,x 轴为线圈距离信号导线的水平距离,y 轴为线 圈输出的经过归一化处理的信号。图 5 立式和横式布置信号输出“横式” 布置时线圈输出信号是 x 的偶函数; “立式”布置时线圈输出值是 x 的奇函数。 在较低 高度下,“ 横式” 感应值是“ 立式” 的 2 倍,但是在 x = 20 的时候,“横式”感应值只有“立式”感应值的一 半左右,因此前者感应值的衰减较后者快很多。 综 上可推知,“立式”比较适合做 x 的正负判别,“横 式”比较适合用来解算 x 的具体数值。 在实际使用 中,一般采用横式和立式相结合的方法应用。实验车在车头布置 3 个传感器,边缘各 1 个横 式布置传感器,中心布置 1 个立式传感器。 中心传 感器在导线一侧其传感器数据与导线的距离是单调 函数,用于检测方向(即左右方向)。 边缘 2 个传感 器相结合,用于解算车体的左右偏移量。 传感器值 越小,判定离道路中心更远;反之,传感器输出值越 大则距离道路中心更近。4 .2  控制方法软件的动力控制算法采用分段棒棒 PID 控制方法;速度控制方面,采用棒棒 PID 控制方法实现目标 速度,在当前速度与目标速度相差很大时,利用棒棒 的快速响应性,可以很快达到目标速度附近,这时再 利用 PID 的“ 微调” 特性,可以避免系统震荡,并快 速达到目标速度,该算法使得车模在常规跑道上实 现了 3.8 m /s 的平均速度。转向控制采用离散型模糊控制算法实现。 传感 器的架设考虑了必要的前瞻量,模糊控制方法克服 了转向舵机在常规 PID 控制方法中动作次数过于频       12于相应弧长所对应的圆心角的一半,则有 H1从而整理可得出前束转向与后节转向比为H1 = L1H2 L1 +2・ L2= C , 2(6)     图 4 节体转向原理示意图在软件编程时只要由传感器返回的信息计算出 前节转向角度后,由公式(6) 便可简单计算出节体 转向角度,使整车无论过任何角度的弯道都能达到 理想的弧线跟踪效果。经过实验证明,引入节体转向系统具有以下几 大优点:1入弯时车体完全做到切内道行驶,有利于 通过曲率较大的“急弯”,由图可知 2 种转向的完美 结合使车体能够绕弯道的实际中心“ O” 点行驶,确 保过弯的稳定性。 2通行能力增强―有利于汽车 在狭窄的道路上转弯或者掉头,操纵控制更加灵活。 3具备侧向移动的能力,即前后节转向同向。 4探 测路线具有随动性,后节转向系统在动力轮的驱动 下致使前节车体转向,达到传感器跟随路径的效果, 使信号不易丢失,增加模型车的稳定性。 综上所述, 模型车在装有节体转向系统后其灵活性得到显著 提高。4 传感器布局及控制方法4 .1  传感器布置方式 电磁引导寻线智能车一般使用电磁感应线圈来
・ 490・ 西 北 工 业 大 学 学 报 第 31 卷 繁的弊病,实现了转向的平稳调节。 5 结 论本文综合论述了基于电磁引导的寻线智能汽车 验证模型的工作原理、系统建模和转向系统结构设 计与速度控制等关键技术的实现。从工作原理上分析了节体转向机制的工作原理 和控制过程,结合车模在模拟道路上对节体转向原 理进行了实际验证,车模运行结果表明节体转向机 制有效实现了车辆转弯过程中前束和后桥能较好地参考文献:在相同的回转半径的弧线上行进,提高了车模转弯 能力和运行的平稳性。对于电磁线圈传感器不同布置方向其输出信号 特性不同的问题进行了仿真研究与实际验证,结果 表明利用 2 个横式布置传感器和 1 个立式布置传感 器能有效检测车模偏离道路的方向,同时也能量化 解算出车体偏离道路中心的实际偏移量。通过实验仿真系统平台及大量的实践调试设计 的离散型半模糊控制 PID 控制算法以及分段等级棒 棒 PID 控制算法适用于智能车的控制,较好地适应 弯道、十字交叉、S 形弯道等不同路况应用。[1] 卢京潮.自动控制原理.西安: 西北工业大学出版社, 2009Lu Jingchao.Automatic Control Theory.Xi′an: Northwestern Polytechnical University Press, 2009 (in Chinese)[2] 张三慧.大学物理学(第三册)电磁学.北京: 清华大学出版社, 2005Zhang Sanhui.Editor of University Physics (VolumeIII) Electromagnetics.Beijing: Tsinghua University Press, 2005 (in Chi- nese)[3]  Liang G, Gao H L, Zhang X C.Intelligent Car Direction Control Based on Fuzzy PID .Advanced Materials Research , 2012, 466: 1320-1324Designing Intelligent Vehicle Based on Electromagnetic GuidanceZhao Kairui, Tao Mo, Wang Mingliang, Li Shiliang, Xie Lan (Department of Automatic Control, Northwestern Polytechnical University, Xi′an 710072,China)Abstract: The local transport system based on electromagnetic guidance has not been aplied to an intelligent vehi - cle.Therefore, we work on its working principles , modeling and speed control and the structural design of its steer - ing system.We verify the steering mechanism of the intelligent vehicle model that travels on a simulated road .Its operation results show that its steering mechanism can effectively enhance the swerving capability and operational safety and stability.The simulation results, given in Fig.5, and their analysis show preliminarily that the use of two horizontal sensors and one vertical sensor can effectively detect the vehicle model 's direction of deviation from its road.The discrete semi-fuzzy PID control algorithm and the sectional and graded Bang Bang PID control algorithm we designed and verified on the vehicle model are suitable for controlling an intelligent vehicle on various road con - ditions such as bending road, cross road and S-shaped bending road.Key words: algorithms, fuzzy control, mathematical models, structural design; Bang Bang PID control algorithm, electromagnetic guidance, intelligent vehicle, PID control algorithm