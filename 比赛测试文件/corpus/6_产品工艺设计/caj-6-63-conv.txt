 
 
 
工学硕士学位论文
 
 
基于虚拟现实的装配工艺设计 
技术研究与应用 
 
黄垒 
 
 
 
 
 
 
 
 
 
 
 
哈尔滨工业大学 
2007 年 7 月 图书分类号：TH164 
U.D.C.: 621.01 
 
 
 
工学硕士学位论文
 
 
基于虚拟现实的装配工艺设计 
技术研究与应用 
 
 
 
 
 
 
 
 
硕 士 研 究 生： 黄垒 
导 师： 姚英学教授 
申请学位级别： 工学硕士 
学 科 、 专 业： 机械制造及其自动化 
所 在 单 位： 机电工程学院 
答 辩 日 期： 2007 年 7 月 
授予学位单位： 哈尔滨工业大学 Classified Index: TP
164
 
U.D.C.: 
621.01 
 
 
 
Dissertation for the Master Degree in Engineering 
 
 
RESEARCH AND APPLICATION OF THE 
ASSEMBLY PROCESS PLANNING 
TECHNOLOGY BASED ON VIRTUAL 
REALITY  
 
 
Candidate
： 
 H
uang Lei 
Supervisor
： 
 P
rof. Yao Yingxue 
Academic Degree Applied for
： 
 M
aster of Engineering 
Specialty
： 
 M
echanical  Manufacturing  and 
Automation 
Affiliation:  School  of  Mechanical  and 
Electrical Engineering 
Date of Defence
： 
 J
uly, 2007 
Degree-Conferring-Institution
：
  Harbin Institute of Technology 
 哈尔滨工业大学工学硕士学位论文
 
  I
摘  要 
传统的装配工艺设计任务一般由有经验的工艺人员凭借二维图纸手工完
成，且往往需要利用物理原型进行模装。这种装配工艺设计模式不可避免地
存在优化程度低、设计效率低、成本偏高等缺陷。而目前的计算机辅助装配
工艺设计也存在无法解决“组合爆炸”等问题。基于虚拟现实的装配工艺设
计技术是解决上述问题的有效途径。本文对基于虚拟现实的装配工艺设计技
术进行了深入的研究，主要完成的工作包括：
 
对基于虚拟现实的装配工艺设计系统进行了充分的需求分析，在此基础
上，提出了系统的体系结构，并设计了系统的底层信息数据库。
 
研究了基于虚拟现实的装配工艺设计的关键技术，包括：构建了系统的
零部件底层信息模型，实现了从 
Pro/E 
到虚拟现实的模型信息转换；提出了
一种改进的 
AABB 
层次包围盒碰撞检测算法，提高了虚拟装配环境的碰撞
检测效率，满足了系统要求；提出了虚拟装配环境中动态约束识别技术的实
现方法和工作流程，实现了基于约束的零部件精确定位；提出了交互约束定
义装配和自动约束识别装配两种不同的装配工艺规划方式，弥补了单一方式
的不足，使装配过程拟实性更强，并通过获取采样点的方式，实现了装配路
径的记录、显示和编辑。利用截屏和视频压缩技术实现了装配工艺规划过程
的录制和回放；提出了虚拟装配工艺设计系统中装配工艺规程的制定方法。
 
     
研究了基于虚拟现实的装配工艺设计信息后处理技术。提出了基于
WEB 
和 
XML 
的装配工艺文档动态生成技术，实现了工艺文档样式的灵活
定制及工艺文档的远程调用；提出了基于 
WEB 
和多媒体的装配工艺现场示
教技术，通过 
WEB 
对现场工人进行远程示教，使其更快地掌握装配工艺。
 
在上述研究的基础上，利用 
VC 
和 
WTK 
开发了一套虚拟装配工艺设计
系统 
IVADS
，并通过该系统在卫星装配工艺设计中的应用，验证了基于虚
拟现实的装配工艺设计技术的可行性和优越性。
 
 
关键词  虚拟现实；虚拟装配；工艺设计
 哈尔滨工业大学工学硕士学位论文
 
  II
Abstract 
The conventional task of assembly process planning is accomplished by the 
salted  process  designer  according  the  2D  drawing  manually  commonly,  and  it 
often  needs  mock-up  assembly.  This  mode  of  assembly  leads  to  many  problems 
unavoidably,  such  as  low  optimization,  low  efficiency  of  design,  and  high  cost. 
The current CAAPP technology also exists some problems, such as “combination 
explosion”. The assembly process planning technology based on virtual reality is 
a  valid  approach  to  solve  these  problems.  The  paper  researches  the  assembly 
process  planning  based  on  virtual  reality  carefully,  and  the  finished  work 
includes: 
The  paper  analyzes  the  requirements  of  the  assembly  process  plan  system 
based on virtual reality, brings up the structure of the system on the foundation of 
the analysis, and designs the rock-bottom database.  
The  paper  researches  the  key  technologies  of  assembly  process  planning 
based  on  virtual  reality.  The  main  work  include:  It  founds  the  parts’  bottom 
information model of the system, realizes the model’s information transformation 
from  Pro/E  to  virtual  reality;  It  presents  a  improved  AABB  level  bounding  box 
collision  detection  algorithm.  The  algorithm  enhances  the  efficiency  of  collision 
detection and satisfies the system’s need. It presents the realization and workflow 
of  dynamic  constraint  recognition  and  realizes  part’s  accurate  positioning  based 
on their  mate and constraint relations; It presents  two  different  assembly  modes, 
interactive  constraint  defining  assembly  mode  and  automatic  constraint 
recognition  assembly  mode.  This  method  makes  up  the  single  assembly  mode’s 
bug  and  let  the  assembly  process  be  more  lifelike.  By  catching  part’s  sampling 
orientation  point,  the  paper  realizes  assembly  path’s  record,  display  and  edit.  By 
screen  recoding  and  video  compressing  technology  the  paper  realizes  the  record 
and  playback  of  the  assembly  process  planning  course;  It  presents  the 
constitution  method  of  assembly  process  rules  in  virtual  assembly  process 
planning system. 
The  paper  researches  the  disposal  technology  of  assembly  process 
information  based  on  virtual  reality.  The  paper  brings  up  the  technology  of 哈尔滨工业大学工学硕士学位论文
 
  III
dynamic generation of assembly process document based on WEB and XML, and 
realizes  the  flexible  customization  of  the  style  of  assembly  process  documents 
and  remote  transfer.  At  the  same  time,  the  paper  brings  up  the  technology  of 
assembly  process  display  and  teaching  in  locale  based  on  WEB  and  multimedia 
which makes the workers master the assembly process more quickly.  
Based  on  the  above  research  work,  the  paper  develops  a  virtual  assembly 
process  planning  system  IVADS  with  VC  and  WTK.  Then  the  advantage  of  the 
technology of assembly process planning based on virtual reality was verified by 
the satellite product’s assembly process planning in IVADS.  
 
Keywords
  
virtual reality, virtual assembly, process planning 哈尔滨工业大学工学硕士学位论文
 
  IV
目
   
录
 
摘  要
................................................................................................................... I
 
Abstract ................................................................................................................ II 
 
第 
1 
章
  
绪论 
.........................................................................................................1
 
1.1  
课题背景及意义 
........................................................................................1
 
1.1.1  
课题背景 
.............................................................................................1
 
1.1.2  
课题研究的意义 
.................................................................................2
 
1.2  
国内外研究状况 
........................................................................................3
 
1.3  
课题主要研究内容 
....................................................................................6
 
第 
2 
章
  
虚拟装配工艺设计系统总体结构 
..........................................................7
 
2.1  
系统需求分析 
............................................................................................7
 
2.2  
系统的体系结构 
........................................................................................8
 
2.3  
系统的工作流程 
......................................................................................10
 
2.4  
数据库系统设计 
...................................................................................... 11
 
2.4.1  
模型信息数据库设计
........................................................................ 11
 
2.4.2  
工艺信息数据库设计
........................................................................13
 
2.4.3  
系统管理数据库设计
........................................................................15
 
2.5  
本章小结 
..................................................................................................15
 
第 
3 
章
  
虚拟装配工艺设计关键技术
................................................................16
 
3.1  
从 
Pro/E 
到虚拟现实环境的模型信息转换 
............................................16
 
3.1.1 Pro/E 
二次开发技术 
..........................................................................16
 
3.1.2  
支持虚拟装配工艺设计的零部件底层信息模型设计 
.....................17
 
3.1.3  
分类信息转换 
...................................................................................18
 
3.2  
分层次的实时碰撞检测算法 
...................................................................20
 
3.2.1  
虚拟环境中的碰撞检测技术概述 
....................................................20
 
3.2.2  
基于层次包围盒的碰撞检测算法 
....................................................21
 
3.2.3  
改进的 
AABB 
层次包围盒碰撞检测算法及其实现
........................22
 
3.3  
动态约束识别与零件准确定位 
...............................................................25
 
3.3.1  
动态约束识别 
...................................................................................25
 
3.3.2  
零件精确定位 
...................................................................................26
 哈尔滨工业大学工学硕士学位论文
 
  V
3.4  
虚拟装配工艺规划 
..................................................................................31
 
3.4.1  
自动约束识别装配方式 
....................................................................31
 
3.4.2  
交互式约束定义装配方式 
................................................................32
 
3.4.3  
装配路径记录与编辑
........................................................................32
 
3.4.4  
装配过程动画录制
............................................................................33
 
3.5  
装配工艺信息编辑 
..................................................................................35
 
3.5.1  
体系结构与操作流程设计 
................................................................36
 
3.5.2  
装配工艺信息编辑处理与发布 
........................................................37
 
3.6  
本章小结 
..................................................................................................38
 
第 
4 
章
  
装配工艺设计信息后处理
....................................................................39
 
4.1  
基于 
WEB 
及 
XML 
的工艺文档动态生成
..............................................39
 
4.1.1 XML 
技术 
..........................................................................................39
 
4.1.2  
基于 
XML 
和 
WEB 
的装配工艺文档动态生成原理 
.......................41
 
4.1.3  
面向 
XML 
及工艺文档的装配工艺信息分析与描述 
......................42
 
4.1.4  
工艺文档的动态生成
........................................................................45
 
4.2  
基于 
WEB 
及多媒体的虚拟装配现场示教 
............................................47
 
4.2.1  
体系结构设计 
...................................................................................48
 
4.2.2  
虚拟装配现场示教实现技术 
............................................................48
 
4.3  
本章小结 
..................................................................................................49
 
第 
5 
章
  
虚拟装配工艺设计系统开发及应用 
....................................................50
 
5.1 IVADS 
系统开发环境 
...............................................................................50
 
5.2 IVADS 
界面设计开发 
...............................................................................50
 
5.2.1  
虚拟场景构建 
...................................................................................50
 
5.2.2  
系统界面开发 
...................................................................................52
 
5.3 IVADS 
在卫星装配工艺设计中的应用 
...................................................53
 
5.3.1  
卫星装配工艺设计的特点 
................................................................53
 
5.3.2  
模型载入 
...........................................................................................54
 
5.3.3  
装配操作 
...........................................................................................56
 
5.3.4  
装配空间验证 
...................................................................................58
 
5.3.5  
工艺信息保存 
...................................................................................58
 
5.3.6  
装配工艺信息编辑
............................................................................59
 
5.3.7  
装配工艺文档生成与现场示教 
........................................................60
 
5.4  
应用效益分析 
..........................................................................................60
 哈尔滨工业大学工学硕士学位论文
 
  VI
5.5  
本章小结 
..................................................................................................61
 
结
   
论
.................................................................................................................62
 
参考文献
.............................................................................................................63
 
攻读学位期间发表的学术论文
..........................................................................67
 
哈尔滨工业大学硕士学位论文原创性声明 
......................................................68
 
哈尔滨工业大学硕士学位论文使用授权书 
......................................................68
 
哈尔滨工业大学硕士学位涉密论文管理 
..........................................................68
 
致
   
谢
.................................................................................................................69
 哈尔滨工业大学工学硕士学位论文
 
  1
第
1
章 绪论
 
1.1  
 课题背景及意义 
1.1.1  
 课题背景 
随着全球化程度的加强，世界范围的市场竞争给制造业带来了很大的压
力。为了提高产品的竞争力，必须将制造技术与飞速发展着的系统科学、计
算机科学、虚拟现实、人工智能等有机融合，形成全新概念的具有信息化、
自动化、智能化、敏捷化等特点的现代制造技术
[1]
。
 
虚拟制造就是在这种情况下产生的，其全新的制造体系和模式已成为现
代制造技术发展的必然趋势。虚拟制造技术是许多先进学科领域知识的集成
与应用，它以数字化建模技术、计算机仿真技术、分析优化技术为基础，在
产品设计阶段或产品制造之前，实时、并行地模拟出产品的未来制造全过程
及其对产品设计的影响，预测产品的性能、成本和可制造性，以达到产品的
开发周期和成本的最优化，生产效率的最高化之目的
[2]
。
 
装配作为产品制造过程中至关重要的活动，是制约生产自动化的关键，
因此，虚拟装配便成为虚拟制造技术的核心技术之一。虚拟装配是真实装配
过程在虚拟环境中的模拟，该技术利用虚拟现实技术构建虚拟环境，并在虚
拟环境中将产品的三维数字化零部件模型进行预装配
[3]
。目前虚拟装配技术
有如下三个应用方向：
 
(1)  
作为 
DFA(Design for Assembly)
技术的使能工具，对产品零部件及装
配体的设计结果进行可装配
/
拆卸性验证，并为再设计提供参考
[4]
。
 
(2)  
进行装配工艺设计，并获得可行且较优的装配工艺方案，用于指导
实际的产品装配生产。
 
(3)  
作为初学者或现场工人的产品装配操作三维可视化培训工具。
 
基于虚拟现实的装配工艺设计技术属于虚拟装配技术的后两个应用方
向。该技术的研究不仅使得 
CAPP 
系统的发展摆脱了原来只专注于“自动
化”的误区，开始向实现人机有机结合的方向努力，并且使得 
CAPP 
系统从
二维世界进入了三维世界，从而提升了产品装配工艺设计的水平。
 哈尔滨工业大学工学硕士学位论文
 
  2
1.1.2  
 课题研究的意义 
装配是产品研制生产的关键环节，产品装配工艺的设计水平将直接影响
产品的质量和生产效率。而长期以来，我国制造技术的发展水平很不平衡，
产品装配技术方面的进展远远落后于零件制造。产品尤其是复杂产品的装配
工艺设计已经成为设计制造一体化中的薄弱环节。
 
传统的装配工艺设计主要依靠有经验的工艺人员，凭借二维图纸手工完
成。由于产品品种的多样性，制造过程的离散性，生产环境的复杂性，和系
统状态的模糊性，依靠人工编排，不可避免地有如下优化程度低、设计效率
低、一致性差、设计难度大等缺陷
[5]
。
 
而近年来提出的计算机辅助装配工艺设计技术则依然停留在二维产品设
计的基础上，无法将装配工艺过程、装配零件及与装配过程有关的制造资源
紧密结合在一起实现装配过程的仿真与装配工艺的验证，除此之外，该技术
还存在如下问题：①无法解决“组合爆炸”问题；②难以表达非定量因素，
评价方法有限；③难以利用已有经验
[6]
，这些问题导致目前计算机辅助装配
工艺设计的实际应用效果不甚理想。
 
因此，迫切需要对装配工艺设计方法，尤其是复杂产品的装配工艺设计
方法进行改进，以提高产品的装配质量和生产效率。
 
基于虚拟现实的装配工艺设计技术利用虚拟现实技术提供的沉浸性、交
互性和想象性，建立一个与实际装配生产环境高度逼近的虚拟场景，由装配
工艺设计人员根据其经验和知识，通过三维鼠标等设备直接操作虚拟场景中
的零件模型，进行产品装配过程的动态模拟，可视化、交互性地进行产品的
装配顺序和装配路径的设计求解，确定工装卡具和装配方法，并对装配空间
等进行验证，进而得出优化的产品装配工艺方案，同时利用装配工艺信息后
处理接口生成各种装配工艺文档和装配过程动画。
  
基于虚拟现实的装配工艺设计技术与传统的装配工艺设计技术相比，具
有以下两个明显的特点：①设计者可通过三维输入设备直接对零部件进行三
维装配操作，因此非常直观，且具有较高的交互性，能最大限度地发挥人的
创造力；②三维立体显示能让设计者像在真实世界中一样观察物体，因此能
及时准确地发现装配工艺设计中存在的问题
[7]
。采用这种装配工艺设计技
术，不仅避免了传统手工装配工艺设计存在的优化程度低、设计难度大等诸
多缺陷，大大提高了装配工艺的可行性，降低了设计难度，而且缩短了装配
周期，降低了生产成本。除此之外，利用该技术生成的产品装配过程动画，哈尔滨工业大学工学硕士学位论文
 
  3
可以对装配操作工人进行现场示教，使工人能够形象直观地理解产品装配工
艺，从而改善操作水平，提高产品质量。
 
1.2  
 国内外研究状况 
虚拟装配工艺设计技术的研究是作为虚拟装配技术的应用研究而进行
的。国外对虚拟装配工艺设计技术的研究起步于 
20 
世纪 
90 
年代中期，由于
政府及工业界对其支持力度比较大，加之研究的基础条件比较好，因此发展
势头相当迅猛
[8, 9]
。
 
德国弗朗霍夫工业工程研究所虚拟现实实验室较早地进行了基于虚拟现
实的装配工艺设计系统的研究与开发，他们开发的第一个原型系统就获得了
1996 
年慕尼黑计算机展览会的最佳系统奖。该系统可以通过虚拟人体模型
在虚拟环境中交互式地进行装配操作，在用户交互的基础上产生装配前趋
图，并进行装配时间和装配成本分析。通过对真实装配环境的模拟，规划者
在进行产品装配规划时，能够综合考虑装配特征和其他装配条件
(
如装配空
间的制约、装配零件供应和以及必需的装配工具等
)
对产品装配的影响
[10]
。
系统的具体功能如下：①通过与 
CAD 
系统的接口，获得产品的模型信息；
②实际装配环境仿真；③通过交互产生装配前趋图；④为装配工艺设计人员
提供装配规则和知识；⑤装配稳定性分析；⑥自动产生装配过程文档。目
前，该实验室的研究主要集中在虚拟环境以及人机交互方面
[11]
。
 
美国华盛顿州立大学 
VRCM 
实验室和美国国家标准技术研究所 
NIST
也是较早从事虚拟装配工艺设计技术研究的研究机构之一，其合作开发的虚
拟装配工艺设计环境 
VADE 
是一个具有代表性的虚拟装配工艺设计系统
[12,13]
，如图 
1-1 
所示。该系统在 
SGI 
工作站上实现，立体视觉由 
HMD 
提
供。在这个系统中，设计者可以对公差进行评估，选择最理想的装配顺序，
生成装配
/
拆卸路径规划以及观察最终结果。其主要功能包括从 
CAD 
系统到
虚拟装配系统的信息转换、零件的交互式动力学模拟、零部件装配轨迹信息
的创建与轨迹编辑、零件结构参数修改、装配过程中装配工具的使用、基于
约束的装配仿真，
VADE 
提供了处理以及管理约束的方法，在虚拟装配过程
中可以高效率地操作物理约束，通过基于约束的装配仿真不仅可以展示设计
者的设计意图，而且可以说明如何应用约束
[14]
、
CAD 
模型装配层次重组
等。近来，
VRCM 
实验室在 
VADE 
系统中集成了快速上肢评定算法，进行
装配过程中人机工程学方面的研究，以求找到最佳的工作环境布局
[15]
。
 哈尔滨工业大学工学硕士学位论文
 
  4
 
图 
1-1 VADE 
的约束运动仿真
 
Fig.1-1 The constrained motion simulation of VADE 
美国爱荷华州立大学虚拟现实应用中心早在 
20 
世纪 
90 
年代中期就建立
了一个用于装配工艺设计和评价的系统 
IVY
（
Inventor  Virtual  Assembly
）
[16]
，
IVY 
旨在解决先前的自动化装配工艺设计系统存在的两个问题：①不
能与设计者进行交互；②设计结果不能以直观的形式进行显示并进行评价。
在该系统中可以直接使用几何模型以及分层的装配数据进行装配工艺设计与
评价，设计人员使用虚拟环境设备如 
HMD 
和六自由度跟踪设备等与系统进
行交互，但它存在不支持装配层次编辑、碰撞检测效率比较低等缺陷。除了
IVY 
系统外，他们还在此基础上建立了一个面向通用装配仿真的虚拟环境
VEGAS
[17]
，该系统利用 
VR  Juggler 
进行虚拟环境管理，使用波音公司的
VPS 
软件进行碰撞检测。
VEGAS 
的模型数据通过嵌入式程序从通用 
CAD
软件中导入并转化成面片，通过“环境—零件组—零件—面片—顶点”的层
次结构处理数字化模型。他们目前正在开发网络化的触觉环境，以促进协同
设计的发展。
 
英国赫瑞瓦特大学机械与化学工程系虚拟制造研究组已经完成了两个与
虚拟装配工艺设计相关的研究项目：①利用虚拟现实提取装配工艺知识；②
在虚拟装配工艺设计环境下进行线缆捆束设计与规划。他们早在 
1997 
年就
开发了一个虚拟装配工艺设计系统 
UVAVU
[18]
，并在该系统中提出了使用
“接近捕捉”和“碰撞捕捉”方法确定虚拟部件的精确装配位置，基本解决
了零部件的定位问题，但也存在两个缺陷：①虚拟装配环境下同种零部件不
具有互换性；②丢失了零件装配的中间过程信息。
UVAVU 
的最大特点在于
提供了一种提取装配知识的方法，比较熟练的装配者在虚拟环境下装配产品哈尔滨工业大学工学硕士学位论文
 
  5
模型时系统可以记录他们的活动，从而获取其装配意图并提取知识。该研究
组目前的主要研究方向是利用虚拟环境进行线缆装配工艺设计。
 
德国比勒菲尔德大学人工智能与虚拟现实实验室将虚拟现实交互技术与
人工智能技术相结合，基于构造工具箱（
Construction  Kits
）的概念建立了
一个虚拟装配工艺设计系统 
CODY
[19]
。所谓构造工具箱，是指在制造领域
中可重复使用的、具有多重功能的标准零部件结构库。
CODY 
是一个基于
知识的、三维交互式虚拟装配工艺设计系统，它允许设计者在虚拟环境中通
过直接三维操作或简单的自然语言命令与系统交互。他们建立了面向装配工
艺设计的知识表达语言 
COAR 
及基于 
COAR 
的知识推理方法。
COAR 
用于
创建并维护虚拟场景的一个动态模型，其主要处理对象为标准化的可重用零
件，利用标准的零件构造复杂的装配体。总之，
CODY 
系统具有以下特
点：①不仅支持装配与拆卸，而且支持零件相对位置调整；②对于大量零件
构成的装配体仍然运行良好；③不仅支持直接操作，而且支持自然语言命
令。目前，该实验室正在致力于开发面向交互变量化设计的虚拟装配工艺设
计平台。
 
 
图 
1-2  
比勒菲尔德大学的 
CODY 
系统
 
Fig.1-2 The CODY system of Bielefeld University 
除了上述研究机构之外，美国威斯康星—麦迪逊大学 
Gadh 
等人，希腊
Patras 
大学制造系统实验室，德国 
BMW 
公司，加拿大温莎大学，新加坡国
立大学、美国麻省理工学院等高校和企业也在进行虚拟装配工艺设计方面的
研究工作
[20~24]
。
 
国内对于虚拟装配工艺设计技术的研究起步于 
20 
世纪 
90 
年代末期，发哈尔滨工业大学工学硕士学位论文
 
  6
展速度比较快，取得了一些很有价值的成果。浙江大学 
CAD&CG 
国家重点
实验室是国内最早开展虚拟装配工艺设计技术研究的单位之一，他们目前的
研究在国内处于领先地位
[25-26]
，此外，清华大学国家 
CIMS 
工程技术研究中
心、上海交通大学 
CIM 
研究所、北京理工大学机械与车辆工程学院数字化
设计与制造实验室等机构也在进行虚拟装配工艺设计方面的研究工作，并且
已经取得了一定的成果
[27-30]
。
 
根据目前的理解，虚拟装配工艺设计技术的发展至今可以分为三个阶
段，第一阶段是虚拟装配工艺设计理论的提出阶段，第二阶段是各研究机构
在各实验室复制、建立虚拟装配工艺设计系统的阶段，第三阶段是各研究机
构对虚拟装配工艺设计的发展方向进行深入研究的阶段。目前国外虚拟装配
工艺设计技术的研究已经进入到了第三阶段
[31-33]
，而国内的研究则仍处于
第二阶段，由于虚拟设备价格昂贵，只有少数几个单位建立起了自己的具有
较完整硬件支持的虚拟装配工艺设计系统，其他单位则主要利用一些较经济
的虚拟环境设备如三维鼠标、立体眼镜等，进行桌面式虚拟现实环境下装配
工艺设计技术理论的研究工作。
 
1.3  
 课题主要研究内容 
由于硬件条件的限制，本课题主要在桌面式虚拟现实环境下开发。本课
题主要研究基于虚拟现实的装配工艺设计的关键技术，并应用这些技术开发
一套虚拟装配工艺设计系统。具体来说，包括以下一些研究内容：
 
(1)  
虚拟装配工艺设计系统总体结构。对虚拟装配工艺设计系统进行需
求分析，建立系统的体系结构，明确系统的工作流程。并对系统的底层数据
库进行分析和设计。
 
(2)  
对虚拟装配工艺设计系统的关键技术进行研究。包括 
Pro/E 
到虚拟
现实环境的零部件模型信息转换的技术，虚拟环境下实时准确的碰撞检测技
术，动态的约束识别和零部件精确定位技术，虚拟环境下的装配工艺规划技
术，以及虚拟装配工艺设计系统中装配工艺规程的制定技术等。
 
(3)  
对虚拟装配工艺设计系统的工艺信息后处理技术进行研究。包括装
配工艺文档的动态生成技术和装配工艺现场示教技术。
 
(4)  
开发一套基于虚拟现实的装配工艺设计系统，并以中国空间技术研
究院总装与环境工程部的卫星产品为对象应用该系统进行装配工艺设计，对
上述系统的关键技术进行检验。
 哈尔滨工业大学工学硕士学位论文
 
  7
第
2
章 虚拟装配工艺设计系统总体结构
 
本章首先对虚拟装配工艺设计系统进行了需求分析，在明确系统的功
能、性能、界面、可靠性等各方面需求的情况下，建立了系统的体系结构
,
明确了系统的工作流程，并对系统的底层数据库进行了设计。
 
2.1  
 系统需求分析 
软件系统的开发一般包括如下几个过程：需求分析、设计、编程、测试
和维护
[34]
。根据有关统计，软件工程中 
40%~60%
的问题都是在需求分析阶
段留下的隐患
[35]
。需求分析是软件系统开发的基础，是软件工程中的一个
关键过程，它在一开始就决定着软件系统的成败。
 
软件需求是指用户对目标软件系统在功能、行为、性能、设计约束等方
面的期望，一般来讲，主要包括功能需求、界面需求、性能需求、环境需
求、可靠性需求、安全保密需求、资源使用需求、软件成本消耗与开发进度
需求以及目标需求。而需求分析指的是软件工程中，在建立一个新的或改变
一个现存的系统时为描写新系统的目的、范围和定义所要做的所有的工作。
 
对于基于虚拟现实的装配工艺设计系统，在充分进行需求调查的基础
上，从软件功能需求、界面需求、性能需求、环境需求等几个方面对其进行
需求分析如下：
 
功能需求：开发一套基于虚拟现实的虚拟装配工艺设计系统。该系统可
以使工艺设计人员在三维虚拟环境设备的支持下，利用桌面式虚拟现实环境
和在商品化 
CAD 
软件中构建的产品零部件模型，交互式地进行产品零部件
的装配顺序、装配路径、工序工步划分等装配工艺的设计和验证，最终形成
优化的装配工艺方案并生成装配工艺文档，同时构建装配工艺现场示教系
统，使得系统形成的装配工艺方案能较迅速地为现场装配工人所掌握。
 
界面需求：要求系统界面友好、美观，操作简便，尽量符合工艺设计人
员所熟悉的工作思路和工作流程。
 
性能需求：要求系统运行稳定可靠，容错能力强。虚拟场景的运行满足
实时性要求，具有较高的逼真程度。
 
环境需求：系统能够在配置高端显示卡的 
DELL 
图形工作站上可靠运
行，支撑环境为桌面式虚拟现实环境，至少包括三维鼠标等虚拟现实设备。
 哈尔滨工业大学工学硕士学位论文
 
  8
可靠性需求：系统运行稳定可靠，具有较高的容错能力，系统数据库具
有自动备份功能。
 
安全保密需求：系统具有用户管理功能，可以对用户进行添加、删除、
权限分配以及设置和修改密码等功能。对于装配工艺数据可以设置是否发
布，只有已发布装配工艺方案和数据才可以用于现场示教等。
 
资源使用需求：桌面式虚拟现实环境，
DELL 
图形工作站，企业局域网
以及 
ORACLE 
数据库管理系统等软件。
 
软件成本消耗与开发进度需求：一定的项目经费，要求两年内完成软件
系统的开发、测试和部署等工作。
 
2.2  
 系统的体系结构 
在充分进行系统需求分析的基础上，建立了基于虚拟现实的装配工艺设
计系统的体系结构。
  
基于虚拟现实的装配工艺设计系统采用了层次化的控制方法和“即插即
用”的开放式结构，把装配工艺设计的各个环节有机的结合起来，其体系结
构如图 
2-1 
所示。它主要由以下四层组成：
  
(1)  
人机交互层。人机交互层主要实现设计者与虚拟装配工艺设计系统
的信息交流。主要包括桌面式虚拟环境的人机交互工具二维鼠标和三维鼠标
数据的读取，装配工艺设计过程中虚拟操作指令和参数的输入、虚拟场景的
漫游等。系统将把这些数据和命令进行解析映射和任务分配，并调用应用层
相应的处理模块进行处理，从而使系统具有友好的人机交互界面。
 
     (2)  
应用层。应用层主要包括 
CAD 
数据转换接口、装配顺序生成、装
配路径记录与编辑、交互选择式零件装配、自动约束识别式零件装配、装配
仿真过程录制、装配工艺信息管理、装配工艺文档动态生成和装配现场示教
等模块。基于虚拟现实的装配工艺设计系统支持用户将在商业 
CAD 
系统中
设计的领部件模型导入该系统，支持用户利用外节设备进行面向过程的装配
工艺规划和仿真，并通过交互选择式和对装配约束关系自动识别两种方式实
现虚拟环境下零部件的精确定位，同时实时碰撞干涉检测能够对装配顺序、
装配路径、装配空间等进行验证，及时发现装配工艺存在的问题，提醒用户
进行修正，以得到优化可行的装配工艺。另外，基于虚拟现实的装配工艺设
计系统还能够将虚拟环境下的装配仿真过程信息进行记录，通过对其进行后
置处理，动态生成各种由用户定制的装配工艺文档，并进行多媒体形式的产哈尔滨工业大学工学硕士学位论文
 
  9
品装配工艺现场示教。
 
 
图 
2-1  
基于虚拟现实的装配工艺设计系统体系结构
 
Fig.2-1 The structure of assembly process planning system based on VR 
(3)  
核心服务层。核心服务层主要为应用层提供底层支撑。包括实时碰
撞干涉检测、约束识别、场景管理、运动仿真和行为控制等。其中场景管理
负责整个基于虚拟现实的装配工艺设计环境的显示控制，包括不同物体的位
姿设置、材质设置、颜色设置、光照设置等，行为控制负责装配工艺设计环
境中不同零部件行为的响应控制，如物体间发生碰撞时的行为，用户在虚拟
环境中视点的控制、三维鼠标等外设消息的响应以及环境中发生各种不同事
件时的处理控制等。
 
(4)  
数据层。系统的数据层主要包括模型信息数据库、工艺信息数据库
和系统管理数据库。模型信息数据库用于产品零部件、工装工具等模型信息
的相关数据存储；工艺信息数据库用于记录和存储虚拟装配工艺设计过程中
的各种数据信息，主要包括装配过程中各零部件的位姿矩阵、装配顺序、装
配路径、约束关系、工艺结构描述等等，该数据库是进行装配工艺设计操作
的主要数据支撑平台；系统管理数据库主要存储各种系统管理信息，包括用
户权限、用户密码设置、产品管理信息等。
 
图形用户界面
三维鼠标
  
二维鼠标 声音设备 
人 机 交
互层
 
应用层
 
核 心 服
务层
 
数据层
 
CAD 
数
据 转 换
接口
 
装 配 顺
序生成
 
模型信息数据库 系统管理数据库 工艺信息数据库 
装 配 路
径 记 录
与编辑
交 互 选
择 式 零
件装配
自 动 约
束 识 别
式装配
 
装 配 仿
真 过 程
录制
 
装 配 工
艺 信 息
管理
 
工 艺 文
档 动 态
生成
 
实时碰撞
干涉检测
 
约束识别
  
场景管理 运动仿真 行为控制 
装 配 现
场示教哈尔滨工业大学工学硕士学位论文
 
  10
2.3  
 系统的工作流程 
基于虚拟现实的装配工艺设计系统的工作流程如图 
2-2 
所示。
 
 
图 
2-2  
基于虚拟现实的装配工艺设计系统的工作流程
 
Fig.2-2 The workflow of assembly process planning system based on VR 
载入 
CAD 
中零部件和工装工具模型
模型信息转换
 
模型进入虚拟装配工艺设计环境
 
选择待装配零部件
 
移动零部件
 
运动有效性检查
 
待装零部
件归位
 
存储装配顺序、路径和装配过程动画
装配空间验证
 
结束装配任务
 
装配工艺信息编辑
 
生成装配工艺文档、现场示教
 
工 具 操
作信息
 
否
是
否
 
是
是否完成所有装配任务
否
 
是
开
  
始
是否有效
是否使用工装工具
 
结
  
束哈尔滨工业大学工学硕士学位论文
 
  11
系统运行之后首先载入要进行装配工艺设计的零部件的 
CAD 
模型，通
过模型信息转换接口将其转换进入虚拟现实环境，并定位到初始位置。然后
开始进行装配工艺设计工作。装配工艺设计工作以装配任务循环形式进行。
通过三位鼠标等设备选择并移动零部件模型进行装配操作，系统运用碰撞检
测机制实时检测零部件装配运动的有效性，如果有效，则存储该装配操作的
装配顺序、装配路径信息和装配过程动画，然后判断该操作是否使用工装工
具，如果使用的话，就进行装配空间验证操作，进而结束一个装配任务。所
有装配任务完成之后，进行装配工艺信息规程制定，并生成装配工艺文档。
 
2.4  
 数据库系统设计 
基于虚拟现实的装配工艺设计系统的底层数据库分为三部分：模型信息
数据库、工艺信息数据库和系统管理数据库。本文遵循以下原则进行了系统
底层数据库系统的设计：①数据完整性原则，包括实体完整性、参照完整性
和用户定义完整性
[36-37]
；②数据冗余度与系统易用性相协调，不过分追求
数据冗余度低，而忽略数据库系统的易用性；③在数据库的命名规范上，既
要保证可读性，又要保证简练性
[38]
。
 
2.4.1  
 模型信息数据库设计 
系统的模型信息数据库储存了产品零部件和工装工具等的模型信息。在
物理上，它由文件型数据库和关系型数据库两种形式的数据库构成。
 
具体来讲，产品零部件模型信息由 
Assembly
、
Face 
和 
Sequence 
三个数
据库表和一系列 
SLP 
数据文件组成。其中，
Assembly 
表用来存储零部件的
结构关系，
Face 
表用来存储各零件的几何面信息，
Sequence 
表用来存储在
CAD 
中设计装配体时的零部件装配顺序信息，而 
SLP 
文件用来存储各几何
面的三角面片组成信息。
SLP 
文件在存储上以每个几何面为一个存储单位，
并以文件名作为主关键字，文件名标识了所存储的几何面的名字。它同时也
是文件数据库与关系型数据库沟通的桥梁。
 
在上述三个数据库表中，
Assembly 
表和 
Face 
表均有一个 
Body ID 
字
段，表示相同的含义，即零部件的编号，两个表通过零部件编号进行沟通和
联系。在 
Sequence 
表中，有 
Comp ID1 
和 
Comp ID2 
两个字段，表示有配合
约束关系的两个零部件的编号，它们与 
Assembly 
表和 
Face 
表的 
Body ID 
字
段含义相同，是与这两个表进行沟通的桥梁。
 哈尔滨工业大学工学硕士学位论文
 
  12
表 
2-1 Assembly 
表的字段构成
 
Table 2-1 The fields of Assembly table 
字段名
  
数据类型
  
说明
 
Body ID(
主键
)  
数字
  
零部件的编号
 
Name  
文本
  
零部件的名称
 
Type  
文本
  
零部件的类型（零件还是部件）
 
Parent Body ID  
文本
  
父装配体的零件编号
 
Level Num  
文本
  
该零部件在装配体中所处的层次
 
Instance  
数字
  
该零部件的实例数
 
Face Num  
数字
  
此零件的面的数目，如果为装配体，则等于 
0 
表 
2-2 Face 
表的字段构成
 
Table 2-2 The fields of Face table 
字段名
  
数据类型
  
说明
 
Face ID(
主键
)  
数字
  
几何面的编号
 
Face Type  
文本
  
几何面的类型
 
Origin  
文本
  
几何面在 
CAD 
中的参数化原点
 
Norm_Dir  
文本
  
几何面的参数化法线方向
 
Radius_Alpha  
数字
  
圆锥面的参数化半锥角
 
Radius2  
数字
  
圆环的参数化生成环半径
 
Faceid Of Body  
数字
  
几何面在所属零件中的编号
 
Body ID  
数字
  
几何面所属零件的编号
 
Color_R  
数字
  
几何面颜色 
RGB 
值中红色分量值
 
Color_G  
数字
  
几何面颜色 
RGB 
值中绿色分量值
 
Color_B  
数字
  
几何面颜色 
RGB 
值中蓝色分量值
 
表 
2-3 Sequence 
表的字段构成
 
Table 2-3 The fields of Sequence table 
字段名
  
数据类型
  
说明
 
Seq ID(
主键
)  
数字
  
装配顺序号
 
Comp ID1  
数字
  
零部件 
1 
的编号
 
Faceid1  
数字
  
零部件 
1 
的配合面的编号
 
Comp ID2  
数字
  
零部件 
2 
的编号
 
Faceid2  
数字
  
零部件 
2 
的配合面的编号
 
Constr Type  
文本
  
几何约束类型
 
Mate Type  
文本
  
配合类型
 
Mate Param  
文本
  
配合参数
 
Comppath_compid1  
文本
  
零部件 
1 
的装配路径
 
Comppath_compid2  
文本
  
零部件 
2 
的装配路径
 哈尔滨工业大学工学硕士学位论文
 
  13
工装工具的模型信息由 
Assembly 
和 
Face 
两个数据库表和一系列的 
SLP
数据文件构成，并且它们的结构与产品零部件模型的相应数据库表结构相
似。相比于产品零部件模型信息，工装工具模型不再需要它们在 
CAD 
环境
中进行设计时的装配顺序信息。
 
2.4.2  
 工艺信息数据库设计 
装配工艺信息数据库是在虚拟环境下进行装配工艺设计的主要数据支撑
平台。在装配工艺设计过程中产生的装配工艺信息，主要存储于该数据库。
该数据库同样由关系型数据库和文件型数据库构成。
 
考虑装配工艺设计信息的内容和形式，在物理实现和具体组织结构上，
装 配 工 艺 信 息 关 系 型 数 据 库 部 分 由 
WTK_CONSTRAINT_MANAGER 
、
WTK_ASSEMBLY_TASK_PART 
、 
WTK_ASSEMBLY_TASK_TOOL 
、
WTK_ASSEMBLY_PROCESS 
、 
WTK_ASSEMBLY_PROCESS_ADD 
等五个
数据库表组成。其中，
WTK_CONSTRAINT_MANAGER 
用于存储在装配工
艺设计时添加的零部件间的约束关系信息，
WTK_ASSEMBLY_TASK_PART
表用于存储装配工艺设计时每个装配任务中的零部件名称、属性、方位矩阵
等信息，
WTK_ASSEMBLY_TASK_TOOL 
用于存储装配工艺设计时每个装
配任务中的工装工具使用情况，
WTK_ASSEMBLY_PROCESS 
用于存储装配
主要的工艺规程信息，
WTK_ASSEMBLY_PROCESS_ADD 
用于存储一些辅
助的装配工艺规程信息。表 
2-4 
是 
WTK_CONSTRAINT_MANAGER 
表的结
构 ， 表 
2-5 
是 
WTK_ASSEMBLY_TASK_PART 
表 的 结 构 ， 表 
2-6 
是
WTK_ASSEMBLY_PROCESS 
表的结构。
 
文件型数据库主要存储非关系型信息，如装配工艺多媒体文件，装配工
艺规划操作的索引文件，装配路径信息记录文件等。
 
装配工艺多媒体文件和装配路径信息记录文件需要与关系型工艺信息数
据库中的信息进行关联。关系型数据库与文件型数据库的沟通通过这两种文
件的文件名来进行。因此，在存储有装配工艺过程动画信息的多媒体文件和
存储装配路径信息的文本文件的命名上，应遵循相互独立，相互区别的原
则，但是也要保证规律性，能够根据文件名来确定该文件所存储的是哪一个
工序、哪一个工步的第几个操作。一般来说，文件名的命名格式为：“工序
号－”
+
“工步号－”
+
“操作号”，另外，应附带文件的创建时间信息。在
关系型数据库中对相关信息的记载通过信息文件名来进行。
 哈尔滨工业大学工学硕士学位论文
 
  14
表 
2-4 WTK_CONSTRAINT_MANAGER 
表的结构
 
Table 2-4 The structure of table WTK_CONSTRAINT_MANAGER 
字段名
  
数据类型
  
说明
 
ID(
主键
)  
数字
  
几何约束的施加顺序
 
MATETYPE  
文本
  
几何约束的名称
 
BASEPART  
文本
  
基准件的名称
 
BASEFACE  
文本
  
基准件上的配合面的名称
 
ASSEMBLYPART  
文本
  
待装配件的名称
 
ASSEMBLYFACE  
文本
  
待装配件上的配合面的名称
 
BASEMATRIX  
文本
  
施加约束后基准件的位置矩阵
 
PARTMATRIX  
文本
  
施加约束后待装配件的位置矩阵
 
PABASEMATRIX  
文本
  
施加约束前基准件的位置矩阵
 
PAPARTMATRIX  
文本
  
施加约束前待装配件的位置矩阵
 
PARTFREEDOM  
文本
  
被约束后待装配件的自由度
 
PARTLOCOOR  
文本
  
被约束后待装配件的局部坐标系
 
TYPECODE  
文本
  
型号代号
 
PRODUCTCODE  
文本
  
产品代号
 
PHASEMARK  
文本
  
阶段标记
 
表 
2-5 WTK_ASSEMBLY_TASK_PART 
表的结构
 
Table 2-5 The structure of table WTK_ASSEMBLY_TASK_PART 
字段名
  
数据类型
  
说明
 
XH_PK(
主键
)  
数字
  
装配任务流水号
 
TYPE_NAME  
文本
  
型号名称
 
TYPE_CODE  
文本
  
型号代号
 
PRO_NAME  
文本
  
产品名称
 
PRO_CODE  
文本
  
产品代号
 
PHASE_MARK        
文本
  
阶段标记
 
ASM_NAME  
文本
  
装配体名称
 
ASM_CODE  
文本
  
装配体代号
 
ASM_TYPE  
文本
  
装配体类型
 
TASK_ID  
数字
  
装配任务编号
 
TASK_TYPE  
文本
  
装配任务类型
 
PART_NAME  
文本
  
装配的零件名称
 
PART_CODE  
文本
  
装配的零件代号
 
PART_MOVIE  
文本
  
装配零件过程的多媒体文件
 
PART_PATH  
文本
  
零件装配路径
 
PART_MATRIX  
文本
  
零件装配完成后的位置矩阵
 
PART_REMARK  
文本
  
备注信息
 哈尔滨工业大学工学硕士学位论文
 
  15
表 
2-6 WTK_ASSEMBLY_PROCESS 
表的结构
 
Table 2-6 The structure of table WTK_ASSEMBLY_PROCESS 
字段名
  
数据类型
  
说明
 
XH_PK(
主键
)  
数字
  
记录编号
 
TYPE_NAME  
文本
  
型号名称
 
TYPE_CODE  
文本
  
型号代号
 
PRO_NAME  
文本
  
产品名称
 
PRO_CODE  
文本
  
产品代号
 
PHASE_MARK  
文本
  
阶段标记
 
ASM_NAME  
文本
  
装配体名称
 
ASM_CODE  
文本
  
装配体代号
 
ASM_TYPE  
文本
  
装配体类型
 
GX_ID  
数字
  
工序编号
 
GX_NAME  
文本
  
工序名称
 
GB_ID  
数字
  
工步编号
 
GB_NAME  
文本
  
工步名称
 
CZ_ID  
数字
  
操作编号
 
CZ_CONTENT  
文本
  
操作内容
 
TASK_ID  
数字
  
装配任务编号
 
PROCESS_REMARK  
文本
  
工艺备注信息
 
2.4.3  
 系统管理数据库设计 
由于装配工艺设计一般是由工艺设计人员来完成的，设计数据具有一定
程度的保密性和安全性要求，同时，为了保证对装配工艺数据的有效管理，
基于虚拟现实的装配工艺设计系统必须设置系统管理功能。系统管理数据库
由两个表构成，分别是 
WTK_SYSTEM_CODE 
和 
WTK_SYSTEM_USER
，
前者实现对装配工艺数据的管理，后者实现对系统用户的管理。这两个数据
库表的结构相对比较简单。
 
2.5  
 本章小结 
本章首先对基于虚拟现实的装配工艺设计系统进行了需求分析，明确了
系统的各种需求状况，在此基础上，建立了系统的四层次体系结构，理清了
在虚拟现实环境中进行装配工艺设计操作的工作流程。同时进行了系统底层
数据库的设计，为进一步进行系统的研究工作打下了坚实的基础。
 哈尔滨工业大学工学硕士学位论文
 
  16
第
3
章 虚拟装配工艺设计关键技术
 
基于虚拟现实的装配工艺设计的关键技术主要包括：①从商品化 
CAD
环境到虚拟现实环境的模型信息转换；②虚拟装配环境下的实时碰撞检测；
③动态约束识别与零件准确定位；④虚拟装配工艺规划过程；⑤装配工艺信
息编辑与规程制定等关键技术。本章将分别对这些关键技术进行分析研究。
 
3.1  
 
  
从 
Pro/E 
到虚拟现实环境的模型信息转换
 
由于虚拟现实环境的建模能力较弱，只能进行形状简单的几何物体，如
圆柱体、立方体和球体等的造型，对于机械产品而言，这是远远不够的，因
此，常用的建模手段是采用商品化的 
CAD 
系统，如 
Solid Works
、
Pro/E
、
UG 
等，建立零部件的三维实体模型
[39]
。但是由于 
CAD 
环境与虚拟现实环
境对模型的表示方法不同，
CAD 
软件中构建的零部件模型不能被虚拟现实
环境所识别。因此必须先对 
CAD 
模型信息进行转换，再导入到虚拟现实环
境中进行重构。这就需要开发 
CAD 
到虚拟现实环境之间的接口，以实现零
部件模型信息的转换工作。本文以 
Pro/E 
软件为例，利用 
Pro/E 
二次开发技
术，进行了 
CAD 
到 
VR 
环境间模型信息转换接口的研究。
 
3.1.1  
 
Pro/E 
二次开发技术
 
Pro/E 
作为一个高端、全方位的三维产品设计开发软件，具有尺寸驱
动、基于特征及单一数据库的特点。强大的功能使其日益成为国内最受欢迎
的 
3D  CAD/CAM 
系统，被广泛应用于造型设计、机械设计、模具设计、加
工制造、机构分析、有限元分析及相关数据库管理系统等的各个领域。
 
PTC 
公司针对 
Pro/E 
软件提供给了用户丰富的二次开发工具，利用这些
工具可以比较方便地实现面向特定产品的程序自动建模功能，并且可以把较
为丰富的非几何特征如材料特征、精度特征加入所产生的模型中，所有信息
存入统一的数据库。常用的 
Pro/E 
二次开发工具有族表
(Family  Table)
、用户
定义特征
(UDF)
、
Pro/program
、
J-link
、
Pro/toolkit 
等。其中，
Pro/toolkit 
能
实现与 
Pro/E 
的无缝集成，是 
Pro/E 
自带的功能最强大的二次开发工具。它
封装了许多针对 
Pro/E 
底层资源调用的库函数与头文件，借助第三方编译环
境进行。
Pro/toolkit 
采用了面向对象的风格，在 
Pro/E 
与应用程序之间通过哈尔滨工业大学工学硕士学位论文
 
  17
函数调用来实现数据信息的传输
[40]
。在 
Pro/toolkit 
中最重要的两个基本概念
是对象和行为，每个函数的命名约定是：“
Pro
”前缀
+
对象的名字
+
行为的
名字。一个 
Pro/toolkit 
对象是一个定义完整、功能齐全的 
C 
结构，能够完成
与该对象有关的行为。大多数对象对应的是 
Pro/E 
数据库中的一个元素
(Item)
，例如特征、面等。然而，另外一些对象就比较抽象或是暂时的。
Pro/toolkit 
中还有其他一些特点：统一的、广泛的函数出错报告；统一的函
数或数据类型的命名约定等。
 
Pro/E 
为二次开发应用程序提供两种工作模式：同步模式和异步模式，
由于后者使用复杂而很少使用，前者又分为 
Spawn(
多进程模式
)
或 
dll(
动态
链接库模式
)
。根据工作模式不同，编译时的生成文件也不同，若采用
Spawn 
模式工作，必须将源文件编译生成 
EXE 
文件；若用 
dll 
模式工作，将
把源文件编译生成动态链接库。
 
3.1.2  
 支持虚拟装配工艺设计的零部件底层信息模型设计 
CAD 
系统和虚拟现实系统在零部件模型的表达方面存在较大不同。在
商品化 
CAD 
系统中，随着参数化建模技术的成熟，零部件几何信息采用精
确的数学模型来表达，
Pro/E 
就是一个典型代表。而在虚拟现实环境中，为
了提高三维场景实时显示的效果和速度，几何物体采用三角面片模型来表
达。因此，需要首先将 
CAD 
中的零部件参数化模型转化为三角面片模型，
才能在虚拟现实环境中将设计好的产品零部件显示出来。但是，仅仅做到这
些对于进行装配工艺设计还是不够的。因为单纯的三角面片模型存在如下两
个缺陷：①损失了零部件的精确几何信息和拓扑信息，使得装配工艺设计人
员难以对产品模型进行精确的分析，尤其是拓扑信息，在 
CAD 
系统中存在
的点、线、面之间的拓扑关系在虚拟环境中全部丢失。②丢失了 
CAD 
零部
件模型包含的大量工程设计信息，使得虚拟装配工艺设计系统难以捕捉和维
护产品设计意图与产品设计约束等过程信息，同时也为表达与确定零部件间
的装配关系带来了困难
[41]
。
 
针对上述问题，本文提出了图 
3-1 
所示的零部件底层信息模型。该模型
把零部件模型的信息分为三类：几何信息、拓扑信息和装配信息。几何信息
主要是指零部件的几何形状、颜色等信息；拓扑信息是指零部件的结构关
系，例如各个子装配体或部件是由哪些零件组成的，每个零件又包括哪些几
何面等。装配信息则包括零部件模型其他的所有信息，例如装配约束关系等哈尔滨工业大学工学硕士学位论文
 
  18
等。几何信息仍然用三角面片模型来表示，拓扑信息和装配信息则利用模型
信息数据库存储并与虚拟装配工艺设计环境进行交互。三种信息紧密地联系
在一起，形成一个有机的整体，以支持基于虚拟现实的装配工艺设计操作。
 
 
图 
3-1  
支持虚拟装配工艺设计的零部件底层信息模型
 
Fig.3-1 The model of rock-bottom part information supporting  
assembly process planning based on VR 
3.1.3  
 分类信息转换 
本文采用分类信息转换的方式进行零部件模型信息的转换工作。从
Pro/E 
系统到虚拟现实环境的零部件模型信息转换流程如图 
3-2 
所示。
 
 
图 
3-2  
从 
Pro/E 
系统到虚拟现实环境的零部件模型信息转换流程
 
Fig.3-2 The transform flow of part model information from Pro/E to VR 
从 
Pro/E 
系统到虚拟现实环境的零部件模型几何信息的转换，通过建立
中间数据格式文件的方式进行。尽管目前已经有 
IGES
、
STEP 
等图形数据
VR 
环境零部件模型信息
 
 
几何信息
  
拓扑信息 装配信息 
模型信息
数据库
 
模型信息
 
数据库
 
三角面片
 
文件
 
Pro/E 
建模系统
Pro/E 
二次开发
模型类型转换接口
 
SLP 
三角面片文件
 
几何信息
 
基于虚拟现实的装配工艺设计环境
装配信息
  
拓扑信息
 
模型信息
 
 
数据库
 
多层次型拓
扑结构
 哈尔滨工业大学工学硕士学位论文
 
  19
交换标准格式文件，
Pro/E 
也可以将它的模型文件转换成这类格式，但是，
这些中间文件的格式比较复杂，组织非常繁琐，读取相对困难，不易提取所
需信息为虚拟环境利用。为了做到轻量化，本文采取了利用 
Pro/toolkit 
构造
模型类型转换接口，将模型的几何信息转换成 
SLP 
格式文件的方法。
SLP
文件是 
Pro/E 
的渲染文件，它描述了各几何面的颜色、三角面片组成等信
息。具体的 
SLP 
文件格式如图 
3-3 
所示。当零部件模型被载入虚拟现实环
境时，装配工艺设计系统读取 
SLP 
文件信息，根据其中的三角面片顶点及
法线等信息渲染出三角面片，从而对零部件进行重构。
 
 
图 
3-3 SLP 
文件示例
 
Fig.3-3 The sample of SLP document 
Pro/E 
中零部件模型的拓扑信息和装配信息的转换采用利用 
Pro/toolkit
访问 
Pro/E 
底层数据库，从中提取相关信息并转存入自建的模型信息数据库
的方式。对于拓扑信息，本文采用装配体、子装配体、零件、几何面及面片
等组成的多个层次的拓扑结构描述。装配体是子装配体与零件的集合体，子
装配体是零件的集合体，零件是面的集合体，面是面片的集合体。
 
三角面片
三个顶点
的坐标
 
一 个 三
角 面 片
信息块
 
三角 面片
三个 顶点
的法线
 
文件头
 
solid BASE_face0 
color 1.000000 1.000000 0.000000 
facet 
              normal 0.000000 -1.000000 0.000000 
              normal 0.000000 -1.000000 0.000000 
              normal 0.000000 -1.000000 0.000000 
outer loop 
               vertex 25.000000 0.000000 27.250000 
                vertex -23.409010 0.000000 26.590990 
                vertex -25.000000 0.000000 27.250000 
endloop 
endfacet 
facet 
              normal 0.000000 -1.000000 0.000000 
              normal 0.000000 -1.000000 0.000000 
              normal 0.000000 -1.000000 0.000000 
outer loop 
               vertex -23.409010 0.000000 26.590990 
              vertex 25.000000 0.000000 27.250000 
              vertex 23.409010 0.000000 26.590990 
endloop 
endfacet 
……….. 
endsolid BASE face0 
几何面颜色
 哈尔滨工业大学工学硕士学位论文
 
  20
零部件模型拓扑信息的结构如图 
3-4 
所示，每个装配体、子装配体、零
件、几何面和面片都有一个唯一的名称，为基于虚拟现实的装配工艺设计环
境建立起清晰的拓扑结构。零部件的这种拓扑结构为装配工艺设计操作提供
了极大的便利，是装配模型信息的核心组织模式，在进行装配工艺设计时，
装配工艺设计系统通过此结构可以寻找到上至装配体，下至面片的所有零部
件实体以及它们的相关信息。
 
 
图 
3-4  
零部件模型拓扑信息层次结构
 
Fig.3-4 The hierarchy of part model’s topology information 
由于装配约束关系以几何面为基础建立，因此装配信息的转换过程同样
建立在零件几何面的层次上。在基于虚拟现实的装配工艺设计系统中，主要
用到的装配信息为零部件间的配合信息，包括存在配合关系的零部件的名
称、配合类型、配合面的名称、配合面的编号、配合面的类型等。
 
3.2  
 分层次的实时碰撞检测算法 
3.2.1  
 虚拟环境中的碰撞检测技术概述 
实时的碰撞检测是虚拟现实系统的基本要求，对于提高虚拟现实环境的
真实性，增强虚拟环境的沉浸感有着至关重要的作用。在虚拟环境中，当两
个物体碰撞时，应该像现实世界中一样发生弹开或粘附现象，而不应发生一
装配体
 
子装配体 
1
… 
    … 
… 
子装配体 
s
几何面 
F
n
 
面片 
T
x
 
零件 
P
n
 
… 
零件 
P
r
零件 
P…
s
 
几何面 
F
 
m
零件 
P
u
  
… 
零件 
P
1
  
零件 
P
t
 
几何面 
F
n
几何面 
F… 
m
面片 
T
 h
  … …   
面片 
T
p
  …  
面片 
T
q
…… …
… 哈尔滨工业大学工学硕士学位论文
 
  21
个物体穿入另一物体的现象，要做到这一点，必须能够实时、准确地判断虚
拟物体间是否发生了碰撞。对于基于虚拟现实的装配工艺设计系统来说，实
时碰撞检测不仅是提高系统拟实性的要求，也是验证装配操作的可行性、装
配路径的合理性以及工装工具操作空间的支撑技术。
 
碰撞检测技术可分为静态碰撞检测、伪动态碰撞检测和动态碰撞检测三
类。基于虚拟现实的装配工艺设计系统一般采用伪动态碰撞检测，该环境下
的碰撞检测问题可描述如下：碰撞检测的输入模型为一个静态的环境对象和
一个动态的活动对象的几何模型，它们均为基本几何元素的集合。活动对象
可以在虚拟环境中自由运动，方向和大小完全取决于仿真过程或者用户控制
的输入设备，无法用关于时间的运动方程来表示，只能得到某一时间采样点
或一固定参照物的运动信息
(
旋转角度和平移量
)
。其任务是确定在某一时刻
两个几何模型是否发生干涉，即它们的交集是否不为空，如发生了碰撞，还
需确定碰撞点
(
参与碰撞的基本几何元素
)
[42]
。
 
最原始最简单的碰撞检测方法是一种蛮力计算的方法，即对两个几何模
型中的所有基本几何元素进行两两相交测试，尽管这种方法可以得到正确的
结果，但当模型的复杂度增高时，这种 
O(n
2
)
次的相交测试显然是无法容忍
的，因此，速度是虚拟装配工艺设计环境中碰撞检测的核心问题。
 
在过去的几十年中，人们对如何提高碰撞检测的速度进行了不懈的研
究，形成了一些较为成熟的技术。在两个几何模型间的碰撞检测算法大致可
分为两类：空间分解法和层次包围法
[43]
。这两种方法的目的都是为了尽可
能地减少需要进行相交测试的对象或基本几何元素对的数目。但空间分解法
一般适合于稀疏的环境中分布比较均匀的几何对象间的碰撞检测。层次包围
盒法是在虚拟环境中应用比较广泛的一种碰撞检测方法。
 
3.2.2  
 基于层次包围盒的碰撞检测算法 
基于层次包围盒的碰撞检测算法的基本思想是用体积略大而几何特性简
单的包围盒来近似的描述复杂的几何对象，进而通过构造树状层次结构可以
越来越逼近对象的几何模型，直到几乎完全获得对象的几何特性，从而只需
对包围盒重叠的部分进行进一步的相交测试。
S.Suri 
等人对包围盒方法进行
了一系列的理论研究，证明了使用包围盒方法可以使碰撞检测的算法复杂度
大大降低。
 
层次包围盒方法的关键在于包围盒类型的选取，对用于碰撞检测的包围哈尔滨工业大学工学硕士学位论文
 
  22
盒，有两个评价标准：①简单性。包围盒要以简单的几何图形为基础，至少
要比所包围的几何对象简单。简单性不仅表现为几何形状简单易于计算，而
且包括相交测试算法的快速简单。②紧密性。包围盒应尽可能地逼近所包围
的几何形体。若冗余空间过大，则会损失大量的测试时间，使碰撞检测达不
到所预期的速度要求。但这两个评价标准往往存在矛盾，如何在二者之间寻
找平衡，达到可以接受的效果，是层次包围盒碰撞检测算法研究重点之一。
 
比较常见的包围盒有沿坐标轴的包围盒 
AABB(Axis-Aligned  Bounding 
Boxes) 
、包围球 
(Spheres) 
、方向包围盒 
OBB(Oriented  Bounding  Boxes) 
。
AABB 
是应用最早的包围盒，紧密性差，但构造和相交测试都比较简单，存
储空间小，有利于缩短碰撞检测相交计算的时间。
OBB 
与被包围对象的紧
密性好，但算法较复杂，碰撞检测相交计算稍长。球包围盒介于两者之间。
 
 
图 
3-5 AABB 
包围盒构造示意图
 
Fig.3-5 The sketch map of AABB construction 
3.2.3  
 改进的 AABB 
层次包围盒碰撞检测算法及其实现
 
为了提高基于虚拟现实的装配工艺设计系统中碰撞检测的速度和效率，
本文提出了一种在 
AABB 
层次包围盒算法基础上的改进算法。
 
AABB 
包围盒构造简单，相交运算快速，适合于基于虚拟现实的装配工
艺设计对碰撞检测的实时性需要。单纯的 
AABB 
层次包围盒算法在进行零
部件的碰撞检测时，首先对移动零件和静止零件进行零件包围盒之间的两两
碰撞检测，识别出包围盒发生碰撞干涉的零件对，然后对该零件对直接进行
三角面片级的精确碰撞检测。这种方法需要对零件对中零件 
1 
的所有三角面
Y 
X
Z 
一个物体的 
AABB 
一个 
3D 
物体
 哈尔滨工业大学工学硕士学位论文
 
  23
片和零件 
2 
的所有三角面片进行两两碰撞检测，计算量大而且效率较低，速
度不理想。并且利用这种算法进行碰撞检测无法找到发生碰撞的零件对上的
几何面对，从而无法判断这两个零件之间是否存在配合关系，为后续的自动
约束识别带来困难。
 
为了解决上述问题，本文提出利用层次分解和空间分解的思想对 
AABB
层次包围盒算法进行改进。要点如下：
 
(1)  
在零件和三角面片之间添加零件分割块层和几何面层，在虚拟装配
工艺设计环境中形成零件、零件分割块、几何面、三角面片四个碰撞检测的
层次，由高层到低层逐层进行检测，并根据检测结果不断缩小检测范围，以
达到减少计算量、加快碰撞检测速度的目的。
 
(2)  
加入几何面层次的碰撞检测除了上述目的之外，也是为了可以较方
便地获得两个零件上发生碰撞的几何面，从而进行零部件间的基于几何面的
约束识别与精确定位。
  
(3)  
加入零件分割块层次是由于对于某些零件而言，其几何面的数量也
是相当多的，直接进行由零件层到几何面层的碰撞检测，计算量仍然比较
大，因此，有必要在零件层与几何面层之间人为加入一个中间层次，以减少
计算量。当零件模型被载入虚拟现实环境时，预先采用空间分解法对零件进
行均匀分割，形成小的零件分割块，同时建立零件与这些分割块、几何面与
这些分割块之间的对应关系，在进行零件间碰撞检测时就可以直接利用这些
分割块。
 
  
图 
3-6  
零件分割块示意图
 
Fig.3-6 The sketch map of part block 
具体的算法流程主要分为如下几个步骤：
 
步骤 
1  
在零部件模型载入时对所有零件进行分割，建立零件与分割
X
Y
Z 哈尔滨工业大学工学硕士学位论文
 
  24
块、分割块与几何面之间的对应关系。
 
步骤 
2  
对移动零件 
P
1
和所有静止零件构造 
AABB 
包围盒，并进行移动
零件 
P
1
和所有静止零件包围盒之间的碰撞检测，如果发生碰撞，找出发生
碰撞干涉的零件对
(P
1
, P
2
)
。
 
步骤 
3  
将零件 
P
1
的分割块集合 
S
1
={B
1i
|i=1,2,…,m,  m 
为 
P
1
分割块总数
}
中的每一个分割块与零件 
P
2
的分割块集合 
S
2
={B
2j
|j=1,2,…,n,  n 
为 
P
2
分割块
总数
}
中的每一个分割块进行两两碰撞检测，如果发生碰撞，找出发生碰撞
的零件分割块集合对 
G
1
={B
1i
|1≤i≤m}
和 
G
2
={B
2j
|1≤j≤m}
。
 
步骤 
4  
通过零件分割块与几何面之间的对应关系确定零件分割块集合
G
1
包含的几何面集合 
C
1
={F
1x
|1≤x≤r,  r 
为 
P
1
几何面总数
}
，零件分割块 
G
2
包
含的几何面集合 
C
2
={F
2y
|1≤y≤k, k 
为 
P
2
几何面总数
}
。
 
步骤 
5  
将几何面集合 
C
1
中的每一个几何面的包容盒与零件 
P
2
的包容
盒进行碰撞检测，如果发生碰撞，找出与零件 
P
2
的包容盒发生碰撞的几何
面集合 
C
1d
，
C
1d
∈
C
1
。将几何面集合 
C
2
中的每一个几何面的包容盒与零件
P
1
的包容盒进行碰撞检测，如果发生碰撞，找出与零件 
P
1
的包容盒发生碰
撞的几何面集合 
C
2d
，
C
2d
∈
C
2
。
 
步骤 
6  
将 
C
1d
中的每一个几何面的包容盒与 
C
2d
中的每一个包容盒进行
两两碰撞检测，如果发生碰撞，分别找出 
C
1d
中发生碰撞的几何面集合 
C
1du
和 
C
2d
中发生碰撞的几何面集合 
C
2dv
，
C
1du
∈
C
1d
，
C
2dv
∈
C
2d
。
 
步骤 
7  
对构成 
C
1du
集合中的所有几何面的三角面片的包容盒和构成
C
2dv
集合中的所有几何面的三角面片的包容盒进行两两碰撞检测，如果发生
碰撞，找出发生碰撞的属于 
C
1du
中几何面的三角面片的集合 
F
1
，以及属于
C
2dv
中几何面的三角面片的集合 
F
2
。
 
步骤 
8  
确认两零件 
P
1
,  P
2
发生碰撞，通过三角面片与集合面的隶属关
系，由集合 
F
1
，
F
2
分别得到两个零件上发生碰撞的几何面。
 
步骤 
9  
做出碰撞响应（移动零件 
P
1
退回原位置或装配到位）。
 
从上面步骤可以看出，本算法一共分层次进行了六次几何对象的 
AABB
包容盒间的两两碰撞检测，从零件与零件之间的包容盒碰撞检测开始，逐层
细化，同时对发生碰撞检测的对象逐层筛减，最后进行三角面片级的碰撞检
测，从而提高了检测速度和效率。
 
为了验证该方法的有效性，本文利用面向对象的软件集成开发环境
Visual  C++  6.0 
和虚拟现实环境软件开发包 
World Tool Kit  9.0
，对该算法进行
了编程实现，并构造原型环境进行了验证，如图 
3-7 
所示。
  哈尔滨工业大学工学硕士学位论文
 
  25
a)  
零件碰撞前
 
 
b)  
零件碰撞后
 
图 
3-7  
零部件间的碰撞检测
 
Fig.3-7 collision detection between parts 
3.3  
 动态约束识别与零件准确定位 
在实际的装配过程中，触觉反馈是一个很重要的感知特性，离开触觉进
行装配是十分困难的。目前，由于虚拟现实硬件技术的制约，大多数虚拟现
实系统尚很难提供对触觉的反馈，同时由于三维鼠标、显示设备等的精度的
制约，基于虚拟现实的装配工艺设计系统要真正为装配工艺设计人员所接
受，使他们能够自如、精确地进行装配定位，就必须在虚拟装配环境中提供
零部件间的动态约束识别及其精确定位技术
[44]
。
 
3.3.1  
 动态约束识别 
零部件间的配合约束关系是在 
CAD 
环境下进行产品设计时预先定义好
的。零部件间的动态约束识别是指在装配过程中，虚拟装配工艺设计系统能
够随着工艺设计人员对零部件的操作运动，及时识别出该零部件与附近其他
零部件间的装配约束关系，并对这些约束关系进行有效管理。进行约束识别
的目的是为了建立对零件的运动自由度的限制，从而实现零部件在虚拟环境
中的运动导航。
 
零部件间的配合约束关系通过 
CAD 
到 
VR 
环境的数据转换接口在零部
件模型载入时从零部件 
CAD 
模型中提取出来，存入模型信息数据库的
Sequence 
表中。这些配合约束关系建立在几何面层上，
Sequence 
表描述了哈尔滨工业大学工学硕士学位论文
 
  26
零件、几何面与配合约束之间的对应关系，这种对应关系是进行动态约束识
别的基础。
 
基于虚拟现实的装配工艺设计环境的动态约束识别工作是以检测到零部
件间的碰撞为触发点的，其主要流程如图 
3-8 
所示。
 
 
图 
3-8  
动态约束识别流程图
 
Fig.3-8 Flow chart of dynamic constraint recognition 
     
当通过碰撞检测检测到零部件发生碰撞后，返回发生碰撞的零件几何面
对，然后在模型信息数据库中搜索，检测这两个几何面之间是否存在配合约
束关系，如果存在的话将对用户给出提示，询问用户是否按照检测出来的装
配约束关系将零部件装配到位。
 
3.3.2  
 零件精确定位 
零部件的精确定位技术是指虚拟装配系统克服三维鼠标、显示设备等的
精度限制，使零部件能够在装配操作中精确定位的技术。
 
零部件的定位即为对配合约束操作的实现。通过对零部件间的配合约束
关系进行分解，本文认为零部件之间常见的配合约束关系均可由如下三种基
碰撞检测
 
是否存在碰撞
 
返回发生碰撞的几何面对
检测该几何面对之
间是否存在约束
 
提示用户是否按该
配合约束装配零件
零件定位
 
是
是
是
否
否
否哈尔滨工业大学工学硕士学位论文
 
  27
本的几何约束操作的组合得到：角度约束操作、平行约束操作和距离约束操
作，并且距离约束操作一般是在两操作对象已经执行平行约束操作后执行，
实际上，平行约束操作是角度约束操作的一种特殊情况
(
角度为 
0)
。表 
3-1
是常见配合约束与上述三种基本几何约束之间的关系。
 
表 
3-1  
常见配合约束与三种基本几何约束之间的关系
 
Table 3-1 Common mates and constraints and the relations  
      between them and three basic constraints 
常见配合约束
  
对应的基本几何约束的组合
 
面面贴合
  
平行操作
+
角度操作
+
距离操作
 
面面对齐
  
平行操作
+
距离操作
 
轴线重合
  
平行操作
+
距离操作
 
轴孔配合
  
平行操作
+
距离操作
+
距离操作
 
因此，我们只要实现角度约束操作、平行约束操作和距离约束操作这三
种基本操作，就可以按照零部件的配合约束关系完成常见的装配操作。
 
3.3.2.1 
角度约束操作的实现  由于数据转换接口从产品零部件 
CAD 
模型中
提取出来的各种不同几何面的信息是不一样的，如表 
3-2 
所示，因此，在进
行角度约束操作的时候，不同的几何面间实现方式略有不同。下面以平面和
圆柱面为例予以说明。
 
表 
3-2  
从零部件 
CAD 
模型中提取出来的各种不同几何面的信息
 
Table 3-2 The information of different faces extracted from part CAD model 
几何面类型
  
提取出来的有关信息
 
平面
  
基点、法矢量
 
圆柱面
  
轴线上一点、轴向方向矢量、半径
 
球面
  
球心、半径、张角
 
圆锥面
  
圆锥面底面中心点、轴向矢量、锥角
 
如图 
3-9
、
3-10 
所示，平面间的角度指的是平面的法矢量之间的角度，
而圆柱面间的角度指的是面柱面轴向方向矢量之间的角度。在进行角度约束
操作的时候，首先要得出两个几何平间之间当前的角度。
 
在空间解析几何中存在如下公式，对于 
a ,  b 
为两个几何矢量，有：
 
cos ,
a b
a b
a b
⋅
< >= 
                        (3-1) 哈尔滨工业大学工学硕士学位论文
 
  28
    
图 
3-9  
平面间的角度
                 
图 
3-10  
圆柱面间的角度
 
Fig.3-9 The angle of planes             Fig.3-10 The angel of cylinders 
根据公式
(1-1)
，几何面之间的角度有：
 
1 2
1 2
cos
OP O P
OP O P
θ
⋅′
=
′
                        (3-2) 
 
1 2
1 2
arccos( )
OP O P
OP O P
θ
⋅′
=
′
                      (3-3) 
假设 
O 
点所在平面为基准件配合面，
O′
点所在平面为待装配件配合
面，两平面间目标角度为γ，则γ与θ之差φ=γ-θ即为待装配零件配合面
所要旋转的角度，旋转轴为
1
OP 和
2
O
′
P 的向量积
1
2
OP 
×
O
′
P ，旋转点为 O′
。 
绕三维空间中的任意矢量进行某一个角度的旋转可以用欧拉角、旋转矩
阵和四元数三种工具来表示。欧拉角由于存在万向节死锁等问题，使用存在
限制，一般较常用的是旋转矩阵和四元数，二者都可很好地表示三维空间中
的上述旋转操作，但是从运算效率上来看，四元数相比于旋转矩阵更具有优
势，运算速度更快，尤其是当旋转对象较复杂时，这种优势表现得比较明
显。因此，选用四元数来表示对待装配件施加的这种角度约束操作。 
四元数是由威廉·哈密顿在 1843 年提出的数学概念，它可以看作是复
数的扩展。一个四元数可以表示为： 
q 
=
w 
+
xi 
+
yj 
+
zk 
                     
(3-4)
 
其中 
w 
是一个实数。这样，绕矢量 
1
2
OP 
×
O
′
P 旋转φ角度表示成四元数为： 
1
2
cos( ) ( ) sin( )
2 2
Q OP O P
φ φ
= + ×′ ⋅ 
            
(3-5)
 
因为零件的方位变换等同于对零件上几何面的方位变换，因此，对零件的角
度约束操作可通过对几何面的旋转操作来执行。在旋转操作的实施过程中，
Z 
X 
θ
O 
O
＇
P
1
 
Z
X
θ
O
PO
′
 
1
P
2
 
Y 
Y
P
2哈尔滨工业大学工学硕士学位论文
 
  29
为了简便，采用先将待装配件的基点移到虚拟环境全局坐标系原点，然后进
行旋转，最后再移回原位置的做法。设待装配件配合面原来的方位矩阵为
A，基点 O
′的空间位置坐标为 
B=(x, y, z)
，则将装配件的基点移到全局坐标
系原点的计算公式为：
 
1
A A B
−
′ = ⋅ 
                             (3-6) 
然后进行旋转变换，计算公式为：
 
1
1
1
2
cos( ) ( ) sin( )
2 2
A A Q
A B Q
A B OP O P
φ φ
−
−
′ =′⋅
= ⋅ ⋅
⎡ ⎤
= ⋅ ⋅ + ×′ ⋅
⎢ ⎥
⎣ ⎦
        (3-7) 
旋转变换完成后，待装配件基点移回原位：
 
A
′′ =
A
′ ⋅
B                             (3-8) 
3.3.2.2 
距离约束操作的实现  距离约束操作一般是在实现操作对象的平行
之后进行的。此时，进行距离约束操作实际上就是对两个操作对象之间的垂
直距离进行调整，移动待装配件到适当的位置。
 
假设两操作对象的当前位置如图 
3-11 
所示，
 
 
a)  
平面之间的距离
                       b)  
圆柱面之间的距离
 
图 
3-11  
两几何面之间的距离
 
Fig.3-11 The interval of two geometrical faces 
则两平面法线之间的当前距离为：
 
d 
=
OO
′
cos
θ 
                        (3-9) 
两圆柱面轴线之间的当前距离为：
 
d 
=
OO
′
sin
θ 
                       (3-10) 
O
′
O 
Z 
Y 
X 
θ 
d 
Z
O 
O
′
 
X
Y
θ 
d 
P哈尔滨工业大学工学硕士学位论文
 
  30
此时，两法线或两轴线的目标距离 
l 
与当前距离 
d 
之差 
l-d 
就是待装配件需
要移动的距离。θ的值利用公式(3-1)可以求得，故当前距离 d 
也可求。此
时，对于平面而言，距离约束操作通过将待装配件沿其法矢量方向平移 
l-d
即可，对于圆柱面而言，则需要先将垂足 
P 
点空间位置求出，然后将待装
配件沿 
O
′
P 
方向移动 
l-d 
的距离。
 
3.3.2.3 
平行约束操作的实现  平行约束操作的实现方法与角度约束基本相
同。实际上，平行约束是角度约束的一种特殊情况，即目标角度为 
0 
的情
况。平行约束操作的实现方法即是以 
0 
为目标角度γ，执行角度约束操作。 
图 
3-12
、
3-13 
和 
3-14 
分别为平面间的三种基本约束操作的示例。
 
    
a)  
角度约束前
                        b)  
角度约束后
 
图 
3-12  
角度约束操作
 
Fig.3-12 The operation of angle constraint 
    
a)  
平行约束前
                          b)  
平行约束后
 
图 
3-13  
平行约束操作
 
Fig.3-13 The operation of parallel constraint 哈尔滨工业大学工学硕士学位论文
 
  31
    
a)  
距离约束前
                         b)  
距离约束后
 
图 
3-14  
距离约束操作
 
Fig.3-14 The operation of interval constraint 
3.4  
 虚拟装配工艺规划 
虚拟装配工艺规划是基于虚拟现实的装配工艺设计系统的核心工作环
节，主要包括装配顺序规划和装配路径规划，它们主要依靠工艺设计人员依
据工艺文件要求和自己的经验知识来进行。
 
3.4.1  
 自动约束识别装配方式 
自动约束识别方式是在前述的动态约束识别的基础上进行的。在虚拟环
境中采用自动约束识别方式进行装配操作时，系统主要工作流程如下：
 
步骤
  1  
利用二维鼠标选取待装配零部件。
 
步骤 
2  
利用三维鼠标拖动待装配零部件在虚拟场景中运动，按照装配
经验知识沿优化的装配路径向被装配件靠近，并与其接触。
 
步骤 
3  
系统检测到碰撞情况发生，对发生碰撞的零件几何面高亮显
示，并对这两个几何面之间的配合约束关系进行检索，如果存在配合约束关
系，给用户提示，询问用户是否按配合约束关系将待装配零部件装配到位。
 
步骤 
4  
如果该配合约束关系符合用户装配意图，则进行确认，系统将
对把配合约束关系分解成基本几何约束关系的组合，然后依次装配到位，并
施加相应约束。如果不符合用户装配意图，则利用三维鼠标继续拖动零部件
在虚拟场景中运动，寻找装配位置。
 哈尔滨工业大学工学硕士学位论文
 
  32
3.4.2  
 交互式约束定义装配方式 
交互式约束定义装配方式是对自动约束识别装配方式的补充，它采用人
机交互的方式进行约束定义，完成装配操作。这种装配方式主要应用在需要
对模型建立环节定义的装配约束关系进行调整或修改的情况。
 
交互式约束定义装配方式下的装配操作主要依靠约束管理器来进行。约
束管理器可以对零部件间所有装配约束关系进行管理，并提供人机交互式的
管理操作界面。
 
交互式约束定义装配方式下的装配操作主要步骤如下：
 
步骤
  1  
打开约束管理器。
 
步骤
  2  
利用二维鼠标选定装配基准件的配合面和待装配件的配合面。
 
步骤
  3  
选定配合约束关系
 
步骤 
4  
按照配合约束关系，执行装配操作，并施加约束，同时更新装
配工艺信息数据库中的装配约束信息。
 
由于零部件间的绝大部分约束配合关系都不需要进行调整和修改，所以
系统进行装配操作时，主要在自动约束识别装配方式下进行，这有利于加快
装配操作速度，提高工艺设计效率。而人机交互式约束定义装配方式则解决
了自动约束识别装配方式在必要情况下无法对原有装配约束关系进行调整或
修改的问题，是自动约束识别装配方式的有效补充。二者的有机结合，基本
能够满足装配工艺设计过程对装配操作的要求，使虚拟环境下的装配操作更
能够充分利用工艺设计人员的经验知识，从而得到优化的工艺方案。
 
3.4.3  
 装配路径记录与编辑 
装配路径规划是基于虚拟现实的装配工艺设计的重要内容。装配路径规
划的目的是为了找到一条优化的装配路径，该装配路径长度应比较短，而且
在沿该装配路径的装配操作中不会发生干涉现象
[45]
。
 
     
为了得到优化的装配路径，不仅需要系统提供装配操作过程中对碰撞检
测的支持，而且还应该提供对零部件的装配路径记录和编辑的支持。
 
装配工艺路径的记录是采取不断对零部件的位置和方向进行采样的方式
实现的。每隔一定的时间，一般是几十微秒，系统就读取一次装配场景中的
零部件的方位信息，并用文本文件形式保存。
 
装配路径的编辑实质上是对零部件装配路径的采样点位置的调整操作。哈尔滨工业大学工学硕士学位论文
 
  33
基于虚拟现实的装配工艺设计系统提供装配路径采样点的显示功能，如图
3-15 
所示。用户可以通过对采用点的拖动或者通过在其属性对话框中对其
位置数据的修改来调整这些采样点的位置，系统将自动对更改后的采样点重
新用平滑样条曲线进行连接并自动重新按编辑后的装配路径进行装配过程仿
真，以检验调整后的装配路径的可行性。
 
  
a)  
装配路径的显示
                      b)  
装配路径的编辑
 
图 
3-15  
装配路径的显示与编辑
 
Fig.3-15 The display and edit of assembly path 
3.4.4  
 装配过程动画录制 
装配过程动画录制是为了形成多媒体形式的装配工艺信息记录，它有两
个目的：一是在需要的时候可以对以前的装配工艺规划过程进行反演，以便
装配工艺人员查看已经完成的在装配工艺；另一方面是为装配工艺信息编辑
和装配现场示教准备视频信息。目前虽已有商品化动画录制软件，但均无法
实现与基于虚拟现实的装配工艺设计系统集成，只能两个软件系统交替操
作，十分不便，另外，由于商业化动画录制软件考虑产品能在大多数计算机
硬件平台使用的需要，往往降低图象质量，导致画面不够清晰连续
[46]
。因
此，有必要开发操作简单，与虚拟装配环境集成的动画录制功能。
 
3.4.4.1  
 视频录制  视频录制功能实现的原理是首先获得屏幕指定区域的像
素，并将这些像素捕获进位图，而后将这些位图以每秒一定的帧数合成视频
文件
[47]
。视频录制的实现流程如图 3
-
16 所示。
 哈尔滨工业大学工学硕士学位论文
 
  34
 
图 
3-16  
视频录制流程图
 
Fig.3-16 The flow chart of video recording 
首先进行初始化设置。包括根据虚拟场景的大小设定需要录制的区域、
设置位图，设置生成的视频文件的信息头，并选择视频压缩器。
 
位图是一个二维的位数组，它与图像的像素一一对应。当现实世界的图
像被扫描成位图以后，图像将被分割成网格，并以像素作为取样单位。位图
中的每个像素指明了一个单元网格内图像的平均颜色。位图分为两种，与设
备有关位图
(DDB)
和与设备无关位图
(DIB)
，利用 
Windows  API 
函数 
Bit Blt()
屏幕拷贝生成的是 
DDB
，而只有 
DIB 
才能写入视频文件。在初始化操作中
需要设置的就是 
DIB 
位图的格式。
DIB 
位图文件由四部分组成：文件头、
信息头、
RGB 
颜色表和像素位。文件头包含文件的类型、大小以及从文件
头到像素位的偏移量。由于并不需生成 
DIB 
位图文件，所以这部分不需要
设置。颜色表是一个 
3 
字节的 
RGBTRIPLE 
结构的数组，数组的每一个元素
代表图像中的每一种颜色。本文设定截取的位图采用 
24 
位，对于 
24 
位位图
没有颜色表。因此我们只需要设置位图的信息头，使其与截取虚拟场景所得
的 
DDB 
位图具有相同的设置。这样，就不需要生成 
DIB 
位图，只要将像素
位的指针指向已生成的 
DDB 
位图的像素位，从 
DDB 
位图的像素位提取数
据压入视频文件。
 
初始化参数设置
压 缩 器 是
否可用
抓取屏幕存成 
DDB 
位图 
 
将 
DDB 
图转换成 
DIB 
图
压入一帧
是否停止
否
是
否
是
开始
结束哈尔滨工业大学工学硕士学位论文
 
  35
后面的两项初始化设置内容通过采用 
VFW 
工具包来完成。
VFW 
是微
软 
1992 
年推出的关于数字视频的一个软件开发包，它能使应用程序数字化
播放从传统模拟视频源得到的视频剪辑。
VFW 
的一个关键思想是播放时不
需要专用硬件，为了解决数字视频数据量大的问题，需要对数据进行压缩。
VFW 
引入了一种叫 
AVI 
的文件标准，该标准没有规定如何对食品进行捕
获、压缩以及播放，仅规定视频和音频该如何存储在硬盘上。在这里，只需
利用其 
AVI 
写入及压缩管理的功能。首先，需先通过 
AVIFile Init( )
来初始化
AVI
，然后通过 
AVIFile Open(  )
函数创建一个临时文件，设置好信息头；最
后用 
AVIFile Create Stream( )
创建一个 
AVI 
流。此时生成的文件会很大，需要
采用一定的压缩方式对流进行压缩，这里可以通过视频录制参数设置面板来
交互式选择来设定一个视频压缩器，并用 
AVIMake Compressed Stream(  )
创建
一个压缩流，用
  AVIStream Set Format( )
来设置压缩流。
 
初始化设置完成后，将抓取屏幕临时形成一幅位图，并根据这幅位图的
信息来判断所选取的视频压缩器是否可用。如果可用，则开始进行正式的视
频录制操作。
 
视频录制操作的过程是：①拷贝屏幕，形成一幅 
DDB 
位图；②
DDB 
位
图不能被压入视频文件，将其转换为 
DIB 
位图。③将 
DIB 
位图压入视频文
件。④检测用户是否要求停止录制，如没有，则重复上述过程。
 
3.4.4.2  
 音频录制  音频录制是从虚拟现实系统的音频设备录制音频数据，
然后把所录制的数据保存为一个 
WAV 
文件
[48]
。采用 
WAV 
文件存储音频数
据，是由于 
WAV 
文件和
  AVI 
文件的格式是非常相似的，很容易实现文件
的合成，并且这种格式的文件音质非常好。音频录制流程如图 
3-17 
所示。 
当用户要求停止录制时，需要完成音频和文件的合成工作。具体操作方
法是：利用 
AVIFile Get Stream(  )
函数获得 
WAV 
音频文件中的音频数据流以
及 
AVI 
视频文件中的视频数据流，然后验证所得到的音频数据流和视频数
据流是否是正确的类型，如果类型正确，则利用 
AVISave V(  )
函数把音频数
据流和视频数据流混合到一个 
AVI 
文件中去。
 
3.5  
 装配工艺信息编辑 
装配工艺规划获得的各种工艺信息将被储存在工艺信息数据库中，此
时，还不能形成指导实际装配生产的工艺规程，必须进行装配工艺信息的编
辑工作和装配工艺规程的制定工作。
 哈尔滨工业大学工学硕士学位论文
 
  36
 
图 
3-17  
音频录制流程图
 
Fig.3-17 The flow chart of audio recording 
3.5.1  
 体系结构与操作流程设计 
基于虚拟现实的装配工艺设计系统要完成可直接用于装配生产的工艺方
案，必须将装配工艺规划阶段产生的各种工艺信息进行编辑整理，按照工艺
要求和经验知识划分工序工步，制定出可行的装配工艺规程。
 
装配工艺信息编辑系统的体系结构如图 
3-18 
所示。
 
装配工艺信息编辑操作以模型信息数据库和装配工艺信息数据库为信息
支撑，模型信息数据库主要用于产生产品结构树，产品结构树是描述零部件
装配关系的树型结构，对于装配工艺设计具有重要的指导意义和参考意义；
装配工艺信息数据库储存有装配工艺规划阶段产生的所有装配工艺信息，包
括装配顺序、装配路径和装配过程动画等等。
 
在装配工艺信息编辑工作刚开始时，系统首先根据模型信息数据库和装
配工艺信息数据库中的信息分别生成产品结构树和装配任务树，产品结构树
形象说明了该产品的零部件结构关系，装配任务树是进行装配工艺信息编辑
操作，制定装配工艺规程的基础。
 
开始
初始化参数设置
 
打开录音设备
 
准备 
WAVE 
数据头
录音
 
准备数据块
 
录音结束
结束
是
否哈尔滨工业大学工学硕士学位论文
 
  37
 
图 
3-18  
装配工艺信息编辑系统的体系结构
 
Fig.3-18 The structure of information edit system of assembly process 
装配任务树以树型结构的形式展示了零部件的装配顺序。总装配体作为
树的根目录，每一个零部件作为一个装配任务，按照装配顺序和层次关系由
上至下排列成树的其他各级目录，而作为叶子结点的则是每个装配任务用到
的工装工具及其他信息。
 
在编辑装配工艺信息，制定装配工艺规程时，在工艺文件和工艺设计人
员个人经验知识的指导下，以装配任务树为依据、以工步为单位进行。用户
按照工序号首先确定工序的名称、技术文件、质量安全要求和辅助材料信
息，然后按照工步号依次确定每个工步要装配的零部件、用到的工装工具、
配套信息、操作内容和操作视频文件等。
 
在装配工艺规程制定的同时，将实时生成装配工艺目录树，使工艺设计
人员对已完成的工艺一目了然，有利于提高装配工艺设计效率。
 
3.5.2  
 装配工艺信息编辑处理与发布 
装配工艺规程制定完成后，如果发现某些地方有问题，仍可以进行修
改。操作步骤为：首先按照型号名称、产品名称和阶段标记信息查询要修改
工艺的装配体的所有工艺信息，如果该信息存在的话将生成产品结构树、装
装配经验知识
装配工艺设计人员
 
装配工艺
 
信息编辑
 
操作面板
 
模型信息数据库
  
装配工艺信息数据库
产品
结构
树
 
装配
任务
树
 
工
艺
目
录
树哈尔滨工业大学工学硕士学位论文
 
  38
配任务树和装配工艺目录树三个树型结构，然后按照工序号和工步号查询要
修改的工艺信息记录，进行修改。修改完成后，更新工艺信息数据库和装配
工艺目录树。
 
所有装配工艺规程信息制定完成后，将通过发布控制功能发布该装配体
的所有工艺信息，进行后处理生成装配工艺文档，进行装配现场示教。
 
3.6  
 本章小结 
本章对基于虚拟现实的装配工艺设计系统的关键技术进行了研究，主要
包括以下内容：提出了信息分类转换的方法，实现了从 
Pro/E
；虚拟装配环
境中的实时准确的碰撞检测技术，提出了一种改进的 
AABB 
层次包围盒碰
撞检测算法；自动约束识别和零件精确定位技术，阐述了自动约束识别的方
法和流程，以基本约束组合的方式实现了虚拟环境中零件的精确定位；同时
对装配工艺规划技术，装配工艺信息编辑技术进行了研究。
 哈尔滨工业大学工学硕士学位论文
 
  39
第
4
章 装配工艺设计信息后处理
 
装配工艺规程制定完成后，实质上仍然存在数据库当中，并没有形成能
够形成装配工艺文档等能够直接用于指导实际装配生产的形式，因此，有必
要对装配工艺信息进行后处理，以形成装配工艺文档等实际装配工艺生产中
所用的文件形式
[49]
。
 
4.1  
 基于 WEB 
及 
XML 
的工艺文档动态生成
 
目前，基于虚拟现实的装配工艺设计系统中工艺文档的生成一般采取对
WORD 
或 
CAD 
等软件进行二次开发的方式，根据特定应用对象制定固定的
空白工艺文档，然后通过编程从系统底层数据库中提取相应的信息进行填
充，进而得到完整的工艺文档。这种方法存在的缺点是工艺卡片样式固定，
如若变更工艺卡片样式必须重新编制软件二次开发程序及虚拟装配工艺设计
系统与其的集成接口程序，工作难度大，非常不方便，可行性很小。然而，
在实际当中，尽管有国家标准的工艺卡片格式，但不同的企业，其格式仍是
千差万别。因此，这种通过编程及软件二次开发得到工艺卡片的方式就在很
大程度上降低了基于虚拟现实的装配工艺设计系统的可用性。
XML 
技术是
近几年发展起来的一种新的数据交换技术，它的数据存储与显示分离的思想
为解决上述问题提供了有效途径。
 
4.1.1  
 
XML 
技术
 
XML(e Xtensible  Markup  Language)
是一种可扩展标记语言，是由 
W3C
组织在 
1998 
年 
2 
月以数据的建立和管理为目标而制定的开放的跨平台数据
交换标准，它基于文本，是标准通用标记语言 
SGML 
的一个子集。
 
它具有如下特点：①可扩展性。
XML 
是一种元标记语言，即定义了用
于定义其他与特定领域有关的、语义的、结构化的标记语言的句法语言。用
户可以根据自己的需要自行定义标记及属性名，也可以包含描述法，从而使
XML 
文件的结构可以复杂到任意程度；②灵活性。
XML 
提供了结构化的数
据表示方式，使得用户数据与结构分离，不仅能够传递数据信息本身，而且
能够传递数据结构
(
相互关系
)
；③自描述性。
XML 
文档一般会包含文档类
型声明，因此 
XML 
语言是自描述性的，这使得 
XML 
独立于具体的操作平哈尔滨工业大学工学硕士学位论文
 
  40
台和应用系统，具有很强的可重用性
[50]
。
 
XML 
文档从本质上看只是用来存储数据、携带数据和交换数据的，而
不关心数据如何显示，
XML 
数据的显示可以通过另外的技术来实现。目
前，一般采用 
W3C 
组织 
1999 
年发布的可扩展样式表语言 
XSL(e Xtensible 
Stylesheet  Language)
来描述 
XML 
文件中数据的显示方式。
XSL 
包含三部
分：
XSLT
、
XPath 
和 
XSL  FO
。
XSLT 
是用于转换 
XML 
文档的语言，如图
4-1 
所示，利用它可以将 
XML 
文档转换成其他 
XML 
文档、
XHTML 
输出或
简单的文本，这通常是通过将每个 
XML 
元素转换为 
HTML 
元素来完成的。
由于 
XML 
标签是用户定义的，浏览器不知道如何解释或呈现每个标签，因
此必须使用 
XSLT
，
XML 
标签的意义是为了方便用户
(
而不是计算机
)
理解。
XSLT 
还可以对 
XML 
文档进行下列操作：添加和删除元素；添加和删除属
性；对元素进行重新排列或排序；隐藏或显示某些元素；查找或选择特定元
素。
XPath 
是
  W3C 
的通用查询语言规范，用于对 
XML 
文档的某些部分进
行寻址，它包括了 
100 
多个内置函数，可以进行针对 
XML 
数据的多种操
作。
XSL  FO 
是一种建立在 
XML 
基础之上的附加排版语言，它的工作原理
是在原始的文字资料之中加入 
XML 
语句，其作用是控制原始文字资料的排
版形式。
 
 
图 
4-1 XML 
文档格式转换
 
Fig.4-1 The format transformation of XML document 
XML 
技术数据存储与数据显示分离的特点，有利于解决基于虚拟现实
的装配工艺设计系统工艺文档生成中利用 
WORD 
或 
CAD 
二次开发方式实
现的缺陷。利用 
XML 
语言描述装配工艺信息，而利用 
XSL 
文件描述工艺
文档的样式，将使工艺文档样式的更改不需要对整个开发代码进行“大手
术”，而只需要用新的 
XSL 
样式文件替代原来的样式文件即可
[51]
。
 
XML 
文档
  
XSL 
处理器
XHTML 
文档
 
XML 
文档
 
其他结构化
 
文本文件
 哈尔滨工业大学工学硕士学位论文
 
  41
4.1.2  
 基于 XML 
和 
WEB 
的装配工艺文档动态生成原理
 
利用 
XML 
数据存储和数据显示分离的特点，构造的基于 
WEB 
的装配
工艺文档动态生成系统的原理如图 
4-2 
所示。
 
 
图 
4-2  
装配工艺文档动态生成系统原理图
 
Fig.4-2 The principle chart of dynamic generation system  
of assembly process document 
装配工艺文档动态生成系统以装配工艺信息数据库为基础，其主要工作
过程为：
 
(1)  
提取装配工艺信息数据库中的工艺信息，并根据 
XML 
类型定义文
件的格式要求将其转化为良构
(Well-formed)
且有效
(validated)
的 
XML 
文件的
形式，作为装配工艺文档动态生成的主要数据来源。
 
(2)  
用户通过 
WEB 
浏览器进入装配工艺卡片动态生成系统，向系统发
出要浏览某个工艺文档的请求。
 
(3)  DNS 
服务器接收用户的查询请求，并对请求进行域名解析，将解析
结果传递给页面处理逻辑，页面处理逻辑负责判断用户所要查看的到底是哪
一个装配工艺文档。
 
(4)  XML 
文件生成器根据页面处理逻辑的判断结果生成包含所要求的工
艺文档中的工艺信息的 
XML 
文件，并确定与其匹配的 
XSL 
样式文件。
 
(5)  
该 
XML 
文件连同相应的 
XSL 
样式文件一并传递给 
WEB 
浏览器的
XML 
文件解析器。目前，大部分 
WEB 
浏览器都内置了 
XML 
解析器，例如
IE  6.0 
内置了 
MSXML  3.0
，
Mozilla  Firefox
、
Netscape 
也内置了相应的 
XML
解析器。
XML 
解析器负责将 
XML 
文件中的工艺信息与 
XSL 
文件定义的工
工艺信息
 
数据
库
 
WEB 
服务器
 
XSL 
样式
文
  
件
 
XML 
文档类
型定义文件
 
XML 
文件生成器
  XML 
文件
页面处理逻辑
WEB 
浏览器
网页
 
HTML 
文件解析器
 
XML 
文件
解析器
HTML 
文件
 
DNS 
服务器
 
用户哈尔滨工业大学工学硕士学位论文
 
  42
艺文档样式结合起来，生成 
HTML 
格式的完整的装配工艺文档
[52]
。
 
(6)
通过 
HTML 
文件解析器将装配工艺文档以网页的形式向用户展示出
来，供用户浏览和审阅。
 
WEB 
服务器一般可利用 
IIS 
软件等来构建，数据通过企业局域网进行
远程传输，大大方便了企业对工艺信息数据的利用，有利于企业实现 
PDM
的工艺资源管理。
 
4.1.3  
 面向 XML 
及工艺文档的装配工艺信息分析与描述
 
将装配工艺信息保存为 
XML 
文件形式是系统实现的一个重要步骤。在
基于虚拟现实的装配工艺设计系统中完成装配工艺信息编辑之后，装配工艺
信息呈现层次型的结构，包括型号、产品、工序、工步、操作等多个不同的
层次。但是，这些信息的结构对于生成装配工艺文档来说，可能还需要做一
些调整。这是因为在不同的企业中，装配工艺文档的样式或多或少存在一些
差别。图 
4-3 
为某企业的一种典型工艺文档。分析该工艺文档可以看出，该
工艺文档与装配工艺设计中工艺信息编辑阶段确定的工艺信息结构基本相
同，只是工艺信息阶段工装工具信息与工步对应，而在该企业的工艺文档中
工装工具信息与工序对应而已。据此对装配工艺信息结构做出调整，调整后
的装配工艺目录树如图 
4-4 
所示。
 
 
图 
4-3  
一个典型的装配工艺文档
 
Fig.4-3 A typical assembly process document 哈尔滨工业大学工学硕士学位论文
 
  43
调整后的装配工艺目录树以型号名称作为根节点，一级子节点为产品
层，即装配体层，再往下分别为工序层和工步层。工序层包含该工序内所有
的工步，该工序用到的工装工具、辅助材料等信息。工步层包含该工步的所
有装入件名称、装配操作的程序等。
 
 
图 
4-4  
调整后的装配工艺目录树
 
Fig.4-4 The rectified tree of assembly process contents 
格式良好的 
XML 
文件也是层次型结构的，它以整个 
XML 
文件作为
根，以层次嵌套的方式构建文档，与装配工艺信息的层次结构非常相似，这
对于描述装配工艺信息有着天然的优势。但是，要想能够保持 
XML 
文档信
息格式的一致性，必须进行 
XML 
文档类型定义。
 
型号
 
产品
 
工序 
1
工步 
1
装入件 
1
装入件 
2
… … 
装入件 
n
操作过程
… …
工步 
n 
装入件 
1
装入件 
2
… … 
装入件 
n
操作过程
工装工具 
1 
工装工具 
2 
… … 
工装工具 
n 
辅助材料 
1 
辅助材料 
2 
… … 
辅助材料 
n 哈尔滨工业大学工学硕士学位论文
 
  44
XML 
文档类型定义有 
DTD 
和 
Schema 
两种方式。
DTD 
在制定标记语言
方面历史悠久，但仍是一门与 
XML 
风格完全不同的语言，而且它数据类型
相当有限，甚至根本不能提供数值数据类型。而 
Schema 
是一种特殊的
XML 
文档，它遵循 
XML 
的语法要求，且提供了丰富的数据类型，在代码
重用性和可扩展性上都优于 
DTD
[53]
。因此，本文选择用 
Schema 
进行 
XML
文档类型定义，创建了一种用于描述装配工艺信息的 
APML 
语言。
 
XML  Schema 
文件定义时，主要坚持如下几个原则：①以一个型号作为
一个 
XML  Schema 
文件单位，即以“型号”作为 
XML 
文档的根标记。②凡
某一标记等级下，与该标记为一一对应关系的特征，均作为该标记的属性。
如“型号代号”，将作为“型号”标记的属性。③凡某一标记等级下，与该
标记为多对一关系的特征，均作为该标记的子标记。如“工序”，将作为
“产品”标记的子标记。
APML 
标记语言 
Schema 
文件如图 
4-5 
所示。
 
 
图 
4-5 
装配工艺信息
  Schema 
文件部分代码
 
Fig.4-5 The partial code of Schema file storing the assembly process information  
     <Element Type name="
型号
" content="elt Only"> 
       <element type="
产品
" min Occurs="1" max Occurs="*" /> 
       <Attribute Type name="
型号名称
" dt:type="string" required="yes" /> 
       <attribute type="
型号名称
" /> 
       <Attribute Type name="
型号代号
" dt:type="string" required="yes" /> 
       <attribute type="
型号代号
" /> 
     </Element Type> 
     <Element Type name="
产品
" content="elt Only"> 
       <element type="
工序
" min Occurs="1" max Occurs="*" /> 
       <Attribute Type name="
产品名称
" dt:type="string" required="yes" /> 
       <attribute type="
产品名称
" /> 
       <Attribute Type name="
产品代号
" dt:type="string" required="yes" /> 
       <attribute type="
产品代号
" /> 
     </Element Type> 
     <Element Type name="
工序
" content="elt Only" > 
       <element type="
工步
" min Occurs="1" max Occurs="*" /> 
       <element type="
工装设备
" min Occurs="1" max Occurs="*" /> 
       <element type="
辅助材料
" min Occurs="1" max Occurs="*" /> 
       <Attribute Type name="
工序号
" dt:type="string" required="yes" /> 
       <attribute type="
工序号
" /> 
       <Attribute Type name="
工序名称
" dt:type="string" required="yes" /> 
       <attribute type="
工序名称
" /> 
     </Element Type> 
     ……   …… 哈尔滨工业大学工学硕士学位论文
 
  45
在 该 文 件 中 ， 用 
content 
关 键 字 限 制 某 标 记 下 面 的 内 容 类 型 ， 用
min Occurs 
和 
max Occurs 
关键字限制子标记可以出现的次数，用 
dt:type 
关键
字限制标记或属性的数据类型，用 
required 
关键字限制属性是否必须由用户
进行定义。 
4.1.4  
 工艺文档的动态生成 
工艺文档根据用户的要求，调用相应的 
XSL 
样式文件动态生成。使用
XSL 
显示 
XML 
文件的过程为首先读出 
XML 
文件中的数据，然后再将数据
套用 
XSL 
文件中的样式，形成一个完整的 
HTML 
代码，以网页的形式显示
出来
[54]
。每一个 
XSL 
样式文件都定义了一种工艺文档的样式。所有的 
XSL
样式文件存储在 
WEB 
服务器上以供调用。图 
4-6 
为图 
4-3 
所示装配工艺文
档的 
XSL 
样式文件的部分代码。
 
XSL 
样式文件代码利用 
HTML 
标记来定义文档显示样式，这里按照图
4-3 
所示工艺文档的样式将工艺信息显示在表格内。表格中原来需要手工填
入内容通过使用 
XSL 
中的求值语句 
xsl:value-of  select=“  ”
在 
XML 
文件中自
动搜索并填入。对于表格中的相同格式内容，比如每个工步的信息，每个装
入件的信息，均通过 
XSL 
中 
xsl:for-each  select=“  ”
语句构成的循环或嵌套循
环结构自动完成输入。
 
基于虚拟现实的装配工艺设计系统生成的装配工艺信息存储在关系数据
库中。在响应用户对工艺文档的调用时，系统需要即时从工艺信息数据库中
提取相关信息，动态生成一个有效
(
合乎文档类型定义
)
的 
XML 
文件，然后
根据要生成的工艺卡片将其与相应的 
XSL 
样式文件绑定，返回给提出浏览
要求的 
WEB 
浏览器。换句话说，就是要建立一个 
XML 
文件生成器，即关
系数据库与 
XML 
文件之间的接口。
 
本文采用 
ASP 
技术作为载体，实现了关系数据库的动态查询与数据信
息的调用，并利用这些数据生成一个有效的 
XML 
文件。在 
ASP 
中通过
SQL 
语言查询数据库，建立记录集，并利用嵌套循环结构对记录集进行遍
历，来实现所有子标记的生成。为了节省内存，加快 
XML 
文件动态生成的
速度，采用 
Command 
对象的 
Execute 
方法来建立记录集，使得关系数据库
只 需 打 开 一 次 即 可 。 通 过 生 成 的 
XML 
文 件 中 的 代 码 
“<?xml-stylesheet 
type="text/xsl"  href="XXX.xsl"  ?>”
中的 
href 
属性将 
XML 
文件与相应的工艺
文档样式文件进行绑定。
 哈尔滨工业大学工学硕士学位论文
 
  46
 
图 
4-6  
典型工艺文档的 
XSL 
样式文件部分代码
 
Fig.4-6 The partial code of XSL style file of typical process document 
<table border="1" width="1239" cellspacing="2" bgcolor="#000000" > 
<tr><td colspan="4" height="40" bgcolor="#FFFFFF"> 
<p  align="center"><b><font  size="5"> 
装 配 工 艺 规 程
</font></b></p></td> 
  ……    …… 
</tr> 
<tr> 
<td height="35" colspan="8" bgcolor="#FFFFFF">
工装
/
设备：
 
    <xsl:for-each  select="
工装设备
"><xsl:value-of  select="@
工装设
备名称
"/></xsl:for-each> 
</td> 
</tr> 
  ……   …… 
<xsl:for-each select="
工步
" order-by="@
工步号
"> 
<tr> 
<td  height="30"  align="center"  bgcolor="#FFFFFF"><xsl:value-of 
select="
装入件
/@
装入件名称
"/></td> 
<td  height="30"  align="center"  bgcolor="#FFFFFF"><xsl:value-of 
select="
装入件
/@
装入件代号
"/></td> 
<td  height="30"  align="center"  bgcolor="#FFFFFF"><xsl:value-of 
select="
装入件
/@
装入件规格
"/></td> 
<td  height="30"  align="center"  bgcolor="#FFFFFF"><xsl:value-of 
select="
装入件
/@
装入件数量
"/></td> 
<td  align="center"  bgcolor="#FFFFFF"><xsl:attribute 
name="rowspan"><xsl:value-of  select=" 
装 入 件 
/@ 
本 工 步 装 入 件 总 数
"/></xsl:attribute><xsl:value-of select="@
工步号
"/></td> 
<td   colspan="3"  bgcolor="#FFFFFF"><xsl:attribute 
name="rowspan"><xsl:value-of  select=" 
装 入 件 
/@ 
本 工 步 装 入 件 总 数
"/></xsl:attribute><xsl:value-of select="
操作
"/></td></tr> 
<xsl:for-each select="
装入件
[index()$ge$1]"> 
<tr>     
<td  height="30"  align="center"  bgcolor="#FFFFFF"><xsl:value-of 
select="@
装入件名称
"/></td> 
<td  height="30"  align="center"  bgcolor="#FFFFFF"><xsl:value-of 
select="@
装入件代号
"/></td> 
<td  height="30"  align="center"  bgcolor="#FFFFFF"><xsl:value-of 
select="@
装入件规格
"/></td> 
<td  height="30"  align="center"  bgcolor="#FFFFFF"><xsl:value-of 
select="@
装入件数量
"/></td> 
</tr> 
   </xsl:for-each> 
</xsl:for-each> 
</table> 哈尔滨工业大学工学硕士学位论文
 
  47
生成的 
XML 
文件被传送到 
Web 
浏览器端后，内置的 
XML 
解析器通过
分析其代码找到与其绑定的 
XSL 
样式文件并进行调用，最终转换为 
HTML
文件展示给用户，图 
4-7 
为生成的工艺文档示例。
 
 
图 
4-7  
工艺文档动态生成系统生成的工艺文档示例 
Fig.4-7 The sample process document generated by the dynamic  
generation system of assembly process document 
4.2  
 基于 WEB 
及多媒体的虚拟装配现场示教
 
目前在装配生产车间，指导工人操作的仍然是二维图纸和文字描述，装
配工人需要对装配图纸进行完全消化，想象出零部件的三维模型，空间理解
比较困难。这种模式容易引起对工艺理解的偏差，导致错装、漏装、重装等
现象的发生，降低装配效率和质量
[55]
。基于 
WEB 
及多媒体的虚拟装配现场
示教系统利用企业局域网络，以客户
/
服务器的模式，将装配工艺信息以及哈尔滨工业大学工学硕士学位论文
 
  48
装配过程动画等以多媒体网页的方式展现出来，为装配现场工人提供了一种
新的工艺指导模式。基于 
WEB 
的装配工艺现场示教使得装配现场工人可以
可以随时通过网络远程查询其所要了解的装配工艺信息，并且装配过程动画
形象直观，非常容易为装配现场工人所掌握。
 
4.2.1  
 体系结构设计 
虚拟装配现场示教系统基于 
WEB 
设计，充分利用企业内部局域网络，
实现工艺信息的远程调用和多媒体示教，其体系结构如图 
4-8 
所示。
 
 
图 
4-8  
虚拟装配工艺现场示教系统体系结构
 
Fig.4-8 The structure of the virtual assembly process display and teaching system 
4.2.2  
 虚拟装配现场示教实现技术 
虚拟装配现场示教在 
WEB 
基础上利用 
ASP
、
Java Script
、
VBScript 
和
HTML 
技术实现。系统采用框架 
WEB 
页面模式，可以将所有工艺信息集中
在一个页面上显示。
 
系统一共分为标题、产品信息、工序信息、工步信息、零件信息、配套
信息、工装工具信息、装配动画、产品结构树和工艺目录树等十个工艺信息
框架模块，各模块互相关联，使用户能够实现对产品装配工艺信息中的已发
布内容的查询和浏览，这种框架模式使得信息比较集中，有助于用户对工艺
装配工艺信息数据库
客户端 
1 
企业内部局域网络
 
基于虚拟现实的装配工艺设计系统
客户端 
2 
客户端 
3
… …
客户端 
n 
WEB 
服务器
 
虚拟装配工艺现场示教系统
 
模型信息数据库
 哈尔滨工业大学工学硕士学位论文
 
  49
信息的查询和理解。
 
产品结构树和工艺目录树采用 
Java Script 
编程实现，可以动态查询装配
工艺信息数据库，搜索相关工艺信息。产品结构树按照装配体的层次结构构
建，装配工艺目录树按照型号、产品、工序、工步的层次顺序构建。
 
装配动画播放模块使用 
WMPlayer 
控件实现，可以实现装配动画的全屏
播放、并对播放进程进行各种控制。
 
产品信息、工序信息和工步信息相互嵌套，能够随用户查询联动显示。
简化了操作，使界面更加人性化。
 
4.3  
 本章小结 
本章对基于虚拟现实的装配工艺设计系统的工艺信息后处理技术进行了
研究。主要包括以下内容：
 
利用 
XML 
技术和 
WEB 
技术实现了装配工艺文档的动态生成。
XML 
技
术具有数据存储与数据表示分离的特性，基于 
XML 
和 
WEB 
的装配工艺文
档生成技术实现了工艺信息存储与工艺文档样式的各自独立，使得虚拟装配
工艺设计系统工艺文档样式的修改不再困难，
WEB 
技术使得用户可以远程
调用工艺文档并打印，使工艺文档的获得十分方便。
 
利用 
WEB 
和多媒体技术实现了虚拟装配现场示教。以装配工艺信息数
据库为主要数据来源，基于 
ASP
、
Java Script
、
VBScript 
和多媒体技术实现
了动态网页形式的装配工艺现场示教功能，使装配工艺易于理解。
 哈尔滨工业大学工学硕士学位论文
 
  50
第
5
章 虚拟装配工艺设计系统开发及应用
 
为 了 对 上 述 技 术 进 行 验 证 ， 开 发 了 一 个 虚 拟 装 配 工 艺 设 计 系 统
IVADS
，并针对航天五院总装与环境与环境工程部的某型号卫星产品在该系
统中进行了虚拟装配工艺设计应用。
 
5.1  
 
IVADS 
系统开发环境
 
IVADS 
是一个基于高档图形工作站的桌面式虚拟装配装配工艺设计系
统，配备有三维鼠标、高档图形卡等外设，软件系统采用面向对象的方法，
结合虚拟现实开发包 
Sense  8 
公司的 
World Tool Kit  Release  9 
在 
Visual  C++ 
6.0 
环境下编程实现。系统通过高性能图形卡来产生虚拟场景，具有一定的
沉浸感。
IVADS 
系统的开发环境如表 
5-1 
所示。
 
表 
5-1 IVADS 
系统开发环境
 
Table 5-1 The develop environment of IVADS system 
计算机
  Dell  
高档图形工作站 
Precision 6110 
硬件环境
 
三维鼠标
  3Dconnecxion 
公司的 
Spaceball 5000 
图形卡
  
高性能图形卡 
3Dlabs Wildcat7110 
操作系统
  Windows 2000 Server 
开发工具
  Visual C++ 6.0 
设计工具
  Pro/E wildfire 2.0  
支撑工具包
 
虚拟现实环境开发包 
World Tool Kit Release 9 
Pro/E 
二次开发包
 
XML 
文件编辑环境 
XML writer 2 
WEB 
开发环境 
Dream Weaver 8
 
软件环境
 
数据库
  Oracle 9.02 
5.2  
 
IVADS 
界面设计开发
 
5.2.1  
 虚拟场景构建 
IVADS 
系统的虚拟场景主要在 
Visual  C++  6.0 
环境下通过虚拟现实软件
包 
World Tool Kit 
开发。
 
World Tool Kit 
简称 
WTK
，是美国 
Sense  8 
公司开发的一种虚拟现实跨平哈尔滨工业大学工学硕士学位论文
 
  51
台软件开发系统，可用于科学和商业领域建立高性能的、实时的、综合的
3D 
工程，它通过 
C/C++
外挂平台的方式，为用户提供一个完整的三维虚拟
环境交互开发平台
[56]
。从底层来看，
WTK 
为用户提供了 
1000 
多个基于 
C
语言代码的库函数，可以在程序中直接调用
[57]
。从用户的观点来看，
WTK
借助于 
Open GL 
的底层图形函数，为用户提供高层的应用软件开发接口，用
户能方便地在 
C/C++
语言集成环境中，直接将 
WTK 
作为外部库嵌入自己的
应用程序，进行三维虚拟环境应用程序开发。应用程序在运行时，将控制权
交给 
WTK 
核心运行机制本身，由 
WTK 
的仿真管理程序对系统进行管理。
WTK 
不仅提供了三维虚拟场景的高层接口，而且还提供了一系列相关虚拟
现实硬件设备
(
如数据手套、三维鼠标、头盔显示器、位姿跟踪器、立体音
响设备等
)
的接口，开发人员对设备的特殊要求可不做过多的考虑，只需调
用相应的设备例程即可，从而大大加速了程序的开发速度。
WTK 
还有一个
重要特性就是平台无关性，它可以在一系列图形平台上运行，这意味着软件
的开发可以在低成本的图形平台进行，然后将软件移植到较高性能的目标计
算机上，具体使用何种平台由应用的需求决定。
 
WTK 
按照面向对象的命名方式来组织虚拟环境，其主要的类有：
Universe
、
Geometry
、
Object
、
Polygon
、
Path
、
Sensor
、
Viewpoint
、
Light
、
Node 
等。从 
WTK 
类的层次看，
Universe 
是最高层的类，其功能相当于一
个容器，其中可以容纳多种对象，从而组成各种场景。
Universe 
中的对象由
WTK 
仿真管理程序进行管理，具体过程如图 
5-1 
所示。
 
仿真管理是 
WTK 
工作的核心，
WTK 
程序运行时，首先初始化一个
Universe 
对象作为容器，然后依次加入各种节点对象构成一个场景图，节点
按一定的关系组成一个相互关联的树型结构，然后应用程序通过调用库函数
WTuniverse_go(  )
进入仿真循环，
WTK 
通过检测输入外设的数据变化激活一
个与回调函数类似的任务管理器，分派不同的任务，并根据用户定义的任务
优先级分别执行，用户通过定义特定的动作函数就可以控制虚拟环境中的各
种对象
[58-60]
。
 
虚拟装配工艺设计系统 
IVADS 
的车间环境场景图结构如图 
5-2 
所示。
该场景图根节点有五个子节点，其中四个为不同方向的方向光源节点，用以
设置车间的光照，另一个为车间模型的分隔节点，其下面的两个子节点中左
侧的是一个方位节点，用于设置车间的方向和位置属性，右侧的是一个组节
点，其下面的子节点是车间模型的几何节点，存储有车间的几何信息。车间
模型是预先在 
3D  MAX 
软件中制作完成的，在系统初始化阶段导入虚拟现哈尔滨工业大学工学硕士学位论文
 
  52
实环境，从而构成虚拟现实环境中的装配车间，增加了装配操作的逼真感和
沉浸感。图 
5-3 
为依据此场景图构造出来的虚拟场景。
 
 
图 
5-1 WTK 
仿真管理循环
 
Fig.5-1 The managing cycle of WTK’s simulation 
 
图 
5-2 IVADS 
系统的车间环境场景图
 
Fig.5-2 The scene graph of the workshop environment of IVADS system 
5.2.2  
 系统界面开发 
虚拟装配工艺设计系统 
IVADS 
的操作界面是利用 
VC++  6.0 
完成的。
root 
Up_light  Down_light  Left_light Right_light Sep_factory 
Xform_ 
factory 
Group_ 
factory 
读输入外设数据
 
调用动作函数
根据输入外设数据修改对象
在图形对象上执行任务
更新图形对象
进入仿真循环
 
退出仿真循环
 
Geo_factory哈尔滨工业大学工学硕士学位论文
 
  53
VC++  6.0 
是功能强大的 
Windows 
程序界面开发环境。
IVADS 
系统的界面采
用 
SDI 
模式开发，并结合界面拆分技术，将界面分为四部分，左侧是模型
信息部分，以属性表的形式依次列出了所加载模型的产品结构树、加载的工
具目录以及夹具目录；中间视图区是虚拟环境场景区，在该区展示虚拟操
作；右侧同样是个属性表，共有两个属性页，分别是装配任务树、约束管理
器；下侧是信息提示区，如图 
5-3 
所示。
 
 
信息提示区
 
图 
5-3 IVADS 
系统界面
 
Fig.5-3 The interface of IVADS system 
5.3  
 
IVADS 
在卫星装配工艺设计中的应用
 
IVADS 
系统以航天五院总装与环境工程部的卫星产品为应用对象，通
过某型号卫星产品的装配工艺设计，对基于虚拟现实的装配工艺设计技术进
行了验证。
 
5.3.1  
 卫星装配工艺设计的特点 
卫星产品结构复杂，包括数百种零件和上千个零部件。传统的装配工艺
模型
信息
区
 
虚拟场景区
工艺
规划
操作
及
工
艺
信
息区哈尔滨工业大学工学硕士学位论文
 
  54
设计过程主要依靠工艺设计人员的手工劳动，工作效率低，容易出错且数据
管理繁琐，尤其是开发新型号时，需要工艺设计人员首先对装配图纸进行完
全消化，将这些零部件印在脑海中，然后再分析总装图纸，对空间理解往往
需要很长时间，并且一般需要利用物理原型进行模装来确定装配步骤，很容
易出现工艺设计不当、零部件发生碰撞干涉等情况，导致生产周期延长。
 
5.3.2  
 模型载入 
卫星模型、工装工具模型通过模型载入功能进入虚拟现实环境。
WTK
中的对象模型可以有两种构建形式：利用 
WTK 
自身的 
3D 
造型功能构建和
利用从外部文件引入的方式。由于 
WTK  3D 
造型功能有限，无法满足零部
件模型构建的要求，所以采用从外部文件引入的方式构建虚拟场景中的模
型。
WTK 
支持多种文件方式的引入，包括 
VRML
、
FLT
、
OBJ
、
SLP 
等，
这里我们采用 
Pro/E 
支持的渲染文件格式 
SLP 
引入零部件模型。
 
利用如图 
5-4 
所示的模型载入操作面板，用户可以查询要引入虚拟环境
的零部件模型的 
CAD 
文件，点击“载入”按钮，
IVADS 
系统将在后台将模
型信息进行分类转换，零部件几何信息先被转换为以几何面为单位的 
SLP
文件，而后这些 
SLP 
文件被引入到虚拟环境，按照 
SLP 
文件存储的各三角
面片的方位信息进行零部件的重构，并放置到初始位置，同时这些零部件的
拓扑信息和装配信息将被存储到系统模型信息数据库。
 
 
图 
5-4  
零部件模型载入操作面板
 
Fig.5-4 The loading operation panel of the part model 哈尔滨工业大学工学硕士学位论文
 
  55
 
图 
5-5  
零部件模型载入虚拟环境
 
Fig.5-5 The part model which has been loaded into the VR environment                          
 
图 
5-6  
零部件在 
WTK 
虚拟环境中的场景结构图
 
Fig.5-6 The scene graph of parts in WTK virtual environment 
Sep_
总装配体
 
Xform_
总装配体
  Group_
总装配体
 
Sep_
子装配体
  Sep_
零件 
1 
Xform_
子装配体 
Group_
子装配体
… … 
Xform_
零件 
1  Group_
零件 
1 
Sep_
零件 
n  … …Sep_
几何面 
1 
Xform_
零件 
n  Group_
零件 
n
Sep_
几何面 
m 
Xform_
几何面 
m Group_
几何面 
m
Geo_
几何面 
m
… … 
… … 
Xform_
几何面 
1 Group_
几何面 
1 
Geo_
几何面 
1 哈尔滨工业大学工学硕士学位论文
 
  56
5.3.3  
 装配操作 
IVADS 
系统采用以自动约束识别装配方式为主，以交互式约束定义装
配方式为辅的模式进行零部件的装配操作。图 
5-7 
为自动约束识别装配方式
的零部件装配过程示例。
 
 
图 
5-7  
自动约束识别装配方式的零部件装配过程
 
Fig.5-7 The assembly process of parts in the mode of automatic constraint recognition 
a)  
平面约束识别前
  b)  
平面约束识别后
 
c)  
轴线约束识别前
  d)  
轴线约束识别后
 
 
交互式约束定义装配方式以约束管理器为操作面板，交互式定义零件几
何面之间的配合约束关系，然后点击“应用”按钮完成装配定位操作。图
5-8 
为利用约束管理器选定配合面的情形，此时虚拟场景区右侧显示的约束
管理器。图 
5-9 
为选定的两个几何面执行面面贴合操作后的情形。
 哈尔滨工业大学工学硕士学位论文
 
  57
 
图 
5-8  
利用约束管理器选定零件配合面图
 
Fig.5-8 Selecting the mate faces in the constraint manager 
 
图 
5-9  
零件执行面面贴合配合关系
 
Fig.5-9 Executing the joint mate of two faces
 哈尔滨工业大学工学硕士学位论文
 
  58
装配工艺规划以装配任务为单位来进行，每个装配任务一般包括若干个
装配操作，如面面对齐操作、工具空间验证操作等。每个装配任务完成后，
该装配任务将被添加到装配任务树，装配任务树表征了零部件的装配顺序。
 
在零部件装配过程中，
IVADS 
系统可以自动记录零部件的装配路径，
并且可以以离散点的形式显示出来供用户浏览和编辑，而零部件的规划好的
装配路径将通过装配动画录制功能以多媒体的形式记录下来。
 
5.3.4  
 装配空间验证 
零部件的装配工艺设计不能离开装配空间验证过程。装配空间验证是为
了检测装配工艺方案中是否有充分的工装工具操作空间，这也是验证装配工
艺方案是否可行的重要方面。图 
5-10 
所示分别为螺钉起子和套筒扳手的装
配空间验证过程。
 
 
a)  
螺钉起子装配空间验证
            b)  
套筒扳手装配空间验证
 
图 
5-10 IVADS 
系统中的装配空间验证操作
 
Fig.5-10 The verifying operation of assembly space in IVADS system 
装配空间验证的实现原理为：先将工装工具按照交互式约束定义装配方
式定位到待装配零部件合适的位置上，然后把工装工具和此零部件看作一个
零部件整体进行装配操作，检验装配操作过程中是否存在碰撞干涉现象。
 
5.3.5  
 工艺信息保存 
为了能够多次连续工作，
IVADS 
系统支持工艺规划信息的保存和再次
打开。由于在装配工艺设计过程中产生的信息主要存储在工艺信息数据库哈尔滨工业大学工学硕士学位论文
 
  59
中，所以在保存未完成的工艺信息时，只需要将当前的工艺规划位置保存下
来就可以了，
IVADS 
系统将当前的工艺规划位置信息保存成一种自定义格
式的 
vas 
文件，该文件主要记录了当前装配的零部件所属于的型号名称、型
号代号、产品名称、产品代号、阶段标记、当前零部件在虚拟环境中的方
位、约束关系以及当前约束管理器中的相关信息。当再次打开该文件时，系
统将依据该文件的信息，将零部件模型载入并重新置于文件保存时的配合状
态和位置。这样，工艺设计人员就可以继续未完成的装配工艺设计工作了。
 
 
图 
5-11 vas 
文件的一个例子
 
Fig.5-11 A sample of vas file 
5.3.6  
 装配工艺信息编辑 
装配工艺信息编辑界面如图 
5-12 
所示。
 
 
图 
5-12 IVADS 
系统装配工艺信息编辑界面
 
Fig.5-12 The edit panel of assembly process information of IVADS 
产品信息
工艺目录树
装配操作
视频信息
产品结构树
 
装配任务树
 
工艺编辑区哈尔滨工业大学工学硕士学位论文
 
  60
IVADS 
系统支持工艺设计人员一边查看零部件装配过程的多媒体文
件，一边进行装配工艺信息的编辑和装配工艺规程的制定。工艺人员确定好
的装配工艺规程将以工艺目录树的形式实时显示出来，方便查询和检验。
 
工艺目录树的根节点是装配体名称，一级子节点是工序名称，二级子节
点是工步名称及工序级信息，最低级节点是工步的操作内容及工步级信息。
 
5.3.7  
 装配工艺文档生成与现场示教 
装配工艺设计工作完成后，为了将装配工艺信息直接应用于实际装配生
产，必须将其转化为装配工艺文档。本系统利用 
XML 
技术和 
WEB 
技术，
实现了装配工艺文档基于 
WEB 
的动态生成，并且，工艺文档的内容和格式
可以根据需要自由定制。图 
5-13 
为 
IVADS 
系统生成的卫星装配工艺文档示
例。基于 
WEB 
和多媒体的卫星装配工艺现场示教系统如图 
5-14 
所示。
 
a)  
装配工艺规程文档
  b)  
辅助材料定额明细表
 
图 
5-13 IVADS 
系统生成的卫星装配工艺文档
 
Fig.5-13 The satellite assembly process document generated by IVADS system 
5.4  
 应用效益分析 
虚拟装配工艺设计系统 
IVADS 
利用虚拟现实环境提供的沉浸性、交互
性和构想性，使装配工艺设计人员像在真实环境中操作零件一样对产品进行
试装配，并在这个过程中规划产品的装配顺序和装配路径，在碰撞检测、动
态约束识别、零部件精确定位等技术的支持下，检测初步装配工艺方案的可
行性，使装配工艺设计工作摆脱了传统的手工操作的各种缺陷，最终得到的
装配工艺方案更加优化、可行。并且由于已经在虚拟现实环境中对装配工艺
 哈尔滨工业大学工学硕士学位论文
 
  61
 
图 
5-14 
卫星装配工艺现场示教系统
 
Fig.5-14 Satellite assembly process spot display and teaching system  
过程进行了检验，所以很大程度上不再过分依赖通过模装过程对装配工艺进
行验证，从而节省了产品制造成本，缩短了生产周期。
 
虚拟装配工艺设计系统 
IVADS 
可以直接根据工艺设计人员在虚拟现实
环境中的装配工艺规划过程产生的装配工艺信息，通过 
XML 
技术和 
WEB
技术动态生成可以直接指导装配工艺生产的装配工艺文档，并且可以通过网
络随时对这些文档进行远程调用，大大方便了企业相关人员对装配工艺的查
阅和浏览，有利于实现企业的制造信息与制造资源集成。基于 
WEB 
和多媒
体的现场示教系统通过企业内部局域网对装配工艺进行远程多媒体示教，有
利于装配现场工人快速理解装配工艺方案，明确装配操作过程，避免了错
装、漏装等现象的发生。
 
总之，虚拟装配工艺设计系统 
IVADS 
的应用，提升了卫星产品装配工
艺设计的质量和效率，降低了生产成本，缩短了产品开发和制造周期。
 
5.5  
 本章小结 
为 了 对 装 配 工 艺 设 计 技 术 进 行 验 证 开 发了 虚 拟 装 配 工 艺 设 计 系统
IVADS
，并应用该系统针对某型卫星产品进行了装配工艺设计。结果表明此
系统能够帮助工艺设计人员快速设计出满足实际装配生产需要的优化装配工
艺，且能生成规范的工艺文档，现场示教功能可有效帮助现场工人明确装配
工艺，减少了漏装、错装或重装现象的发生，提高了装配效率和质量。
 哈尔滨工业大学工学硕士学位论文
 
  62
结
   
论
 
基于虚拟现实的装配工艺设计技术的研究是随着近年来对虚拟现实应用
技术的研究而兴起的，它是虚拟装配技术的一个应用方向，可解决传统手工
工艺设计方式设计效率低、设计难度大、优化程度差等缺陷，并可避免目前
计算机辅助装配工艺设计系统存在的“组合爆炸”等问题，有利于提高装配
质量和效率，降低生产成本。本文对基于虚拟现实的装配工艺设计技术进行
了较深入的研究，概括起来，本文的主要工作如下：
 
(1)  
针对基于虚拟现实的装配工艺设计系统进行了需求分析，建立了系
统的体系结构，明确了系统的工作流程，并分析和设计了系统的底层数据库
系统。
 
(2)  
对基于虚拟现实的装配工艺设计关键技术进行了研究。提出了基于
Pro/E 
二次开发的零部件模型分类信息转换方法，实现了零部件模型信息由
CAD 
环境向虚拟现实环境的转换；提出了一种改进的 
AABB 
层次包围盒算
法，利用空间分解思想建立零件分割块层，提高了碰撞检测的效率；提出了
动态约束识别和交互式约束定义两种装配工艺规划方式，弥补了单一方式的
不足，提出了常见约束关系由角度、距离和平行三种基本约束组合而成的思
想，实现了零部件的精确定位；提出了以获取采样点方式记录和编辑装配路
径的方法；研究了虚拟装配工艺设计系统中装配工艺规程的制定方式。
 
(3)  
研究了虚拟装配工艺设计系统中工艺信息的后处理技术，提出了基
于 
XML 
和 
WEB 
的装配工艺文档动态生成技术以及基于 
WEB 
和多媒体的
装配工艺现场示教技术。
 
(4)  
利用 
VC 
和 
WTK 
开发了一套虚拟装配工艺设计系统 
IVADS
，并针
对中国空间技术研究院总装与环境工程部的卫星产品在该系统中进行了装配
工艺设计，证明了基于虚拟现实的装配工艺设计技术的诸多优点。
 
对于基于虚拟现实的装配工艺设计技术的研究还有更大的深入空间，在
本文工作的基础上，还可在如下方面进行深入的研究：
 
(1)  
装配工艺规划过程中更好地利用工艺设计人员的装配经验知识。
 
(2)  
柔性件的装配工艺设计。
 
(3)  
装配精度的表示和支持。
 
(4)  
装配工艺方案的评价机制。
 哈尔滨工业大学工学硕士学位论文
 
  63
参考文献
 
1
  杨拴强,  
张文建
,  
李娟等
.  
基于虚拟现实环境下的装配技术的探讨
.  
重型
机械科技
. 2006, (2): 47-49 
2
  谢叻,  
肖波
,  
吴巧教等
.  
虚拟装配技术及应用
.  
模具技术
. 2006, (1):60-63 
3
  
Jayaram  S,  Connacher  H,  Lyons  K.  Virtual  Assembly  Using  Virtual-reality 
Techniques. Computer Aided Design. 1997, 8(29):575-584 
4
  郑轶,  
宁汝新
,  
刘检华等
.  
虚拟装配关键技术及其进展
.  
系统仿真学报
. 
2006, 18(3):649-654 
5
  严巍崎 .  
面向产品装配的 
CAPP 
解决方案 
.  
中国制造业信息化 
.  2004, 
(5):69-70 
6
  武殿梁,  
杨润党
,  
马登哲等
.  
虚拟装配系统及其关键技术
.  
上海交通大学
学报
. 2004, 38(9):1539-1543 
7
  刘检华,  
宁汝新
,  
阎艳
.  
集成化虚拟装配工艺规划系统研究
.  
中国机械工
程
. 2006, 17(23):2486-2491 
8
  宁汝新,  
郑轶
.  
虚拟装配技术的研究进展及发展趋势分析
.  
中国机械工程
. 
2005, 16(15):1398-1404 
9
  
Bullinger  H.  J.,  Richter  M.  Virtual  Assembly  Planning.  Human  Factors  and 
Ergonomics In Manufacturing, 2000, 10(3):331-341 
10
  
Blach  R,  Landauer  J.  A  Highly  Flexible  Virtual  Reality  System.  Future 
Generation Computer System. 1998, (14):167-178 
11
  
Holger  Scharm,  Ralf  Breining.  Assembly  Planning  in  Virtual  Environments-
Scenarios and Potentials. Frauholfer-Gesellschaft IAO. 1996, 10(2):30-42 
12
  
Jayaram  S,  Wang  Y,  Jayaram  U.  A  Virtual  Assembly  Design  Environment. 
Proceeding of IEEE Virtual Reality, Houston, TX, 1999 
13
  
Jayaram  S,  Jayaram  U,  Wang  Y,  etal.  VADE:  a  Virtual  Assembly  Design 
Environment. IEEE Computer Graphics and Applications. 1999, 19(6):44-50 
14
  
Wang  Y,  Jayaram  U,  Jayaram  S,  etal.  Methods  and  Algorithms  for 
Constraint-based Virtual Assembly. Virtual Reality. 2003, (6):229-243 
15
  
Shaikh  I,  Kim  Y.  J,  Jayaram  S,  etal.  Integration  of  Immersive  Environment 
and  Rula  for  Real-time  Study  of  Workplace  Related  Musculoskeletal 
Disorders  in  the  Upper  Limb.  Proceeding  of  DETC’  03  ASME,  Chicago, 哈尔滨工业大学工学硕士学位论文
 
  64
Illinois, 2003 
16
  
Bob  K.  A  Synthetic  Environment  for  Assembly  Planning  and  Evaluaton. 
http://www.cs.uiowa.edu/~cremer/.sive-abstracts/kuehne.text 
17
  
VRAC.  VEGAS:  a  Virtual  Environment  for  General  Assembly  Simulation. 
http://www.vrac.iastate.edu/~jmvance/ASSEMBLY/Assembly.html 
18
  
Dewar  R.G.,  Carpenter  I.D.,  Richter  J.M.,  etal.  Assembly  Planning  in  a 
Virtual  Environment.  Proceeding  of  Portland  International  Conference  on 
Management and Technology, Portland, 1997 
19
  
Jung  B,  Hoffhenke  M,  Wachsmuth  I.  Virtual  Assembly  with  Construction 
Kits.  Proceedings  of  1997  ASME  Design  Engeering  Technical  Conference, 
Sacramento, 1997 
20
  
Srinivasan  H,  Gadh  R.  Complexity  Reduction  in  Geometric  Selective 
Disassembly  Using  the  Wave  Propagation  Abstraction.  Proceeding  of  IEEE 
International Conference on Robotics and Automation, Leuven, 1998 
21
  
Shyam  sundar  N,  Gadh  R.  Collaborative  Virtual  Prototyping  of  Product 
Assemblies over Internet. Computer-Aided Design, 2002, (34):755-768 
22
  
Chryssolouris G, Mavrikios Dimitris, Fragos D, etal. A Virtual Reality-based 
Experimentation  Environment  for  the  Verification  of  Human-related  Factors 
in  Assembly  Processes.  Robotics  and  Computer  Integrated  Manufacturing. 
2000, (16):267-276 
23
  
Gomes  A,  Zachmann  G.  Virtual  Reality  as  a  Tool  for  Verification  of 
Assembly  and  Maintenance  Processes.  Computer  and  Graphics.  1999, 
(23):389-403 
24
  
Yuan  X.B,  Yang  S.X.  Virtual  Assembly  with  Biologically  Inspired 
Intelligence.  IEEE  Transactions  on  Systems,  Man,  and  Cybernetics-Part  C: 
Applications and Reviews. 2003, 33(2):159-167 
25
  刘振宇,  
谭建荣
.  
基于物理模型的虚拟装配技术研究
.  
中国图形图像学报
. 
2003. 8(7):823-828 
26
  李永立,  
张树有
,  
刘振宇
.  VRML 
环境下基于语义的产品装配设计技术研
究
. 2003, 15(2):209-214 
27
  曾理,  
张林鍹
,  
肖田元
.  
一个虚拟装配支持系统的实现
.  
系统仿真学报
. 
2002, 14(9):1149-1153 
28
  杨润党,  
武殿梁
,  
范秀敏
,  
严隽琪
.  
基于约束的虚拟装配技术研究
.  
计算哈尔滨工业大学工学硕士学位论文
 
  65
机集成制造系统
. 2006, 12(3):413-419 
29
  
Liu  Jian-hua,  Ning  Ru-xin,  Tang  Cheng-tong.  Realization  Techniques  of 
Virtual  Assembly  Process  Planning  System.  Journal  of  Beijing  Institute  of 
Technology. 2005, 14(4):400-405 
30
  刘检华,  
宁汝新
,  
万毕乐
.  
面向生产现场的虚拟装配工艺规划技术
.  
计算
机集成制造系统
. 2007, 13(1):67-73 
31
  
Y.  Wang,  U.  Jayaram,  S.  Jayaram,  etal.  Methods  and  Algorithms  for 
Constraint-based Virtual Assembly. Virtual Reality. 2003, 6(4):229-243 
32
  
R.  Farahati,  Y.  J.  Lin.  CAD-Based  Virtual  Assembly  Prototyping-A  Case 
Study.  The  International  Journal  of  Advanced  Manufacturing  Technology. 
2003, 21(4):263-274 
33
  
Ying  Zhang,  Reza  Sotudeh.  Evaluation  of  Auditory  Feedback  on  Task 
Performance  in  Virtual  Assembly  Environment.  Proceedings  of  the  Fourth 
International Conference on Computer and Information Technology, 2004 
34
  孟亚辉.  
浅析软件开发项目中的需求分析
.  
职业圈
. 2007, (6):76-77 
35
  王勤宏.  
浅谈软件工程中的需求分析
.  
华南金融电脑
. 2007, (1):98-99 
36
  胡英培.  
关系数据库的优化设计研究
.  
科技资讯
. 2007, (12):122 
37
  
T. Case, B. Henderson-Sellers, G. C. Low. A Generic Object-oriented Design 
Methodology  Incorporating  Database  Considerations.  Annals  of  Software 
Engineering. 1996, 2(1) 
38
  陈红艳. Oracle 
数据库物理设计原则概述
.  
科技资讯
. 2007, (13):222-223 
39
  杨洪君,  
宁汝新
,  
郑轶
.  
基于 
XML 
的 
CAD 
系统和虚拟装配系统之间的
数据转换
.  
机械设计与制造
. 2006, (11):46-48 
40
  徐凯,  
张裕中
.  CAD 
二次开发技术
(II).  
包装与食品机械
.  2004,  22(2):31-
34 
41
  万毕乐,  
刘检华
,  
宁汝新等
.  
面向虚拟装配的 
CAD 
模型转换接口的研究
与实现
.  
系统仿真学报
. 2006, 18(2):391-394 
42
  魏迎梅.  
虚拟环境中碰撞检测问题的研究
.  
国防科学技术大学博士学位
论文
. 2000 
43
  马登武,  
叶文
,  
李瑛
.  
基于包围盒的碰撞检测算法综述
.  
系统仿真学报
. 
2006, 18(4):1058-1064 
44
  高瞻,  
张树有
,  
顾嘉胤等
.  
虚拟现实环境下产品装配定位导航技术研究
. 
中国机械工程
. 2002, 13(11):901-904 哈尔滨工业大学工学硕士学位论文
 
  66
45
  郑轶,  
宁汝新
,  
刘检华
.  
交互式虚拟装配路径规划及优选方法研究
.  
中国
机械工程
. 2006, 17(11):1153-1156 
46
  杜龙,  
唐承统
,  
刘检华等
.  
面向虚拟装配的 
AVI 
视频动画制作算法研究
及应用
.  
计算机应用研究
. 2005, (2):142-143 
47
  冉林仓.  
使用增强图元文件实现屏幕截获
.  
电脑编程技巧与维护
.  2002, 
(1):85-88 
48
  刘香芹 ,  
张宏 
.  
屏幕录像系统的开发与设计 
.  
沈阳航空工业学院学报 
. 
2005, 22(3):63-64 
49
  廖华飞,  
张林鍹
,  
肖田元
.  
装配工艺规划后处理的研究与应用
.  
现代制造
工程
. 2002, (11):7-10 
50
  李改婵. XML 
技术在数据交换中的应用
.  
太原科技
. 2007, (4):77-78 
51
  
Zhang  Shijie,  Song  Laigang.  Knowledge  and  XML  based  CAPP  System. 
Chinese Journal of Mechanical Engineering. 2006, 19(3):344-347 
52
  黄萍,  
曹阳
.  
在 
WEB 
浏览器端显示 
XML 
数据文档的方法研究
.  
计算机
应用研究
. 2001, (2):115-116 
53
  陈万领,  
陈卓宁
,  
宾鸿赞等
.  
基于 
XML 
的工艺信息表达方法研究与实践
. 
华中科技大学学报
. 2006, 34(3):46-49 
54
  鱼明.  
利用 
XSL 
转换 
XML 
到 
HTML 
的几种方法
.  
安徽冶金科技职业学
院学报
. 2005, 15(2):50-52 
55
  刘乐卿,  
冯斌
,  
田云峰等
,  
产品装配工艺多媒体教学软件的开发及应用
. 
现代制造工程
. 2007, (5):124-126 
56
  吴晓,  
丁国富
,  
王金诺
.  
基于 
WTK 
的虚拟环境建模方法与应用研究
.  
计
算机应用研究
. 2001, (2):23-25 
57
  汤晓燕,  
云忠
,  
王桥医
.  
基于 
WTK 
的虚拟装配技术研究
.  
凿岩机械气动
工具
. 2003, (4):24-27 
58
  
Korvesb,  Loftusm.  Designing  an  Immersive  Virtual  Reality  Interface  for 
Layout Planning. Mat Process Tech. 2000, (107):425-430 
59
  周骥平,  
曹金学
,  
魏孝斌
.  
基于 
WTK 
的虚拟车间设计技术
.  
扬州大学学
报
. 2006, 9(1):35-39 
60
  唐秋华,  
陈定方
,  
孔建益
.  
虚拟现实工具包 
WTK 
接口开发技术
.  
武汉理
工大学学报
. 2001, 23(10):38-41 哈尔滨工业大学工学硕士学位论文
 
  67
攻读学位期间发表的学术论文
 
黄垒
,  
夏平均
,  
姚英学
.  
虚拟装配工艺设计技术研究与应用
.  
现代制造
工程
. (
已录用
) 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 哈尔滨工业大学工学硕士学位论文
 
  68
哈尔滨工业大学硕士学位论文原创性声明
 
本人郑重声明：此处所提交的硕士学位论文《基于虚拟现实的装配工艺
设计技术研究与应用》，是本人在导师指导下，在哈尔滨工业大学攻读硕士
学位期间独立进行研究工作所取得的成果。据本人所知，论文中除已注明部
分外不包含他人已发表或撰写过的研究成果。对本文的研究工作做出重要贡
献的个人和集体，均已在文中以明确方式注明。本声明的法律结果将完全由
本人承担。
 
作者签字：
                   
日期：
     
年
    
月
    
日
 
哈尔滨工业大学硕士学位论文使用授权书
 
《基于虚拟现实的装配工艺设计技术研究与应用》系本人在哈尔滨工
业大学攻读硕士学位期间在导师指导下完成的硕士学位论文。本论文的研究
成果归哈尔滨工业大学所有，本论文的研究内容不得以其它单位的名义发
表。本人完全了解哈尔滨工业大学关于保存、使用学位论文的规定，同意学
校保留并向有关部门送交论文的复印件和电子版本，允许论文被查阅和借
阅，同意学校将论文加入《中国优秀博硕士学位论文全文数据库》和编入
《中国知识资源总库》。本人授权哈尔滨工业大学，可以采用影印、缩印或
其他复制手段保存论文，可以公布论文的全部或部分内容。
 
作者签字：
                   
日期：
     
年
    
月
    
日
 
导师签名：
                   
日期：
     
年
    
月
    
日
 
哈尔滨工业大学硕士学位涉密论文管理
 
根据《哈尔滨工业大学关于国家秘密载体保密管理的规定》，毕业论文
答辩必须由导师进行保密初审，外寄论文由科研处复审。涉密毕业论文，由
学生按学校规定的统一程序在导师指导下填报密级和保密期限。
 
本学位论文属于
            
保密
□
，在
      
年解密后适用本授权书
不保密
□ 
（请在以上相应方框内打
“√”
）
 
作者签字：
                   
日期：
     
年
    
月
    
日
 
导师签名：
                   
日期：
     
年
    
月
    
日
 
 
√哈尔滨工业大学工学硕士学位论文
 
  69
致
   
谢
 
本文是在导师姚英学教授的悉心指导与亲切关怀下完成的。
 
本文的每一步工作，都离不开姚老师的谆谆教导，都凝结着姚老师的心
血和汗水。姚老师渊博的知识面、敏锐的洞察力和严谨的治学精神给了我深
刻的印象，始终激励着我在科学研究工作中奋发进取、努力开拓；姚老师乐
观的生活态度，节俭的生活习惯，忘我的工作精神，给我今后的生活树立了
榜样，使我终生难忘。在本文结束之际，谨向姚老师致以诚挚的感谢和崇高
的敬意。
 
同时，衷心感谢对我的课题研究提出许多建设性意见的夏平均老师，没
有他对我的帮助，我的课题研究不可能取得今天这样的成果。另外，衷心感
谢数字化制造实验室的李建广教授、高栋副教授以及其他老师为我的研究所
给予的指导和帮助。
 
感谢虚拟装配课题组的刘江省博士生、郎跃东博士生对我的课题研究的
帮助。感谢在实验室一起学习和生活过的硕士生孙宗宸、沈阳、姚奇、臧锡
峰、王洪波、陈宁宁等，感谢他们对我课题研究的支持和学习生活的帮助。
 
感谢中国空间技术研究院总装与环境工程部的孙刚主任、熊涛高级工程
师，他们为课题的进行提供了良好的条件。
 
最后，向所有关心和支持我的论文工作的同学、朋友表示衷心的感谢。
 