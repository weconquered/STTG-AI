中图分类号:论文编号:
学科分类号:
博士学位论文
航天产品虚拟装配工艺设计技术
及其应用基础研究
研究生姓名张丹
学科、专业机械制造及其自动化
研究方向虚拟装配技术
指导教师左敦稳教授
南京航空航天大学
研究生院机电学院
二О一О年十月Nanjing University of Aeronautics and Astronautics 
The Graduate School 
College of Mechanical and Electrical Engineering 
Research on Virtual Assembly Process 
Planning Technology and its Application for 
Aerospace Products 
A Thesis in 
Mechanical Engineering 
by 
Zhang Dan 
Advised by 
Prof. Zuo Dunwen 
Submitted in Partial Fulfillment 
of the Requirements 
for the Degree of 
Doctor of Philosophy 
October, 2010 承诺书
本人声明所呈交的博士学位论文是本人在导师指导下进
行的研究工作及取得的研究成果。除了文中特别加以标注和致
谢的地方外,论文中不包含其他人已经发表或撰写过的研究成
果,也不包含为获得南京航空航天大学或其他教育机构的学位
或证书而使用过的材料。
本人授权南京航空航天大学可以将学位论文的全部或部
分内容编入有关数据库进行检索,可以采用影印、缩印或扫描
等复制手段保存、汇编学位论文。
(保密的学位论文在解密后适用本承诺书)
作者签名:
日期:I 
摘要
航天产品结构复杂、零部件繁多,传统装配工艺设计需要建立大量物理模型以进行模装试
验才能确定设计,并且纸质装配工艺文件难以清晰描述复杂装配工艺,使得产品装配周期长、
成本高,无法满足企业敏捷制造的要求。虚拟装配技术为上述问题的解决提供了新的研究思路,
本课题以企业应用为背景,展开面向航天产品敏捷总体装配的虚拟装配工艺设计及其应用基础
研究,该项研究对于实现航天产品装配工艺的快速和低成本设计、提高企业的紧急动员生产能
力,具有重要的现实意义和应用价值。
论文完成的主要工作及取得的成果如下:
设计了桌面式虚拟装配工艺设计系统的总体框架。
首先分析了虚拟装配工艺设计系统的功能需求,在此基础上阐明了桌面式虚拟装配工艺设
计系统的研究内容和特点,将系统结构分为交互层、功能层、支持层和数据层,建立了完整的
系统层次体系结构,给出了系统的工作流程:数据预处理阶段、装配工艺设计阶段和工艺文件
输出应用阶段。
研究了面向航天产品的虚拟装配建模技术。
分析了航天产品虚拟装配模型的需求,对装配场景模型进行了分类,将装配场景模型分为
刚性零件模型、电缆零件模型和其他模型,并分别给出了实体表达及信息描述方法,提出了包
括刚性零件和电缆零件的刚柔混合装配层次关联模型,并对模型的信息描述和数据结构表达进
行了详述。分析了装配模型在虚拟环境中的建立内容和流程,提出了零件模型信息的转换与存
储方法,最后给出了刚柔混合装配层次关联模型的建立流程。
研究了虚拟装配的交互辅助技术。
提出了虚拟环境下具有交互辅助功能的装配流程,提出了基于约束元素包围盒的装配意图
捕捉算法及效率评估方法,根据约束元素的特征参数和配合类型,提出了基于位姿变换元素分
解的约束精确定位求解算法,将位姿变换分解为点到线上、点到面上和直线平行种位姿变换
情况。并通过对零件自由度的求解和目标约束方向上的运动分量映射,提出了基于约束元素投
影的装配运动导航方法,上述方法可有效减少约束的误识别和漏识别现象,并保证虚拟环境下
零件的装配运动精度。研究了装配约束关系的动态解除方法和紧固件装配工具的操作及可达空
间验证方法。研究了基于质点弹簧系统的电缆零件装配方法及仿真流程,分析了电缆束质点弹
簧系统的动力学特性,使用积分法对质点弹簧动力学微分方程进行求解,并提出了弹簧
动态变形约束算法和电缆束的网格变形更新算法来增强仿真的真实性。
研究了面向虚拟装配工艺的顺序规划和路径规划方法。II                                                                                                                                                                                             
基于粒子群遗传算法,结合虚拟装配系统良好的交互性,提出一种人机协同的航天产品装
配顺序优化方法。使用优先约束关联矩阵来描述零件间的优先约束关系和关联关系,并研究了
粒子群遗传算法的基因组、染色体以及粒子的编码表达方法。综合考虑装配连续性、装配资源
的变动和仪器设备的影响,提出了有工程意义的适应度函数的表达式,根据优先约束关联模型
生成随机的可行初始装配序列,并利用粒子群算法重构遗传算法的交叉算子对装配顺序进行优
化。用一个实例表明该方法较常规遗传算法有较好的收敛性和稳定性。研究了面向虚拟装配工
艺的装配路径生成方法。提出了装配物料清单和装配动画的生成以及工艺文件数据的提取策略。
开发并实现了桌面式虚拟装配工艺设计原型系统。
原型系统由装配建模、虚拟装配仿真、装配顺序规划、装配工艺文档设计与示教四个模块
组成,详述了各模块划分及模块间的数据流向,并介绍了原型系统的开发架构和开发环境。以
航天产品某部件的装配模型为例,对其在原型系统中的虚拟装配工艺规划工作流程进行了详细
说明,通过介绍各个模块的主要功能界面,验证了各个模块的功能,得到了初步应用。
关键词:虚拟现实、虚拟装配、装配工艺设计、航天产品、敏捷制造、装配建模、交互辅助、
装配顺序规划III 
Abstract 
Traditional  assembly  process  planning  for  aerospace  products  requires  plenty  of  physical 
mock-up  trials  to  verify  designs  because  of  their  complicated  structures  and  large  number  of 
components.  Meanwhile  papery  process  files  are  difficult  to  express  complex  assembly  process 
clearly. As is stated above, the problem leads to long assembly cycle and high cost, so traditional 
assembly  process  planning  can'
'
'IV                                                                                                                                                                                             
target  constraint  direction.  The  interactive  aid  technology  can  easily  eliminate  error  and  escaped 
constraint realization and can improve the validity and efficiency of assembly intention capturing. The 
assembly  constraint  dynamic  remove  method  and  fastener  assembly  tools'
'
'V 
目录
第一章绪论
引言
课题研究背景
先进制造理念和模式
虚拟装配技术的提出
航天产品总体装配工艺设计
国内外研究现状
关键技术研究现状
虚拟装配系统研究现状
存在的主要问题
项目来源、研究意义及内容
项目来源
研究意义
论文研究内容及章节安排
第二章桌面式虚拟装配工艺设计系统总体框架
引言
桌面式虚拟装配工艺设计系统的功能分析
虚拟装配系统的分类
桌面式虚拟装配工艺设计系统的功能需求分析
的研究内容和特点
虚拟装配工艺设计系统体系结构
虚拟装配工艺设计系统工作流程
本章小结
第三章虚拟装配信息建模技术
引言
航天产品装配场景模型的实体表达
刚性零件模型的实体表达
电缆模型的实体表达
其他模型的实体表达
刚柔混合装配层次关联模型表达
的信息描述
数据结构表达
虚拟环境下装配模型的建立
装配模型建立内容及流程VI                                                                                                                                                                                             
3.4.2  模型信息的转换与存储
装配场景的搭建
刚柔混合装配层次关联模型的建立
本章小结
第四章面向虚拟装配的交互辅助技术
引言
交互辅助的虚拟装配操作流程
装配意图捕捉技术
约束元素包围盒的构建
自由度的表达与归约
约束元素多层识别
约束关系智能确认
装配意图捕捉的效率计算
精确定位求解与装配运动导航
基于位姿变换元素分解的精确定位求解
基于约束元素投影的装配运动导航
约束关系的动态解除
约束关系动态解除准则
零件可拆卸性推理
虚拟装配中紧固件工具的操作
工具装配的操作过程
紧固件工具与零件的匹配和约束分析
虚拟装配中工具的操作空间
基于质点弹簧系统的电缆零件虚拟装配
虚拟环境下的电缆装配操作方式
电缆束质点弹簧系统的动力学分析
积分法求解质点弹簧动力学微分方程
弹簧动态变形约束算法
电缆束网格变形更新
电缆零件装配流程
本章小结
第五章面向虚拟装配工艺的顺序规划及路径规划
引言
面向虚拟装配工艺的装配顺序规划
优先约束关联关系的表达和生成
优先约束关联矩阵
优先约束关联矩阵的生成
可行装配序列的生成
基于粒子群遗传算法的最优顺序生成VII 
5.5.1  基于的编码表达
适应度函数的设计
基于的交叉算子
基于的装配顺序优化
装配顺序规划应用实例与分析
应用实例
结果分析
面向虚拟装配工艺的装配路径规划
传统装配路径规划方法
面向虚拟装配工艺的人机协同交互装配路径规划
装配的生成及工艺文件数据的提取
装配的生成
装配工艺文件数据的提取
本章小结
第六章原型系统开发与实现
引言
原型系统开发与实现
功能模型设计
开发架构
系统开发环境
原型系统应用实例
本章小结
第七章总结与展望
全文总结
进一步的工作展望
参考文献
致谢
在学期间的研究成果及发表的学术论文
附录攻读博士学位期间参与的科研项目VIII                                                                                                                                                                                             
图表清单
图虚拟装配技术
图虚拟装配工艺设计的映射及关键技术
图论文各章节的组织结构
图体系结构示意图
图工作流程示意图
图航天产品虚拟装配场景模型分类
图刚性零件模型实体表达及数据映射示意图
图约束特征的三种常用约束定义方式
图几种典型约束元素的基本参数
图电缆束模型实体表达及数据映射示意图
图电缆零件模型显示特征及分支段连接示意图
图电缆分支段质点弹簧模型
图电缆束质点弹簧模型示意图
图某型产品的主体结构示意图
图刚柔混合装配层次关联模型
图虚拟环境下装配模型的建立内容及流程
图文件格式的语法结构
图几何信息及拓扑信息的转换流程
图装配模型中的约束信息
图有交互辅助功能的虚拟装配操作流程
图几种典型约束元素类型的基本参数和包围盒
图物体在几何约束下的自由度示例
图装配意图捕捉和约束元素多层识别流程
图零件在装配过程中同时识别到多个约束
图螺栓装配时的进给增量示意图
图平移变换及旋转变换示意图
图点置于线上时的几种定位求解情况
图点置于面上时的几种定位求解情况
图直线平行时的几种定位求解情况
图平移分量向约束方向的投影
图旋转分量向约束方向的投影
图零件约束关系的动态解除流程
图零件约束关系解除的同时关系
图零件约束关系解除的先后关系
图螺钉旋具与螺钉的约束元素
图一字槽和十字槽旋具与螺钉的精确定位过程
图扳手与螺栓的约束元素
图扳手与六角螺栓的精确定位过程IX 
图扳手与六角螺栓的精确定位过程
图电缆零件整体装配操作方式
图电缆零件电连接器装配操作方式
图电缆零件电缆束装配操作方式
图质点弹簧系统中的弹簧和阻尼器结构示意图
图弹簧伸长量与力关系曲线
图弹簧动态变形约束算法示意图
图电缆束网格根据质点位置更新示意图
图电缆零件装配柔性仿真流程
图面向虚拟装配工艺的装配顺序规划流程
图典型结构装配体及其装配关联图
图基于矩阵的可行装配序列生成算法流程
图可行装配序列生成过程示意图
图染色体编码结构示意图
图交换算子的操作规则示意图
图变异算子操作示意图
图某部件装配体结构示意图
图某部件装配体结构示意图
图基于的收敛特性曲线
图基于的收敛特性曲线
图与的标准差曲线
图使用随机初始序列的收敛特性曲线
图面向虚拟装配工艺的人机协同交互装配路径规划流程
图装配数据结构
图向单层次视图结构的映射示意图
图装配工艺文件数据模型
图装配动画生成流程
图装配工艺文件数据模型
图功能模块划分及数据流向
图装配建模模块功能流程图
图虚拟装配仿真模块功能流程图
图装配顺序规划模块功能流程图
图装配工艺文档设计与示教模块功能流程图
图系统的开发架构
图集成接口
图几何特征与面片映射接口
图几何信息提取获得的模型网格及渲染显示
图读取并保存到数据库表中的约束信息
图几何信息提取获得的模型网格及渲染显示
图交互辅助下的零件装配过程(Ⅰ)
图交互辅助下的零件装配过程(Ⅱ)
图装配工具的操作过程及及可达空间验证(Ⅰ)X                                                                                                                                                                                             
图装配工具的操作过程及及可达空间验证(Ⅱ)
图电缆零件的装配过程
图装配路径的显示与记录
图某部件的装配完成图
图装配顺序规划模块功能界面
图装配列表界面
图装配动画生成
图装配顺序规划模块功能界面
图可视化装配工艺文件示教界面
表国外高校和研究机构有代表性的虚拟装配系统
表国内高校研发具有代表性的虚拟装配系统
表自由度分类
表约束元素之间的约束与自由度的映射关系
表平移自由度归约结果
表旋转自由度归约结果
表航天产品某舱段装配零件列表及相应装配属性
表某舱段优先约束关联矩阵
表适应度函数的权重设置
表装配的数据库表结构
表系统开发环境XI 
注释表
平面边长惩罚因子
质点加速度旋转四元数
平面边长变异概率
优先约束关联数量φ旋转分量变换矩阵
'空间距离球体、圆面半径
轴向单位矢量交换概率
所受作用力平移分量变换矩阵
弹簧作用力时间花费
质点所受作用力速度向量
适应度函数方向标示矢量
遗传代数圆截面法向矢量
约束元素包围盒高度约束元素包围盒宽度
圆柱面、锥面长度位置向量
作用力系数轴坐标位置
'轴线单位矢量轴坐标位置
长度轴坐标位置
种群规模α锥角
质量矩阵ααα各因数权重系数
邻接矩阵βββ各因数权重系数
φ位姿增量矩阵θθ夹角
质点质量λ惩罚因子权重
影响因子τ弹簧最大伸缩率
'平移分量矢量φφ'旋转角度
坐标系原点各因子权重系数
约束元素投影算子XII                                                                                                                                                                                             
缩略语
——轴向包围盒
——敏捷制造
——装配优先约束关联关系
——物料清单
——巴科斯范式
——边界表示法
——计算机辅助装配工艺规划
——计算机辅助设计
——计算机辅助工程
——计算机辅助制造
——计算机辅助工艺规划
——电缆束模型
——并行工程
——约束元素包围盒
——约束元素对
——约束特征
——计算机集成制造系统
——电缆零件信息模型
——计算机支持协同工作
——体素构造法
——碰撞检测特征
——面向装配设计
——刚
柔混合装配层次关联模型
——数字化样机
——自由度
——桌面式虚拟装配工艺设计
系统
——工程XIII 
ECM——电连接器模型
——企业资源计划
——适应度函数平均值
——最佳适应度值
——适应度函数值
——遗传算法
——国内生产总值
——常规遗传算法
——硬样品
——控制特征
——精益生产
——制造执行系统
——非确定性多项式
——方向包围盒
——产品数据管理
——属性特征
——粒子群算法
——旋转自由度
——显示特征
——刚性零件信息模型
——标准差
——群智能
——软产品原型
——平移自由度
——移动边界线法
——虚拟装配技术
——虚拟制造
——虚拟现实技术1 
第一章绪论
引言
装配是根据确定的技术要求和精度标准,将一系列零件通过合理的工艺流程及各种必要的
方式联结组合起来,使之成为产品的过程;它是产品制造中的重要环节,是影响产品性能、质
量、开发周期和成本的主要因素之一。因此产品装配工艺的设计及实施质量决定着产品的竞争
力。尤其对于生产复杂产品的航空、航天、船舶等大型企业其意义更为显著。复杂产品指的
是在客户需求、产品组成、开发技术、制造过程、项目管理等方面具有复杂性的大型产品。其
研究开发投入大,生产规模大,技术含量高,设计制造成本高,单件或小批量定制生产,产值
占国家的比重大,对于一个国家的综合实力和经济安全至关重要。复杂产品的装配设计
涉及多学科的技术人员和部门,为了减少装配工艺设计成本,缩短设计周期,随着信息技术、
计算机技术和通信技术的飞速发展,虚拟装配工艺设计技术应运而生。
课题研究背景
先进制造理念和模式
在全球化和信息化的总体形势下,制造业的经营战略发生了很大变化,自从上世纪年代
以来,以信息集成为核心的计算机集成制造系统(,
)开始得到广泛研究和实施,信息技术逐渐渗透到制造业的各个领域,其中各种计算机
辅助技术发展尤为迅速,先进设计制造技术得到进一步的研究,向更高水平发展,从年代至
今,产生了多种多样的先进制造理念和模式,如:敏捷制造(,)、虚拟
制造(,)、并行工程(,)、精益生产(,
)等。它们各有侧重,分别从不同角度研究如何增强企业的竞争力,但本质
是相同的:即通过信息技术提高产品设计、制造的效率与质量,利用信息集成技术把企业的各
种制造资源和产品设计制造各环节集成起来,进行合理的组织,使资源得到充分而有效的利用,
为企业赢得更多的效益。其中敏捷制造作为现代先进制造理念的基础,被视作下一代制造策略。
而虚拟制造是企业实现制造敏捷化的技术手段,是敏捷制造的重要使能工具,为敏捷制造的实
施提供有效支持。
敏捷制造着眼于小规模、模块化组合和企业间合作生产,发挥众多特长企业的优势来适应
变化多端的市场需求,把宏观的需求与具体的企业生产密切结合,充分发挥人的因素,及时抓
住机遇,快速响应市场,是一种满足制造业迅速向多品种、小批量、个性化模式转化的先进制
造战略。其基本思想是通过将高素质的员工、动态灵活的组织机构、企业内及企业间的灵活管2 
理以及柔性的先进生产技术进行全面集成,使企业能对持续变化、不可预测的市场需求作出快
速反应,从而获得长期的经济效益。敏捷制造强调人、组织、管理、技术的高度集成,强调企
业面向市场的敏捷性。它被认为是下一代的制造策略而得到美国、日本和欧共体等国家和地区
的普遍重视,并就敏捷制造的实现方法和途径开展了广泛的研究和探索。
随着虚拟现实技术(,)的逐步成熟,由于其特有的沉浸性、实时性和交
互性特点,极大地丰富了人机交互手段,提高了人通过自身的自然感知发现产品模型设计阶段
问题的能力。所以一经提出,便很快吸引了学术界和企业界的广泛关注。在这种技术发展潮流
的推动下,美国首先提出虚拟制造的概念。虚拟制造是将与产品制造相关的各个环节与技术
集成在三维动态仿真过程的实体数字模型之上,在这个统一模型之下集成设计和制造的过程。
旨在产品设计阶段,借助建模与仿真技术并行地、及时地模拟出产品未来各个制造过程乃至全
生命周期的各个环节对产品设计的影响,进行预测、检测、评价产品的性能和可制造性等。从
而更加有效地、经济地、柔性地组织生产,增强决策与控制水平,有效地降低前期设计给后期
制造带来的回溯更改,从而达到产品设计质量的最优化、产品的开发周期和成本最小化、生产
效率最大化的目的。
虚拟制造在产品真正制造出之前,首先在虚拟环境中生成软产品原型(,)
代替传统的硬产品原型(,)进行试验,并对其性能和可制造性进行评价和
预测,从而缩短产品的设计与制造周期,降低产品的开发成本,使企业实现制造的敏捷化。因
此虚拟制造将从根本上改变设计※试制※修改设计※规模生产的传统制造模式。
虚拟装配技术的提出
装配是制造业的主要活动,是形成产品的最终环节。据统计,在工业化国家,在产品的制
造中装配相关的活动占据了大约左右的人力,制造总费用的%～%用于产品的装配,
产品装配所需工时占产品生产制造总工时的%～%。而对于航空航天产品,产品装配所
占周期甚至更长。装配工艺规划解决产品的零部件装配顺序、装配路径、装配工艺方法和所
用工、夹具等问题,是产品装配设计的主要内容。传统的装配工艺规划采用人工编制,对工
艺人员的技术水平和装配经验过分依赖,装配工艺规划过程繁琐且不规范,编制难度大、周期
长。随着计算机辅助工艺规划(,)技术在零件加工工艺
设计的成功应用,为解决产品装配工艺规划问题,人们提出了计算机辅助装配工艺规划
(,)的概念,虽然能在一定程
度上提高工艺设计的效率,但其应用并不成熟,主要因为以下三点:
()目前方面的研究集中于对产品的空间几何、拓扑结构和装配约束关系进行分
析和推理,建立零部件间的装配优先约束关系,从而找出所有几何可行的装配序列,并通过建
立某种评价机制(如装配成本最小、装配时间最短等)进行优化。当产品零部件数目较多时,3 
其装配顺序组合方案数目急剧增加,将导致规划的“组合爆炸”问题;
()由于现有分析和评价方法具有一定局限性,导致分析结果与实际工程情况的偏差较大,
获得的结果没有实际意义,无法应用;
()产品装配过程是一个经验性很强的过程,现行的过份强调计算机自动推理功
能,忽略了工艺人员已有的成熟装配经验。
虽然遇到了上述的问题,但是利用计算机来辅助进行装配工艺设计的研究步伐却没有停止,
随着虚拟现实技术的发展以及计算机硬件性能的提高,建立虚拟样机代替物理样机对产品进行
装配工艺设计和规划成为了可能。根据敏捷制造和虚拟制造的理念,结合计算机辅助技术
(、、、)、数字化样机(,)、面向装配设计(,
)、虚拟现实技术等先进技术,逐渐发展出了虚拟装配技术(,
)。结合众多学者对虚拟装配的定义,虚拟装配的概念可以这样理解:它是利用计
算机工具,而不需要对产品或者制造过程进行物理实现,通过分析、建模、可视化、仿真、数
据表示等进行或者辅助进行装配相关的工程决策,是装配过程在计算机上的本质实现。虚拟装
配技术的概念及功能如图所示。虚拟装配技术的研究大体上可以分为两个方向:一是基
于商业三维软件进行二次开发,利用装配过程可视化工具,直观地展示产品装配过程中
零部件的运动形态和相互空间位置关系,并进行装配顺序的优化;二是基于虚拟现实技术构造
虚拟的产品装配环境,使操作人员利用经验知识,通过视觉、听觉和触觉来交互地规划和感知
产品的装配顺序和装配效果。
图虚拟装配技术
相关研究表明,由于在虚拟环境中能够逼真的对装配过程进行模拟,并且通过引入智
能技术,装配工艺规划的效率更高。虚拟装配技术为解决产品的装配问题提供了一个新的相对
低成本的快速手段,它是将装配和制造过程研究、计算机辅助设计技术、虚拟现实技术、可视
化技术、仿真技术、决策理论等多种技术加以综合运用的结果,为产品的装配工艺规划和操作
人员的培训提供了一个新的途径。4 
1.2.3  航天产品总体装配工艺设计
航天产品属于典型的复杂产品,其产品结构复杂,一般由多个具有独立功能的舱段组成,
零部件数目和类型众多,不仅具有大量刚性零件,而且包括电缆等大量的柔性零件。航天产品
的总体装配是根据设计要求,先将各种零件、仪器设备、组件逐步装配成各个舱段,然后再进
行舱段之间的装配,最后形成最终的产品。与一般的机械产品相比,航天产品的总体装配工艺
具有以下特点:
()装配生产组织方式为固定式装配。航天产品大多属于单件小批量生产,产品经常变换,
生产活动的重复性难以预计。手工操作比重大,要求操作工人技术水平高,具有很多方面的工
艺知识和能力;
()装配件类型多,工艺复杂。不仅具有一般结构件的装配、而且包括大量仪器设备、管
路、电缆零件的装配。并且这些设备和零件的装配精度和技术要求高,随着航天产品向轻量化、
精密化、小型化以及光、机、电一体化方向的发展,舱段内部的操作空间很有限,需要综合考
虑人员视线、零件运动空间、操作工具等各个因素的影响;
()由于装配工艺的复杂性,经常需要物理模型装配来辅助和验证工艺设计。首先根据设
计图纸加工出模型或工艺件,然后工艺人员使用这些模型进行试装,通过反复拆卸与重装得到
满意的装配顺序和路径,最后根据这些结果进行工艺设计。
另外航天产品研发与生产经常同时进行,其总体装配往往是多个型号在线,产品与工艺装
备在工艺设计时均未定型。这些特点导致航天产品工艺设计周期长、成本高。当有新型号的产
品时,往往需要投入大量人力物力进行装配工艺的设计和生产,现有的装配工艺设计方式难以
满足多变的产品需求,具有以下的不足:①装配工艺设计与产品设计和工装设计脱节:产品设
计无法充分考虑装配工艺性问题,往往需要多次工艺反馈才能确定设计,并且到装配生产车间
才能对工装夹具进行临时定制。这种串行的设计方式严重影响装配进度;②装配工艺设计手段
落后:随着三维软件的迅速发展与普及,三维技术已经代替二维系统成为
企业产品创新设计和数字化设计制造的基础平台,但是装配工艺设计手段仍然很落后,目前的
装配工艺设计都是针对二维图纸采用人工编制,编制周期长,而系统只是提供一个进行
人工编制工艺卡片的计算机平台,无法快速理解设计意图和充分利用设计信息;③装配工艺的
设计和验证依赖物理模型装配:在实际装配设计中,需要借助物理模型对关键零部件的装配进
行验证,来确定装配顺序以及电缆路径、长度和电缆束的捆扎等,从而导致装配周期长,
成本高;④装配工艺文件不直观:基于二维视图的装配工艺的生成、组织、管理与表达比较困
难,并无法直观地,交互地对装配过程进行仿真和评估,另外二维纸质工艺文件无法直观反映
装配细节与要求,给工艺技术状态控制、操作人员理解、使用带来困难,在新型号产品的装配
中,需要工艺人员到现场进行指导,才能防止装配人员对装配工艺的错误理解导致的错装、漏5 
装等现象。
虚拟装配技术的发展为解决航天产品总体装配敏捷性不足的问题提供了新思路,将虚拟装
配技术应用到航天产品的装配工艺设计中,可有效解决上述装配工艺设计的不足,提高航天产
品总体装配工艺设计反应速度,缩短设计、装配周期。北京理工大学的宁汝新教授认为:虚
拟装配工艺设计技术就是利用虚拟现实技术建立一个拟实的多模式(如视觉、听觉、触觉等)
交互装配操作的仿真环境,由装配工艺设计人员根据经验、知识和实际条件在虚拟环境中交互
地建立产品零部件的装配序列和空间装配路径,选择工装、量具,确定装配操作方式,并通过
多种传感装置分析装配过程中的各种人机工程问题,在可视化装配环境中分析各种工艺方法的
优劣和实用性,从而最终得到一个合理、经济、符合实际生产需求的产品装配工艺。
面向敏捷制造的航天产品虚拟装配工艺设计要实现两个方面的目标:①对产品设计进行有
效验证,并提供验证结果信息;②进行装配工艺规划,将生成装配工艺用于生产的指导。前者
表明虚拟装配技术是作为的使能工具出现的,并从某种程度上体现了的思想;而后
者表明虚拟装配技术是装配工艺设计的使能技术。上述目标是通过两个层次的映射实现的:
即底层用航天产品数字化三维模型映射了航天产品的物理模型,顶层用虚拟现实环境下的装配
过程仿真映射了实际的装配。底层映射使数字化模型代替了物理模型,避免了物理样机的研制,
并为虚拟装配的实现提供了数据基础;顶层映射实现了虚拟环境下的装配工艺设计过程。虚拟
装配工艺设计的映射及关键技术如图所示。
图虚拟装配工艺设计的映射及关键技术
国内外研究现状
关键技术研究现状
作为虚拟现实技术在制造领域的重要应用,通过近年来的研究虚拟装配技术已经取得了长
足的发展,并引起越来越广泛的重视,目前国内外的研究主要集中在以下几个方面:
()零部件建模及数据转换技术
从虚拟装配技术发展以来,零部件建模技术一直是研究的重点,零部件模型的信息是实现6 
虚拟装配仿真的数据基础,目前系统仍然是虚拟装配环境中零部件的主要建模手段,
但是由于系统和虚拟装配环境之间不存在数据接口标准,因此需要提取系统中的模
型信息并转换到虚拟装配环境中。
美国州立大学的等在其开发的虚拟装配环境中,使用
几何约束和物理的混合建模方式对零部件信息进行描述,包括系统导出的几何模型信息、
配合约束信息和密度、材质、重量、摩擦系数、硬度等物理特性信息,并且记录系统中
标识的零件模型的关键参数信息,用来在系统中进行参数的修改后,传递给参数化
系统完成几何模型的修改,再传递给系统。并利用参数化系统的二次开发接口实
现了与系统的数据共享,能进行产品结构树、几何模型、约束信息从系统中
的自动转换。并且可进行模型装配层次在中的重组,提供了重组模型装配
层次的方法。
浙江大学的刘振宇等提出了面向虚拟装配的零件层次信息模型,将产品信息分为四个
层次,并通过信息模型中的数据与约束映射,实现了零件信息各层次间的关联。虚拟装配系统
根据系统生成的中性文件,建立虚拟环境中的产品层次信息模型。同时他也对虚拟装配
环境中基于物理的建模进行了研究,并给出了基于物理模型的虚拟装配过程。
等采用了虚拟现实建模语言(,)来
传递系统为虚拟装配系统提供的信息。新加坡南洋理工大学的等利用
对虚拟环境中的几何对象模型进行组织,同样也使用格式文档对基于面片的几何模型信
息进行存储和表达。这种方式仅包含了虚拟物体的几何信息,不包含物体的装配信息以及拓扑
信息等虚拟装配系统所必需的信息。
北京理工大学的刘检华、宁汝新等采用分层的形式对虚拟装配系统中的模型进行表达,
提出了分层次的零件信息模型,并采用特征参数提取与特征重构的方法,重构了虚拟装配环境
下零件的工程语义信息,对零件面片模型描述文件()、零件精确几何信息描述文件()
和装配体信息描述文件()进行了说明,并利用上述种文件格式实现了系
统与虚拟装配环境之间的数据转换。
上海交通大学的朱文华、武殿梁等使用系统的二次开发接口提取产品的
装配层次信息、零件信息、配合约束信息及其几何引用项信息,并采用、面片和凸包
种模型复合表达零件模型,通过图形支撑系统渲染零件的几何模型,并在虚
拟环境中建立凸包模型用于碰撞检测。
浙江大学的万华根等为了减少系统与虚拟装配环境之间所必须进行的数据交换的
复杂度,将虚拟设计与虚拟装配环境进行集成,零件用、和几何约束相结合的精确
模型表达方法进行描述,可同时支持虚拟造型设计和虚拟装配功能,然而精确模型的信息量大,
不利于复杂产品的虚拟装配应用。7 
()装配建模技术
装配建模是使用合理的数据结构对虚拟装配环境下装配体中零件的位置、配合关系、装配
顺序、路径等信息进行全面的存储和表达,以实现多个抽象层次(功能信息、历史信息、过程
信息等)上的产品装配信息描述。
浙江大学的刘振宇提出了面向过程和历史的虚拟装配层次信息模型,以装配语义描述装
配体中零件间的装配关系,采用装配历史模型记录虚拟装配建模的过程与历史信息,在该模型
中记录了装配操作与装配任务,并对零件的装配路径和装配顺序进行了表达。
等提出连接图、等提出联络图、等提出相互关系以及哈尔滨工
业大学的付宜利等采用有向图等多种图模型对装配模型进行表达。图结构模型的特点是关系
表达比较直观,但有可能与产品的实际结构不一致,无法表达零件间的层次关系,因此在虚拟
装配系统中应用较少。
美国大学芝加哥分校的等提出基于场景图的产品装配信息模型,并用
于装配顺序的规划。该装配模型将场景图中的零件结点上关联零件的装配优先约束关系信息、
约束信息。该模型在交互式装配顺序规划时,通过检查零件结点的约束状态来避免不可行的装
配操作,但是需要预先定义零件之间的装配优先关系。
上海交通大学的宋丽萍等提出基于单元级多层次关联装配模型,将产品零部件划分为
产品级、装配模块级、子装配级和零件级个装配级别,并在每个装配级别上建立相应的单元,
单元是零部件的一个广义聚类,每个单元表达为一个无向关联图。
()碰撞检测技术
在虚拟装配环境中,零件的抓取、零件的装配几何可行性验证以及各种装配操作都是以碰
撞检测算法为基础的。碰撞检测的实时性与精确性对虚拟装配环境的真实性和沉浸感影响甚大。
面向虚拟装配的碰撞检测算法一般分为两类:层次包围盒方法和空间分解法。层次包围盒方
法是用几何特性简单且体积略大的包围盒来近似地描述复杂的几何对象,进而通过逐层构
造包围盒来逼近对象的几何模型,直至完全近似逼近对象的几何特性,从而只需对包围盒重叠
的部分进行进一步的相交测试;空间分解法是将整个虚拟空间划分成相等体积的单元格,
只对同一单元格内或相邻单元格间的几何对象进行相交测试。它们都是通过尽可能地减少需要
相交测试的物体对或基本几何元素对的数目来达到实时检测的目的,上述算法在经过改进后均
可用于虚拟装配模型。
西安交通大学的张建民等提出了一种面向虚拟装配的碰撞检测方法,该方法引入了多感
知机制和组件技术,并基于层次包围盒的碰撞检测方法,通过对虚拟场景中不同的装配过程和
装配阶段进行分析,采用分阶段层次检测的思想,实现了快速检测。
北京理工大学的刘检华等提出了支持虚拟装配环境下快速碰撞检测的分层次剖分方法,
通过综合运用层次包容盒法和空间剖分法实现快速减少需要检测的基本几何元素对数的目的,8 
为了减少计算量,引入模型缓存和冗余面片索引技术,合理利用装配过程的时空连贯性,从而
提高计算效率。
哈尔滨工业大学的彭高亮等针对组合夹具的结构特点,提出一种基于元件级空间分割与
包围盒检测相结合的快速碰撞检测算法,通过建立检测区域的分层投影模型实现最大限度的减
少进行碰撞检测的元件对数,同时避免了建立复杂的层次模型树,从而提高检测效率。
南京航空航天大学的谢建等在层次包围盒法的基础上,通过扫描剪枝与装配关系相结合
的方法得到包围盒相交的零件对,利用虚拟装配的时空连续性减少包围盒的相交次数,从而加
快了两零件之间的检测,并提出了由于模型的近似表达而造成的虚假碰撞的排除方法。
吉林大学的王天柱对软体的碰撞检测算法进行了研究,提出了一种结合层次包围体树方
法与随机检测算法的混合快速碰撞检测算法,通过快速更新物体的层次包围体树,并且
仅只在碰撞了的节点内进行智能搜索来实现变形体的快速碰撞检测。
()零件的装配导航与精确定位技术
设计者使用各种交互设备(三维鼠标、数据手套等)在虚拟环境中进行装配操作时,一方
面由于零件模型采用的是面片模型,这种模型几何表达上的不精确严重影响装配时的操作精度;
另一方面,由于交互设备缺乏精确的力反馈信息,使得操作者的触觉和视觉难以完美结合,从
而很难达到真实装配的效果。因此为了保证装配的精确性,需要提供运动导航功能,而在运动
导航之前需要对用户的装配意图进行准确高效的识别和捕捉。
英国大学的等基于当时力反馈设备以及精确跟踪设备的局限性,提
出近似捕捉和碰撞捕捉的方法来解决零部件的精确定位。在虚拟装配过程中,操作者控制零部
件进行装配,当运动到目标位置附近时,系统自动将其定位到最终位置,从而实现近似捕捉;
而当待装配零件与基准零件发生碰撞干涉时,系统自动将其定位到最终装配位置,实现碰撞捕
捉。这两种方法都忽略了零件自由度的变化过程,丢失了装配过程的中间信息。
希腊大学的等提出了基于定位捕捉的装配运动导航方法,它基于零
件间的碰撞检测,实时计算待装配零件位姿和目标位姿的距离,当该距离在预先设定的范围内
时,即将零件的位姿调整为目标位姿。该方法会导致零件位姿的突变,对产品的可装配性检测
存在盲区。
上海交通大学的杨润党等提出了基于约束的装配意图识别方法,通过读取系统中
零件间的配合约束关系信息来实现零件的装配意图捕捉和交互式约束确认,将零件包围盒间的
碰撞检测作为装配意图识别的触发条件,并提出了基于体素的约束识别方法。在约束识别的基
础上,对零件的自由度进行归约求解,并通过定义广义坐标系实现零件最终位姿的定位。
浙江大学的刘振宇等提出基于语义识别的装配导航技术来实现虚拟环境中受约束零件
的运动。建立约束语义的抽象表达模型并提出扩展对象语义建模,从装配语义元的属性匹配进
行装配语义的识别,从装配语义的角度识别装配意图,并根据实体的表面配合约束进行定位求9 
解。
北京理工大学的刘检华等建立了零件的几何约束对象模型,并在零件装配发生碰撞时,
首先判断优先约束类型,然后逐层判断零件面片对之间的约束关系属性是否匹配,以此来完成
装配意图的捕捉。同时基于几何约束分别求解零部件的位置和姿态来实现精确定位。
哈尔滨工业大学的彭高亮等提出了几何约束的模糊评判识别方法,通过建立自由度坐标
系实现约束导航,并将其应用到一个基于虚拟现实的组合夹具组装系统中。
()电缆等柔性体的装配仿真技术
在航天产品中存在大量柔性电缆的布置,由于空间狭小、结构紧凑,给电缆的装配操作带
来很大难度,成为影响产品质量的关键,因此对电缆的装配仿真可有效验证布线的正确性。由
于电缆柔性可变形特性,使得电缆的实时装配仿真难度很大,目前的研究并不多。
英国大学的等开发了一个支持电缆在虚拟场景中进行实时布线的系
统,通过数据手套以及头盔显示器等设备进行人机交互,并加入人机工程学的相关知识,使设
计过程更接近实际环境。提出通过“点点”创建新电缆,“起点方向”创建新电缆,修改已经
存在的电缆等创建电缆的方法,实现了线缆静态干涉检测。
德国研究技术中心的等在等的研究基础上,将质
点弹簧系统进行了改进,通过定义线性弹簧来计算质点在拉伸过程中所受到的弹性张力,同时
定义扭曲弹簧来仿真电缆的弯曲刚度大小,并采用隐式欧拉和共轭梯度法进行数值解析,最后
实现了不同刚度电缆在重力作用下的实时仿真模拟。
北京理工大学的宁汝新课题组提出了基于离散控制点的线缆建模技术,该技术将线缆
简化成由一系列截面中心点相连而形成的空间连续折线段,通过人机交互对路径控制点进行布
置、修改,对电缆进行单点布线、多控制点布线和整体布线三种方式的路径规划,实现了虚拟
环境下交互式电缆布线。
中国工程物理研究院的魏发远等对包含柔性刚性部件的复杂装配系统的装配方法进
行了研究,将每束电缆看作一个蛇形机器人,并根据机器人末端需要达到的位置和姿态,利用
逆运动学法反求各关节的位置。该方法具有较好的收敛性,适合于在线计算,缺点是由于没有
考虑到电缆的受力,因此仿真结果与真实情况具有偏差,真实感不强。
()面向虚拟装配的装配顺序规划与优化技术
装配顺序规划与优化是装配工艺设计的重要内容,也是研究的热点,长期以来,国内外许
多学者针对装配顺序规划和装配评估优化展开了大量的研究。近年来研究主要集中在各种智能
算法在装配顺序规划上的应用,但是针对复杂产品的特殊性,结合虚拟装配技术进行装配顺序
规划与优化的研究并不多。
加拿大大学等将仿生智能技术引入虚拟装配中,首先通过交互得到的初
始装配序列,再使用神经网络对其进行装配序列规划,建立不同的标准进行评价和优化。该系10 
统通过这种方法,充分利用了设计者的知识和经验;但是,当待装配零件数量增加时,推导出
的可行装配序列数量也急剧增加,易出现“组合爆炸”,导致实用性大为减弱。
华中科技大学的等在虚拟环境中根据交互拆卸生成优先约束和初始装配序列,首先
应用几何推理的方法推导所有的可行装配序列,最后利用虚拟装配技术通过人机交互得到优化
的装配顺序。该方法适合于装配体结构不复杂的产品。
北京理工大学的刘检华等研究了基于虚拟现实的装配工艺规划理论及实现技术,提出了
交互装配生成装配顺序、路径等工艺信息的方法。
南京理工大学的王孝义提出了基于产品层次结构树重构的装配序列系统级快速规划方法
和基于快速模糊评价的装配序列作业级规划方法,采用模拟退火算法进行优化作业级装配序列
的搜索选择,并在虚拟环境中对装配序列进行仿真。
哈尔滨工业大学的夏平均等通过结合虚拟现实技术和仿生算法,提出一种生成优化装配
序列的方法,在虚拟环境中根据经验和知识进行交互式拆卸得到零件间的优先约束关系,应用
蚁群算法规划出初始优化的装配顺序,再在虚拟环境下进行仿真、评价和优化,考虑装配位置
可达性和工具操作等因素,识别新的优先约束和评价准则,从而重新规划出更优的装配顺序,
不断反复和完善这个过程,直至得到满意的最佳装配顺序为止。
()其他关键技术
此外,国内外学者对与虚拟装配相关的装配过程人机工程分析、虚拟装配任务培训、装配
知识的获取与应用、装配工艺评价决策等技术也开展了相关研究,本文不展开详述。
虚拟装配系统研究现状
在各种关键技术的研究基础上,各研究单位针对不同的应用独立开发了各自的虚拟装配系
统,最早进行虚拟装配系统研发的是美国州立大学和美国国家标准技术局,随后德
国、英国、希腊等国家的大学和研究机构都开展了这方面的研究。国外高校和研究机构有代表
性的虚拟装配系统如表所示。
表国外高校和研究机构有代表性的虚拟装配系统
研究单位时间系统名称类别主要功能
美国
州立大学沉浸式
①从系统到虚拟装配系统的信息转换;②基于
几何约束的装配过程仿真;③零件结构关键参数的
修改;④装配序列和路径的生成与编辑;⑤支持双
手装配操作及操作工具的使用;⑥可将装配信息传
递给系统。
德国工
业工程研究所沉浸式
①从系统获得设计模型信息;②装配、拆卸过
程仿真;③交互式生成装配顺序;④生成装配规则
和知识;⑤装配过程稳定性分析;⑥生成工艺文档。11 
(续表)
英国大学沉浸式①确装定配位知;识③电的提缆取与与管评路估的设;计②与装规配划过。程中零件的精
德国大学半沉式浸①方法建;立②面向建立装面配向的重知识用的表标达语准言零件库;③及知创识建推拟理人化智能体,用于装配仿真设计和演示。
美国
大学沉浸式
①提供了碰撞干涉检测、工具可达性检测、装配体
稳定性检测等功能;②提供了网络协同设计的虚拟
装配环境。
希腊大学
沉浸式
①建立了装配时间模型,对装配过程的人机因素进
行定性评价和定量估计;②装配零件时工装夹具的
使用;③根据操作定量估计完成装配所需的操作力、
能量消耗及时间。
香港理工大学桌面式
①系统到虚拟装配系统的几何信息转换;②虚
拟装配过程仿真验证;③记录装配方法、装配顺序、
装配时间;④提供改进设计的建议。
新加坡南洋理工大学桌面式①序虚列拟;③装交配互操式作和的智导能航算;法②结提合供推可理参优考化的拆优卸化序拆列卸。
意大利大
学增强式
①利用工具来有效提高对象识别能力,生成优
化装配序列和产生装配操作指令;②生成装配信息
对装配人员进行交互式装配培训;③对混合样机的
装配可行性、成本和装配规划等进行评估。
国内的研究起步较晚,上世纪末浙江大学的国家重点实验室最早开展虚拟装配
的研究,华中科技大学中心、清华大学中心、北京航空航天大学、北京理工大
学、上海交通大学、哈尔滨工业大学等高校也先后开展相关的研究。国内高校研发的虚拟装配
系统如表所示。
表国内高校研发具有代表性的虚拟装配系统
研究单位时间系统名称类别研究主要内容
浙江大学
国家重
点实验室
半沉浸式
沉浸式
①从系统到虚拟装配系统的信息转换;②基于
装配语义及几何约束的装配过程仿真;③装配过程
信息记录;④基于约束动态解除的虚拟拆卸。
华中科技大学
中心半沉浸式
对虚拟环境的人工拆卸、装配建模技术、装配顺序
装配路径规划及其自动记录技术、可装配性评价技
术进行了研究。
清华大学中心可装进拆行运交动表互达式、装干配顺涉序检和查等路技径术规进划,行并了对研装究配。建模、
北京理工大学半沉浸式系导航统和地定对位虚、拟装装配配顺环序境和下路的径碰规撞划检、测虚、拟零环部境件下装线配12 
(续表)
缆和管路的设计和铺设等技术进行了研究。
上海交通大学
沉浸式
研究涉及了虚拟装配环境下的高效碰撞检测技术、
复杂产品装配建模、定位与导航等、分布式协同装
配、装配工具的操作等技术。
哈尔滨工业大学
沉浸式
系统包括虚拟装配模型数据转换、虚拟装配过程仿
真、蚁群算法与虚拟装配结合生成装配序列、工具
可达性验证、装配工艺示教方法等关键技术。
存在的主要问题
从所述的虚拟装配技术研究现状来看,目前虚拟装配技术的研究已经取得了一些进展,在
汽车和航空工业领域得到初步应用,但是总的来说,各种理论和方法还不成熟,导致虚拟
装配系统的工程实际应用程度不高。尤其对于航天复杂产品的装配工艺设计仍存在一些不足和
需要解决的问题,主要体现在:
面向航天复杂产品的虚拟装配建模:一方面,虽然目前提出了各种产品信息模型,但基
于几何的产品模型缺少装配约束信息和工程设计信息,难以应用到装配工艺的设计,要求模型
信息的完备,而基于的产品模型信息表达复杂,维护困难,当应用于航天产品的虚拟装
配时,无法满足虚拟现实系统的实时性要求,又要求产品模型的轻量化;另一方面,目前虚拟
环境下产品装配的建模方法研究主要针对一般的机械产品,产品装配模型普遍使用图模型或者
层次模型来表示,而航天复杂产品结构复杂,零部组件众多,装配密度大,单一的图模型或者
层次模型无法对装配信息进行详尽的描述,导致后续的仿真无法真实的描述实际装配过程,并
给装配顺序智能规划带来困难。
()电缆零件的装配过程仿真:目前的研究主要集中在对电缆的空间自动布局、交互式布
线结构设计等方面,而对电缆的动态装配过程和装配顺序规划问题研究较少,因此在虚拟环境
下无法进行电缆等柔性零件的装配,难以在物理模型搭建前对电缆束的拓扑结构及空间布线设
计结果进行有效验证,从而使得产品设计周期和成本大幅增加,另外现有直接在虚拟环境下进
行电缆束布线设计的方法无法利用产品设计中的电缆模型,设计结果有可能改变电气设
计意图,因此有必要在虚拟装配环境中重用中的电缆设计信息,在不改变电缆设计参数
的前提下对电缆零件进行装配过程仿真及人机交互的装配顺序规划,从而解决目前电缆装配工
艺设计及验证严重依赖物理模型的缺点。
()零件的虚拟装配操作辅助技术:目前国内外的研究主要关注虚拟装配中零件的精确定
位,并且研究的对象一般为普通产品模型,对于装配过程中装配意图识别及装配定位的准确性
和效率、工具在虚拟装配过程中作用的相关研究并不多。现有的算法在航天产品的虚拟装配应
用中存在以下几个问题:①完全依靠中的装配约束关系,灵活性和准确性不足。由于只13 
是确定零件间最终的相对位置关系,往往不能反映真实的装配定位关系,而且对于存在大量互
换性零件的装配体,只能按照系统中定义好的约束来装配,显然不符合实际的装配;②
未系统考虑装配约束建模问题,装配约束的表达和获取方法不明确;③在装配空间狭小时装配
意图的捕捉困难,求解过程复杂,易出现约束的误识别和漏识别现象,而且需要频繁的人机交
互才能确认约束,影响在虚拟装配环境中的仿真效率和连续性。
()人机协同的复杂产品装配顺序规划:目前的研究集中在以下两个方向,装配顺序的自
动推理研究和人机交互式获得装配顺序的研究,研究对象大多为普通产品的装配。装配顺序的
自动推理研究中的割集算法易陷入组合爆炸问题,因此仅适用于零件数目少的产品。而实例推
理的方法的关键在于装配知识的表达与检索,难以对航天产品的复杂装配特征和多目标约束进
行描述和求解。在基于传统遗传算法的研究中,装配顺序求解结果严重受初始值的影响,造成
求解结果的不稳定,而且由于求解过程中常常伴随冗余的迭代,造成收敛速度过慢,求解效率
不高。在虚拟环境中通过装配拆卸获得可行装配顺序的方法虽然能充分发挥人的经验和知识,
但是具有盲目性和不确定性,缺乏全面的分析和必要的智能引导。
()装配工艺文件的过程可视化设计与示教:现有的虚拟装配系统偏重于装配过程仿真,
装配可行性验证,而对装配工艺的表达、生成与现场示教方面考虑较少,无法充分利用虚拟装
配过程中产生的工艺信息,快速生成指导装配生产的工艺文件。并且传统的装配工艺文件难以
对电缆等零件的装配工艺进行表述,装配人员经常误解装配工艺设计意图,导致错装、漏装的
现象,因此需要三维可视化的装配工艺设计文件对装配过程进行直观描述和展示。
()装配的人机工效研究:装配离不开人的参与,尤其对于航天产品单件、小批量生产的
总体装配,在装配方式上采用手工装配的形式。与机器自动化装配相比,手工装配中工人劳动
强度大,对零件质量等物理因素较为敏感。自动装配的装配时间由装配生产线的节拍控制,而
手工装配的时间和速度主要根据装配难易程度以及工人装配技能和经验决定。在虚拟装配工艺
设计时充分考虑装配人员的主观能动性、积极性和创造性,才能真正体现以人为中心的设计,
是提高产品装配质量和效率的关键。
项目来源、研究意义及内容
项目来源
论文的研究来源于南京晨光集团国防“十一五”重大基础预研项目“××敏捷总装和资源
高效快速重组技术研究”,本文的研究是该项目的四个子项目之一。
研究意义
当今世界的全球化竞争是具有鲜明时代特征的敏捷化竞争,敏捷化竞争的核心是快速。企
业的生存需要有快速响应需求变化的能力,能以最短的时间生产出高质量以及用户能接受的新14 
产品。长期以来,我国制造技术的发展很不平衡,各种先进制造理念及技术的研究和应用相比
国外发达国家水平较低,尤其对于航天产品的总体装配型企业,其装配工艺设计手段比较落后,
新技术的应用速度慢,加上航天产品结构复杂、精度高、零部件繁多,装配工艺设计和装配过
程愈加复杂,需要依托大量物理模型,使得产品装配效率较低,成本较高,无法满足企业敏捷
制造的要求。本课题的研究对于实现航天产品装配工艺的快速和低成本设计,特别是缩短产品
装配工艺设计周期,提高装配工艺质量,增强企业的竞争能力,提高企业的紧急动员生产能力
具有重要意义。主要表现在:()结合企业现状开展虚拟装配工艺设计研究,实现产品设计与
装配工艺设计的集成。根据上游产品设计的三维模型,经过信息的提取与重构在虚拟环境中对
产品进行交互式装配工艺设计,可充分利用设计信息和体现产品设计意图;()改变传统串行
的装配工艺设计模式,实现装配工艺的并行设计,并有效减少对物理模型的依赖;()借助计
算机智能规划技术,大大减少航天复杂产品的装配工艺规划时间,缩短产品研发周期;()通
过三维可视化装配工艺文件的示教,可直观、清晰的体现装配工艺设计意图,使装配工人的装
配效率得到提高,抑制漏装、错装现象的发生。
论文研究内容及章节安排
本文以某航天企业的工程应用为背景,在研究国内外虚拟装配系统的基础上,兼顾前沿技
术探索与实际生产应用需求,对面向航天产品的虚拟装配工艺设计的主要关键技术开展研究。
论文共分为七章,研究内容及章节安排如下:
第一章绪论。介绍课题的研究背景,对虚拟装配技术在航天产品装配工艺设计中应用的
可行性和必要性进行综述,总结虚拟装配各种关键技术及典型系统应用的研究现状,并分析现
有研究中的不足,最后论述本文的研究意义和研究内容。
第二章桌面式虚拟装配工艺设计系统总体框架。阐述现有的虚拟装配系统的分类,并从
各个方面进行对比,在此基础上,对桌面式虚拟装配工艺设计系统的功能需求展开分析,并对
系统的研究内容和技术特点进行论述,最后给出系统的体系结构和工作流程。
第三章虚拟装配信息建模技术。分析航天产品虚拟装配模型的需求,并分别提出各种装
配场景模型的实体表达及信息描述。提出刚柔混合装配层次关联模型,并对模型的信息描述和
数据结构表达进行详述。分析装配模型在虚拟环境中的建立内容和流程,提出零件模型信息的
转换与存储方法。最后给出刚柔混合装配层次关联模型的建立算法。
第四章面向虚拟装配的交互辅助技术。研究虚拟环境下包括刚性零件和电缆零件的具有
交互辅助功能的装配流程,提出装配约束的多层识别和智能确认方法以及装配意图捕捉的效率
评估方法。提出约束精确定位求解算法和装配运动导航方法,以实现零件装配的有效引导。研
究装配约束关系的动态解除方法和紧固件装配工具的操作方法。研究虚拟环境下可展现电缆零
件柔性的装配方法,分析虚拟环境下的三种电缆装配操作方式及电缆束质点弹簧系统的动力学15 
特性和积分方法,提出弹簧动态变形的约束算法和电缆束的网格变形更新算法,最后根据各个
算法给出电缆零件的装配仿真流程。
第五章面向虚拟装配工艺的顺序规划及路径规划。提出一种人机协同的航天产品装配顺
序优化方法,研究粒子群遗传算法的基因组、染色体以及粒子的编码表达方法,提出有工程意
义的适应度函数的表达式,根据优先约束关联模型生成随机的可行初始装配序列,并利用粒子
群算法重构遗传算法的交叉算子对装配顺序进行优化。用一个实例对优化结果进行分析。研究
面向虚拟装配工艺的装配路径生成方法,为后续的装配工艺动画生成提供基础数据。研究装配
的生成及工艺文件数据的提取策略,为实际生产提供技术依据。
第六章原型系统开发与实现。设计并开发面向航天产品的桌面式虚拟装配工艺设计原型
系统,对各个章节所述算法进行验证,并给出各个模块的功能界面和应用实例。
第七章总结与展望。对论文的研究工作、结论和创新之处进行总结,并对今后研究的工作
进行展望。
各章节研究内容之间的关系如图所示。
图论文各章节的组织结构16 
第二章桌面式虚拟装配工艺设计系统总体框架
引言
装配是产品生命周期中的重要环节,是影响产品性能、质量、开发周期和成本的主要因素
之一。尤其对于航天产品的总体装配来说,随着各种新型号产品装配密度和精度的提高,装配
难度越来越大,装配工艺设计成本和周期也随之增加,因此装配工艺的设计及实施质量决定着
产品的竞争力。传统的计算机辅助工艺规划系统只是提供一个进行人工编制工艺卡片的计算机
平台,并无法直观地,交互地对装配过程进行仿真和评估。随着虚拟现实技术的发展,建立虚
拟样机代替物理样机为航天产品进行装配工艺设计提供了一种更加有效、快速的途径。设计人
员可以在虚拟装配环境中交互地进行产品的装配,验证产品的可装配性,并通过智能算法的辅
助,可视化地、智能地分析装配工艺的可行性与优劣,同时建立产品的装配顺序和装配路径,
并自动生成三维可视化的装配工艺文件,通过人机交互,最终得到一个满足实际需求的产品装
配工艺。在这个过程中,通过充分利用计算机的计算能力和人的知识经验,人机协同地对装配
工艺进行设计,达到减少设计成本和缩短设计周期的目的。
本章根据桌面虚拟现实技术的特点,对面向航天产品装配工艺设计的桌面虚拟装配系统需
求和总体框架展开研究,该系统旨在辅助工艺人员在虚拟环境下对航天产品交互地进行装配工
艺设计。
桌面式虚拟装配工艺设计系统的功能分析
虚拟装配系统的分类
由于虚拟现实技术的复杂性及装配功能虚物实化的难度,基于虚拟现实技术的虚拟装配系
统的构建是一个复杂的系统工程,根据对虚拟环境的不同要求和输入输出设备的不同,目前的
虚拟装配系统可分为桌面式虚拟装配系统、沉浸式虚拟装配系统、增强式虚拟装配系统
和分布式虚拟装配系统。
桌面式虚拟装配系统(,)是通过计算机屏幕、投影
屏幕作为用户观察虚拟装配环境的一个窗口,设计人员仅使用基本的外部设备(鼠标、键盘、
轨迹球等)来操纵零部件进行装配的交互仿真,虽然桌面式虚拟装配系统缺乏完全沉浸式效果,
但是由于其成本低,并且外设简单,使用方便,系统本身的培训周期较短,适宜推广应用。而
且通过在虚拟装配软件系统中增加智能引导算法和沉浸增强显示策略,可有效达到比较理想
的虚拟装配效果。
沉浸式虚拟装配系统(,)是利用头盔显示器和数据17 
手套等各种交互设备把用户的视觉、听觉和其他感觉封闭起来,使用户完全置于计算机生成的
虚拟装配环境之中,并利用这些交互设备进行身临其境的装配操作。相对于桌面式虚拟装配系
统,一方面建立沉浸式虚拟装配系统的投资成本过高,而且使用的培训周期长,使用不便,另
一方面,由于显示技术的限制,当用户使用立体眼镜装配时间过长时,会导致明显的疲劳,甚
至会出现运动病的现象,因而上述各因素制约了沉浸式虚拟装配系统的推广应用。
增强式虚拟装配系统(,)是在增强现实技术基础
上搭建的虚拟装配系统,用户通过透射式头盔显示器观察叠加在真实世界上的虚拟零件图像,
并通过虚实融合注册技术,操作虚拟零件运动并装配到真实零件的位置上。增强式虚拟装配系
统可提高设计者的装配体验,但是由于传感器技术的精确性限制和对物理模型的需求,这种技
术离实际的装配工艺设计应用还有一段距离。
分布式虚拟装配系统(,)充分利用计算系统的强
大计算能力和网络功能,在上述虚拟装配系统的基础上,将位于不同物理位置的多个虚拟装配
环境通过网络相连接,并共享装配过程信息,从而使各个位置的设计者实现协同设计工作。由
于分布式硬件环境搭建的高成本和难度,以及协同装配操作的冲突解决机制不完善等问题的限
制,使得分布式虚拟装配系统的研究较少,但分布式虚拟装配系统在复杂产品的异地装配协同
设计中的应用是今后研究的方向。
表示出了各种虚拟装配系统的特点对比。
表各种虚拟装配系统的特点对比
沉浸感通过措施可改善好较好视系统而定
交互性可改善好一般视系统而定
协同性差差差好
技术难度一般一般大大
对物理模型依赖无无有无
使用难度小大大大
可推广性好差一般视系统而定
桌面式虚拟装配工艺设计系统的功能需求分析
桌面式虚拟装配工艺设计系统(,)
是在桌面式虚拟装配系统的基础上进一步开发实现的,在环境中,工艺设计人员不仅
能够交互观察和分析设计结果,而且能够直接通过基本输入设备方便自如地进行装配仿真,整
个仿真过程应尽量与实际装配工艺相吻合,并考虑各种装配工具的作用。与此同时,可以对装
配顺序进行智能辅助规划,实时记录设计过程产生的信息,并能快速地输出装配工艺设计结果。
具体来说,主要包含如下的功能需求:18 
()提供三维可视化、可交互的虚拟装配环境。通过构建一个非沉浸式虚拟环境,依靠鼠
标、键盘、轨迹球等基本设备支持各种人机交互的装配操作,包括完成装配场景的漫游、虚拟
零件的抓取、移动和释放等操作,并且该环境支持大数据量的刚性零件、电缆零件、工装夹具、
工作台等各种装配模型的显示和操作,能够对装配过程信息进行记录,并自动对装配、拆卸等
操作进行统一的信息维护,保证数据的完整性和一致性。
()实现与系统的集成。产品模型信息是虚拟装配的基础信息,能够将上
游产品设计部门提供的零部件模型,以及其他部门设计的工具、夹具等模型装载到虚拟现实环
境中,建立虚拟装配的对象。然而进行产品设计的系统和虚拟装配系统之间不存在数据
转换标准,不能直接将信息从系统传递到中。为此需要在系统到虚拟装配
系统的数据转换方面进行一定的探索,将虚拟装配所需的各种产品模型信息从系统高效、
正确地传递到虚拟装配系统中。
()支持面向装配过程的交互辅助功能。由于桌面式虚拟现实技术无法带来沉浸式虚拟现
实技术一样的沉浸感,而且虚拟装配系统相对于一般的虚拟现实系统在交互精度上要求更高,
因此需要提供必须的交互辅助功能,使得设计人员在进行交互的装配仿真时,能够模拟装配的
整个过程,而不仅仅是面向装配的定位结果。该功能要求在输入设备的现有精度下,考虑零件
简化几何模型的不精确,根据设计者的装配意图,把零件逐步精确定位到目标位置上。
()实现电缆零件的柔性装配过程实时仿真。不同于刚性零件,电缆在装配过程中必然要
发生变形,系统应该展示产品中电缆零件在装配过程中的柔性变形。使得电缆的装配能够与真
实的布线过程一致,对布线设计结果进行有效的验证。
()支持装配顺序的智能规划。装配顺序规划是装配工艺设计的主要内容,由于航天产品
的复杂性,完全靠人的经验和知识进行装配顺序的可行性求解非常费时费力,而且装配顺序的
的优劣直接影响产品装配的成本和质量,因此应依靠计算机强大的计算能力,对装配顺序规划
进行智能求解,来辅助装配工艺的设计。
()能快速地生成装配工艺文件。系统应该能将虚拟装配过程中生成的工艺信息自动转换
为指导装配生产的工艺文件(如装配、三维可视化工艺等),并提供一个交互式的装配工
艺文件编辑环境,对生成的工艺文件进行内容上的完善和丰富,从而得到最终的满足生产需求
的工艺文件。其中的三维可视化工艺文件以装配动画为主要内容,代替传统的二维装配工艺卡
片对装配现场的操作工人进行培训和示教,使装配人员快速准确地理解装配工艺设计意图,提
高装配效率。
()实现与其他信息系统的集成。能够将生成装配工艺设计结果有效地传递给、
等信息管理系统,实现数据的统一管理和形成生产计划的数据来源,保证企业信息数据的有效
流通,避免信息孤岛的出现。19 
2.2.3 DVAPPS 的研究内容和特点
根据对功能需求的分析,虚拟装配工艺设计的研究内容主要包括以下几点:
产品的装配信息建模;
虚拟装配的交互辅助技术;
装配工具的操作技术;
电缆零件的柔性装配过程实时仿真;
装配顺序的智能规划;
装配工艺文件的自动生成和可视化。
面向航天产品的对提高产品质量、缩短产品装配周期和降低成本具有重要意义,
它有以下几个突出特点:
()轻量化的集成装配模型:装配模型是进行虚拟装配工艺设计的基础和对象,在整个装
配工艺设计活动中,需要涉及大量的资源,尤其对于航天产品,包括大量的刚性零件模型、电
缆零件模型、工装夹具模型以及装配结构模型和装配工艺模型等。建立模型之间的数据关联并
集成在统一的装配模型框架下,使各模型之间形成一个整体,而且以轻量化的数据描述来防止
装配模型数据量的爆炸,以保证系统的可靠运行。集成信息模型可以使得能够方便地
使用产品开发过程中生成的各种产品装配信息,并将装配设计的结果有效的传递给所需要的环
节。
()交互辅助的虚拟装配仿真:依靠鼠标、键盘、轨迹球等简单的外部输入设备,通过对
虚拟环境下装配过程的交互辅助技术,来实现装配仿真的精确性和高效性。并通过合适的模型
处理,来增强设计者装配过程的沉浸感体验。使得工艺设计人员使用基本的设备就可以进行装
配工艺的设计,不需要额外的培训。在交互辅助技术的支持下,保证了零件装配过程的自然和
精确。并通过电缆的柔性装配过程实时仿真,可有效的对电缆布线设计结果进行验证,为电缆
的制作和装配提供准确的参数。
()虚拟装配工艺设计过程的人机协同:强调充分利用人的主观能动性和计算机的智能性
以及快速计算能力,在人与计算机之间建立一种各自发挥所长的协同。与传统的装配工艺设计
方式不同,在虚拟装配仿真的过程中,不仅考虑零件的影响,而且加入所用的工装夹
具等装配资源,真实体现实际的产品装配,同时依靠智能算法对装配顺序进行规划,在装配过
程中建立统一的装配模型并对装配可行性进行交互验证,对所有的装配工艺信息进行记录,从
而实现装配工艺设计的人机协同。
()三维可视化装配工艺文件的快速生成:能够将装配工艺设计的过程快速转化为工艺文
件,作为实际装配生产的指导和依据。其中基于装配动画的三维可视化装配工艺文件可有效的
对装配工人进行指导和示教,提高装配效率和准确性,确保装配生产的质量。20 
2.3 虚拟装配工艺设计系统体系结构
根据上述对的功能需求和研究内容分析,本文建立了的体系结构,如图
所示。的体系结构采用了层次结构,包括交互层、功能层、支持层和数据层,共
个层次。
图体系结构示意图
()交互层
交互层定义了用户与系统交互的接口,用户通过鼠标、键盘、轨迹球进行输入和操作控制,
系统进行处理后将信息通过显示器或投影仪反馈给用户。交互层一方面负责响应用户输入的事
件处理,将信息传递给功能层,另一方面提供了友好的人机交互界面,将功能层处理后的结果
显示给用户。
()功能层
功能层直接体现了系统的应用环节,即用户直接使用的系统功能,主要由装配模型管理、21 
装配场景管理、虚拟装配操作、装配顺序规划、装配路径规划、装配工具操作、工艺文件生成、
工艺文件编辑和装配工艺示教等功能组成。
其中模型信息转换提供了与软件的二次开发接口程序,用来获得适合在虚拟装配环
境中显示和操作的模型文件,并将各种模型按照零件的不同分类分别进行处理,以满足虚拟装
配的需要。装配场景管理用来对整个虚拟装配场景中模型、结点、光照、纹理等与场景相关的
属性进行维护,使虚拟装配环境逼真,增加用户真实感体验。虚拟装配操作功能是系统的核心
功能之一,它使用户能够自如、方便的拾取和控制零件模型,并进行装配和拆卸操作,对产品
的可装配性进行验证。装配顺序规划可以在人机交互的基础上对装配模型的装配顺序进行优化
求解,并将最优的装配顺序提供给用户。装配路径规划用来根据用户装配操作的结果如实的对
装配过程进行记录和重现。装配工具操作功能使用户可以在虚拟装配环境下操作各种工具模型
对零件进行安装和拆卸。工艺文件生成是根据装配顺序和路径规划结果,对虚拟装配过程产生
的工艺信息进行装配工艺上的输出,提供基本的工艺文件框架和必要的工艺信息。工艺文件编
辑提供一个三维工艺文件可视化编辑的工具,通过该功能可以交互编辑地生成装配动画和最终
的工艺文件。装配工艺示教功能是通过对系统生成的三维工艺文件在装配现场进行浏览,
起到指导和培训的作用。
()支持层
支持层为功能层提供算法和规则上的支持,是整个系统正常运行的核心。主要的算法和规
则有:几何信息转换算法、约束和拓扑信息提取算法、场景模型重构算法、虚拟场景的搭建算
法、装配模型建立算法、装配操作控制算法、碰撞检测算法、装配意图识别算法、自由度管理
规则、装配导航算法、精确定位算法、电缆柔性变形算法、可行装配序列生成算法、装配顺序
优化算法、装配路径记录算法、装配和工艺目录导出算法。
其中几何、约束和拓扑信息提取算法是使用二次开发接口函数实现的,为将产品设
计模型导入到虚拟装配环境中提供必要的基础信息,在保证信息完备的前提下实现模型信息的
轻量化要求。场景模型重构算法,根据提取的几何、约束和拓扑信息在虚拟装配环境中对各种
模型进行重构,以满足零件的显示和操作要求,包括刚性零件、电缆零件、工装夹具、工作台
等模型的重构。虚拟场景的搭建算法负责将各种模型与场景图中的结点关联起来,并设置模型
的初始位姿以及灯光、纹理、迷雾等效果。装配模型建立算法是根据装配模型的数据结构对虚
拟装配的零部件进行组织,以便于装配过程的管理。装配操作控制算法为鼠标、轨迹球拾取零
件和控制零件的位姿,以及在场景中的漫游等功能提供支持。碰撞检测算法用来实时对运动零
件与其他物体之间的碰撞进行干涉计算,并作出适当的响应。装配意图识别、自由度管理、装
配运动导航和精确定位算法支撑了交互辅助技术,用来实现面向装配过程的虚拟装配,使用户
可以准确高效地完成装配,并且使得这个装配过程自然、真实。电缆柔性变形算法使电缆零件
在装配中可以实时地发生形变,可如实地对布线过程进行验证。可行装配序列生成算法、装配22 
顺序优化算法和装配路径记录算法是人机协同进行装配顺序规划和路径规划的核心算法,用来
智能快速地生成有工程意义的装配顺序和装配路径。装配和工艺目录导出算法根据规划
的装配顺序和装配路径快速地将虚拟装配产生的工艺信息导出,为其他信息系统提供基础数据
支持。
()数据层
数据层用于存取、维护和管理系统的各种装配信息,对支持层提供数据持久性服
务,是系统的数据信息基础。主要包括模型文件库和装配数据库两个部分。
其中模型文件库存储了各类零件、装配工具和场景物体的三维几何模型文件。装配数据库
存储了包括装配模型、装配过程、装配顺序评价、装配工艺文件在内的系统所有与装配相关的
数据信息,装配模型信息包括零部件的属性信息、装配拓扑信息。装配过程信息包括装配关系
信息配合关系、约束关系、联接关系和运动关系等信息、装配工艺信息装配序列、装配路径、
装配工装夹具等信息等。装配顺序评价信息指顺序优化评价规则及其权重信息。装配工艺文件
信息包括装配信息、装配工艺文件信息和装配动画信息。
除此之外,还基于技术提供了与、等外围信息系统的集成
接口,而且实现了与项目中自主开发的敏捷总装平台的集成,可以将虚拟装配工艺设计的结果
集成到其他信息系统中。
虚拟装配工艺设计系统工作流程
体系架构的设计思想为:结合三维强大的建模功能和良好的人机交互能
力,为装配工艺设计人员提供一个数字化模装的环境,用来代替物理模型进行工艺的设计和验
证,同时依靠计算机快速的计算能力,辅助工艺人员找到最优的装配工艺,并将设计过程转化
为工艺文件的形式,指导实际的装配生产。
的工作流程如图所示。主要包括个阶段:数据预处理阶段、装配工艺设计
阶段和工艺文件输出应用阶段。
()数据预处理阶段
该阶段主要包括个部分的内容:设计模型信息的提取和虚拟装配场景的建立。首先
工艺人员从中获得产品设计部门的三维设计模型,包括产品三维模型、工装夹具模
型等,然后对这些设计模型进行几何、拓扑和约束信息的转化和提取,获得进行产品
工艺设计所需的模型数据,然后将这些模型数据加载到中,系统对这些数据进行重新
组织,建立起装配场景及场景中的各类模型。
()装配工艺设计阶段
该阶段的主要任务为虚拟模装、装配顺序和装配路径规划。首先工艺人员在中的
虚拟装配环境下依靠交互辅助技术对产品模型进行装配和拆卸操作,人为地划分部件级、组件23 
级子装配体,形成装配层次结构,并生成产品装配的优先约束关系。根据装配顺序规划模块智
能推理出各部件级装配体的最优装配顺序,并根据该顺序对规划的产品装配工艺进行验证,同
时进行装配路径规划,系统对整个设计过程中产生的工艺信息进行了实时记录。
()工艺文件输出应用阶段
该阶段根据中装配工艺设计阶段产生的工艺设计信息自动生成工艺文件骨架和基
本信息,其中根据装配路径信息在中自动生成装配动画,并通过人机交互编辑界面对工
艺文件进行完善,得到最终的装配和三维可视化工艺文件。并将装配工艺文件通过数据
接口传递给和系统,用于数据的统一管理和后续生产计划的管理。三维可视化工艺
文件通过基于的敏捷总装平台在装配现场进行展示,实现对装配人员装配生产任务的可视
化指导和示教。
系统
设计模型
设计人员工艺人员
几何模型信息
拓扑模型信息
约束模型信息
设计模型
装配场景
模
型
信
息
提
虚拟装配操作取
交互辅助技术
装配层次结构
虚
拟
拆
卸
操
作
×装配优先约束关系装配序列生成可行装配序列集合※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※装配顺序优化最优装配顺序※※※※※※※※装配路
径
规
划
装配模型
工艺文件生成
装配工艺文件装配动画装配
信
息
集
成
文件交互编辑
、系统,敏捷总装平台
装配现场示教
触摸屏
装配工艺卡片装配人员
浏览器
触摸屏
Ⅰ数据预
处理阶段
Ⅱ装配工艺
设计阶段
Ⅲ工艺文件
输出应用阶段
产品设计
阶段
图工作流程示意图24 
2.5 本章小结
本章对桌面式虚拟装配工艺设计系统的总体框架进行了研究,主要内容如下:对目前虚拟
装配系统的分类进行了阐述,并从交互性、易用性等各个角度进行了对比。通过对比,本文选
择在桌面式虚拟装配系统的基础上开发,对的功能需求进行了详细分析,并
在此基础上,论述了系统的研究内容和特点,并给出了系统的体系结构和工作流程。
其中系统的体系结构分为四层:交互层、功能层、支持层和数据层,各层次之间相互依托、相
互关联,形成一个整体框架。将系统的使用过程分为了三个阶段,即:数据预处理阶
段、装配工艺设计阶段和工艺文件输出应用阶段。25 
第三章虚拟装配信息建模技术
引言
虚拟装配的信息模型是虚拟装配系统的数据基础,虚拟装配的操作过程就是基于模型信息
的人机交互以及信息数据的组织与存储,因此虚拟装配信息数据模型建立的高效性和完整性对
于虚拟装配系统的运行起着至关重要的作用。对于面向航天产品的虚拟装配系统而言,模型信
息应包括几何信息、拓扑信息、约束信息、装配工艺信息和装配结构信息。其中:
()几何信息指形成产品零件几何造型的相关信息,包括尺寸、几何面、空间位姿、颜色
及纹理等。用于虚拟装配环境下的显示,以及生成相应的碰撞模型进行碰撞检测。
()拓扑信息指形成几何造型的各种体素之间的关联关系,如点、面、体之间的构成组织
关系。在虚拟现实系统中指面片、几何面、零件实体之间的拓扑关系,用于在虚拟装配环境下
对几何模型的操作。
()约束信息指零部件之间形成装配的配合约束关系信息,包括配合类型、配合尺寸、配
合面等信息。这是零件进行装配的基本信息,用于虚拟装配环境下的运动导航和精确定位。
()装配工艺信息指在装配过程中形成的用于指导生产的信息,包括装配序列信息、装配
路径信息和装配工具信息等。
()装配结构信息指描述形成最终装配体的各个零件、组件、部件之间相互关系的信息,
一般的产品都是用层次结构来描述装配结构信息的:底层的零件通过各种约束配合形成子装配
体,子装配体之间再形成最终的装配体。装配结构信息是虚拟装配模型的核心,它通过各种数
据结构将几何信息、拓扑信息、约束信息以及装配工艺信息关联起来。虚拟装配的过程也是对
装配结构信息的组织与管理过程。
针对航天产品结构的复杂性,其虚拟装配模型应满足以下要求:()装配模型信息要准确,
不仅刚性零件的几何模型和配合约束信息要与设计一致,而且柔性零件的几何模型和变形特性
要满足装配要求;()装配模型信息应完整,应既能描述虚拟装配对象的信息,又包含有装配
过程信息,并能为装配工艺的可行性分析提供基础信息;()装配模型信息的表达和存储应实
现轻量化,以满足虚拟现实环境下显示和装配操作实时性的要求,其模型信息的组织和存储也
具备高效性,同时装配模型的数据结构应有利于各种信息的检索;()要有利于与其他信息系
统的集成,使得虚拟装配的数据来源能够实现与系统的无缝连接,并能够将虚拟装配的
结果反馈给系统及其他信息系统。
根据需求,本文将航天产品零件分为刚体零件模型和线缆零件模型,分别对种模型的表
达方式进行阐述,并基于层次模型和图模型提出刚柔混合的装配层次关联模型。26 
3.2 航天产品装配场景模型的实体表达
航天产品的零件繁多,模型数据量大,只有对模型的表达和存储进行轻量化,才能满足虚
拟装配的实时性要求,由于面片模型在显示和碰撞检测等方面具有数据量小、处理简单的优点,
并且绝大部分图形硬件都支持三角面片的渲染加速,因此虚拟环境下物体一般是由面片模型表
达的,这种几何外形的表达方式对于场景中不参与装配的固定实体(如厂房、工作台等)来说,
仅需要满足渲染及实时碰撞检测的要求面片模型是足够的。但对于类型众多的零件来说,仅仅
表达几何信息是不够的,为了进行装配过程的碰撞检测、运动的导航和定位以及装配序列的规
划等,还需要包含零件的装配约束信息和拓扑信息等。尤其对于电缆等柔性零件,单一的面片
模型无法实时模拟电缆装配过程中的变形,必须对电缆的面片模型进行重构,使其能够在虚拟
装配环境下实时地展示其柔性变形的物理属性。因此根据航天产品装配场景中各种实体的特征,
将场景模型分为刚性零件模型、电缆束模型、工艺装备模型和装配环境模型,各种模型所对应
的信息如图所示。根据各种模型的功能及在虚拟装配过程中的作用,对场景模型进一步分
为刚性零件模型、电缆零件模型和其他模型,下面对这些场景模型的实体表达进行详细描述。
图航天产品虚拟装配场景模型分类
刚性零件模型的实体表达
在航天产品的装配中刚性零件所占的比例最大,而且产品结构基本上是由刚性零件的配合
组成的。刚性零件模型的实体表达是通过对模型信息的抽象描述以及数据结构的表达实现的。
根据信息模型的要求和刚性零件在虚拟装配中的操作需求,将刚性零件信息模型(,
)进行抽象,分为显示特征(,)、约束特征(,
)、碰撞检测特征(,)和属性特征(,),其
中显示特征和碰撞检测特征描述了刚性零件的几何信息和拓扑信息,约束特征则
描述了刚性零件的约束信息,各种特征之间通过数据的映射进行关联。属性特征描述了零27 
件的各种基本属性信息。刚性零件模型实体表达及数据映射关系如图所示。
…
…
平面
圆柱面
圆锥面曲面
显示特征约束特征碰撞检测特征
几何面层
面片层
约束元素包围盒
层次包围盒
几何面之间的邻接关系
几何面层和面片层的数据映射
显示特征和约束特征的数据映射
约束特征和碰撞检测特
征的数据映射
显示特征和碰撞检测特
征的数据映射
属性特征
…
图刚性零件模型实体表达及数据映射示意图
()对于显示特征,目前使用的表示方法有以下两种:①使用和系统中相同的
实体模型表达方式,如体素构造法(,)和边界表示法
(,)等,可精确表达零件的几何特征,缺点是数据结构复杂,存
储量大,渲染较慢;②使用信息集成模型,这是基于的精确表达和面片的近似显示
相结合的方法,该方法可较好地保留产品的设计信息,但是对于虚拟装配的需求来说,有些曲
面设计信息并不是必需的。本文在第二种方法的基础上进行了改进,通过精简模型的结构造型
设计信息,保留装配的约束特征信息,来实现显示特征模型的轻量化。
显示特征由几何面层和面片层组成。几何面层以几何面为基本结点,其属性主要包括
几何面、类型等信息,几何面的类型有平面、圆柱面、圆锥面、球面和各种曲面。几何面之
间存在邻接关系,用于形成零件的外形。面片层以三角面片为基本结点,其属性主要包括三角
面片的顶点坐标、法向矢量、颜色和纹理等信息。几何面层和面片层存在层次映射关系,每个
几何面都是由一系列的三角面片组成的,该层次映射关系体现了几何信息和拓扑信息。
()约束特征中约束关系常用的定义有三种,如图所示:①坐标系间的相互位姿
关系,通过待装配零件的局部坐标系在目标零件局部坐标系中的相对位置关系或通过两个零
件的局部坐标系在公共坐标系(如世界坐标系)中的相对位置关系来表示两个零件之间的约束28 
关系,这种定义方式的操作及维护难度小,但是由于缺少工程信息导致虚拟装配过程的拟实性
不高;②工程语义,该方法实质上是对几何约束及装配过程的组合与封装(如装配语义“螺
栓连接”是螺栓、螺母和被紧固件之间多个体素约束的组合),这种方式虽然更接近人的表述习
惯,但语义及其组成元素语义元的定义需要很大的工作量,不适合零部件数量和种类较多的场
合,且灵活性和通用性有限;③体素或实体之间的几何约束关系,如平面的对齐、贴合等。
这种定义方式与系统中零件的放置方式一致,并且可反映实际装配关系,数据结构相对
简单。本文使用第三种方法对约束特征进行描述。
图约束特征的三种常用约束定义方式
约束特征以约束元素为基本结点,其属性包括约束类型、约束特征值等信息,由于几
何面是约束元素的载体,约束特征与显示特征的几何面层之间存在着数据映射关系。约束元素
用来限定零件间的相对位置,是零件进行装配的基础信息。在实际的结构设计中,用于定位和
配合的特征基本上都是规则的几何元素,如平面、圆柱面、圆锥面和球面等,因此对约束特征
的描述转化为对各种几何元素属性的描述,如图所示。
图几种典型约束元素的基本参数
其中为约束元素的局部坐标系原点,、和为坐标系的三个轴向矢量,和为平面
的个边长,为圆柱底面或球面的半径,为圆柱面或圆锥面的高,α为圆锥顶角。由于矢量
表示了约束元素进行配合的相对方向,因此定义矢量为约束元素的方向标示矢量。
()虚拟装配环境下的碰撞检测特征一般用空间分割法、层次包围盒法或者混合方法来表
示。其中层次包围盒法是利用体积略大而形状简单的包围盒把复杂的几何对象包裹起来,在进29 
行碰撞检测时首先进行包围盒之间的相交测试,如果包围盒相交,再进行几何面片之间精确的
碰撞检测。本文中的碰撞检测特征不仅包括零件的方向包围盒(,)
层次包围盒,而且构建了约束体素的轴向包围盒(,)用于
辅助装配意图的识别。
碰撞检测特征由约束元素包围盒和层次包围盒组成。约束元素包围盒是对约束
元素建立的包围盒,约束元素包围盒和约束元素之间存在着数据映射关系,用于约束的
识别。层次包围盒是根据零件的显示模型来构造的,与显示模型存在数据映射关系,用于
装配过程中的碰撞检测。
()属性特征以零件属性为基本结点,包括零件、零件名称、物理属性、技术属
性等,用于零件的标示以及产品的可装配性评价等。对于仪器等电气组件,还包括电气属性。
刚性零件模型信息描述
令表示刚性零件信息模型各特征之间的数据映射关系,则刚性零件信息模型可描
述为:
()显示特征可描述为:
…
∈∈≠
……
∈∈
其中,表示几何面层结点的集合,表示几何面间的邻接关系,表示三角面片层结
点集合,表示几何面层和面片层间的数据映射。
()约束特征可描述为:
…
∈∈
其中,表示约束结点的集合,表示显示特征和约束特征间的数据映射。
()碰撞检测特征可描述为:
…
∈∈30 
VRD = {v | v = (r, e2), r∈∈
其中,表示约束元素包围盒结点的集合,表示层次包围盒结点,表示约束
特征和碰撞检测特征间的数据映射,表示显示特征和碰撞检测特征间的数据映射。
()各特征之间的数据映射关系可描述为:
()属性特征可描述为:
…
刚性零件模型数据结构表达
模型数据结构是在虚拟装配过程中对模型信息的组织和存储。航天产品虚拟装配模型的数
据结构既要求信息完备、组合合理,以带来更高的运行效率;又要求存储数据量尽量小,以实
现模型的轻量化。
使用巴科斯(,)范式对刚性零件模型的数据结构表达如下:
刚性零件显示特征层次包围盒属性特征
显示特征几何面链表邻接关系链表
几何面几何面几何面类型面片数目三角面片链表约束特征
几何面类型平面圆柱面球面圆锥面倒角面曲面
约束特征约束特征激活标示局部坐标系几何特征值参与
约束次数约束元素包围盒
局部坐标系原点方向标示矢量矢量矢量
约束元素包围盒中心长宽高
邻接关系边第一个几何面第二个几何面
三角面片三角面片顶点索引法向矢量颜色纹理
顶点索引第一顶点第二顶点第三顶点
顶点坐标坐标坐标
层次包围盒左子包围盒包围盒右子包围盒
包围盒包围盒坐标系长宽高
属性特征零件零件名称材料属性技术属性电气属性
从该数据结构中可以看出,刚性零件为刚性零件类的一个对象实例,属性分别为显示特征、
层次包围盒、属性特征类对象。显示特征和约束特征的映射关系通过几何面类中的约束特征属
性来实现。约束特征和碰撞检测特征的映射关系通过约束特征类中的约束元素包围盒属性来实
现。显示特征类仅包含几何面链表和邻接关系属性,因此要比的存储方式减少大量面、
边、点的几何拓扑数据。31 
3.2.2  电缆模型的实体表达
与刚性零件相比,电缆零件的装配具有以下特点:()刚性零件装配时仅发生整体
的移动、旋转等位姿变换,而电缆零件在装配过程中,不仅位姿发生变换,而且各部分会发生
较大的弯曲和扭曲变形,仅由位姿变换计算无法得到电缆的最终装配位置和形状;()刚性零
部件的装配过程是一次性连续完成的,而电缆零件一般以电缆束的形式进入总体装配流程,包
括电连接器、电缆主干和分支等,因此装配过程不仅包括电连接器的插接装配,而且包括电缆
主干和分支的固定操作,整个装配难以一次性完成,存在交叉装配问题。
电缆装配的上述特点决定了电缆零件的建模与刚性零件有很大不同,从系统的设计
模型中转换的面片几何模型已无法满足电缆装配中变形的要求。为了满足电缆在虚拟装配中的
实时变形和装配精度要求,同时为了保证电缆电气属性信息的完备,本文将电缆零件信息模型
(,)分为电缆束模型(,)和电连接器模型(,
),其中电连接器模型用刚性零件模型来描述。
电缆分支之间及圆柱面之间的邻接关系
显示特征各层间的数据映射
显示特征和控制特征的数据映射
控制特征和碰撞检测特
征的数据映射
显示特征和碰撞检测特
征的数据映射
…圆柱面层面片层
…
分支层
显
示
特
征
控
制
特
征
碰
撞
检
测
特
征
包围球层次包围盒
属性特征
…
图电缆束模型实体表达及数据映射示意图32 
对电缆束模型进行抽象,分为显示特征、控制特征(,)、
碰撞检测特征和属性特征,其中显示特征和碰撞检测特征描述了电缆束的几
何信息和拓扑信息,电缆束的拓扑信息包括显示特征中各电缆分支段及圆柱面之间形成的网状
结构和各层之间的关联关系。控制特征则描述了电缆束的物理状态信息,各种特征之间通
过数据的映射进行关联。属性特征描述了电缆束的各种基本属性信息。电缆束模型实体表
达及数据映射关系如图所示。电缆零件模型如图()所示。
图电缆零件模型显示特征及分支段连接示意图
()电缆束模型中的显示特征由分支层、圆柱面层和面片层的层次结构组成。分支
层以电缆分支段为基本结点,其属性主要包括电缆段编号、直径、电缆段两端截面编号等信息。
其中端截面为圆形,包括编号、圆心、法向矢量、圆周上的点集索引信息。电缆分支段之间存
在邻接关系,在端截面处相连形成电缆整体,如图()所示,电缆束分支段与分支段
和通过端截面、和连接,和分别表示分支段和的最后一个端截面序号。
圆柱面层以圆柱面为基本结点,其属性包括圆柱面编号、两端截面编号信息,圆柱面之间存在
邻接关系,通过端截面相连接形成电缆分支段,如图()所示。面片层以三角面片为基本
结点,其属性主要包括三角面片的顶点坐标、法向矢量、颜色和纹理等信息。显示特征的各层
之间存在层次映射关系,每个电缆端分支都是有一系列圆柱面组成的,每个圆柱面又都是由一
系列的三角面片组成的,该层次映射关系体现了几何信息和拓扑信息。33 
()控制特征用于控制电缆的实时形变,在目前的研究中主要有三种方法:离散控
制点法、样条曲线法、有限元法、运动学法等。其中离散控制点法和样条曲线
法都无法保证电缆模型的长度不变,因此对于电缆装配的仿真工程意义不大,而有限元法虽然
对变形的计算精确,但是由于较大的运算量造成了变形结果无法满足实时性要求,限制了其在
虚拟现实环境下的应用。运动学法主要有逆运动学法和质点弹簧模型种变形求解方法,由于
运动学法中的质点弹簧模型结构简单,计算量适中,能够满足虚拟环境下实时变形的要求,因
此本文使用质点弹簧模型表示控制特征,控制特征以质点和弹簧为基本结点,质点位置为圆柱
面间各截面的中心,属性包括质点编号、质量、位置、速度、所受合力等信息,弹簧连接个
质点,属性包括弹簧编号、原长、最大伸缩率、弹性系数、阻尼系数等信息。
图电缆分支段质点弹簧模型
电缆分支段的质点弹簧模型如图所示,其中为第个质点,为第个弹簧,为构
成电缆的第个圆柱面,为连接圆柱面和的第个截面,为组成圆柱面的面片,
为圆截面的圆周上的点,同时也是面片的个顶点,为第个截面的法向矢量。
图电缆束质点弹簧模型示意图34 
因此控制特征和显示特征之间存在着数据映射关系,质点弹簧模型是根据显示特征的圆柱
面层和面片层构建的,弹簧的位置是由两端质点的位置决定,质点的位置由圆柱面间的圆截面
确定,圆截面由组成圆柱面的面片顶点得到。
电缆束的质点弹簧模型由多个电缆分支段的质点弹簧模型根据拓扑关系连接组成,各个连
接处的质点速度和所受合力相同。图示出了图()中电缆束的质点弹簧模型,图中
…为个电缆分支段,其中的端截面在处相连接,相应的质点分别
为。连接处的每个质点所受合力均为,速度均为。
()碰撞检测特征由层次包围盒和质点包围球组成。由于电缆在装配过程中
会发生变形,因此需要实时对电缆的包围盒进行更新,此时,层次包围盒已无法满足更新
的实时要求,因此选用更新速度更快的层次包围盒用于电缆模型的碰撞检测,层
次包围盒是根据电缆的显示模型来构造的,与显示模型存在数据映射关系,用于装配过程中的
碰撞检测。质点包围球是对质点构建的包围球,质点包围球和质点之间存在着数据映射关系,
包围球的中心为质点,质点包围球用于辅助电缆装配过程的碰撞检测。
()属性特征以电缆属性为基本结点,包括电缆、电缆名称、物理属性、电气属
性等,用于电缆的标识。
电缆模型信息描述
根据图,令表示电缆束模型各特征之间的数据映射关系,电缆信息模型可描
述为:
∈∈
其中为电缆束模型,为电连接器模型,表示电缆束模型和电连接器模型间
的信息映射,一般一个电缆束模型对应多个电连接器模型。
()显示特征可描述为:
…
∈∈≠
…
∈∈≠
……
∈∈35 
VCF = {v | v = (ci, fji), ci∈∈
其中,表示电缆分支段层结点的集合,表示电缆分支段之间的邻接关系,表示圆
柱面层结点的集合,表示圆柱面之间的邻接关系,表示三角面片层结点集合,表示电
缆分支段层和圆柱面层间的数据映射,表示圆柱面层和面片层间的数据映射。
()控制特征可描述为:
…
…
∈∈
∈∈
其中,控制特征用质点弹簧模型表达,表示质点结点的集合,表示弹簧结点的集合,
表示质点和弹簧之间的连接关系,表示显示特征和控制特征间的数据映射。
()碰撞检测特征可描述为:
…
∈∈
∈∈
其中,表示质点包围球结点的集合,表示电缆模型的层次包围盒结点,
表示控制特征和碰撞检测特征间的数据映射,表示显示特征和碰撞检测特征间的数据映射。
()各特征之间的数据映射关系可描述为:
()属性特征可描述为:
…
电缆模型数据结构表达
使用范式对电缆模型的数据结构表达如下:
电缆零件电连接器电缆束
电缆束显示特征控制特征层次包围盒属性特征
显示特征分支段链表邻接关系链表
分支段分支段分支段名称分支段直径分支段长度弯曲半
径第一端圆截面第二端圆截面圆柱面数目圆柱面链表圆柱面邻接关系链表
圆截面圆截面圆心位置法向矢量圆周点集索引封闭标36 
志截面类型
截面类型端面分叉
圆柱面圆柱面面片数目三角面片链表第一个圆截面
第二个圆截面
三角面片三角面片顶点索引法向矢量颜色纹理
顶点索引第一顶点第二顶点第三顶点
顶点坐标坐标坐标
圆柱面邻接关系链表边第一个圆柱面第二个圆柱面
邻接关系边第一个分支段第二个分支段
控制特征质点链表弹簧链表
质点质点质量位置速度所受合力位置可动标示对应
的圆截面包围球
包围球包围球球心半径
弹簧弹簧第一个质点第二个质点原长最大伸缩率弹
性系数阻尼系数
层次包围盒左子包围盒包围盒右子包围盒
包围盒包围盒坐标系长宽高
属性特征电缆电缆名称材料属性技术属性电气属性
电缆零件中的电连接器模型使用刚体零件的数据结构进行表达,电缆束类中封装了对显示
特征、控制特征、碰撞检测特征及属性特征类属性操作的方法。由于圆截面类属性在分支段类
中和圆柱面类中的作用不同,分支段类中的圆截面类型为端面或者分支,封闭标示为,
表示有面片对端截面进行封闭,而圆柱面类中无圆截面类型属性,封闭标示为,表示圆
截面上无面片。控制特征中的质点类对应一个圆截面,质点位置即圆截面中心,弹簧连接个
质点,因此控制特征和显示特征的数据映射关系通过质点弹簧模型体现。碰撞检测特征中每个
包围球的球心为对应的质点,层次包围盒是根据整体的电缆束模型构建的。
其他模型的实体表达
除了零件模型和电缆模型,在航天产品的虚拟装配场景中还有夹具、量具等工艺装备模型,
以及车间、工作台、装置托架等装配环境模型。这些模型都不属于产品的结构,最终要脱离装
配的产品,仅参与产品的装配过程,主要用于产品装配的可行性及优化评估。因此对这些模型
的描述没有严格的要求。
对于工艺装备模型,在需要进行显示和碰撞检测的同时,操作时也需要对工艺装备与零件
之间的约束关系进行动态的创建和管理,因此可用刚性零件模型来表达工具装备模型。37 
对于装配环境模型,由于在整个装配过程中并不发生移动,而且没有操作要求,因此不需
要分析零件与环境模型之间的动态约束,仅需要考虑显示和空间实时碰撞。仅使用刚性零件模
型的显示特征和碰撞检测特征即可满足装配环境模型的表达要求。
刚柔混合装配层次关联模型表达
目前装配模型一般分为层次模型、图模型和混合模型。其中层次模型是将装配体
按产品结构树形分层表示,可清晰表达产品的组成关系,便于生成装配序列,而且由于虚拟现
实环境中场景的组织一般也是树状结构,层次模型在虚拟环境中场景的搭建比较容易,但是层
次模型难以描述零件之间的相互约束关系。有向图模型用结点表示零件,有向边表示零件之间
的约束关系,有向图模型可表现零部件装配的优先关系,可直接用于装配顺序推理和可装配性
分析,但是它不能清晰表达装配的层次关系,给约束求解带来较大困难。混合模型融合了前两
者的优点,信息丰富,但维护难度相对较大。
本文根据图模型和层次模型的特点,提出一种包括刚性零件和电缆的刚柔混合装配层次关
联模型(,),
它按照装配组成的复杂程度将航天产品分为个层次:产品级(,)、部
件级(,)、组件级(,)和零件级(,)。
图某型产品的主体结构示意图
产品级为模型的最高级,该层只有一个结点,该结点表示产品的最终装配总体,如图
()所示;部件级次于产品级,指具有独立功能的较复杂的装配体,该层的结点一般为部段,38 
多个部件级结点组成一个产品级结点,如图中所示的装配体均为部件级结点;组件级
高于零件级,指多个零件形成的稳定的装配体,该层结点为部件级结点中的元素,又由多个零
件级结点组成,如图中所示的装配体①⑩均为组件级结点;零件级位于模型的底层,是形
成装配体的最小单元。每级层次中的结点用有向关联图来表示,图中的顶点和有向边分别表示
装配元素和装配关系,装配元素的类型分为三类:零件、装配体、电缆,组织关系描述了一个
装配体的装配过程,如图所示。
图刚柔混合装配层次关联模型
的信息描述
根据图,令表示各装配级别之间的数据映射关系,则刚柔混合装配模型可描
述为:
其中:
()产品级可描述为:
∈∈
∈∈
∈∈
其中,表示产品级单元集合,表示产品级和部件级单元的数据映射,表示产品
级和组件级单元的数据映射,表示产品级和零件级单元的数据映射。
()部件级可描述为:
…
产品级
部件级
组件级
零件级
零件
装配体
电缆束
有向边
层次关系
图结点39 
VSC = {vc | vc = (ei, ej), ei∈∈
∈∈
其中,表示部件级单元集合,表示部件级和组件级单元的数据映射,表示部件级
和零件级单元的数据映射。
()组件级可描述为:
…
∈∈
其中,表示组件级单元集合,表示组件级和零件级单元的数据映射。
()零件级可描述为:
…
其中,表示零件级单元集合。
()各装配级别之间的数据映射关系可描述为:
数据结构表达
的数据结构利用范式表达如下:
图图顶点集有向边集父顶点指针装拆标志层次级别
顶点顶点名称类型顶点信息子图指针
类型零件装配体电缆
顶点信息位姿自由度运动属性状态标志材料装配路径链表
运动属性运动类型运动速度
运动类型平动转动
装配路径方向位置子结点指针
有向边有向边起始顶点终止顶点约束数目约束集卡箍数目
卡箍集工艺信息
约束约束约束类型特征参数第一个零件第一个零件约束
特征第二个零件第二个零件约束特征状态
约束类型平行贴合距离对齐角度
卡箍卡箍名称卡箍类型位姿
卡箍类型夹紧卡箍钢丝捆扎
工艺信息工具工装夹具辅料评价指标40 
<评价指标装配时间装配人数移动距离
所能表达的信息包括以下三类:
()装配模型的层次关系由图结点和顶点之间的指针来实现。其中,图结点表示装配体,
图结点的层次级别记录了零件或装配体所在的装配级别,当图结点的装配级别为产品级时,父
顶点指针为,装拆标志记录该图结点的约束是否完全生效或者释放,即用来判断是否形
成稳定的装配体。顶点类型为装配体、零件或者线缆:当为装配体时,顶点对象的子图指针指
向表示该装配体的图结点;为零件和线缆时,顶点对象的子图指针为。因此,图结点的
成员父顶点指针指向包含该图的顶点对象,而每个顶点对象的成员子图指针指向顶点对应的子
图,这样,图和顶点间用双向链表来实现装配模型的层次关系。
()装配模型的约束关系、装配顺序由有向边来记录。约束数目和约束集记录了终止顶点
和起始顶点通过刚体零件模型形成装配体的约束信息,约束是根据个刚体零件模型的约束特
征按照不同约束类型建立的,特征参数记录了约束的特征尺寸,如条轴线平行的间距。有向
边的起始顶点对象类型为装配体或零件时,卡箍数目和卡箍集为;为电缆时,约束集记
录了电连接器之间的约束,卡箍数目为固定电缆的位置点个数,卡箍集是所有固定点的集合,
它记录了电缆上捆扎固定的装配工艺信息。有向边的终止顶点零部件在起始顶点零部件之后进
行装配,因此图结点的有向边集可以表示形成图结点的装配顺序。
()装配模型的装配过程信息由顶点信息记录。顶点信息中的位姿、自由度、受约束的状
态以及装配路径等属性记录了顶点在装配操作中的所有相关信息,其中装配路径用一系列离散
的空间位姿点来表示,并用装配路径链表记录。
虚拟环境下装配模型的建立
装配模型建立内容及流程
装配模型的建立包括装配场景模型的数据准备和建立,以及刚柔混合装配层次关联模型的
建立。其中装配场景模型的数据准备是通过系统与虚拟装配系统的信息集成实现的,装
配场景模型的建立是个静态过程,它在虚拟装配系统对场景模型加载的同时进行,用来形成刚
柔混合装配层次关联模型中零件层的信息结点。刚柔混合装配层次关联模型中组件层、部件层
和产品层信息结点的建立是在虚拟装配环境中通过人机交互动态完成的,操作者对零件模型进
行装配的过程就是刚柔混合装配层次关联模型建立的过程。虚拟环境下装配模型的建立内容及
流程如图所示。41 
产品设计模型
几何信息约束信息拓扑信息
刚性零件模型电缆零件模型其他模型
组件层部件层产品层
场景模型
的建立
刚柔混合装
配层次关联
模型的建立
环境
信息转换与重构
信息加载
装配操作
虚拟
装配
环境
信息存
储环境
模型数据
的准备
模型设计
图虚拟环境下装配模型的建立内容及流程
产品模型的设计是在系统中完成的,这是虚拟装配环境的模型数据的来源,因此模
型数据的准备即通过与系统的信息集成,分别提取产品设计模型的几何信息、拓扑信息
和约束信息,并保存到相应的存储环境中,如文件和数据库等。
虚拟现实环境下装配场景的建立是在虚拟装配环境初始化的时候进行的,分别读取包含几
何信息和拓扑信息的中性格式文件,并查询数据库中的约束信息,分别构建刚性零件、电缆零
件和其他模型,为各个零件模型设置相应的属性节点,如位置节点、几何节点等,然后设置
场景的光照节点和车间、工作台模型的属性节点,最终渲染生成完整的装配场景。
装配场景的建立提供了刚柔混合装配层次关联模型中零件层的基础数据,组件层、部件层
和产品层的建立是在用户进行虚拟装配操作的同时,由系统自动对装配过程和结果进行数据的
建立和维护而实现的。
模型信息的转换与存储
装配模型的建立是在场景模型信息完备的基础上,由于虚拟现实环境下造型功能简单(如
长方体、球体、圆柱等),很难直接实现航天产品复杂的几何模型,而航天产品零件模型和装配
模型的设计都是在系统中完成的,因此,将系统作为虚拟装配场景模型信息的来源
成为目前主要的研究方式。针对系统到虚拟装配系统的信息转换问题,主要有以
下三种方法:()使用产品模型数据交换标准(如、等)。由于系统都支持上
述标准,因此该方法简单,涵盖信息完全,但是该标准的语法结构复杂,且包含许多设计语义
信息,不利于信息的提取和轻量化,因此难以应用到复杂产品的虚拟装配系统中;()使用
的技术方式。该方法是在系统的基础上增加功能,用户直接在虚拟环境下
操作模型,从而使系统和虚拟装配系统共享底层数据库,避免了系统间的数据转换。42 
然而由于模型的复杂性,直接影响虚拟装配系统的性能,并且装配建模的工作量巨大;()
使用中性文件和自定义中间文件的方式。该方法将系统输出的中性格式文件(如、
等)作为面片几何模型,并通过接口程序的二次开发获得其他装配信息并写入自
定义的中间文件中。虚拟装配系统分别读取这些文件来获得几何信息及其他信息。该方法灵活
且可定制,并且有利于模型信息的重构。
本文通过系统的二次开发接口对装配设计模型进行模型转换,获得刚性零件、电缆
零件和其他模型的几何信息,并对模型重构获得拓扑信息,通过信息提取得到刚性零件的约束
信息。由此通过与系统的信息集成获得所必需的虚拟装配系统场景模型信息。模型的几
何信息和拓扑信息保存在中性格式文件中,约束信息和装配工艺和结构信息则保存在数据库中,
这种信息存储方式便于虚拟装配环境初始化时模型信息的检索和加载。
几何信息及拓扑信息的转换与存储
图文件格式的语法结构
虚拟环境下场景模型的几何信息用三角面片模型来表达,刚性零件的拓扑信息指零件、几
何面层和面片层之间的数据映射关系,电缆零件的拓扑信息指电缆束的电缆、分支层、圆柱面
层和面皮层之间的数据映射关系以及电缆束和电连接器的连接关系和相对位置。能够直接
输出的面片模型文件有、等格式,然而由于这些中性格式文件仅包含模型的三角面
片信息,没有几何面的概念,无法描述刚性零件、电缆零件和工具模型的拓扑信息,因此不适
合虚拟装配环境的应用。而文件格式可包含模型的体、几何面、三角面片信息,并包括视
角、颜色、光照、材质、纹理等属性,能够满足虚拟装配对零件模型的信息需求,因此本文使43 
用文件来保存场景模型的几何信息以及刚性零件和电缆束的拓扑信息。文件格式的语
法结构如图所示。电缆束和电连接器的拓扑关系保存到数据库中。
几何信息以及刚性零件和电缆束拓扑信息的转换就是利用的二次开发接口函数对零
件模型进行三角面片分割,然后遍历零件几何面,读取几何面,并计算所包含的顶点总数和
面片总数,对每个面片进行编号后,写入文档,再读取模型的材质信息、纹理信息和颜色
信息,和顶点坐标按照格式组合后一并写入文档,直至几何面遍历结束。其中电缆零件的
每个分支段都用一个几何面进行标示,便于刚性零件和电缆零件拓扑信息存储的统一,这样使
一个零件对应于若干个几何面,一个几何面对应于若干个三角面片,面片通过其值属性归
属到不同的几何面,从而实现了三层数据映射。
电缆束和电连接器的拓扑关系通过遍历电缆的布线路径点,当类型为
时,获取该点位置对应的电连接器模型,将电缆束名称和空间位姿、电连接器名
称和空间位姿写入数据库表字段中,直至遍历结束。这样就获得了一个电缆束与多个电连接器
的连接关系和相对位置关系。
几何信息及拓扑信息的转换流程如图所示。
遍历装配模型开始
是否为零件
生成离散面片几何
模型
否遍历结束
是
遍历零件几何面
读取几何面编号遍历结束否计算几何面顶点总数写写写顶顶几点何点坐面总标数
计算三角面片总数
读取颜色信息
写面片总数
写面片顶点索引、
颜色及面片编号
否是结束
是
新线程
新线程
新线程
新建格式文件
写文件头信息
是否为电缆是遍历电缆路径点
遍历结束路径点类型是否为
查询该路径点对应
的零件模型
读取电缆的名称和
空间位姿
读取零件的名称和
空间位姿
数据库
否
是
否
否
是
线程结束
新
线
程
图几何信息及拓扑信息的转换流程
约束信息的转换与存储
虽然约束几何模型是在中建立的,装配模型中含有配合设计意图,但是44 
中的装配约束信息却不能直接用于虚拟装配环境,这是由于以下几点原因:()几何信息描述
方式不同:在中是采用精确的数学描述(、等),而虚拟装配环境为了满足实
时性的要求,使用的是面片模型,缺失了面、线等特征信息。()无法满足互换性要求:对于
互换性零件,由于系统中仅记录装配状态零件间的约束信息来确定相对位置关系,导致
零件无法互换,如图()所示,螺栓和螺帽的装配是通过轴对齐和面贴合建立的,
同类型的螺栓与螺帽之间由于没有记录任何约束信息而导致无法与螺栓互换。()
中的约束关系有可能是错误或者不符合实际配合的:由于中装配模型的约束仅仅是为了
确定相对位置关系,因此零件间的约束特征的选取存在很大的随意性,如图()所示,圆
盘和锥架是根据两者轴线的对齐约束和圆盘底座与锥架设计基准面之间的匹配约束进行装配
的,圆盘和锥架的匹配约束中约束特征选取的是空间的某个设计基准面,而非实体几何面,虽
然在中能够确定约束关系,但是这在实际的装配中是难以实现的。
图装配模型中的约束信息
因此,约束信息的转换需要对中的装配约束信息进行提取并重构。通过遍历装
配模型的特征树可以获得以下配合设计信息:()配合编号和约束类型,如贴合、对齐、
相切、插入、距离、角度等;()配合零件、几何特征的编号、名称、类型和具体几何参
数属性;()配合属性数据,包括配合间隙和长度等。本文对配合设计信息进行提取后存入数
据库中。约束信息的转换与存储流程描述如下:
步骤遍历装配体模型,如果遍历结束,进入步骤;如果未结束,进入步骤;
步骤查询装配体上每个约束,获得约束的类型和引用几何特征;
步骤如果约束引用几何特征为零件的特征面,则提取几何特征信息中特征面、类型、
几何参数和特征局部坐标系参数(包括坐标系原点和三个轴向矢量、和,各种约束几
何特征的坐标系方向如图所示)作为虚拟装配环境中的刚性零件的约束参数,并保存至数
据库的相应字段。累计该特征面参与约束的次数,并更新数据库,返回步骤。否则进入步骤;
步骤如果约束引用几何特征为轴线或点,则查询轴线或点所引用的几何面,提取该引
螺栓
螺母
螺栓
螺母
圆盘
设计基准面
锥架
底座45 
用几何面、类型、几何参数和特征局部坐标系参数作为约束参数,并保存至数据库的相应字
段。累计该几何面参与约束的次数,并更新数据库,返回步骤。否则进入步骤;
步骤如果约束引用几何特征为设计基准面,则遍历零件特征树,查询和基准面平行且
同向的零件平面,并计算个面之间的距离,提取该平面的类型、几何参数和特征局部坐
标系参数作为约束参数,并将配合参数设为,并保存至数据库的相应字段,返回步骤;
步骤再次遍历装配体结构树,如果遍历结束,流程终止;如果未结束,进入步骤;
步骤查询每个零件节点,遍历零件特征树,若几何特征类型为圆柱面、锥面或者球面,
则提取该几何特征、类型、几何参数和特征局部坐标系参数作为约束参数,并保存至数据库
的相应字段。遍历结束后,返回步骤;
上述约束信息转换有以下特点:()保证了零件装配的互换性:对于装配模型在系
统中已经定义的约束关系,仅提取和保存约束关系中的约束几何面编号、类型、几何参数
和特征局部坐标系参数,而约束关系中的配合类型及配合零件不予保存。在虚拟装配仿真时,
系统根据两个零件上几何面的类型和特征参数之间的位姿关系来识别和重新建立约束,也就是
说,虚拟装配系统仅从系统中提取了形成约束的“素材”,而约束在虚拟装配环境中动态
生成;()对设计基准面进行了引用处理,将约束引用特征设定为零件体上与该设计基准面最
近的平面,避免了信息丢失;()提取所有零件表面尚未定义约束的圆柱面、圆锥面和球面的
属性信息作为候选约束特征。平面信息不予提取,这是因为平面数量很多,大量平面不是用于
装配的,而且平面的关键参数可以通过面片近似计算,这些信息需要在交互操作中选取激活才
参与约束识别。这样既避免了信息冗余,也保证了零件约束特征信息的完备。
装配场景的搭建
装配场景的搭建流程
装配场景的搭建通过加载几何信息、拓扑信息和约束信息,为各个模型设置虚拟场景的节
点属性,建立场景中的刚性零件模型和其他模型,根据装配工艺信息将建立各个模型的属性特
征,再根据电缆零件的几何信息及拓扑信息建立控制特征,最后建立所有模型的碰撞检测特征,
完成装配场景的搭建。其中各种模型碰撞检测特征的创建将在第四章节中详细说明。装配
场景的搭建流程如下:
步骤设置初始视点位置,建立灯光节点,初始化输入设备;
步骤依次读取数据库中的装配零件列表…,设当前零件为,读取零
件属性。如果,转入步骤;否则转入步骤;
步骤建立零件节点,如果为工作台等模型,设置不可动属性,否则设置可动属性,
根据读取的零件属性建立属性特征,加载相应编号的格式文件生成显示特征;46 
步骤读取数据库中零件的约束信息(包括几何面、类型、几何参数和特征局部坐
标系参数),如果约束信息不为空,建立约束特征,转入步骤;
步骤遍历已建立的零件节点集…,如果,转入步骤;否则转
入步骤;
步骤如果为电缆,建立电缆零件结点,设置可动属性。查询数据库中对应的
电连接器列表…,并查询所对应的零件节点集≤∈,将
和作为的子节点;
步骤根据零件的几何信息及拓扑信息建立质点弹簧模型,由此构建电缆束的控制特
征,转入步骤;
步骤再次遍历零件节点集…,如果,转入步骤;否则转入
步骤;
步骤如果为电缆,则根据面片模型建立层次包围盒,并为每个质点建立包
围球;否则根据显示特征建立层次包围盒,并根据约束特征建立约束元素包围
盒,转入步骤;
步骤流程结束。
装配场景的搭建一方面建立了适合于人机交互装配操作的虚拟装配环境,另一方面为刚柔
混合装配层次关联模型建立了零件层信息。
电缆束模型控制特征的建立
电缆束模型控制特征的建立实质是根据电缆束的几何信息和拓扑信息构建电缆束的质点弹
簧系统,首先计算各个分支段上每个圆柱面的截面圆心位置和法向矢量,然后根据每个截面圆
心位置构建分支段的质点弹簧模型,最后将各个分支段的弹簧质点模型按照拓扑结构连接起来,
组成整个电缆束的质点弹簧系统,电缆束质点弹簧系统的构建算法流程如下:
步骤遍历场景中建立的电缆束模型,如果为空,转入步骤;否则,读取当前电缆束
模型的显示特征,转入步骤;
步骤遍历的分支段集合…,设当前分支段为,如果,
转入步骤;否则,转入步骤;
步骤遍历的圆柱面集合…,根据圆柱面间的邻接关系计
算圆截面集合…,其中和为分支段的端截面,第个圆截面
对应的顶点点集为…。计算每个圆截面的圆心和法向矢量,相应的圆截
面圆心集合为…,法矢集合为…。转入步骤
;
步骤建立质点集合…,其中和为分支段端截面质47 
点,将圆心集合中每个圆心的位置赋值给对应的质点,并设置质量属性,初始化速度
和合力为零。转入步骤;
步骤根据质点集合建立弹簧集合…,同时建立连接关系,计
算相连质点和间的距离作为弹簧的原长,并设置最大伸缩率、弹性系数、阻尼系数
属性。转入步骤;
步骤根据电缆分支段之间的邻接关系,建立分支段上相连端截面的质点间的映射关
系,即相连端截面上的每个质点具有相同的速度和合力值。转入步骤;
步骤电缆束模型控制特征建立完毕,流程结束。
刚柔混合装配层次关联模型的建立
装配场景的搭建为刚柔混合装配层次关联模型建立了零件层的基础信息,在虚拟环境下通
过拾取、移动和定位零件层的结点逐步建立组件层、部件层和产品层结点,由此实现产品的虚
拟装配,这个过程所产生的信息由刚柔混合装配层次关联模型进行维护。刚柔混合装配层次关
联模型的建立算法详细描述如下:
步骤当拾取对象零件级状态的零件时,为该零件新增顶点对象,且状态设为活动;当
拾取对象为完成状态的图对象时,生成新的顶点对象,顶点子图指针指向该图对象;
步骤移动该结点或者电缆的电连接器,当约束特征包围盒发生碰撞,检测到有装配意
图时,生成约束对象,并进行约束识别和导航,约束对象的状态为导航;
步骤当碰撞元素为完成状态的图对象节点或者零件节点时,则生成新的图对象,图对
象的层次级别根据顶点数目确定,并将该结点和发生碰撞的图对象加入新图的顶点集;当碰撞
元素为未完成状态的图对象节点时,则直接加入到该图对象的顶点集;
步骤移动结点到最终位置,定位并生成有向边对象,由碰撞元素指向运动结点,同时
将约束对象加入该有向边的约束集中,并将装配过程中关联的工具、夹具信息加入到有向边的
工艺信息中,然后将边对象加入组件图对象的有向边集中;
步骤如果结点为电缆,移动电缆,并逐段进行固定,依次加入边对象的卡箍集中;
步骤重复上诉步骤,直至新增图对象的状态为完成;
步骤不断拾取零件级的零件节点或图结点进行装配操作,将新增的图对象的层次级别
设置为组件级,直至形成组件层;
步骤不断拾取零件级和组件级的零件节点或图结点进行装配操作,将新增的图对象的
层次级别设置为部件级,直至形成部件层;
步骤不断拾取零件级、组件级和部件级的零件节点或图结点进行装配操作,直至新增
的图结点的层次级别设置为产品级,形成产品层且装配完成;
通过刚柔混合装配层次关联模型也可对虚拟现实环境中的场景图进行维护,每个图结48 
点形成一个组合结点(),每个图结点所形成顶点的位姿信息形成一个位置节点
(),图结点的状态为完成时将组合结点和位置节点合并为一个分隔结点(
),由此虚拟现实环境中的场景图同刚柔混合装配层次关联模型结合起来。根据
中图结点与虚拟现实环境中的场景结点的对应关系,可以方便地对场景图进行维
护。
本章小结
本章对航天产品的虚拟装配建模技术展开了研究,主要内容有:
()分析了航天产品虚拟装配模型的需求,将装配场景模型分为刚性零件模型、电缆零件
模型和其他模型,并分别提出各种模型的实体表达及信息描述,其中刚性零件模型用显示特征、
约束特征、碰撞检测特征和属性特征进行表述,电缆零件模型分为电缆束模型和电连接器模型,
电缆束模型用显示特征、控制特征、碰撞检测特征和属性特征进行表述。
()基于层次模型和图模型提出了刚柔混合装配层次关联模型,将航天产品分为个层次:
产品级、部件级、组件级和零件级。并对模型的信息描述和数据结构表达进行了详述。
()分析了装配模型在虚拟环境中的建立内容和流程,提出了零件模型信息的转换与存储
方法,该方法灵活且可定制,并且有利于模型信息的重构。最后给出了刚柔混合装配层次关联
模型的建立算法。49 
第四章面向虚拟装配的交互辅助技术
引言
在虚拟现实环境下,设计者使用各种交互设备进行虚拟装配操作来对产品的装配性能进行
分析和检查,然而传统的人机交互手段难以达到现实装配的效果,这是由于人对空间运动的控
制本身就具有不精确性和模糊性。在现实世界中,人可以借助于视觉、触觉的协同以及物理约
束的作用(如倒角的对中功能、物体表面的接触滑移等各种接触力),来克服其运动控制的不精
确性,从而实现物体的精确定位,而在桌面虚拟环境中,由于触觉反馈的缺乏、位置跟踪精度
的不尽如人意以及面片表示的零件模型本身的不精确,使得用户难以将零件顺利地安装到目标
位置。因此在虚拟装配系统中,需要对用户的装配意图进行准确高效的识别和捕捉,并
根据用户的装配意图对装配操作进行精确的引导。
另外,传统的虚拟装配未考虑电缆等零件装配过程的柔性变形特性,而电缆零件的柔性变
形特性在虚拟装配环境中对电缆布局的合理性和可装配性验证有着很大的影响,因此在虚拟
装配中应尽量真实地体现电缆柔性,对电缆零件的柔性特性进行实时地模拟十分必要。
在三维系统中,零件之间的装配是通过选择基零件和被装零件的约束特征(如平面、
柱面、轴线等),然后选择约束特征的配合关系(如贴合、插入、对齐等),然后被装零件通过
坐标变换直接由初始位置移动到目标装配位置,该过程是面向装配结果的,无法对装配过程进
行可行性验证。区别于系统中装配体建立过程的定位方式,虚拟装配环境需要对零件进
行直观自然的装配操作和精确定位,因此虚拟装配是面向装配过程的,可有效对装配工艺进行
设计和验证。本文通过交互辅助技术来实现虚拟装配环境中零件装配过程的真实自然。
交互辅助的虚拟装配操作流程
任何复杂产品都是由操作者通过端面贴合对齐、轴插入孔等一系列基本操作来完成装配,
在装配过程中,配合面之间不断地相互趋近、碰撞、调整,最后到配合状态。虚拟装配操作交
互辅助功能的设计思想正是利用在装配过程中配合面之间不断相互趋近的特性,试图通过对零
件模型的装配特征、体素特征信息进行分析来捕捉操作者的装配意图。然后根据捕捉的结果,
系统做相应的处理。
虚拟装配系统中,用户通过运动驱动设备(如鼠标、轨迹球等)控制刚性零件或电缆零件
的运动,此时零件的装拆标志为装配状态,同时使用层次包围盒法实时地对零件进行碰撞干涉
检测,如果在运动过程中发生碰撞,则将零件保持在上一帧中未发生碰撞的位姿;如果未发生
碰撞,对于刚性零件,当运动到目标位置附近时,根据刚性零件的约束特征捕捉满足用户装配50 
意图的约束,并将刚性零件精确定位到约束方向上,并根据满足的约束条件对设备的运动控制
量进行分解和映射,实现刚性零件在受约束方向上的运动引导功能,最终实现刚性零件装配的
精确定位。对于电缆零件,其装配是通过电连接器的精确定位和电缆束逐段的卡箍固定来完成
的,其中电缆连接器可作为刚体零件进行装配的导航和精确定位,电缆束通过质点弹簧系统进
行柔性的变形运动,并对各个质点进行位置的约束来实现布线的定位。图示出了有交互辅
助功能的虚拟装配操作流程。
图有交互辅助功能的虚拟装配操作流程
装配意图捕捉技术
约束元素包围盒的构建
由于装配体是通过一系列规则特征元素之间的各种配合而形成的,装配的过程就是建立约
束特征之间配合关系的过程。在实际的结构设计中,用于定位和配合的特征基本上都是规则的
几何元素,如平面、圆柱面、圆锥面和球面等,配合方式一般有对齐、贴合、平行、插入、偏
距和偏角等。因此,对用户装配意图的捕捉也就转化到目标约束特征的识别上。
本文通过构造约束元素包围盒,并将约束元素包
围盒的碰撞检测结果作为约束多层识别的判断入口。现有的研究都是通过零件实体碰撞作为装51 
配意图捕捉的触发条件,同时检测碰撞元素对是否存在约束关系。传统的做法对操作精度
的要求很高,对于存在凹面配合和装配空间狭小的情况,往往约束识别的精度不高,经常出现
误识别的现象。通过构造约束元素的包围盒可以有效缩小识别范围,并降低操作的精度
要求。
约束元素包围盒的构造应遵循以下原则:
()包围盒的体积应尽量大。包围盒体积越大,则越容易与目标约束元素的包围盒相交,
对操作精度的要求就越低;
()保证操作的连贯性。在装配操作时,应尽量减少待装配约束元素与其他非目标约束元
素包围盒相交的可能性,以减少触发约束识别的次数和增加操作的连贯性,该原则使得包围盒
的体积不能过大。
()包围盒的构造过程和相交测试应简单快速,满足系统实时性要求。
在以上原则中,()和()是相对矛盾的,这决定了包围盒的构造体积在操作精度要求和
连贯性之间应适量平衡。
根据上述原则,在约束元素的局部坐标系构建包围盒作为约束元素的包围盒,在装
配时并不随着零件位姿的变化而更新。装配时对约束元素包围盒的碰撞检测可根据包围
盒的相交测试算法进行检测。一个约束元素包围盒可以用其中心点和三条棱、
、来描述,三条边的方向由约束元素局部坐标系沿轴线方向的单位矢量确定,各种
约束元素包围盒的基本参数和单位矢量的方向如图所示。其中为约束元素的局部坐标系
原点,、和为坐标系的三个轴向单位矢量。约束特征的参数是进行约束识别和捕捉的依
据,其中局部坐标系轴向矢量用于计算约束元素之间的夹角和距离,因此定义为约束元素
的方向标示矢量。
图几种典型约束元素类型的基本参数和包围盒
经过大量实际应用中的测试分析,的构造规则描述如下:52 
()平面:如图所示,和为平面在和方向上的最大边长,可通过
遍历平面上的三角面片顶点获得。底面包裹平面实体,尺寸参数满足下式:
()圆柱面:如图所示,表示圆柱面的长度,为圆柱面的底面半径。
包裹圆柱面,并且尺寸参数满足:
()球面:如图所示,表示球面半径。包围盒包裹球面,尺寸参数满足:
()锥面:α表示锥角,为锥面高度,为圆锥面的底面半径。包裹锥面,
考虑到锥面的单一的装配方向,长度的方向分为两种情况:当锥面为轴面时,向
方向标示矢量的反向延伸,如图所示;当锥面为孔面时,向方向标示矢量的正向延
伸,如图所示。并且尺寸参数满足:
自由度的表达与归约
在三维空间中,物体的运动可用平移运动与旋转运动的组合进行表示,文献使用平行
于三个相互正交的坐标轴的移动和转动来描述零件的自由度,但无法表达移动方向或转动轴线不
平行于坐标轴方向的情况。文献中的自由度表示方法不具有普适性,在部分情况下需要特
殊处理。因此,考虑到一般性,本文选择文献提出的表达方法:将零件的自由度
分为平移自由度和旋转自由度
,因此零件在某个约束下的自由度可表达为:
式中:表示平移自由度,∈;表示旋转自由度,∈
。具体的含义如表所示。53 
表自由度分类
平移自由度旋转自由度
不能平移不能旋转
沿给定方向平移绕给定轴旋转
沿给定平面平移绕给定方向的任意轴旋转
沿给定曲面平移绕通过给定点的任意轴旋转
任意平移绕任意轴旋转
物体自由度的表示如图所示,中为平面贴合约束,立方体的自由度可表示为
,它可以沿平板的表面平移和绕垂直于平面的任意轴线旋转。中为一直线
置于平面上的约束,直线的自由度可表示为,它可以沿平面平移、绕自身轴
线旋转和绕垂直于平面的任意轴线旋转。
图物体在几何约束下的自由度示例
一般零件上有多个约束元素,通过约束元素之间的约束和自由度的映射关系可以得到零件
的自由度数量和种类。约束元素之间的约束与自由度的映射关系如表所示。
表约束元素之间的约束与自由度的映射关系
约束元素配合类型参数关系自由度
平面平面
对齐
贴合
偏移
偏角β
·和共面
·-
··
·-β
直线直线对齐偏移··×
直线平面
偏角β
平行
垂直
偏移
·β
·
·
·×
柱面柱面插入贴合··
锥面α锥面α插入·
球面球面贴合54 
其中、、、和、、、分别表示有配合关系的个约束元素的几何参数。
在零件的装配过程中,随着约束的建立,零件的自由度随之减少,直至达到完全约束状态。
而装配的过程,就是零部件不断受到约束,自由度逐步减少的过程,零部件同时受到多个约束
作用时,需要对这些配合约束的自由度进行合并计算,并得到零部件最终的自由度,这个过程
称作自由度归约。由于平移运动和旋转运动都是闭合集,即一个平移运动可以等效表示多个
平移运动的共同作用,一个旋转运动也总是可以等效表示多个旋转运动的共同作用,所以平移
自由度和旋转自由度可以分别独立进行归约求解,个约束自由度归约的数学描述为:
∑∪∪∪∪∪∪
表和表分别示出了常见情况的平移自由度和旋转自由度的归约计算结果。
表平移自由度归约结果
平移自由度相交结果
∪
∪若矢量方向相同,结果为,否则为
∪若直线平行于平面,则结果为,否则为
∪若柱面轴线与直线平行,则结果为,否则为
∪若两平面平行则结果为,否则为
∪平面与曲面的交线
∪
表旋转自由度归约结果
旋转自由度相交结果
∪
∪若两转轴重合则结果为,否则为
∪若两转轴方向相同则结果为,否则为
∪若对应的点在的轴上,则结果为,否则为
∪若转轴方向相同,则结果为,否则为
∪
∪若两点重合则结果为,否则结果为
∪
约束元素多层识别
在虚拟装配环境中,设计者通过输入设备控制零部件的运动,为了实现装配运动的导航,
需要准确地对用户装配意图进行捕捉,并确认需要加载的装配约束。装配意图捕捉的总体流程
如图()所示。55 
开始
零件包围盒相交测试
是否相交?
约束元素多层识别
约束智能确认
约束有效?
得到约束元素对及参数
结束
否
是
否
是
开始
约束元素包围盒相交测试
是否相交?
约束元素类型匹配判别
约束规则判别
存储该对约束元素和约束类型
遍历结束?
结束
否
是
否
是
是否满足?
是否满足?否
是
否
得到可用约束列表是
()()
图装配意图捕捉和约束元素多层识别流程
根据表中的参数关系可以看出,各种约束元素间配合关系都可以转化成约束元素局部
坐标系上点、线之间的关系。因此,可将个配合约束元素的方向标示矢量间的夹角θ和空
间距离作为装配意图的识别参数,直线的方向标示矢量即直线的单位矢量,平面、圆柱面、
球面和圆锥面的方向标示矢量如图所示。其中直线、平面、圆柱面和圆锥面之间的夹角θ
和空间距离可根据约束元素的局部坐标系原点和方向标示矢量计算得到,夹角θ的范围
为,,球面之间的约束识别仅计算球心间的距离',θ和分别表示预先设定的夹角和
距离的识别阈值。根据表,约束识别规则描述如下:
()约束元素为平面—平面时,θ和由式()获得:
θ
当≤时,如果θθ≤,则识别到对齐约束;
当≤时,如果πθθ≤,则识别到贴合约束;
当≤时,如果πθθ≤,则识别到偏移约束;
当≤时,如果πθθ≤β或θθ≤β,则识别到偏角β约束。
()约束元素为直线—直线时,θ和由式()获得:56 
???cdo =sθ×
当≤时,且θθ≥,则识别到对齐约束;
当≤时,如果θθ≥,则识别到偏移约束。
()约束元素为直线—平面时,θ和由式()获得。
当≤,且πθθ≤,则识别到重合约束;
当πθθ≤或者θθ≤时,则识别到垂直约束;
当≤时,如果θθ≥,则识别到偏移约束;
当≤时,如果πθθ≤β或θθ≤β,则识别到偏角β约束。
()约束元素为柱面—柱面时,θ和由式()获得。
当≤,θθ≥,且≤,则识别到插入约束;
()约束元素为锥面α—锥面α时,θ和由式()获得。
当≤,θθ≥,且αα≤α,则识别到插入约束;
()约束元素为球面—球面时,由式()获得。
当′≤,则识别到贴合约束;
约束元素多层识别流程如图()所示。首先对包围盒发生碰撞的约束元素对
的类型进行匹配查询,然后按照约束规则分别对约束元素对的距离、
角度、半径等参数进行匹配计算,最后获得符合约束规则的一系列约束元素对集合
…,其中表示第个。
约束规则中的识别阈值的大小对识别精度和操作精度影响很大,而识别精度和操作精度又
是矛盾的:阈值若取得过大,虽然会很容易满足约束识别规则,但是零件精确定位时的位姿变
化量较大,削弱装配过程的真实感,同时也增大了识别到邻近元素的概率,削弱识别精度;阈
值若取得过小,由于每个约束都要同时满足多层规则才被识别,需要较精确的操作才能满足约
束规则,这就增大了操作难度。因此综合两方面的考虑,识别阈值θ和的取值满足下式:
θ
约束关系智能确认
约束识别规则是针对单个约束元素的,由于发生装配关系的零件间一般都是通过多个约束
进行定位的,同时每个零件上也有多个约束元素。通常在实际装配中,只有一个约束是满足装
配意图的。目前的约束确认算法在装配过程中有可能同时识别到多个约束,需要不断的人机交57 
互来确认目标约束,而且在装配操作过程中,当主动件与非目标零件发生碰撞时,会出现约束
元素误识别的现象。例如图所示结构的装配中,当销靠近基板时,会出现同时识别到
约束平面和的贴合约束,以及轴和孔的插入约束,用户需要取消平面的贴合约束,
先进行孔轴的插入装配,再旋转销进行平面的贴合装配。为了保证装配操作的连续性和正确
性,本文通过设置约束元素优先级、约束元素间的进给增量比较策略来智能地确认最符合装配
意图的约束元素。
图零件在装配过程中同时识别到多个约束
()约束元素优先级:一方面,在产品设计中体现了装配意图,一般来说,在设计中更倾
向于把出现概率较小的约束元素类型用来进行装配。在产品结构中,约束实体存在的频率按从
小到大顺序为:球面、圆锥面、圆柱面、平面;另一方面,装配操作中有以下倾向:限制自由
度数目多的约束会优先满足。其中圆锥面约束限制个自由度(个,个),
圆柱面约束限制个自由度(个,个),球面约束限制个自由度(球面限制
个)和平面约束限制个自由度(平面限制个、个)。
因此,综合方面的原则,并强调设计意图的重要性,本文定义约束元素类型的优先级顺
序为:圆锥面、球面、圆柱面、平面、直线。
图螺栓装配时的进给增量示意图
基板销
约束平面
约束平面
轴
孔58 
()约束元素的进给增量:当主动件不断向目标位置接近时,才符合装配意图。因此利用
装配操作的时空连续性,通过计算已识别到的约束元素对之间在一定时间间隔内的进给运动增
量来确认最终的装配意图。其中螺栓装配时的进给增量如图所示:
其中,点为轴线在孔圆柱面投影区间的一个端点(在构造圆柱体包围盒时获得),为
轴圆柱面上某一面片的中点在时刻的位置,为面片中心在(■)时刻的位置,
为孔轴心的方向标示矢量,矢量表示在上的投影,满足式():
若同时满足式()和式(),则表明在■时间内,螺栓向螺孔逐渐接近,操作者
有螺栓装配的意图。
综上,约束智能确认的流程可描述如下:
步骤将约束层次识别得到的约束元素对集合根据约束元素优先级排序,按照优先
级高低的顺序依次取出约束元素对,其中表示主动体约束元素,表示被动体约束元
素;
步骤记录主动体约束元素上某点的位置,并开始计时;
步骤计时结束,约束有效性检测,判断是否仍然在约束识别状态,如果不符合约束识
别规则,则返回步骤;如果仍然符合约束识别规则,则进入步骤;
步骤记录主动体约束元素此刻的位置,判断是否符合约束元素进给增量规则,如果
不符合,则返回步骤;如果符合,则进入步骤;
步骤存储该约束元素对,建立相应的约束关系,约束确认流程结束;
装配意图捕捉的效率计算
装配意图捕捉的效率对装配操作的拟实性有直接影响。本文使用下面的时间花费代价函数
来表征装配意图捕捉的效率:
其中为捕捉到装配意图的总时间花费。为约束识别判断入口的时间花费,取决于约束
元素包围盒相交测试的效率。为约束元素多层识别的时间花费,取决于约束元素间距离和夹
角的阈值选择和类型的匹配计算效率。为约束确认的时间花费,取决于约束元素类型和进给
增量的计算效率。59 
4.4 精确定位求解与装配运动导航
基于位姿变换元素分解的精确定位求解
约束的精确定位是,根据约束识别和确认的约束元素对配合类型和参数以及目标约束元素
的位姿,求解待装配零件的位姿变换矩阵,将待装配零件的位姿定位到受约束的方向上。由于
零件一般通过多个约束元素进行定位,因此在装配过程中,会存在多个约束同时作用的情况,
这就要求零件的位姿变换不能破坏原有的几何约束,此时,使用传统的先构造旋转矩阵,后构
造平移矩阵的位姿变换方法可能会改变原有的几何约束,而且要针对不同的情况分别考虑,计
算复杂度较大。为了满足一般约束和复合约束的精确定位,本文提出了具有普遍适用性的基于
位姿变换元素分解的精确定位求解算法,该方法可在不改变零件当前约束条件的情况下,定位
到新的约束方向上。
根据图中约束元素的基本参数和表中约束元素的配合关系,零件的位姿变换矩阵的
求解可以转化为根据目标零件的约束元素的参数,求解主动体零件上相应约束特征
元素的位姿变换矩阵,因此约束定位的位姿变换均可分解为以下种情况:
()点置于线上,记为※;
()点置于面上,记为※;
()直线和平行,记为。
其中点为主动体零件上被识别的约束元素局部坐标系下的原点,线和面为有
配合关系的目标零件上的约束元素,和分别表示约束元素所在主动体零件的
平移自由度和旋转自由度。
情况()和()均可通过平移或者旋转变换实现定位,而情况()只能通过旋转变换实
现定位。由于平移变换的计算量和计算难度均小于旋转变换,因此优先考虑使用平移变换来实
现位姿的定位。
图平移变换及旋转变换示意图60 
如图()所示,物体由状态平移到'状态,用表示平移分量变换矩阵,由
构造,其中,表示平移分量矢量,则满足式():
如图()所示,物体由状态旋转到'状态,用φ表示旋转分量变换矩阵,由
和φ构造,其中旋转轴线用表示,,,和分别表示旋转
轴直线上一点和方向标示矢量,φ表示旋转角度。设φ,φ,则φ满足式():
下面分别对所述种情况中、、和φ的求解方法进行说明。
点置于直线上的定位求解
图点置于线上时的几种定位求解情况
步骤优先计算∈时的变换矩阵,各种情况如下:
①时,设约束直线为:
※,其中为点沿受约束方向与直线交点的矢量,如图
()所示,可由式()计算求得。61 
vvvnOOv12122××,当×时
其中为的单位矢量,满足式():
当时
当时≥
当×时,即、到直线无交点,则跳到步骤;
②时,设约束平面为:
※,其中为点到直线与约束面交点的矢量,如图()
所示。可由式()计算求得。如果直线与约束平面重合,则为点到直线在约束面
上的垂线矢量;
,当时
当·时,即,此时,如果·,表明直线在约束平面上,则
为点到直线在约束平面上的垂线矢量,满足式();如果·,到直
线无交点,则跳到步骤;
③时:
※,其中为点到直线的垂线方向矢量,为垂足,如图()
所示,可由式()计算求得。
步骤当;或者,出现约束方向与目标直线无交点等情况时,平移变换无法
实现约束定位的目的,此时使用旋转变换实现约束定位。计算∈时的变换矩阵,
各种情况如下:
①时,设约束直线为:
※φ,其中表示受约束的转轴矢量,φ表示在垂直于的平面
上点到直线与平面交点的旋转角度,为旋转圆心,如图()所示。
,当时
当·时,即,则转入步骤;否则由式()计算求得φ。62 
 ? = arccos???? OOe e OO 11?OOeePP????,当时
如果,则表示无法构造与直线相交的平面,转入步骤。
②时,设约束方向为:
需要构造约束直线,使得在平面上,点绕约束轴线旋转角度φ到直
线与平面交点上,此时和时类似,如图()所示。令旋转角度φ°时,
为中点,由式()求得:
,当时
当·时,即,则转入步骤;否则,※°。
③时:
需要构造约束直线,使得在平面上,点绕约束轴线旋转角度φ到直
线与平面交点上,当令,φ°时,即约束轴线与目标直线平行,如图
()所示。此时求解方法和时一致:※°。
步骤当时,即出现旋转变换也无法实现约束定位的情况时,仅进行约束识别的
操作,直到零件运动到合适的位置才进行约束定位的操作,求解流程结束。
点置于面上的定位求解
图点置于面上时的几种定位求解情况
步骤优先计算∈时的变换矩阵,各种情况如下:
①时,设约束直线为:
※,其中为点沿受约束方向与平面交点的矢量,如图63 
4.9()所示,可由式()计算求得。
,当时
当·时,即,此时,如果·,表明约束直线也在平面上,
求解流程结束;否则转入步骤;
②时,设约束平面为:
※,其中为个平面和的交线,为点到直线在
约束平面上的垂线方向矢量,垂足为,如图()所示。的单位矢量可由式()
计算求得:
××,当×时
当×时,即,说明,平面和无交线,转入步骤;否则可由
式()计算求得。
××
当·时,即,此时,如果·,表明直线在约束平面上,则
为点到直线在约束平面上的垂线矢量,满足式();如果·,到直
线无交点,则跳到步骤;
③时:
※,其中为点到平面的垂线方向矢量,为垂足,如图()
所示,可由式()计算求得。
步骤当;或者,出现约束方向与目标平面无交点等情况时,平移变换无法
实现约束定位的目的,此时使用旋转变换实现约束定位。计算∈时的变换矩阵,
各种情况如下:
①时,设约束直线为:
※φ,其中表示受约束的转轴矢量,φ表示在垂直于的圆弧面
上点到平面与圆弧交点的旋转角度,为旋转圆心,如图()所示。和
点可分别由式()和()求得:64 
?????=?=?=cc112200OPOOOPkOPv,当×时
当×时,即,点不存在,则转入步骤;否则由式()计算求得φ。
②时,设约束方向为:
需要构造约束直线,使得在平面上,点绕约束轴线旋转角度φ到平
面与平面交点上,使得交点为上圆弧与平面的切点,此时和时类似,如
图()所示。其中可由式()求得,由式()求得:
×
,当×时
当×时,即,点不存在,则转入步骤;否则由式()计算求得φ,
※φ。
③时:
需要构造约束直线,使得在平面上,点绕约束轴线旋转角度φ到平
面与平面交点上,交点为上圆弧与平面的切点,当令·,φ°时,
即约束轴线与目标直线平行,如图()所示。此时求解方法和时一致:※
φ。
步骤当时,即出现旋转变换也无法实现约束定位的情况时,仅进行约束识别的
操作,直到零件运动到合适的位置才进行约束定位的操作,求解流程结束。
直线平行的定位求解
图直线平行时的几种定位求解情况
步骤由于仅能通过旋转变换实现定位,计算∈时的变换矩阵,各种情
况如下:
①时,设约束直线为:65 
TR (L1// L2, DTi, R1)= R(k, φ,分别构造平面、直线'和直线',使
得、'、',其中'与交点为,'与交点为,如图()所示,
则和可分别由式()计算求得。
当··时,即,此时直线无法绕约束直线旋转角度φ平行
于,转入步骤;否则,根据式()计算旋转角度φ,求解流程结束。
②时,设约束方向为:
φ,构造约束直线、平面和直线',使
得、',其中与交点为,'与交点为,该种情况和时类似,
即,如图()所示。旋转角度φ可根据式()计算求得,求解流程结束。
③时,设约束点为:
φ,构造约束直线、直线'和',使得'
、',如图()所示,则和φ可分别由式()计算求得,求解流程结束。
××
④时:
φ,构造约束直线和',使得',该种情
况和时类似,即,如图()所示。则和φ可分别由式()计算求得,
求解流程结束。
步骤当时,即出现旋转变换也无法实现约束定位的情况时,仅进行约束识别的
操作,直到零件运动到合适的位置才进行约束定位的操作,求解流程结束。
基于约束元素投影的装配运动导航
装配运动导航就是在约束识别和定位后,使零件在受约束的方向上进行运动,并不断地识
别新约束,直至装配到目标位置。在桌面虚拟装配系统中,零件模型的受约束运动是根据受约
束类型,通过对位置传感器(鼠标、轨迹球)的理论位姿输入量在约束方向上进行投影,计算66 
实际位姿输入量来实现的。
每帧开始时传感器输入的理论位姿增量矩阵记为φ,令约束元素投影算子为
,其中表示约束元素(点或者矢量),表示×的位姿矩阵。则每帧零件的实际运
动增量为'''φ',满足式():
针对不同的和,约束元素投影算子的计算如下。
平移分量投影算子
图平移分量向约束方向的投影
计算∈时的实际的平移分量变换矩阵',由实际平移分量矢量'根
据式()构造,各种情况如下:
①时,零件无法移动,则实际的平移分量矢量为:
②时,设约束直线为,令理论平移分量矢量向方向投影,如图
()所示,则实际的平移分量矢量为:
③时,设约束平面为,令理论平移分量矢量向平面上投影,如图
()所示,则实际的平移分量矢量为:
④时,零件可自由运动,则实际的平移分量矢量为:
旋转分量投影算子
计算∈时的实际的旋转分量变换矩阵'φ',由实际旋转轴矢量'
和实际旋转角度φ'根据式()构造,各种情况如下:67 
①时,零件无法转动,则实际的旋转轴矢量和旋转角度为:
,
②时,设约束直线为,令理论旋转轴矢量向方向投影,旋转角度φ
也进行投影,如图()所示,则实际的旋转轴矢量和旋转角度为:
,
③时,设约束方向为,构造约束直线为,其中为零件局部坐标
系原点。令理论旋转轴矢量向方向投影,旋转角度φ也进行投影,如图()所示,则
实际的旋转轴矢量和旋转角度由式()计算获得。
④时,设约束点为,构造约束直线为,令理论旋转轴矢量和旋转角度
φ保持不变,如图()所示,则实际的旋转轴矢量和旋转角度为:
,
⑤时,零件可自由运动,则实际的旋转分量变换矩阵为:
时
φ
φφφ
时
φ
φ
时
图旋转分量向约束方向的投影
约束关系的动态解除
在虚拟装配环境中对产品的可装配性进行验证时,有时需要对装配顺序进行调整,或者取
消可能发生的约束误识别,这就需要解除零件相应的约束关系。约束关系动态解除的过程实
质上是零件从受约束状态逐渐变化到自由状态,即约束建立的一个逆过程。本文研究的约束关
系解除问题属于单调拆卸范畴,即零件经一个拆卸动作即可被完全拆除,在该方式下,零件通
过虚拟装配所建立的约束关系不断被解除,当限制零件自由度的最后一个约束关系被解除后,
该零件的自由度恢复为(),由此可见,零件约束关系的解除是个动态有序的过程。由于
同样受到虚拟环境下零件运动控制不精确的限制,在约束关系动态解除的过程中零件同样受到
装配运动导航的控制,以实现精确的拆卸运动。68 
图示出了零件约束关系动态解除的流程:首先用户通过运动驱动设备(如鼠标、轨迹
球等)拾取零件,并发出拆卸指令,系统对零件的可拆卸性进行推理,如果该零件可拆卸,则
将零件的装拆标志置为拆卸状态,然后根据解除规则依次动态解除零件的约束关系,同时使用
层次包围盒法实时地对零件进行碰撞干涉检测,如果在运动过程中发生碰撞,则将零件保持在
上一帧中未发生碰撞的位姿;如果未发生碰撞,对零件的自由度进行求解,使零件在约束解除
过程中仍然受到受约束自由度下的运动导航,直至零件上最后一个约束也完全解除。
图零件约束关系的动态解除流程
约束关系动态解除准则
由于约束关系解除的渐进性,因此约束关系的解除存在着时序关系。当前拾取零件与装配
体间配合约束的解除顺序解除方式可分为两种类型:
图零件约束关系解除的同时关系
零件
零件69 
()约束关系可以同时解除,即约束的解除顺序相互间没有影响,例如在图()所
示的装配体中,零件和零件存在个平面贴合约束、和,个约束关系可以同时解
除,并且对零件的运动控制没有影响,图()所示为拾取零件,解除约束、和
后的零件自由运动情形。
图零件约束关系解除的先后关系
()约束关系必须按照一定的顺序进行解除,例如在图()所示的装配体中,零件
和零件存在个轴对齐约束、个平面贴合约束和个平面对齐约束,拾取零件
时,平面贴合约束可以先同时解除,然后零件在轴对齐约束的作用下,沿轴线直线运动,
如图()所示。直至的轴圆柱面的不再与的孔圆柱面的相交为止,零
件的轴对齐约束解除,可以自由运动,如图()所示。
因此,约束关系的动态解除准则就是为了建立装配约束解除的同时关系和先后关系
。如表所示,本文根据约束类型、约束元素优先级和方向匹配度建立约束解除的同时
关系和先后关系。
同时关系建立准则
①如果约束类型为平面对齐、贴合,则零件上的多个平面约束可以同时解除;
②如果约束类型为轴线对齐、平行,圆柱面、锥面插入,则零件上对轴线方向和拆卸方向
平行且轴线对齐长度相等的多个轴线对齐约束可以同时解除;
先后关系建立准则
①约束元素优先级:根据各种约束元素类型限制自由度的大小和约束定位的设计意图,设
置约束关系解除的优先顺序为:平面、直线、圆柱面、球面、圆锥面。
②方向匹配度:当约束元素一致时,根据节内容,将操作者的理论位姿输入量向
各约束方向投影获得实际位姿输入量',在不考虑输入装置对位移进行比例缩放的情况下,由
于配合约束对零件运动的限制,'表达的位移量总是小于或等于表达的位移量。虚拟拆卸
过程中,应优先解除对限制最大的约束使'表达的位移量尽可能接近表达的位移量以
反映操作者的拆卸意图。因此'与偏差越小,则该方向的约束关系越先解除。
零件
零件70 
4.5.2  零件可拆卸性推理
与一般的研究不同,本文研究的零件可拆卸性推理着重关注零件的约束关系能否解
除,即结合虚拟装配已建立的刚柔混合装配层次关联模型,判断零件约束关系的解除是否影响
在其后装配的零件,如果破坏后续零件的约束,则认为不可拆卸,否则该零件是可拆卸的。因
此,零件的可拆卸与否一方面取决于装配的顺序,另一方面由零件所受的约束决定。设拾取的
零件为,令,则零件的可拆卸推理算法描述如下:
步骤遍历零件所属图结点的有向边集,如果遍历结束,转入步骤;否则,查
询终止顶点为的有向边,的起始顶点为,如果为零件或电缆束,则转入步
骤;否则,如果为装配体,则转入步骤;
步骤查询零件与是否存在约束关系,如果有,则转入步骤;否则令
,转入步骤;
步骤查询装配体子图结点中第一个装配的顶点,令,如果为
零件或电缆束,则转入步骤;否则,如果为装配体,则转入步骤;
步骤如果图的层次级别为产品级,则转入步骤;否则,查询图的父顶点,令
,转入步骤;
步骤返回零件为不可拆卸的,并记录两零件之间的约束关系,推理流程结束;
步骤返回零件为可拆卸的,推理流程结束。
虚拟装配中紧固件工具的操作
工具装配的操作过程
在实际的装配中,产品中相当一部分零件是紧固零件,这些零件不能直接用手进行装配,
必须借助螺钉旋具、扳手等紧固件工具辅助完成其装配过程,因此,紧固件工具是实际装配规
划和可装配性分析中必须考虑的一个重要因素。
使用工具装配紧固零件时,首先要将工具的工作部分定位到零件的紧固施力位置上,使工
具和零件装配为一体;然后操作工具,使零件在工具的作用下运动到装配目标位置附近,并对
零件进行装配意图识别和运动导航,直至定位到最终位置;当零件完成装配后,需要将工具从
零件上移走,使工具和零件分离,即对工具进行归位。由此可见,工具装配操作过程可分为三
步,即工具的定位、工具的操作和工具的归位。
()工具的定位:将紧固零件作为基零件,操作者控制工具靠近零件,建立工具的工作部
分与零件紧固施力位置的约束关系,使工具和紧固零件形成稳定的装配体。在这个过程中,工
具也受到和节中所述的系统装配意图识别和运动导航模块的控制,能够使工具精确定位
到零件的紧固施力位置。71 
()工具的操作:控制工具和紧固零件形成的装配体一起运动,在这个过程中两者的相对
位姿不发生变换,装配的同时,紧固零件受到装配意图识别和运动导航模块的控制,使零件能
精确定位到紧固位置。其中装配体的局部坐标系与工具一致,目的是不改变工具的旋转中心,
保持工具的运动控制特性不发生变化,从而实现工具驱动零件进行装配操作。
()工具的归位:将工具与零件的约束关系进行动态的解除,取消工具和零件形成的装配
体,使工具和零件分离。
紧固件工具与零件的匹配和约束分析
工具的定位是工具装配操作过程的一个重要环节,它决定了操作工具装配零件的过程中工
具和零件之间的作用力能否有效传递。常用的装配工具根据紧固零件的不同可分为两类:一
类为螺钉旋具,螺钉旋具又分为一字槽和十字槽两种,分别对应不同的螺钉类型,如图所
示。另一类为扳手工具,扳手又分为呆扳手和六角扳手,分别对应不同的螺栓类型,如图
所示。约束分析是为了建立装配工具的约束元素以及约束识别规则,使装配工具能够在装配意
图识别和运动导航的模块下精确定位到零件上,并形成装配体,具体的约束分析如下:
螺钉旋具的匹配和约束分析
定义螺钉旋具旋杆的圆柱面和工作部分的顶端平面为约束元素,分别对应于螺钉的
螺柱面和开槽平面,如图所示。
图螺钉旋具与螺钉的约束元素
旋具和螺钉的匹配计算是根据螺钉头开槽大小与旋具刀口长度的比较来验证旋具的选取是
否合理。本文根据经验进行计算,对于一字槽旋具和螺钉来说,其匹配原则应满足式():
≤≤
其中为一字槽旋具刀口长度,为螺钉槽面长度,如图()所示。
对于十字槽旋具和螺钉来说,其匹配原则应满足式():
≤≤72 
其中为十字槽旋具刀口顶端长度,为螺钉十字槽面长度,如图()所示。
图一字槽和十字槽旋具与螺钉的精确定位过程
旋具与螺钉的约束识别规则与节类似,操作者控制螺钉旋具自由运动到螺钉头部开槽
位置附近时(图()),系统将检测到和构建的相交,触发旋具与螺钉的匹配
性计算和圆柱面约束的多层识别流程,当旋具与螺钉匹配时,此时取消圆柱面直径匹配的计算,
当两圆柱面中心轴线的夹角小于阈值时,即识别到轴线对齐约束,如图()所示。然后系
统自动将旋具定位到轴线方向,控制旋具沿方向继续向螺钉开槽靠近(图()),由
于平面和面积均很小,因此两者的长度均较小,仅当旋具工作部分进入到螺钉槽
内时,才能检测到和的相交,此时触发平面约束的多层识别流程(图()),
直至定位到上,旋具的自由度为,如果旋具工作部分无法进入到螺钉槽内,说
明选取的旋具型号与螺钉不匹配,需要更换旋具。当旋具在下绕轴线方向旋转,并
与螺钉开槽的壁面发生碰撞时,即认为旋具与螺钉形成完全约束的装配体,如图()所示。
扳手的匹配和约束分析
定义扳手工作部分的轴线和端平面为约束元素,分别对应于螺栓的轴线和外六角
螺栓的下端面或内六角螺栓的槽底面,如图所示。螺母的约束元素与外六角螺栓的
六角头类似,不再赘述。
扳手和螺栓的匹配计算是根据螺栓六角面相对距离和扳手工作面相对距离的比较来验证旋
具的选取是否合理。对于呆扳手和外六角螺栓来说,其匹配原则应满足式():73 
图扳手与螺栓的约束元素
≤≤
其中为呆扳手工作部分端面距离,为螺栓六角面距离,如图()所示。
对于六角扳手和内六角螺栓来说,其匹配原则应满足式():
≤≤
其中为六角扳手工作部分六角端面距离,为螺栓六角面距离,如图()所示。
图扳手与六角螺栓的精确定位过程
扳手与螺栓的约束建立过程如下:操作者控制扳手自由运动到螺栓头部位置附近时(图
()),系统将检测到平面和构建的相交,触发轴线和约束的多层识别流程,
当两轴线的夹角小于阈值时,即识别到轴线对齐约束,如图()所示。然后系统自动将扳
手定位到轴线方向,控制扳手沿方向继续向螺栓端面靠近(图()),当扳手工作74 
部分进入到螺栓头六角面下方时,检测到和的相交,此时触发平面约束的多层识
别流程(图()),直至定位到上,扳手的自由度为。当扳手在下
绕轴线方向旋转,并与螺栓六角面发生碰撞时,即认为扳手与螺栓形成完全约束的装配体,
如图()所示。
虚拟装配中工具的操作空间
装配操作中工具和紧固零件形成的装配体一起进行零件的装配时,需要对工具的操作空间
进行验证。不同的工具可进行有效装配操作的最小空间不同。
Υ
螺钉旋具六角扳手
图扳手与六角螺栓的精确定位过程
()对于螺钉旋具,其装配运动主要在螺钉的轴线方向,因此,螺钉旋具完成装配的运动
范围满足式(),如图()所示。
其中为螺钉旋具的装配运动范围,为旋具长度,为螺钉长度。
()对于扳手,其装配运动分为螺栓的轴线方向的直线运动和绕轴线的旋转运动,因此扳
手能够完成装配的运动范围应满足式(),如图()所示。
Υ
其中为扳手的直线装配运动范围,为扳手前端长度,对于呆扳手,,为螺栓长
度。Υ为扳手的旋转装配运动最大角度。
基于质点弹簧系统的电缆零件虚拟装配
虚拟环境下的电缆装配操作方式
由于电缆零件模型表达的特殊性,使得电缆零件在虚拟环境下的装配操作方式与刚性零件75 
有很大不同:既要保证电连接器插接的准确性,又要对电缆束进行逐段的固定,使得电缆束定
位在物体表面。在这个过程中,随着碰撞和拖拽的产生,电缆束会根据质点弹簧模型发生柔性
变形。虚拟环境下电缆装配的主要思想就是将电缆的装配转化为对电连接器的操作和对质点的
控制。在虚拟环境中,通过三维鼠标或者轨迹球对电连接器和质点的平移和旋转,来达到对整
个电缆的可视化布局与装配。其中电连接器作为刚性零件,通过交互辅助技术的应用,实现装
配的精确定位,同时,与电连接器相连的电缆束根据质点位置实时更新外形,并逐段对质点进
行位置的限制,实现电缆束的捆扎固定。根据电缆零件拾取位置的不同,可分为三种装配操作
方式:整体方式、电连接器控制方式、电缆束控制方式。
()整体方式:当拾取电缆零件的包围盒中心点时,将整个电缆零件作为刚性零件处理,
运动过程中不进行质点弹簧系统的求解,设计者可以将整个电缆作为操作对象,对其进行移动、
转动等操作。该方式可以将电缆零件从工作台迅速地移动到目标装配位置附近。如图所示。
图电缆零件整体装配操作方式
()电连接器控制方式:用户拾取对象为电连接器,在进行平移和旋转操作时,将电连接
器端口的位置和速度传递给与该电连接器端口相连的电缆分支段端截面质点,然后进行电缆束
质点弹簧系统的受力求解,并将电连接器端口的位置和法向矢量作为与之相连的电缆分支段端
截面的位置和法向矢量,然后更新电缆分支段端截面的位姿。如图所示,拾取电连接器进
行装配操作,计算电连接器电气端口处的局部坐标系的位姿,将坐标系的位置赋值给电缆分
支段端截面质点,并将坐标系轴矢量作为端截面新的法向矢量。
电缆零件包围盒中心76 
图电缆零件电连接器装配操作方式
()电缆束控制方式:用户拾取对象为电缆分支段时,将传感器的平移输入量传递给离拾
取位置最近的质点,计算该质点的位置和运动速度,然后进行电缆束质点弹簧系统的受力求解,
与电缆束连接的电连接器的位姿根据相连的分支段端截面的位置和法向矢量确定。如图所
示,拾取位置为电缆束上的面片时,由电缆束的面片、圆柱面的拓扑关系得到圆柱面上其中
一个圆截面的质点,将传感器的平移输入量赋值给质点,电连接器和的位姿分别根据
电缆束端截面和的位置和法向矢量确定,计算方法与图类似。
图电缆零件电缆束装配操作方式
电缆束质点弹簧系统的动力学分析
设电缆束是由个质点所组成的质点弹簧系统,则整个电缆束在装配中的形变满足如下微
分方程组:
其中,为所有质点的位置向量(为包含个分量的列向量),为所有质点的速度向量
(为包含个分量的列向量),为施加在质点弹簧系统上的总的作用力(为包含个分量的77 
列向量),为系统的质量矩阵(为×的对角矩阵)。
根据牛顿第二定律,对于电缆分支段上的任意质点,都满足如下动力学方程:
其中为质点的质量,为质点的加速度;为质点所受的合力,为质点
所受的内力,为质点所受的外力。
图质点弹簧系统中的弹簧和阻尼器结构示意图
()内力由弹簧力和阻尼力组成,在动态的电缆变形仿真中,适当的阻尼力对维
持质点弹簧系统的稳定性非常重要。为了防止质点之间出现不规则的振动一个强张力必须伴
随一个稳定的强阻尼力。电缆分支段上连接质点和质点的弹簧和阻尼器结构如图
所示。根据胡克定律,弹簧力由式()计算获得:
其中为弹簧的弹性系数,和分别为质点和质点的位置向量,为弹簧
的原长。
阻尼力与两个相连质点的速度差成正比,由式()计算获得:
其中,为阻尼器的阻尼系数,和分别为质点和质点的速度向量。
由式()和()可得质点所受的内力为:
∑
∑
其中为与质点相连的质点总数。
()在电缆的运动过程中会受到多种外力的作用,为了和刚性零件在虚拟环境中的装配运
动相似,仅表现电缆的形变特性,本文不考虑质点的重力影响,仅讨论基本的外力:阻力、碰
撞后的反弹力和粘滞力。
阻力的施加是为了模拟能量的衰减,使电缆束在无重力的条件下不至于无限制的运动下去。78 
根据阻力定律,物体所受的阻力和速度的次幂成正比,取,则质点所受的阻力
为:
其中为阻力系数。
电缆束在产生碰撞时,碰撞响应的处理与刚性零件不同:发生碰撞的质点会受到反弹力和
粘滞力的作用,反弹力的施加可以使电缆束与碰撞物体之间分离,为了便于计算,本文设定质
点所受的反弹力为常数,方向取决于电缆束碰撞面片的法向矢量:
其中为反弹常数,为电缆束上离质点最近的碰撞面片的法向矢量。
为了使碰撞的相应更加逼真,通过施加粘滞力来耗散部分的动能,以模拟物体之间的非弹
性碰撞。当质点的速度向量与其最近的碰撞面片的法向矢量的夹角大于°,即
<时,此时,质点向碰撞位置反向运动,质点所受的粘滞力为:
由式()、()和()得质点所受的外力为:
综上所述,对于单个质点的运动位移和速度可由如下微分方程确定:
积分法求解质点弹簧动力学微分方程
在求解常微分方程初值问题上,只有少数简单的和典型的常微分方程能够用初等积分法求
得精确解,多数情形只能利用近似方法求解。一般用于质点弹簧系统的常微分方程初值问题的
数值解法有显式欧拉法、隐式欧拉法、龙格库塔法等。显式方法由于受系统稳定性
的限制,通常只能取较小的时间步长,而且计算精度只有阶,隐式方法精度稍高,虽然可以
进行大步长积分,但要求解规模较大的稀疏线性方程组,龙格库塔法具有很高的计算精度,可
达阶,因此可以取较大时间步长,但是其计算效率过低,不适合用于实时计算。在本文中,
使用积分法对质点弹簧动力学微分方程进行求解:79 
其中为时间步长。
积分器相比欧拉积分法计算简单,只涉及质点位置,不用显式地求解速度项,因而
也不存在速度和位置的同步问题,质点弹簧系统能够在较大程度上保持稳定。对于质点位置积
分的局部截断误差为,因此差分格式具有阶精度,该精度对于一个实时模拟系统
来说已经满足需要了。另外,内力和部分外力的计算需要用到质点速度项,可以由式()
计算得出:
弹簧动态变形约束算法
采用理想弹簧模拟电缆束的受力变形时,弹簧的伸长与弹簧受力成正比关系,这将导致不
真实的变形结果:如果弹簧强度过大,会引起电缆束的抖动;强度变小,会出现所谓“超
弹性”的现象,电缆将发生高弹性变形率,这将严重影响电缆的真实性。原因在于一般弹簧的
受力变形曲线并不是理想的线性关系,其非线性关系如图所示。图中横坐标表示弹簧所
受的合力,纵坐标表示弹簧的伸长量,τ为弹簧的最大伸缩率。
图弹簧伸长量与力关系曲线
为使弹簧质点模型的仿真达到较为真实的效果,必须对系统中各质点的运动进行动态修正
来实现弹簧的变形约束,以确保弹簧的伸长率在线性弹性区内。
对于电缆分支段上的任意质点,设与之相连的质点集合为…,相应的弹簧
集合为…。对于任意弹簧∈…,满足下式:
ττ
其中为弹簧的原长,为弹簧的最大约束长度,为弹簧的最小约束长度。
即弹簧的长度应满足变形约束():
≤≤
设当前时刻为,质点在时刻的位置和速度分别为和,经过一个时间步长后,80 
位置和速度分别为和。则弹簧动态变形约束算法描述如下:
步骤遍历计算时刻,所有弹簧∈…的长度,如果遍历结束,转
入步骤;否则转入步骤;
步骤如果满足约束条件(),则转入步骤;否则,记下相应的弹簧和质点
,转入步骤;
步骤如图所示,将质点在时刻的速度分解为—和⊥,其中—方向平行
于,⊥垂直于—。转入步骤;—和⊥分别由下式得到:
×××⊥
—
其中为的单位矢量。
图弹簧动态变形约束算法示意图
步骤对质点和进行速度更新:如果弹簧长度大于最大约束长度,如图(),
使用式()更新速度,转入步骤;如果弹簧长度小于最小约束长度,如图(),则
使用式()更新速度,转入步骤;
⊥—当
—⊥当
速度更新的目的是在确保质点弹簧系统总动量不变的条件下,减小质点和分离的速81 
度或者使它们靠拢,以防止抖动现象的产生,从而提高模拟的真实性。
步骤算法结束。
电缆束网格变形更新
电缆束的控制模型通过质点弹簧系统对电缆束结构进行实时的变形仿真,此外,电缆束的
显示模型要根据控制模型进行实时的更新才能真实模拟电缆束的几何外形。电缆束网格变形的
思想即根据相邻质点的位置计算矢量,并把该矢量作为质点所在圆截面新的法向矢量,根据
个法向矢量构造旋转四元数,然后对圆截面周向的顶点进行旋转变换,从而实现更新圆柱面上
三角面片形状和位置的目的。
图电缆束网格根据质点位置更新示意图
如图所示,电缆束网格变形的算法具体描述如下:
步骤设当前时刻为,遍历所有质点,如果遍历结束,转入步骤;否则转入步骤;
步骤圆截面周向上顶点集合为…,计算时刻圆截面周向上每个顶点
的位置,转入步骤。的计算过程如下:
在时刻和上次更新时刻,质点所在的圆截面分别为和,圆截面对应的法向矢
量分别为和。
对于普通的圆截面,如图()所示,由相邻质点和确定,满足∥
,和分别为质点和在时刻的位置。对于端面圆截面,如图()
所示,由直径最大的电缆束端截面相邻两个质点和确定,满足∥,
为质点在时刻的位置。即:
当为端截面时
当为圆截面时
如图()所示,根据和旋转圆截面周向上的顶点。其中旋转所绕的单位矢82 
量和旋转角度θ满足式():
××
θ
设和分别为顶点在和时刻的位置,和分别为质点在和时刻
的位置,则旋转变换过程为矢量绕单位矢量旋转θ角度得到新的矢量。本文通
过构造旋转四元数来实现顶点位置的更新。根据矢量和角度θ构造的旋转四元数为:
θωθθθθ
ωθ
,
令和分别为矢量和扩展得到的四元数,即扩展得到的四元数标量为
,即有:
,,
因此,矢量根据四元数旋转得到矢量的计算公式如下:
其中为的共轭。综上所述,顶点的新位置可以通过式()—()计算
获得:
ωωωωωω
步骤如果质点所在的圆截面为最大端截面,则该端截面上其他所有端截面的集合为
…,如图()所示,利用式()计算时刻,所有端截面∈…
周向上顶点的位置。转入步骤;
步骤算法结束。
电缆零件装配流程
电缆零件的装配根据电缆零件的拾取位置有不同的操作方式,一般先使用整体方式将电缆
零件移动到目标位置附近,这个过程电缆以刚性零件方式运动,然后分别使用电连接器方式和
电缆束控制方式将电连接器和电缆束逐段固定到目标位置,这个过程电缆束以柔性体方式运动。
电缆束的固定过程为计算拾取面片所在的圆柱面,并设置圆柱面两端的质点属性为不可动。图83 
4.28 示出了电缆束以柔性体方式进行装配的流程。
图电缆零件装配柔性仿真流程
在遍历所有质点,计算质点所受合力、速度、加速度以及下一时间步长的可能位置时,需
要先对质点的可动属性进行判断,如果质点属性为不可动,则在每个时间步长保持该质点的位
置不变。
电缆束的碰撞检测方面采用了层次包围盒方法。它不但构造简单而且更新的速
度也较快,是处理柔性体碰撞检测问题的有效策略。它对物体或几何基元进行划分,直到达到
某个叶子结点的为止,其设计理念是避免对所有几何基元进行穷举碰撞测试。自碰撞检测是电
缆束变形模拟中的另一个关键。由于电缆束可能发生任何形变,电缆束运动引起的碰撞或渗透
会很多,因而自碰撞检测是一项非常复杂而耗时的工作。使用包围球对辅助电缆束的自碰撞
检测。准确检测到面片相交后,需要对电缆束碰撞后的真实情况进行仿真,即碰撞响应。碰撞
响应目的就是把碰撞检测和相交处理的结果整合到仿真过程中。本文采用动态碰撞响应的方法
,即先用数值积分来确定质点在某一时刻的状态(位置和速度),同时系统事先也要设置一
个初始弹力,然后通过对各种力的计算来反映真实的碰撞效果。如式()和()。按84 
这种方法进行碰撞响应可有效提高仿真效率。
一般来说,面片模型的渲染是比较耗时的,因此不必在质点弹簧系统的每次迭代计算后就
进行电缆束网格的变形和渲染,在视觉允许的范围内(显示频率大于每秒帧时,人眼就能感
觉到图形的显示是连贯的),可以通过牺牲每秒显示的帧数来保证显示的质量,即在多个时间步
长的积分求解后对电缆束进行网格的变形和渲染。本文使用固定时间步长,动态改变每次显
示间隔的方法:
其中为每秒钟显示的帧数。
本章小结
本章对虚拟装配的交互辅助技术进行了研究,主要的研究工作有以下几个方面:
()研究了虚拟环境下包括刚性零件和电缆零件的具有交互辅助功能的装配流程,提出约
束元素包围盒的概念及计算方法,并用于装配意图的捕捉,提出装配约束的多层识别和智能确
认方法,可有效减少约束的误识别和漏识别现象,并提出了装配意图捕捉效率评估方法。
()根据约束元素的特征参数和配合类型,提出了基于位姿变换元素分解的约束精确定位
求解算法,将位姿变换分解为点到线上、点到面上和直线平行种位姿变换情况,该方法可快
速有效地实现约束元素定位。并通过对零件自由度的求解和目标约束方向上的运动分量映射,
提出了基于约束元素投影的装配运动导航方法,该方法可有效保证虚拟环境下零件的装配运动
精度。
()研究了装配约束关系的动态解除方法和紧固件装配工具的操作方法。提出了零件的可
拆卸推理算法和约束关系的动态解除准则,研究了虚拟装配中紧固件工具的装配操作过程,并
对螺钉旋具类和扳手类工具分别进行了约束和操作空间分析,基于上述分析,提出了工具在虚
拟装配中的验证方法。
()基于质点弹簧系统研究了虚拟环境下可展现电缆零件柔性的装配方法。阐述了虚拟环
境下的三种电缆装配操作方式,分析了电缆束质点弹簧系统的动力学特性,使用积分法
对质点弹簧动力学微分方程进行求解,为保证电缆的真实性,提出了弹簧动态变形的约束算法
和电缆束的网格变形更新算法,最后根据各个算法给出了电缆零件的装配仿真流程。85 
第五章面向虚拟装配工艺的顺序规划及路径规划
引言
装配顺序规划和路径规划是装配工艺设计的主要内容,对装配生产组织方式的选择和装配
工装夹具的设计等都有直接的影响。装配顺序规划是通过分析装配结构设计中各个零件之间
的几何拓扑关系及各个零件之间的连接关系,并在一定的工艺条件约束下,求解出一条或若干
条不仅几何和工艺可行,且性能优良的装配顺序。所谓几何和工艺可行是指:装配过程中工
具能进行预定的操作,在几何上不发生干涉,且装配操作符合实际的施工习惯和技术要求。装
配路径规划是指根据确定的零部件装配顺序,对零件从装配初始位置到装配目标位置的空间运
动路径进行设计,当零件沿该路径进行装配时,不会与环境中的其它物体,如设备、工装夹具
以及已装配零部件等发生碰撞。进行装配路径规划的目的是实现可行的装配,并起到保护零件
和更快速有效装配的作用。
航天产品是典型的复杂产品,合理的装配顺序能够显著提高产品质量,缩短装配周期。传
统上航天产品装配顺序是在物理模型装配的过程中根据工艺师的经验人为规划并反复试装确定
的,该方法在新产品的装配工艺设计上存在周期长、成本高等缺点。因此航天产品的装配设计
需要一种快速稳定的装配顺序规划方法来获得最优的装配顺序,并基于建立的装配顺序获得可
行的装配路径。本章展开面向虚拟装配工艺的顺序规划和路径规划方法的研究。
面向虚拟装配工艺的装配顺序规划
装配顺序规划是典型的非确定性多项式,优化问题,对此
国内外学者开展了大量研究。其方法主要分为以下几种:
()交互式评价方法:
随着三维设计技术和虚拟现实技术的发展,三维模型为装配顺序的规划提供了交互
途径,设计人员可有效利用自身的知识和经验,通过对装配模型进行装配或者拆卸得到可行的
装配序列,再根据装配工艺上的约束从这些装配序列找出较优或最优的装配序列。交互式方法
的局限性在于过于依赖人的知识和经验,具有盲目性和不确定性,从而导致所得到的装配序列
稳定性不足,而且对于大型复杂产品,装配工艺复杂程度高,仅通过人机交互难以获得最优的
装配顺序。
()几何推理方法:
几何推理方法中最具有代表性的算法是基于拆卸或基于图分解的装配序列生成算法和割集
生成算法。其基本思想是根据某种规则将产品划分为任意可行的两个子装配体,然后再将每个86 
子装配体拆分为更小的子装配体,不断重复上述步骤,直至拆分到单个零件。该方法可根据零
件几何约束、干涉检查所拆分的各个子装配体进行分析,生成所有几何可行的装配顺序。但如
果装配体零件数目过多,则易产生组合爆炸,因此不适合复杂产品的装配顺序规划。
()智能启发式算法:
典型的算法有遗传算法、模拟退火算法、蚁群算法、实例推理等。一般而言,随着产品中
零件数量的增加,产品装配顺序的求解空间也迅速地复杂起来,普通的方法难以求解,而这些
启发式算法在非线性规划、组合优化等问题求解中有良好表现,因此被应用于装配顺序规划的
研究中。但是由于装配的复杂性和多样性,启发式算法难以应用到各类产品结构的装配顺序求
解中,仅对于特定产品的装配顺序求解比较有效,其适用范围具有一定的局限性。而且由于缺
乏考虑装配过程因素和操作因素,得到的装配顺序与实际的装配工艺差别较大,不具有工程意
义,难以应用。
因此,针对上述装配顺序规划方法的缺点,利用虚拟装配技术,将交互式评价方法和智能
启发式算法结合起来,提出面向虚拟装配工艺的装配顺序规划方法,其主要思想为:在虚拟装
配场景中,借助交互辅助技术,对产品零件进行装配,建立并优化零件之间的装配优先关系,
同时在建立的刚柔混合装配层次关联模型中记录零件在装配过程中的工装夹具等工艺信息。在
此基础上,根据装配优先关系生成初始可行装配序列,并使用粒子群改进的遗传算法对初始可
行装配序列计算出工艺最优的装配顺序。最后根据计算出的最优装配顺序在虚拟装配环境中进
行仿真验证,并生成新的工艺约束和评价准则,直至得到满足工艺需求的最优装配顺序。面向
虚拟装配工艺的顺序规划流程如图所示。
图面向虚拟装配工艺的装配顺序规划流程87 
面向虚拟装配工艺的顺序规划方法既可利用虚拟装配技术的直观性和交互性,充分发挥人
的经验和知识,又可利用启发式算法的智能性,在庞大的求解空间中寻求出最优的装配顺序,
实现人机协同的装配顺序规划。
优先约束关联关系的表达和生成
约束指零件之间的空间及技术上的制约关系及关联性,分为几何性约束和工艺性约束。其
中几何性约束决定了产品装配顺序的可行性,工艺性约束则体现产品装配顺序的优劣性。在本
文的研究中,将几何性约束通过优先关系来表达,而工艺性约束通过适应度函数进行描述。本
节研究了几何性约束的表达和生成。
优先约束关联矩阵
假设产品的零件集合为,已装配零件集合为,待装配零件集合为,其中中的元素
数目为。则存在以下关系:
∩∪Υ
对零件装配的优先约束关系进行如下的定义:
定义对于零件∈,如果零件∈,使得对的装配形成空间制约关系,
则的装配应优先于,称对形成装配的优先约束关系。
优先约束关系包括直接接触约束和非接触约束,如图()所示,零件对形成装配
的接触优先约束关系,而对形成非接触优先约束关系。因此对零件装配的关联关系进行如
下定义:
定义对于零件∈,≠,如果和存在几何面上的接触,称和具有
装配的关联关系。
对于图()示出的装配结构,其装配关联图如图()所示。
图典型结构装配体及其装配关联图88 
本文通过定义优先约束关联(,)矩阵来
表达零件之间的几何优先关系和接触联接关系。
定义优先约束关联矩阵由一个×的矩阵×≤≤表示,其中表
示产品中的零件数量。对于矩阵中的元素做如下定义:
如果,表示零件为装配体第一个安装的基准件;基准件通常作为装配的定位基准
或尺寸基准,一般是形状规则并与其他零件具有最多的联接及配合关系的零件。
如果,表示零件和之间不存在优先关系和联接关系;
如果,表示零件和之间存在联接关系;
如果,表示零件必须在零件前装配。
基于对矩阵的定义,矩阵具有下述性质:
性质当零件和存在联接关系时,和的值一定为非,如果两者不存在优先
约束关系,则和的值都为,当存在优先约束关系时,和其中一个值必为。即:
当时,或,分别表示和无优先约束关联关系和存在非接触优先约束关系;
当时,或,分别表示和仅存在联接关系和存在接触优先约束关系;
当时,或,分别表示和存在非接触和接触优先约束关系。
性质零件所受到的优先约束数量为,对其他零件施加优先约束的数量为,所
具有的关联关系数量为,则满足下式:
∑∑
∑
∑
其中时时
时
时
因此,由上述定义,图()中装配体的优先约束关联矩阵为:
×89 
5.3.2  优先约束关联矩阵的生成
产品的装配顺序应满足优先关系才能实现装配过程在几何上的可行性,几何优先关系由装
配体的结构特征和零件间的配合关系确定,在以往的研究中,基本都将装配方向约定为
与坐标轴平行的个正交方向,并通过建立每个方向的干涉矩阵来判断装配顺
序的可行性。但是对于图()所示的装配结构,由于零件的装配拆卸方向与坐标轴方向
并不平行,因此该方法是不适用的。而在航天产品中,类似的装配结构大量存在,因此完全通
过自动的推理,无法获得准确完备的优先约束关系,本文通过自动推理和虚拟环境下人机交互
相结合的方式生成优先约束关联矩阵:
步骤在环境中生成装配体模型的装配关联图,并用邻接矩阵表示。其中
×≤≤,元素满足下列情况:
();
()如果零件和之间不存在联接关系,则;否则,。
步骤人机交互确定装配基准件,设基准件为,此时矩阵中的元素。
步骤由定义可知,如果零件对形成装配的优先约束关系,则在拆卸时,应
在前拆卸,否则,由于的存在,使得在空间任何方向都无法完全脱离该产品。根据
节零件的可拆卸性推理算法及可拆卸方向的推理方法,可以得到刚性零件的接触优先约束关
系矩阵。其中×≤≤,元素满足下列情况:
();
()如果零件和之间不存在优先约束关系,则;否则,。当对紧固类零
件使用工具进行拆卸时,如果零件违反了工具的操作范围,也认为和之间存在优先约
束关系。
步骤使',得到初始的矩阵,然后工艺人员根据知识和经验对初
始矩阵进行补充,根据定义,增加刚性零件的非接触优先约束关系和电缆零件的优
先约束关联关系。生成最终的矩阵。
可行装配序列的生成
可行的装配序列是指满足几何优先约束关系的装配序列,可行装配序列的解空间可以通过
装配联络图得到。由于航天产品的零件众多,为避免割集法获得可行装配序列易陷入组合爆
炸的问题,并为后续的粒子群遗传算法提供初始种群,本文根据优先约束关联矩阵随机地生成
可行装配序列,可行装配序列生成算法的主要思想为:利用装配关联关系提供装配序列的待装
配零件结点,优先约束关系保证装配序列的几何可行性。在每次迭代中,根据已装配的零件的
关联关系和优先约束关系生成待装配零件的集合,并随机从该集合中挑选一个零件添加到装配90 
序列中,直至所有的零件被选入装配序列,完成一个可行装配序列的随机生成。基于矩
阵的可行装配序列生成算法如图所示。
遍历矩阵
将零件加入到装配序列列表中;
将零件从待选择零件列表中删除;
清空可行候选零件列表;
遍历装配序列列表;
选择零件;
遍历待选择零件列表;
选择零件;
遍历待选择零件列表;
选择零件;
随机从中挑选一个零件加入中
将零件加入到可行候选零件列表中
遍历结束?
全部零件已添加到?
结束
否
是
否
是
否
是
否
是
否
遍历结束?
否
是
是
开始
初始化;
装配序列列表;
待选择零件列表≤≤;
可行候选零件列表;
图基于矩阵的可行装配序列生成算法流程
结合图所示的装配结构及其矩阵,下面对可行装配序列的生成过程进行详细说
明,图示出了可行装配序列的生成过程。91 
p3
p2 p7
p1
p8 p9
p4 p6
p5
p3
p2 p7
p1
p8 p9
p4 p6
p5
p3
p2 p7
p1
p8 p9
p4 p6
p5
p3
p2 p7
p1
p8 p9
p4 p6
p5
p3
p2 p7
p1
p8 p9
p4 p6
p5
p3
p2 p7
p1
p8 p9
p4 p6
p5
p3
p2 p7
p1
p8 p9
p4 p6
p5
p3
p2 p7
p1
p8 p9
p4 p6
p5
p3
p2 p7
p1
p8 p9
p4 p6
p5
(1) (2) (3)
(6)(5)(4)
(7) (8) (9)
p9
p1
p5
已经装配的零件
可选装配的零件
暂不装配的零件
优先约束关联关系
关联关系
装配顺序
图可行装配序列生成过程示意图
首先初始化三个列表集合:;;。其中
为装配序列列表,列表中的元素指已装配的零件;为待选择零件列表,指所有尚未装配的
零件;为可行候选零件列表,指可进行装配的零件。
然后选择基准件作为第一个装配的零件,此时,根据的关联关系从中选
择可选零件集合为,再根据优先约束关系判断,删除不可行的零件,最终
的可选零件集合为。此时;;。如图
()所示。
再随机从中选择一个零件进行装配,假设为,此时;
;。根据中和的关联关系从中选择可选零件集合为,
再根据优先约束关系判断,删除不可行的零件,最终的可选零件集合为。此时;
;。如图()所示。
重复上述步骤依次按照中元素根据优先约束关联关系从中选择可选零件集合。并92 
随机从中选择零件进行装配,直至中所有的零件都已装配,即
;;。如图()所示。
从上述可行装配序列的生成算法中可以看出,由于仅考虑的了几何上的可行性,如图
所示随机生成的可行装配序列,零件装配到,并未用螺栓
进行紧固,而直接开始装配,显然其结果并不具备工程意义,因此需要在此基础上对可行的
装配序列进行优化选择,得到工艺上最优的装配顺序。
基于矩阵的可行装配序列生成算法具有如下特点:在每次进行装配的零件中都是随
机选择的,并且根据优先约束关联关系保证了装配顺序的可行性,因此从理论上可以得到所有
可行的装配序列,其结果也组成了装配序列优化的求解空间,而且该生成算法可有效的避免组
合爆炸的发生。
基于粒子群遗传算法的最优顺序生成
遗传算法(,)是一类借鉴生物界自然选择和自然遗传机制的高度并
行、随机、自适应搜索算法,由美国教授于年首先在《自然结合人工智能系统
的适应性()》一书中提出的。它是模仿自然界生物进
化过程中“物竞天择,适者生存”的原理而进行的一种多参数、多群体同时优化的方法,其主
要特点是处理传统搜索方法难以解决的复杂和非线性问题。粒子群算法(,
)起源于对鸟群觅食过程的模拟,是一种具有代表性的群智能(,
)方法,由美国的与于年首先提出。从随机解出发,
通过迭代寻找最优解,通过适应度来评价解的品质,相比,更为简单,它没有中
的“交叉”和“变异”操作,它通过追随当前搜索到的最优值来寻找全局最优。算法以其
实现容易、精度高、收敛快等优点引起了学术界的重视。
虽然在工程领域得到了广泛的研究和应用,然而常规的在装配顺序规划的应用中存在
以下问题:装配顺序求解结果严重受初始值的影响,造成求解结果的不稳定,不合适的遗传操
作会导致进化种群失去多样性而早熟收敛,而且由于求解过程中常常伴随冗余的迭代,造成收
敛速度过慢,求解效率不高。
航天产品具有和普通产品不同的特征和装配要求,因此其装配顺序的规划具有多目标和非
线性优化的特点。相对于常规遗传算法,粒子群算法的个体具有记忆功能,可根据历史信息和
当前状态来控制进化幅度和方向,粒子能够更快地收敛于最优解。本文根据航天产品装配
的特点,并考虑装配过程中资源的作用,构建多目标综合最优的适应度函数,并结合遗传算法
优秀的全局搜索能力和粒子群算法的快速收敛性,提出一种基于粒子群遗传算法()
的航天产品装配顺序优化方法。93 
5.5.1  基于的编码表达
基因组与染色体的编码表达
基因组用来在遗传算法中表达装配体中每个零件及与其相关的装配信息。由于航天复杂产
品的装配具有所需的装配资源品种多、装配零部件类型复杂、装配精度高以及装配过程中对装
配人员的协作要求高的特点。因此在基因的设计中应包含上述信息,本文采用码位不定长的
元组对航天产品的零件进行编码,则基因的编码形式可以表示如下:
其中,表示装配体中零部件的编号,表示零部件的类型,表示装配该零部件所
用到的工具,表示装配零部件所用到的夹具,表示装配过程中用到的工艺辅料,
表示零件最终的装配位置,表示装配该零件时需要协同操作的工人数目。
基因各码位的赋值规则如下:
()零部件的编号,工具的编号,夹具的编号和工艺辅料的编号来源于企业统一的资源分
类编码。基因中相应码位的值由分类编码系统导出,通过基因码位与
编码系统的集成,既保证了编码的唯一性,也便于装配顺序规划结果与的集成。编码时,
当装配的零部件不需要工具、夹具或者辅料时,相应码位赋值为;
()零部件的类型通过资源分类编码的大类分类规则获得,并定义成紧固件类、仪器类、
刚性零件类和电缆零件类个类别,分别用位十进制码表示为:,,,;
()零件的装配位置用元组()进行编码,、、分别表示最终装配状态下零件
在中心世界直角坐标系中的位置。编码时通过的二次开发接口读取装配体的位姿信息获
得,值为浮点型。
()装配工人的数目用位的十进制码来表达。取之间的整数,表示参与该零件装
配的工人数目。
染色体由一系列表达装配体零部件的基因组成,用来表示装配体的一个装配顺序,并且其
中包含了整个装配过程中相应的装配工艺信息。其结构形式如图所示。
图染色体编码结构示意图94 
5.5.1.2  粒子的运动和编码表达
粒子群算法中,在维空间由个粒子组成粒子群,每个粒子都是维搜索空间中的一
个可能解。粒子通过跟踪个体极值和全局极值来更新自己的位置和速度,个体极值是一个粒子
曾经经过的最佳位置,全局极值整个粒子群中所有粒子曾经经过的最佳位置中最优的一个。粒
子在解空间中运动,并根据粒子自身迄今最优解和全种群迄今最优解动态调整进化速度和方向。
通过不断的迭代,求解出最优结果。因此可以看出,在中,优化结果取决于粒子运动的速
度和位置。其中每个粒子根据如下的公式来更新自己的速度和新的位置:
其中,是粒子的速度向量,是当前粒子的位置,表示粒子本身所找到的最优解
的位置,表示整个种群目前找到的最优解的位置,、和表示群体认知系数。
本文将中的一个染色体作为中的一个粒子,中的染色体种群形成粒子群作为
的输入,更新位置和速度后的粒子重新转化为染色体作为输出重新进入中进行遗传操
作,粒子群形成染色体种群,即每个粒子的位置向量和速度向量均对应装配体的一个装配顺序。
则种群为,装配体零件数目为的第个粒子的位置向量和速度向量可表示为:
其中≤≤,≤≤,和为装配顺序中零件的编号,即对应染色体中的一个基
因。
适应度函数的设计
航天产品最优的装配顺序不仅要求装配效率最高,手工协同装配的难度最小,而且对仪器
等零部件的装配有精度和安全性的要求,因此根据航天产品装配的特点,本文定义装配收益函
数来衡量装配顺序的好坏,针对具体的产品对象定义相应的评价准则,每个评价准则对最终的
装配收益有直接的影响,装配收益值越高,表示装配顺序越符合评价准则。在前人的研究基础
上,根据虚拟装配建模过程中所包含的信息,本文定义的评价准则包括装配体最稳定、装
配操作的连续性最好、仪器设备的安全性最好、装配人员的变动次数最少以及装配位置变动最
少。则每装配一个零件,所对应的装配收益值为:
∑
式中:95 
()表示该零件装配时的稳定性因子,零件装配的稳定性直接影响装配的可行性和难
度,由零件类型因数、与已装配零部件的装配约束类型因数和联接关系因数确定。由于
航天产品上零件的固定基本都是通过螺栓连接、铆接、焊接以及绳索的捆扎完成的,零件本身
如果属于紧固件类型,则能保证装配体的稳定,非紧固件的零件通过与紧固零件的配合装配也
能形成稳定的装配体,因此稳定性因子的值可由下式得到:
ααα
其中α、α和α分别是各因数的权重系数,为之间的实数,值由工艺人员按照产品的
实际情况确定,并规定ααα。各因数、和的取值规则如下:
零件类型非紧固件类
零件类型为紧固件类
,
,
与已装配零件不存在紧固联接
与已装配零件存在紧固联接约束
,
,
与已装配零件不存在联接关系
与已装配零件存在联接关系
,
,
因数通过零件属性特征获取,因数根据和已装配零件之间的配合关系判断,因数
根据矩阵中的关联关系获得。
()表示该零件装配时的连续性因子,装配的连续性影响装配的效率,由零件类型变
化因数、工具变化因数和夹具变化因数确定。由于航天产品总体装配过程中手工装配为
主要形式,不同的零件类型有着较大差异的装配特点和精度要求,连续同类型零件的装配可有
效减少技术要求的变化,从而使操作工人在相似技术要求的条件下进行连续的装配。而工具和
夹具的变化会产生工具选用、工具交换、装夹定位等多余操作,对造成装配效率上的影响。连
续性因子的值由下式得到:
βββ
其中β、β和β分别是各因数的权重系数,为之间的实数,值由工艺人员按照产品的
实际情况确定,并规定βββ。各因数、和的取值规则为:
零件类型改变
零件类型没有改变
,
,
装配工具改变
装配工具没有改变
,
,96 
夹具改变
夹具没有改变
,
,
因数通过相邻两个零件属性特征的比较获取,因数和根据混合装配层次关联模
型中有向边的工艺信息来判断得到。
()表示仪器类零件的安全性因子。一般说来,仪器类零部件应尽量在总装后期进行
安装,以减少安装过程中的碰撞等因素造成的损害。因此安全性因子可以用仪器零件的装配次
序来表征,越大,表示仪器的装配工序越在后期进行。的值由下式得到:
零件非仪器类
零件为仪器类
,
,
()表示装配人员变动因子。由于航天产品的装配一般是工位固定,装配人员围绕工
位移动的生产方式,在装配的时候,经常需要多个人协作完成一个装配工步,由于舱体的装配
空间较小,频繁的人员变动直接影响装配效率,因此较少的人员变动会有效提高装配效率。
的值由下式得到:
人员数目改变
人员数目没有改变
,
,
()表示装配位置变动因子。航天产品体积大,装配人员常常需要进入产品内部操作,
操作难度较大。因此应尽量装配相对距离较近的零件,以减少装配人员在产品内部的移动难度。
的值由下式得到:
其中()指第个装配的零件最终位置,为被定义为基准件零件的包围盒
的对角线长度。
由于在进化过程中会出现大量不满足几何优先约束关系的个体,这些不可行个体的存在会
降低优良个体的遗传概率,因此应减少这些不可行个体的遗传概率,本文通过增加惩罚因子对
违反几何优先约束关系的个体进行适应度值的惩罚。惩罚因子的值由下式得到:
∈
∈≠
,,对对于于矩矩阵阵
式中…,表示已装配零件的集合。
综上考虑,设计适应度函数如下:
∑λ∑λ97 
式中:为每个染色体,和λ分别为各评价因子和惩罚因子的权重系数。
基于的交叉算子
粒子群算法是通过个体之间的协作寻找最优解的,并且只有群体的最优位置单向的传递信
息给其它粒子,并且个体之间不直接共享信息,总是跟随当前最优解在求解空间内进行搜索。
相对于遗传算法的均匀进化,粒子群算法能够更快地收敛于最优解。因此本文采用粒子群算法
代替传统遗传算法的交叉算子来生成新的个体,以加快遗传算法的收敛速度。
由于装配顺序规划的特殊性,经典粒子群算法无法对基于装配顺序染色体的粒子进行速度
和位置的更新迭代,因此针对装配顺序规划的特点,必须对粒子的速度和位置更新公式进行重
构:
8
8
式中和分别表示第个粒子在第代时的速度向量和位置向量,为第
个粒子在历史上本身适应度函数值最大的个体,为整个种群在历史上适应度函数值最大的
个体。定义为概率算子,定义8为交换算子,、是的实数。因此式()的第一
部分表示第个粒子与历史最优个体有的概率进行交换操作,结果为。第二部
分表示第个粒子下一代的速度向量为与全局最优个体以的概率进行交换操
作。第三部分表示第个粒子下一代位置向量的更新,其结果意味着具体实施了中染
色体的交叉操作。
交换算子8的操作规则可描述为:根据随机生成的个基因交换位,在个交换位之间的
基因称为交换基因。将个父代粒子(染色体)的交换基因按照对方粒子中的基因顺序重新排
列,并形成个子代粒子(染色体)。该方法保证了子代装配顺序几何上的可行性,避免不可行
后代的生成,可有效提高算法的收敛速度。交换算子8的示意图如图所示。
图交换算子的操作规则示意图98 
因此,基于粒子群算法的交叉操作算子操作流程可描述如下:
步骤对于规模为的种群,对于每个粒子(染色体),根据式()初始化
和,其中表示取适应度函数值最大的个体;并设定交换概率、的值;
步骤对于每个粒子(染色体),以的交换概率对和进行交换算子操作,
并将交换后的赋值给临时粒子,再以的交换概率对和进行交换算子操作,并
将交换后的赋值给;
步骤如果,则令;
步骤如果,则令;
步骤如果,转步骤;否则,算法结束。
基于的装配顺序优化
选择和变异算子的操作
()选择算子
使用经典的轮盘赌选择算法,将各个染色体的适应度函数值(,)
在种群整体中所占的比例转化为随机选择的概率,显然越大,进入到种群中的概
率越大。
()变异算子
采用基于次序的变异操作:随机产生两个变异位,然后交换染色体上两个位置的基因,
从而生成变异后的子染色体。图为变异算子操作示意图。
图变异算子操作示意图
装配顺序优化流程
综上所述,本文根据优先约束关联矩阵随机地生成可行装配序列作为初始染色体,并将粒
子群算法和遗传算法结合,通过染色体和粒子的互换,把粒子群算法作为遗传算法的交叉算子99 
来提高装配顺序优化的收敛速度,基于粒子群遗传算法的装配顺序优化算法如下:
步骤初始化种群规模,交换概率、,变异概率,最大遗传代数和初始遗传
代数;
步骤根据优选约束关联模型随机生成个可行装配序列作为染色体形成初始种群;
步骤计算种群中每个个体的,并记录最佳适应度值(,
)和个体;
步骤进行选择操作,根据轮盘赌算法选择较大的个体作为优良种群用于交叉操作,
选择次,生成种群规模的个体;
步骤根据交换概率、的值使用基于的交叉算子对种群进行交叉操作,生成交
叉种群;
步骤根据变异概率从交叉种群中选取个体进行基于次序的变异操作;
步骤用变异操作生成的新种群代替原种群,遗传代数。如果,转步骤;否
则转步骤;
步骤输出对应的装配顺序和每代的适应度函数平均值(,
),算法结束。
装配顺序规划应用实例与分析
应用实例
图某部件装配体结构示意图
以航天产品某部件级装配体验证上述基于的装配顺序规划算法,去除某些组件的
部件结构示意如图所示。其中图和所示的是轴测爆炸视图和端面装配图,部件装100 
配体沿端面向和向的截面剖视图如图和所示。该部件的零件及相应装配属性
如表所示。其中零件的属性这里用顺序号表示,起标识作用。属性通过二次开
发接口从系统中获取,基准件的包围盒对角线的长度为。
图某部件装配体结构示意图
根据装配模型生成初始的矩阵,并在虚拟装配环境下通过工具的拆卸,生成最终的
矩阵,如表所示,其中根据工具操作空间验证生成的优先约束关系有:螺栓、、
在拆卸时,内六角扳手受到支撑板的限制,导致操作空间不够;螺钉在拆卸时,螺钉
旋具受到仪器和仪器的限制,生成优先约束关系;螺栓在拆卸时,套筒扳手受到仪
器和仪器的限制,因此需要优先装配。
根据工程实际情况,经过一些实验,设置了表所示的适应度函数各个参数的权重。该
参数仅供参考,设计人员可根据经验进行调整。
表航天产品某舱段装配零件列表及相应装配属性
序号名称单位
舱体吊车支架小车
电池
螺栓××内六角扳手
电缆钳子钢丝
电池
螺栓××内六角扳手
螺栓××呆扳手
支撑板101 
p9  螺钉××螺钉旋具
电连接器
电缆钳子钢丝
仪器
螺钉××螺钉旋具
减震器
螺钉××螺钉旋具
仪器
阻尼器
螺栓××套筒扳手
仪器
仪器
螺钉××螺钉旋具
电缆钳子钢丝
电缆钳子钢丝
仪器
螺栓××内六角扳手
阻尼器
电连接器架
螺钉××螺钉旋具
表某舱段优先约束关联矩阵102 
p19  0  0  0  0  0  0  0  1  0  0  0 0 0 0 0 0 1 2 0 0 0 0 0  0  0  0  0  0
p20  1  0  0  0  0  0  0  0  0  0  0 0 0 0 0 0 0 0 0 0 2 2 0  0  0  0  0  0
p21  1  0  0  0  0  0  0  0  0  0  0 0 0 0 0 0 0 0 0 1 0 0 0  0  0  0  0  0
p22  1  0  0  0  0  0  0  0  0  0  0 0 0 0 0 0 0 0 0 1 0 0 0  0  0  0  0  0
p23  1  0  0  0  1  0  0  0  0  0  0 0 0 0 0 0 0 0 0 0 0 0 0  1  0  0  0  0
p24  1  0  0  0  0  0  0  0  0  0  0 0 0 0 0 0 0 0 0 0 0 0 0  0  2  1  0  0
p25  1  0  0  0  0  0  0  2  0  0  0 0 0 0 0 0 0 0 0 0 0 0 0  1  0  1  0  0
p26  1  0  0  0  0  0  0  0  0  0  0 0 0 0 0 0 0 0 0 0 0 0 0  1  2  0  0  0
p27  1  0  0  0  0  0  0  0  0  0  0 0 0 0 0 0 0 0 0 0 0 0 0  0  0  0  0  2
p28  1  0  0  0  0  0  0  0  0  0  0 0 0 0 0 2 0 0 2 0 0 0 0  0  0  0  1  0
表适应度函数的权重设置
参数名称权重数值
稳定性因子
零件类型因数α
约束类型因数α
联接关系因数α
连续性因子
零件类型变化因数β
工具变化因数β
夹具变化因数β
安全性因子
人员变动因子
位置变动因子
可行性惩罚因子λ
遗传代数
适
应
度
函
数
值
图基于的收敛特性曲线103 
对相关参数经过正交实验测试,设置初始种群规模为、交换概率、
变异概率和最大遗传代数。算法的运行结果如图所示。从图中可以看出,
在第代收敛于最优解,并一直稳定在该值,也趋向于稳定,在
之间浮动。获得的最佳装配顺序为“※※※※※※※※※※
※※※※※※※※※※※※※※※※※
”。该顺序经过虚拟装配系统验证后,该装配顺序符合该航天部件的装配工艺要求,满足工
程应用的需求。
结果分析
遗传代数
适
应
度
函
数
值
图基于的收敛特性曲线
遗传代数
适
应
度
函
数
值
标
准
差
图与的标准差曲线104 
基于同样的适应度函数和遗传参数:始种群规模、交叉概率、变异概率
和最大遗传代数,应用常规遗传算法(,)的运行结果
如图所示。结果显示在第代才收敛到最优解,并且其平均适应度函数值在明
显的下降后,稳定在之间。对比图和图可以得出:使用交叉算子的
在航天产品装配顺序优化问题上的求解性能明显优于,效率大概提高一倍。
图示出了随着遗传代数增加的基于和的标准差(,
)曲线。可以看出算法稳定以后,的集中在左右,而的数
值较大,在之间浮动,的个体进化较来说,更为平均和有序。
这是由于在进化过程中,所有的个体是在竞争中相互共享信息,整个种群是均匀地
向最优区域移动,并且个体不具有记忆功能,只反映当前状态,与历史状态无关,这种共享机
制和个体间的相互淘汰有利于保持种群多样性,增大搜索范围,便于寻求全局最优解,但是由
于其进化幅度和方向没有导向性,导致收敛速度较慢。而算法是通过粒子之间的协作而不
是竞争来寻求最优解的,这种协作是通过种群的最优位置单向地传递给其他粒子,粒子之间并
不直接共享信息,使得当前最优位置引导粒子协同进化,而且算法中的粒子具有记忆功能,
可根据历史信息和当前信息来控制进化幅度和方向,因此,一般情况下粒子均能更快地收敛于
最优解。
在装配顺序优化问题的求解过程中,将中的染色体(个体)转变为粒子,使用进
行交叉算子操作后,使个体都跟随每代中的最优个体进行进化,而且个体都围绕在最优个体周
围协同进化,比起中常规交叉算子的均匀进化策略,算法更易较快地收敛于最优解,并且
个体进化过程较为均匀。
遗传代数
适
应
度
函
数
值
图使用随机初始序列的收敛特性曲线105 
图所示的是在适应度函数和参数保持不变的情况下,使用随机初始序列代替初始可行
序列的的收敛特性曲线。从图中可明显看出算法在运行代后尚未收敛于最优解,
仅收敛于,说明航天产品装配顺序优化比一般装配结构的优化问题更为复杂,对
初始序列的可行性非常敏感,可行的初始序列能有效加快航天产品装配顺序优化问题的求解效
率,并提高算法的收敛性。
面向虚拟装配工艺的装配路径规划
传统装配路径规划方法
传统上装配路径规划有狭义和广义之分:狭义的装配路径规划是根据零部件在空间中的
几何信息,规划出零部件的无碰撞几何路径,其中装配路径可以用简单的直线表示,也可以用
复杂的空间曲线表示。规划的装配路径结果以一系列离散点的形式进行纪录。而广义的装配路
径规划是针对于机械手的自动化装配、柔性生产线装配或机器人装配而言,不仅考虑几何可行
性,还要兼顾动力学和控制的要求。它在狭义路径规划的基础上,在满足机械臂极限速度、极
限加速度约束的前提下,沿着路径规划生成的无碰撞几何路径,进行时间最优或精度最优的轨
迹规划,并确定零部件在装配路径各点处的位置、速度和加速度序列。对于面向虚拟装配工艺
的路径规划,不需要考虑装配单元在装配过程中的运动速度和加速度,故而只需得到满足优化
装配顺序的装配单元的路径即可。
国内外对装配路径规划的研究可归纳为以下主要方法:
()位姿空间方法。它把运动物体位姿的描述简化为空间中的一个点,同时根据运
动体计算物体间的空间障碍(),通过计算物体与障碍碰撞的临界角,在自由空间
中搜索最短路径,该方法多用于机器人手臂的路径规划,其模型描述是求解关键。
()方向多面锥代数法。它根据零部件的装配关系及产品结构,生成表示运动方向区
域的一个多面锥,在将装配运动分解为单步平移运动,在此基础上进行产品路径规划,该方法
常用于推导产品简单结构的装配路径。
()移动边界线法(,)。它是基于表达的零件实体模型
进行空间路径求解的算法。它使用移动边界线划分平面区域来寻找可行的不干涉路径,
其中是利用装配件区域内表面阻挡形态的边界来确定的。该方法常用于求解机械手的空
间运动路径。
上述方法偏重于理论研究,在实际应用中较难实现,或是很难实时地生成可行装配路径。
并且难以考虑装配的工艺可行性,因此上述算法难以应用到实际的装配路径规划中。随着
技术的发展,在环境下通过人机交互进行装配路径规划更为实用化。面向虚拟装配工艺的
人机协同装配路径规划旨在一方面对优化后的装配顺序进行验证,另一方面规划结果也为后续106 
的工艺设计提供了装配动画依据。
面向虚拟装配工艺的人机协同交互装配路径规划
图面向虚拟装配工艺的人机协同交互装配路径规划流程
面向虚拟装配工艺的人机协同交互式装配路径规划流程如图所示。在虚拟现实环境中,
当系统运行的每一帧开始,记录拾取对象的位姿,并基于第四章所述的交互辅助技术对操作
对象的装配运动进行导航,获取操作对象的新位姿为,然后实时判断操作对象是否与其他物
体发生碰撞:如果发生碰撞,则将操作对象返回到该帧开始时的位姿,否则,根据生成
新的装配路径结点,并将该结点加入到操作对象的装配路径链表中,进入到下一帧。由于交互
辅助技术的应用,使得零件的装配路径较为顺滑,不会出现抖动和折返现象。在记录零件装
配路径的同时,对视点的移动路径进行了记录,每个零件的装配路径对应一个视点路径,记录
视点位置可更清晰地对装配细节进行展示。
对于刚性零件,所记录的位姿可如实反映其运动轨迹。对于电缆零件,由于在其装配过程
中,电缆束会发生柔性的变形,而其变形过程难以记录。为了后续装配动画的生成,根据电缆
零件的局部坐标系原点生成装配路径点,仅对其路径进行进行记录。
装配的生成及工艺文件数据的提取
为了有效指导装配生产的进行,装配工艺设计结果需要以各种数据和文件的形式体现,其
中装配传统上是通过的产品结构配置功能或者与的集成功能获得的,对
于航天产品来说,操作较为繁杂。而装配工艺文件都是工艺设计人员在上进行手工编制,107 
效率低下。通过面向虚拟装配工艺的顺序规划和路径规划,不仅设计和验证了产品的装配工艺,
并且在这个过程中通过虚拟装配系统建立了产品的模型,该模型有效记录了装配
过程中所形成的各种工艺信息。因此装配信息和装配工艺文件数据可根据
模型自动生成,能有效缩短工艺文件编制时间。
装配的生成
在产品数据管理(,)系统中,装配体现了产品在装
配阶段的结构形式,在企业资源计划(,)和制造执行系统(,
)等系统中,装配对编制生产作业和调度计划及物料管理
等功能起着核心数据的作用。
装配的数据结构与存储
不同于工程(,),装配需要体现零部件之间的实际装
配层次关系,因此采用单层次视图结构对装配进行描述,所谓单层视图就
是在表中仅需记录装配零件之间的父子关系,其数据结构如图所示,表示出
了装配在数据库中的表结构。
表装配的数据库表结构
图装配数据结构
其中,装配体由子装配体、和零件、组成,子装配体由子装配体和零
件组成,子装配体由零件和零件组成,边上的数字表示零件数目。单层次视
图结构描述了装配体各个零件之间的父子关系及相应数量关系。在数据库表中,装配根
结点的父项版本号和父项均用表示,这里实际上是一个新装配体的顶层结
点标识。通过与零部件属性表的关联可以查询产品各组成零部件对象的属性,如变更记录、材
料、技术状态、质量状态、自制件或供应商、、、等及配额、供应商代码、配送方式、108 
库存量、库存位置及条码记录等信息。
向装配的映射
描述了产品在装配过程中的实际组成关系,因此装配可以通过
向单层次视图结构的映射生成,映射过程主要分为层次抽取和零件合并两个步
骤,如图所示。其中()为装配体的模型,()为装配结构树,()为装
配单层次结构。
图向单层次视图结构的映射示意图
具体算法可描述如下:
层次抽取:根据虚拟装配生成的,分别对产品级、部件级、组件级和零件级
图结点信息进行提取,并分别根据图结点之间的指针建立各级层次,生成装配结构树。具体过
程如图()所示,将产品级顶点作为装配结构树的根结点,遍历顶点子图指针所指
图结点中的顶点集,并根据有向边的顺序对各个顶点分别进行如下的遍历:
如果为刚性零件,如,直接作为装配结构树根结点的子结点;如果为电缆零件,如,将所
有电缆分支段和电连接器作为电缆零件的子结点,再将电缆零件作为根结点的子结点;
如果为装配体,如,重复类似顶点的遍历过程,直至所有子结点都是零件级顶点,然后
将生成的子树作为根结点的子结点,最终生成的装配结构树如图()所示。
零件合并:遍历装配结构树中所有度不为的结点(非叶结点),将结点中相同的子结
点进行合并,并记录合并数目,的子结点中有个零件,将其合并并记录数目,直至遍
历结束,从而生成装配的单层次视图结构,如图()所示。109 
5.8.2  装配工艺文件数据的提取
装配工艺文件数据模型
在实际的装配生产中,产品的装配工艺使用工序工步的形式来描述。将一个装配小组在一
个工作地点,对一个产品或部件连续进行的装配工作定义为一个工艺册,并将工艺册根据装配
体的复杂程度进一步细分为一组装配工序,每个装配工序根据具体的装配操作细化到一系列的
装配工步。装配工步是装配工艺的最小粒度,对应每一个零部件的装配操作。工艺册、装配工
序、装配工步的实体对象模型如图所示。
图装配工艺文件数据模型
工艺册由工艺册唯一标示,并和部件关联,并包括名称、阶段标记、文件状态等属性,
装配工序以工序作为主键,通过外键工艺册与工艺册关联,装配工步以工步作为主
键,并与装配件、工装夹具、装配辅料和装配动画相关联。
装配过程动画生成
装配过程动画是工艺文件的重要组成部分,由于在模装环境中记录了零部件的装配过程信
息,我们通过的二次开发接口在模块下对装配动画进行生成和制作,由于该
模块可以生成格式的视频文件,其图像压缩程度较高,适合于网络的传输和播放。根据
装配路径信息生成装配动画的流程如图所示。
装配工艺文件生成
中各个图结点中的顶点记录了进行装配的零部件,并包含零件的装配路径信110 
图装配动画生成流程
息,有向边记录了零部件之间的装配顺序及工艺信息,分别对应装配工艺文件数据模型中的装
配工步内容及相关的装配件、工装夹具、装配辅料信息,因此通过可以生成装配
工艺文件结构和主要信息。对图()所示的装配结构图进行组织合并,生成图()
所示的装配工艺目录树,添加中各顶点的有向边信息,生成对应的工艺册,如图
()和()所示。
对装配结构树进行工艺目录树的合并生成步骤如下:()仅保留产品级和部件级的装配体,
并生成相应的工艺册根节点;()根据装配结构树中的下一层结点生成相应工艺册的装配工序
结点;()最后将装配结构树中的剩余层次结点进行分解并生成相应装配工序的装配工步结点,
将相应层次结点及有向边中的装配件、工装夹具、装配辅料信息加入装配工步内容中。
图装配工艺文件数据模型111 
上述生成的装配工艺文件构成了装配工艺的骨架,在实际的应用中,还需要工艺人员添加
一些辅助信息,如编制单位、审核过程、工序的技术要求及质量检验信息等,最终形成完整的、
符合实际应用规范的装配工艺文件。
本章小结
本章对面向虚拟装配工艺的顺序规划和路径规划方法进行了研究,主要包括以下内容:
()航天产品的装配顺序优化具有多目标和非线性的特点,针对传统算法在该问题求解上
的不足,基于算法,结合虚拟装配系统良好的交互性,提出一种人机协同的航天产品
装配顺序优化方法。
()使用优先约束关联矩阵来描述零件间的优先约束关系和关联关系,并研究了粒子群遗
传算法的基因组、染色体以及粒子的编码表达方法。综合考虑装配连续性、装配资源的变动和
仪器设备的影响,提出了有工程意义的适应度函数的表达式,根据优先约束关联模型生成随机
的可行初始装配序列,并利用粒子群算法重构遗传算法的交叉算子对装配顺序进行优化。用一
个实例表明该方法较有较好的收敛性和稳定性,初始装配序列的可行性对装配顺序优化
的结果影响很大,可行初始装配序列能有效提高优化效率,并基于装配顺序的优化结
果可满足装配工艺的需求。
()研究了面向虚拟装配工艺的装配路径生成方法,考虑路径规划的可行性和工艺性,通
过人机交互,实时获取每帧无碰撞的零件位姿作为装配路径结点,并使用链表记录路径结点信
息来表达装配路径。记录的装配路径为后续的装配工艺动画生成提供了基础数据。
()根据虚拟装配生成的模型,研究了装配的生成及工艺文件数据
的提取策略,可有效缩短工艺编制周期,为实际生产提供了技术依据。112 
第六章原型系统开发与实现
引言
在对面向航天产品的虚拟装配工艺设计技术和系统总体框架进行分析和研究的基础上,设
计并开发的原型系统,并通过该系统针对具体的产品模型进行相关算法的有效性验证,
为虚拟装配工艺设计技术在型号产品中的应用奠定基础。
原型系统开发与实现
功能模型设计
根据节中的系统体系结构,使用建模方法对系统的功能模块和数据流
向进行说明。按照体系结构中的功能层设计,将系统分为装配建模、虚拟装配仿真、
装配顺序规划、装配工艺文档设计与示教四个模块,各模块划分及模块间的数据流向如图
所示。系统的输入为系统的产品装配模型、工装夹具模型和场景环境模型,在虚拟装配
建模、装配经验知识、几何可行性等的约束下,依靠系统、系统及数据库系统,经过
各个模块的操作,最终输出为装配、装配工艺文件和装配动画。
装配建模模块
虚拟装配仿真
模块
装配顺序规划
模块
工艺文档设计
与示教模块
模型
数据
结构
场景
图模
型
产品装配模型
工装夹具模型
场景环境模型
系
统
数
据
库
系
统
零件模型信息
工具模型信息
虚
拟
装
配
场
景
装配
经验
知识
几何
可行
性约
束
智
能
引
导装配顺序信息
装配路径信息
优
先
关
联
信
息
工艺操作信息
优化装配顺序
粒子
群遗
传算
法
适应
度函
数
种群
编码
装配
工艺
标准
装配
经验
知识
工艺
技术
文件
装配
装配工艺文件
装配动画
图功能模块划分及数据流向113 
()装配建模模块
装配建模模块根据系统的输入在系统二次开发接口、关系数据库、系统的支持下
实现零件模型信息的转换与重构、工具模型的提取和虚拟装配场景的搭建功能。所依托的关键
技术有:信息的转换与重构、装配场景的建立等。图示出了装配建模模块的功能流程。
图装配建模模块功能流程图
()虚拟装配仿真模块
虚拟装配仿真模块根据上一模块的输出在关系数据库、系统的支持下实现交互式装配
仿真功能。所依托的关键技术有:装配交互辅助技术、工具的操作、电缆零件的柔性装配等。
图示出了虚拟装配仿真模块的功能流程。
图虚拟装配仿真模块功能流程图114 
()装配顺序规划模块
装配顺序规划模块根据上一模块的输出在关系数据库、粒子群遗传算法的支持下对装配顺
序进行优化。所依托的关键技术有:随机可行装配顺序生成、装配顺序优化等。图示出了
装配顺序规划模块的功能流程。
图装配顺序规划模块功能流程图
()装配工艺文档设计与示教模块
装配工艺文档设计与示教模块根据以上模块的输出在关系数据库、系统的支持下对装
配工艺文档进行设计,并提供装配工艺文档的在线浏览功能。所依托的关键技术有:装配
及装配动画的生成、装配工艺文件数据的提取等。图示出了装配工艺文档设计与示教模块
的功能流程。
图装配工艺文档设计与示教模块功能流程图115 
6.2.2 DVAPPS 开发架构
由于系统的实时性要求,以及系统的二次开发接口的限制,的装配建模、
虚拟装配仿真、装配顺序规划模块和装配工艺文档设计与示教模块的装配与装配动画生
成等功能采用模式进行开发,而其他模块对实时性要求不高,但是对易用性、可
扩展性要求高,因此装配工艺文档设计与示教模块的文档编辑和示教功能采用模式开发。
图示出了的开发架构。
图系统的开发架构
系统开发环境
的开发环境主要包括开发与测试的操作系统,服务器和数据库的选用以及所
选用的开发语言及开发平台等,具体的开发环境如表所示。
表系统开发环境
硬件环境
内存
图形显示卡
输入设备鼠标、三维鼠标()
输出设备显示器
软件环境
操作系统、
数据库、
开发工具、
系统
软件开发包、、116 
6.3 DVAPPS 原型系统应用实例
以节中的航天产品某部件的装配模型为例,对其虚拟装配工艺规划工作流程进行说明,
并作为原型系统的实例验证。
()装配建模模块
首先启动应用程序,自动加载文件,在菜单栏添加
“”自定义菜单及其子菜单项,并打开从系统获得的装配模型文件,如图
所示。
图集成接口图几何特征与面片映射接口
点击子菜单项,系统根据节的算法进行几何及拓扑信息的提取与转换:
自动将模型文件转化为格式,并保存到工作目录下,并弹出转换工具对话框,如图
所示,选中相应文件并进行颜色的设置后,获得中包括几何及拓扑信息的格式
文件。其中某仪器零件模型的网格显示及渲染显示如图所示。
模型网格显示模型渲染显示
图几何信息提取获得的模型网格及渲染显示
点击子菜单项,系统进行约束信息的提取:将零件的装配信息及约束信息保存
到本地模型信息数据库的相应表中,如图所示。工装夹具模型及场景环境模型的转换与产
品装配模型类似,不再赘述。117 
图读取并保存到数据库表中的约束信息
然后打开软件,系统根据提取的几何、拓扑及约束信息,依据节算法重构
虚拟装配环境下的场景装配模型并搭建虚拟装配场景。图示出了搭建好的虚拟装配场景及
刚性零件模型、电缆零件模型、工具模型库。
虚拟装配场景电缆零件模型
刚性零件模型工具模型库
图几何信息提取获得的模型网格及渲染显示118 
()虚拟装配仿真模块
该模块完全在环境中运行,在交互辅助技术的支持下进行交互式装配,直至形成产品,
用户可以随意在场景中进行漫游,视点的转换以及各种装配操作动作。下面以典型装配约束特
征的部件为例,对其在交互辅助技术支持下的装配过程进行说明。
装配意图识别及精确定位导航
舱段上仪器安装位置仪器向舱段壁上装配
自由状态下捕捉到孔孔对齐装配意图仪器精确定位到约束轴线上
图交互辅助下的零件装配过程(Ⅰ)
图所示为舱段上相对称的两个仪器安装位置,其中孔与对称,与对称。
图所示为仪器向舱段装配的过程,此时仪器的自由度为。其中目标约束为仪器
上孔与舱壁上孔以及和的轴对齐约束、面和面的贴合约束。图所示为
仪器移动到舱壁安装位置处所识别到的孔孔对齐约束,按照文献的算法,当仪器移动到图
所示位置时,由于仪器在舱段内部,仪器与舱段的包围盒始终相交,仪器上的孔会同
时检测到同时检测到舱段上孔和的对齐约束,造成了误识别;按照文献的算法,由
于仪器的孔特征面和舱段安装位置上的孔特面征始终无法相交,会出现孔孔约束漏识别的现象。
而本文提出的装配意图捕捉和约束智能确认算法可有效避免这些问题。图所示为仪器精
确定位到孔的轴线方向的位置。即根据约束定位的位姿变换矩阵和
孔
孔
孔
孔
孔
孔
面
面119 
(Oh2※,将孔的约束特征局部坐标系原点移动到孔的轴线矢量方向上,此时仪
器的自由度为。
在孔轴约束下导航装配并识别到新孔孔约束仪器精确定位到受个孔轴线约束的位置
在个孔轴约束下导航运动并识别到面贴合仪器最终的装配定位姿态
图交互辅助下的零件装配过程(Ⅱ)
图所示为仪器在孔轴线的约束导航下进行旋转运动,并识别到孔与孔对应
的对齐约束,此时仪器的自由度不变,仍为。图所示为仪器精确定位到孔
和同时约束下的位置,即根据变换矩阵)和※),将孔
的约束特征局部坐标系原点移动到孔的轴线矢量方向上,此时仪器的自由度为。
图所示为仪器在孔和轴线的同时约束导航下装配运动,并识别到面与舱段安装
位置表面对应的平面贴合约束,此时仪器的自由度不变。图所示为仪器精确定位到
舱段的目标装配位置,即根据变换矩阵※),将面的约束特征局部坐标系原
点移动到面上,此时仪器的自由度为,完成仪器到舱段壁上的装配。
设置约束元素的识别阈值参数如下:θ°,。各算法的装配意图捕捉的平均时
间花费如表所示。对比算法和算法来自于文献和文献。从表中可以看出各
算法中约束识别的时间花销相差不大,总体上算法效率最高,这是由于该算法使用零件的最
大包围盒作为约束识别判断入口,最大包围盒相交测试的时间花费很少,但是如前所述,这种120 
方法会出现误识别现象,识别精度不高。算法使用基于约束特征面片相交测试作为装配意图
捕捉的触发条件,当面片数量庞大时,精确到面片层的碰撞检测时间花销较大,约占总体时间
的以上,且存在由于检测不到凹面之间的碰撞(如个圆柱孔面)而发生的漏识别现象。
由于本文使用了约束元素包围盒的相交测试作为捕捉入口,其时间花费与零件模型的复杂程度
无关,且远小于个零件间精确碰撞检测的时间,因此在保证装配意图捕捉准确性的同时,也
有较高的装配意图捕捉效率。
表装配意图捕捉平均时间花费表
本文算法
算法-
算法-
装配工具的操作及可达空间验证
内六角扳手装配螺栓扳手的可达性验证
扳手的可达性验证螺栓装配到最终位置
图装配工具的操作过程及及可达空间验证(Ⅰ)
根据节中装配工具的操作方法及可达操作空间的验证算法,对各个紧固件的装配过程
及操作空间进行验证,工具装配操作过程可分为三步,即工具的定位、工具的操作和工具的归121 
位。图及示出了装配工具的操作及归位过程,以及操作空间可达性验证的过程。
图所示为内六角扳手装配螺栓的情形,内六角扳手通过工具的定位与内六角螺栓装
配为一体,并向紧固位置进行装配,此时识别到螺栓和螺纹孔的孔轴对齐约束。图和
分别示出了内六角扳手的在个方向上的最大操作范围,满足实际装配的需要。图所示
为内六角扳手操作螺栓运动到紧固位置,工具的操作流程结束。
图所示为内六角扳手完成螺栓的装配操作后,进行的归位过程。图所示为内
六角扳手进行另外的螺栓装配时,由于仪器的存在,导致操作空间狭窄,视野有限,因
此认为螺栓应先于仪器装配。图和所示分别为套筒扳手及一字槽螺钉旋具的操
作及可达性验证过程。
内六角扳手归位内六角扳手的可达性验证
套筒扳手的操作及可达性验证一字槽螺钉旋具的操作及可达性验证
图装配工具的操作过程及及可达空间验证(Ⅱ)
电缆零件的装配
在系统中使用以下三种装配操作方式进行电缆零件的装配操作:整体方式、电连
接器控制方式、电缆束控制方式。根据测试,电缆弹簧系统的参数设置如下:质点质量,
弹簧弹性系数,阻尼器阻尼系数,阻力系数,反弹常数,粘滞
系数,积分时间步长。
仪器
螺栓122 
(a)  电缆零件以整体方式操作电连接器交互辅助下的插接装配
电连接器交互辅助下的插接装配电缆束的拾取与固定
电缆零件最终的装配姿态
图电缆零件的装配过程
图所示为电缆零件以整体方式进行装配的过程,电缆零件以刚体方式进行运动,通
过该方式,将电缆零件从工作台快速移动到装配位置附近。图和所示为电缆的电连接
器装配操作方式,在交互辅助技术的支持下控制电连接器进行刚体的插接装配,电缆束随之进
行柔性变形。图所示为电缆的电缆束装配方式,拾取电缆束的一段圆柱面并控制其移动
到固定位置附近进行固定操作。不断重复该装配方式来实现电缆束的固定。图所示为电
缆零件最终的装配姿态,表明电缆的设计能够满足装配的要求。123 
装配路径的显示与记录
在交互装配过程中,系统可以自动记录零件的装配路径,并且对装配路径以文本文件进行
存储。图所示为用离散点显示的仪器零件的装配路径,图所示为存储的装配路径
文本文件,其中每个路径点由位置和姿态部分信息组成,姿态用四元数表示。
装配路径的显示装配路径的记录
图装配路径的显示与记录
最终装配状态
通过虚拟装配仿真模块,在交互辅助技术的支持下,通过人机交互不断的进行零件的装配
仿真,直至装配出产品,并且系统自动建立了模型。其中某舱段的装
配完成图如图所示。
舱段端面视图(Ⅰ)舱段端面视图(Ⅱ)
图某部件的装配完成图
()装配顺序规划模块
在该模块中可根据建立的模型获得零部件之间初始的优先约束关联关系,并
提供优先约束关联关系及初始信息的维护功能,并根据上述信息应用粒子群遗传算法进行装配
顺序的优化。算法具体的应用实例与分析在节中已有详述,装配顺序规划模块的功能实现
界面如图所示。124 
(a)  装配优先约束关联关系维护界面零部件装配信息维护界面
装配顺序优化参数设置及计算界面
图装配顺序规划模块功能界面
图所示为装配优先约束关联关系维护界面,用于对矩阵进行维护,首先系统
建立初始的优先约束关联关系,然后用户可以进行适当的修改,如出现图所示的情况时,
可以根据该界面建立螺栓和仪器的优先约束关系。图所示为对零部件装配信息的维护界
面,用于设置和修改零部件的装配信息,以及对紧固件类零件的合并,将其作为一组零件进行
装配顺序的优化,零部件的初始装配信息来源自虚拟装配仿真模块。图所示为装配顺序
优化参数设置及计算界面,此界面为模块的主界面,通过“基础信息维护”下拉菜单可以弹出
图和的界面,也可以对算法的各种参数进行设置,最后显示出装配顺序优化的计算结
果。而且可以将各代计算过程中的信息以文本文件进行保存。
()装配工艺文档设计与示教模块
该模块根据虚拟装配仿真模块所建立的模型中的层次信息、装配顺序及路径
信息、操作工艺信息等,生成初始的装配、装配动画以及装配工艺文件数据。并为工艺
人员提供编辑工艺文件的功能,以及对工艺文件的示教功能。
装配及装配动画生成125 
图所示为根据模型生成的装配列表。左侧显示的为装配树,
右侧显示的为装配列表,并提供插入、修改、删除等功能。图所示为装配动画生成
的界面,点击图所示的菜单项“”,弹出文件选择对话框,选中图所示
的路径文件,系统按照装配顺序载入路径信息,并自动运动模块,生成
装配动画,点击面板中的“…”按钮,可以保存格式的装配动画文件。
图装配列表界面图装配动画生成
装配工艺文档设计
装配工艺文档设计功能使用结构开发,工艺员通过访问服务器,根据生成的装配工艺
文件数据模型,进行详细的编辑和完善,形成规范的基于的装配工艺文件。图所示
为装配工艺目录编辑界面,左侧为装配工艺结构树,右侧为相应结点下的装配工艺目录,工艺
人员可以对装配工艺目录及装配辅料信息进行维护。图所示为装配工序卡片编辑界面,
对工步内容、装配明细表、工装夹具信息以及装配动画进行维护。
装配工艺目录编辑界面装配工序卡片编辑界面
图装配顺序规划模块功能界面
装配工艺示教126 
通过该模块可以在装配现场对审核通过的基于的装配工艺文件进行浏览,其界面是面
向触摸屏的,装配工人通过点击装配工艺文件,播放装配动画及工步文字描述,实现可视化装
配工艺指导和培训的目的。图所示为由工艺人员分配好的装配工艺示教文件,图
为用于示教的工序卡片,包括装配动画、工步及装配明细内容,其中装配动画形象地说明了装
配内容。
装配工艺示教文件界面装配工序卡片示教界面
图可视化装配工艺文件示教界面
本章小结
本章在前述章节的研究基础上,开发并实现了原型系统,并通过其在航天产品上
的应用验证了相应的功能,主要包括以下内容:
()按照体系结构中的功能层设计,设计了的功能模块:将系统分为
装配建模、虚拟装配仿真、装配顺序规划、装配工艺文档设计与示教四个模块,并详述了各模
块划分及模块间的数据流向。最后介绍了的开发架构和开发环境。
()以节中的航天产品某部件的装配模型为例,对其在原型系统中的虚拟
装配工艺规划工作流程进行了详细说明,通过介绍各个模块的主要功能界面,验证了各个模块
的功能。127 
第七章总结与展望
全文总结
本文在“××敏捷总装和资源高效快速重组技术研究”项目的资助下,基于虚拟装配技术,
对面向航天产品敏捷总体装配的虚拟装配工艺设计及其应用展开研究。结合应用需求,设计了
桌面式虚拟装配工艺设计系统的总体框架,分析了航天产品虚拟装配模型的需求并系统地探讨
了虚拟装配建模技术,研究了虚拟装配的交互辅助技术,提出了面向虚拟装配工艺的顺序规划
和路径规划方法,最后在上述研究基础上开发并实现了原型系统。
论文的主要研究成果概括如下:
()设计了桌面式虚拟装配工艺设计系统的总体框架。
阐述了虚拟装配系统的分类,从交互性、易用性等角度进行了对比并选择了应用性较好的
桌面式虚拟现实系统作为开发基础。对的功能需求进行了详细分析,在此基础上对
系统的研究内容和特点进行了论述,将系统结构分为交互层、功能层、支持层和数据
层,建立了完整的体系结构,将系统的工作流程分为了三个阶段:数据预处理阶段、
装配工艺设计阶段和工艺文件输出应用阶段。
()研究了面向航天产品的虚拟装配建模技术。
分析了航天产品虚拟装配模型的需求,将装配场景模型分为刚性零件模型、电缆零件模型
和其他模型,并分别提出各种模型的实体表达及信息描述方法,提出了刚柔混合装配层次关联
模型,将航天产品分为个层次:产品级、部件级、组件级和零件级。并对模型的信息描述和
数据结构表达进行了详述。该模型具有信息完备、模型轻量化、集成性好的特点。分析了装配
模型在虚拟环境中的建立内容和流程,提出了零件模型信息的转换与存储方法,该方法灵活且
可定制,并且有利于模型信息的重构。最后给出了刚柔混合装配层次关联模型的建立流程。
()研究了虚拟装配的交互辅助技术。
提出了虚拟环境下包括刚性零件和电缆零件的具有交互辅助功能的装配流程,提出了用于
装配意图的捕捉的约束元素包围盒概念及计算方法,提出装配约束的多层识别和智能确认方法,
可有效减少约束的误识别和漏识别现象,并提出了装配意图捕捉效率评估方法。根据约束元素
的特征参数和配合类型,提出了基于位姿变换元素分解的约束精确定位求解算法,将位姿变换
分解为点到线上、点到面上和直线平行种位姿变换情况,该方法可快速有效地实现约束元素
定位。并通过对零件自由度的求解和目标约束方向上的运动分量映射,提出了基于约束元素投
影的装配运动导航方法,该方法可有效保证虚拟环境下零件的装配运动精度。研究了装配约束
关系的动态解除方法和紧固件装配工具的操作方法,提出了零件的可拆卸推理算法和约束关系128 
的动态解除准则,分析了虚拟装配中紧固件工具的装配操作过程,并对螺钉旋具类和扳手类工
具分别进行了约束和操作空间分析,提出了工具在虚拟装配中的验证方法。基于质点弹簧系统
研究了虚拟环境下可展现电缆零件柔性的装配方法,阐述了虚拟环境下的三种电缆装配操作方
式,分析了电缆束质点弹簧系统的动力学特性,使用积分法对质点弹簧动力学微分方程
进行求解,为保证电缆的真实性,提出了弹簧动态变形的约束算法和电缆束的网格变形更新算
法,最后根据各个算法给出了电缆零件的装配仿真流程。
()研究了面向虚拟装配工艺的顺序规划和路径规划方法。
针对传统算法在该问题求解上的不足,基于算法,结合虚拟装配系统良好的交互
性,提出一种人机协同的航天产品装配顺序优化方法。使用优先约束关联矩阵来描述零件间的
优先约束关系和关联关系,并研究了粒子群遗传算法的基因组、染色体以及粒子的编码表达方
法。综合考虑装配连续性、装配资源的变动和仪器设备的影响,提出了有工程意义的适应度函
数的表达式,根据优先约束关联模型生成随机的可行初始装配序列,并利用粒子群算法重构遗
传算法的交叉算子对装配顺序进行优化。用一个实例表明该方法较有较好的收敛性和稳
定性,初始装配序列的可行性对装配顺序优化的结果影响很大,可行初始装配序列能有效提高
优化效率,基于的装配顺序优化结果可满足装配工艺的需求。研究了面向虚拟装配工
艺的装配路径生成方法,考虑路径规划的可行性和工艺性,通过人机交互,实时获取每帧无碰
撞的零件位姿作为装配路径结点,并使用链表记录路径结点信息来表达装配路径。记录的装配
路径为后续的装配工艺动画生成提供了基础数据。根据虚拟装配生成的模型,提
出了装配的生成及工艺文件数据的提取策略,可有效缩短工艺编制周期,为实际生产提
供了技术依据。
()开发并实现了原型系统。
将系统分为装配建模、虚拟装配仿真、装配顺序规划、装配工艺文档设计与示教四个模块,
详述了各模块划分及模块间的数据流向,并介绍了的开发架构和开发环境。以航天产
品某部件的装配模型为例,对其在原型系统中的虚拟装配工艺规划工作流程进行了详
细说明,通过介绍各个模块的主要功能界面,验证了各个模块的功能。
本文的创造性研究工作主要体现在:
()提出了面向虚拟装配工艺设计的刚柔混合装配层次关联模型,系统研究了该模型在
系统中的建立过程,并对模型数据的获得与产生过程进行了详细说明。该模型具有信
息完备、模型轻量化、集成性好的特点。(已申请国家发明专利,申请号)
()提出了约束元素包围盒概念及计算方法,用于装配意图的捕捉,并提出了装配意图捕
捉效率评估方法,提出了基于位姿变换元素分解的约束精确定位求解算法。上述算法在交互辅
助技术中的应用可有效减少约束的误识别和漏识别现象,并快速有效地实现约束元素定位。
()提出了基于质点弹簧系统的电缆零件建模及装配运动仿真方法,该方法集成了电缆的129 
设计信息,在不改变电缆设计参数的前提下解决了目前电缆装配工艺设计及验证严重依赖物理
模型的缺点,具有模型准确、直观性好的特点。(已申请国家发明专利,申请号)
()提出了基于的装配顺序优化算法,该方法较有较好的收敛性和稳定性,
优化结果具有工程实际意义。
()提出了基于的可视化装配工艺文件生成及示教方法,该方法可根据虚拟装配仿
真的装配模型信息快速地进行装配工艺设计,并可以方便、直观地对装配现场的操作人员进行
装配示教。(已授权国家发明专利,专利号)
进一步的工作展望
本文围绕虚拟装配技术在航天产品装配工艺设计中的应用展开研究,虽然在一些关键技术
上取得了一定的成果,但是由于研究对象的复杂性以及虚拟现实技术本身尚在发展之中,虚拟
装配工艺设计技术及其应用仍是研究的热点,许多问题还需要进一步的研究和探索:
()虚拟装配工艺设计系统的实用化。虽然本文设计并实现了原型系统,对各
个关键技术进行了验证,但是系统的友好性、鲁棒性、通用性还不理想,对实际的应用造成了
一定障碍,因此需要在系统的实用化和产品化上做进一步的工作。
()装配路径的优化。在虚拟环境下通过交互获得的装配路径在实际的装配中可能不是最
优的,为了进一步优化装配工艺,应对装配路径的优化问题进行考虑。
()电缆等柔性零件的布线装配以及管路的布置。虽然本文对电缆零件的柔性装配技术进
行了研究,但是由于模型精度和柔性体碰撞检测效率的限制,以及电缆束不同的物理特性,导
致基于运动学的电缆零件在空间的装配运动与实际仍有差别,而且质点弹簧系统中大量参数的
设置仍靠经验和大量的测试,没有理论的指导,因此仍需要深入展开研究。
()虚拟装配工艺设计的网络协同化。随着并行工程思想和计算机支持协同工作技术
(,)的发展,在异地通过网络进行装配工艺的协
同设计成为了可能,通过建立工艺协同设计的环境,可有效改善结构设计人员与装配工艺设计
人员进行信息交流的方式,消除或减少时间和空间上的相互分隔的障碍,从而提高产品设计及
装配工艺设计的质量和效率。
上述问题正是笔者目前正在研究和探索的问题,随着虚拟装配技术研究和应用的深入,众
多学者也对其提出了更为广泛的研究和应用内容。笔者相信,随着各个关键技术的突破,虚拟
装配工艺设计技术的应用前景将越来越广阔。130 
参考文献
舒启林郝永平王德俊基于产品可装配性评价的-集成系统的研究与实现东北大学学报
吴澄现代集成制造系统导论——概念、方法、技术和应用北京清华大学出版社
张申生曹健王英林等敏捷制造的理论、技术与实践上海上海交通大学出版社
严隽琪范秀敏马登哲等虚拟制造的理论、技术基础与实践上海上海交通大学出版社
许志玲如何进行精益生产北京北京大学出版社
秦现生并行工程的理论与方法西安西北工业大学出版社
夏平均基于虚拟现实的卫星装配工艺设计方法及其应用博士学位论文哈尔滨哈尔滨工业大学
牛新文丁汉熊有伦计算机辅助装配顺序规划研究综述中国机械工程
,131 
[22]  肖田元虚拟制造北京清华大学出版社
刘振宇面向过程与历史的虚拟环境中产品装配建模理论、方法及应用研究博士学位论文杭州浙江
大学
郑太雄虚拟装配理论与方法研究博士学位论文重庆重庆大学
夏平均姚英学刘江省等虚拟装配工艺规划及示教系统的研究南京理工大学学报
郑轶宁汝新刘检华等虚拟装配关键技术及其发展系统仿真学报
姚珺宁汝新王新永基于虚拟现实的装配工艺规划研究机械工程学报
万毕乐宁汝新刘检华等虚拟环境下的线缆装配建模技术研究系统仿真学报
徐伟玲航天电子产品整机的装联布线航天返回与遥感
陈向东张旺军潘艳华航天器的数字化总装设计研究航天器工程
宁汝新郑轶虚拟装配技术的研究进展及发展趋势分析中国机械工程
'
'
刘振宇谭建荣张树有面向虚拟装配的产品层次信息表达研究计算机辅助设计与图形学学报132 
[45]  刘振宇谭建荣基于物理模型的虚拟装配技术研究中国图象图形学报
刘检华姚珺宁汝新面向虚拟装配的产品装配模型研究系统仿真学报
刘检华宁汝新系统与虚拟装配系统间的信息集成技术研究计算机集成制造系统
万毕乐刘检华宁汝新等面向虚拟装配的模型转换接口的研究与实现系统仿真学报
朱文华范秀敏马登哲从系统到集成虚拟装配环境的数据转换研究计算机集成制造系统
武殿梁杨润党马登哲等虚拟装配环境中的装配模型表达技术研究计算机集成制造系统
万华根高曙明彭群生一个集成的虚拟设计与虚拟装配系统中国图象图形学报
付宜利田立中董正卫等装配关系的有向图表达方法研究计算机集成制造系统
宋丽萍武殿梁范秀敏等面向虚拟装配的复杂产品装配建模技术上海交通大学学报
邓文平熊岳山李思昆八叉树层次包围盒碰撞检测算法的快速实现系统仿真学报133 
158~160. 
[66]  Naylor  B,  Amatodes  J  A, Thibault  W.  Merging  BSP  trees yields  polyhedral  set  operations[C].  Proceeding  of 
SIGGRAPH '
张建民吴彦鹏张连斗等基于组件及多感知机制的快速碰撞检测方法中国机械工程
刘检华姚珺宁汝新等基于虚拟装配的碰撞检测算法研究与实现系统仿真学报
彭高亮刘文剑金天国支持组合夹具虚拟组装的快速碰撞检测方法系统仿真学报
谢健闫静焦光明等面向虚拟装配的碰撞检测技术研究中国制造业信息化
王天柱变形物体碰撞检测技术研究博士学位论文吉林吉林大学
夏平均姚英学虚拟装配的研究综述与分析哈尔滨工业大学学报
刘振宇谭建荣张树有基于语义识别的虚拟装配运动引导研究软件学报
刘检华宁汝新姚珺等面向虚拟装配的零部件精确定位技术研究计算机集成制造系统
彭高亮刘新华王伟达基于虚拟现实的组合夹具组装系统研究计算机集成制造系统
高纪开达刘检华宁汝新等虚拟环境下线缆建模及装配规划技术的研究系统仿真学报134 
17(4): 933~935. 
[87]  刘检华万毕乐宁汝新虚拟环境下基于离散控制点的线缆装配规划技术机械工程学报
万毕乐宁汝新刘检华等虚拟环境下的线缆装配建模技术研究系统仿真学报
魏发远王峰军陈新发含有柔性电缆的复杂系统装配仿真工程设计学报
魏发远陈新发王峰军电缆虚拟布线及其逆运动学仿真计算机辅助设计与图形学学报
刘检华姚珺宁汝新虚拟装配工艺规划实现技术研究机械工程学报
王孝义数字化预装配环境下装配序列快速规划技术研究博士学位论文南京南京理工大学
夏平均姚英学刘江省等基于虚拟现实和仿生算法的装配序列优化机械工程学报
曾理张林煊肖田元一个虚拟装配支持系统的实现系统仿真学报
隋爱娜吴威赵沁平虚拟装配与虚拟原型机的理论与技术分析系统仿真学报
夏平均郎跃东程鹏等面向大型复杂产品的虚拟装配技术研究机械科学与技术135 
[110]  韦乃琨面向复杂产品的分布式协同虚拟装配关键技术研究硕士学位论文上海上海交通大学
王政谭建荣刘振宇由三角网格模型重构多层次几何信息方法研究中国机械工程
王念东刘毅李文正等面向装配工序交叉的虚拟装配工艺信息模型计算机辅助设计与图形学学
报
杨锟刘继红面向虚拟装配的装配建模技术机械科学与技术
刘振宇谭建荣面向过程的虚拟环境中产品装配建模研究机械工程学报
周鸿伟王维平汪浩虚拟样机开发中基于的产品模型技术研究系统仿真学报
王念东刘毅李文正面向虚拟装配的与系统信息集成技术机械科学与技术
á136 
Computers and Graphics, 1999, 23(3): 389~403. 
[131]  Wang Y, Jayaram U, Jayaram S, et al. Methods and algorithms for constraint-based virtual assembly [J]. Virtual 
Reality, 2003(6): 229~243. 
[132]  Turner J U, Subramaniam S, Gupta S. Constraint representation and reduction in assembly modeling and analysis 
[J]. IEEE Transactions on Robotics and Automation, 1992, 8(6): 741~750. 
[133]  Wang A, Koc B, Nagi R. Complex assembly variant design in agile manufacturing, Part Ⅰ
刘振宇谭建荣张树有虚拟环境中基于约束动态解除的产品拆卸技术研究计算机辅助设计与图形
学学报
曹鹏彬刘继红管强基于装配约束动态管理的虚拟拆卸计算机辅助设计与图形学学报
日技能士の友编集部操作工具常识及使用方法徐之梦等译北京机械工业出版社
叶秀芬乔冰郭书祥郭庆昌虚拟手术仿真中人体软组织形变技术的研究计算机应用
沈照功潘振宽基于弹簧质点模型的布料仿真及碰撞处理方法计算机仿真
余昌盛许力基于弹簧质点模型的织物变形仿真技术江南大学学报自然科学版
孙守迁徐爱国黄琦等基于角色几何碰撞体估计的实时服装仿真软件学报
袁志勇尹乾胡君冯仕 基于改进质点弹簧模型的图像变形仿真方法华中科技大学学报自然科
学版
吕梦雅李发明唐勇等基于弹簧质点模型的快速逼真的布料模拟仿真系统仿真学报137 
Transactions on Visualization and Computer Graphics, 2005, 11(3): 329~340. 
[152]  Boothroyd G,  等著面向制造与装配的产品设计王知衍译北京机械工业出版社
卢小平面向虚拟装配的装配顺序规划研究系统仿真学报
宋丽萍范秀敏马登哲虚拟现实环境下交互式船舶装配序列规划研究计算机集成制造系统
周炜刘继红虚拟环境下人工拆卸的实现华中理工大学学报
夏平均姚英学李建广等三维数字化装配工艺系统的研究哈尔滨工业大学学报
薛俊芳邱长华向东在中自动生成零件拆卸优先约束矩阵工程图学学报
付宜利田立中谢龙等基于有向割集分解的装配序列生成算法机械工程学报
韩水华卢正鼎陈传波基于几何推理的装配序列自动规划研究计算机辅助设计与图形学学报
苏强林志航计算机辅助几何可行装配顺序推理及其优化分析中国机械工程
李原张开富王挺等基于遗传算法的飞机装配序列规划优化方法计算机集成制造系统
王辉向东段广洪基于蚁群算法的产品拆卸序列规划研究计算机集成制造系统
周开俊李东波潘洋宇基于遗传退火算法的复杂产品装配序列规划方法机械科学与技术
王小平遗传算法理论、应用及软件实现西安西安交通大学出版社138 
Information Processing Letters, 2005, 93: 255~261. 
[176]  Gaafar L  K,  Masoud  S  A,  Nassef  A  O.  A  particle  swarm-based  genetic  algorithm  for  scheduling  in an  agile 
environment[J]. Computers & Industrial Engineering, 2008, 55: 707~720. 
[177]  Gottipolu  R  B,  Ghosh  K.  A  simplified  and  efficient  representation  for  evaluation  and  selection  of  assembly 
sequences[J]. Computers in Industry, 2003, 50(3): 251~264. 
[178]  王孝义张友良张帆装配序列评价研究中国机械工程
苏明基于的三维辅助装配工艺规划()系统研究硕士学位论文南京南京航空航天
大学
郑轶宁汝新刘检华等交互式虚拟装配路径规划及优选方法研究中国机械工程
郭钢程静波刘飞产品生命周期中的单多层表示与应用计算机集成制造系统
黄学文范玉顺多视图和视图之间映射模型的研究机械工程学报139 
致谢
本文的研究工作是在导师左敦稳教授的悉心指导下完成的。首先感谢导师四年来对我的关
怀和教诲,左老师严谨的治学态度、活跃的学术思想和启发性的指导方式使学生在学习和工作
中受益颇深。同时导师谦逊、和蔼、淡泊名利的学者风范也永远是我学习的榜样。导师的亲切
关怀和殷切希望,学生时刻铭记在心,在此谨向左老师致以崇高的敬意和深深的谢意。
在课题的研究过程中,得到了薛善良副教授的悉心指导和热情帮助,同时感谢薛老师对我
生活的关怀以及在迷茫之时的耐心指点,薛老师严谨务实的工作作风、渊博的知识以及幽默的
谈吐给我留下了深刻印象,在此表示诚挚的谢意。
衷心感谢课题组的黎向锋教授、闫静副教授在课题的研究中给予的大力支持和帮助。教研
室的其他老师在生活和学习上也给予了很多的帮助与支持,在此一并表示感谢。
特别感谢焦光明研究员在课题方面给予的专业指导,没有他长期丰富的实践经验,本文的
应用研究工作难以顺利完成。
在课题的研究过程中得到了南京晨光集团付大义高级工程师、顾永高级工程师、周朝宝高
级工程师、马继红研究员、李建平工程师、周华林工程师等给予的大力支持和热情帮助,在此
对他们表示感谢。
对一起进行过研究和探讨的苏明硕士、王金芳硕士、谢建硕士表示感谢,他们的工作是卓
有成效的。感谢尚明友硕士生、曾洁硕士生对我论文撰写过程中的帮助。感谢黄铭敏硕士在我
小论文撰写过程中的帮助。
感谢摩托罗拉公司张华工程师在项目研发中给予的建设性意见与指导。感谢信息化组的历
届成员们对我工作的支持,我们的合作是友好和愉快的,我们一起生活和项目研发的日子是紧
张和快乐的,我会珍惜我们的点点滴滴。
感谢教研室一起学习和生活过的孙玉利博士、许鸿昊博士、李多生博士、赵礼刚博士生、
王宏宇博士生、王红军博士生、缪宏博士生、汪洪峰博士生、庆振华博士生、刘俨后博士生等,
这是一个团结、积极、创新的集体,他们一起创造了大家庭般的科研生活环境,生活是温馨的,
祝他们一切顺利。
感谢参加论文审阅工作的各位专家和老师。
最后,衷心地感谢一直支持、鼓励我的父母,要对他们说:“你们是最棒的,我爱你们!”140 
在学期间的研究成果及发表的学术论文
攻读博士学位期间发表(录用)论文情况
张丹左敦稳焦光明等面向虚拟装配操作的交互辅助技术华南理工大学学报自然
科学版
张丹左敦稳焦光明等面向虚拟装配的约束建模与装配意图捕捉技术计算机集成
制造系统
张丹左敦稳焦光明等基于粒子群遗传算法的航天产品装配顺序优化方法兵工学
报
焦光明左敦稳张丹等航天产品敏捷总装混流排产模型东南大学学报自然科学
版
攻读博士学位期间申请专利及软件著作权情况
张丹焦光明左敦稳等基于的三维装配工艺文件及现场示教的实现方法中
国发明专利专利号
焦光明张丹左敦稳等无纸化三维装配工艺文件的实现方法中国发明专利申
请号
左敦稳张丹薛善良等虚拟装配环境下柔性电缆装配模型的实现方法中国发明
专利申请号
左敦稳张丹焦光明等桌面式虚拟装配工艺规划系统简称:中国软
件著作权登记号
左敦稳焦光明张丹等三维工艺设计与管理系统简称:中国软件著
作权登记号
焦光明薛善良张丹等企业信息编码系统简称:中国软件著作权登记号141 
附录攻读博士学位期间参与的科研项目
攻读博士学位期间参与的科研项目
××敏捷总装及资源高效快速重组技术研究,原国防科工委“十一五”基础科研项目,主
要参与,;
船舶传动装置数据库研发,中国船舶重工集团公司哈尔滨船舶锅炉涡轮机研究所,子项目
负责,;
卫星地面综合测试软件,上海航天控制技术研究所,子项目负责,;
柔性制造与精密加工工厂工具房管理系统,中国电子科技集团公司第十四研究所,子项目
负责,。142 
项目验收意见