                                                                                    分类号：
TG453.9
                 
    
密级：
 
 
 
 
 
铝合金点焊工艺设计及质量控制智能化研究 
The Research on Intellectualized Process Design and Quality 
Control of Spot Welding of Aluminum Alloys
 
 
曹海鹏 
 
 
指导教师姓名：赵熹华
   
职称：
  
教授   单位：吉林大学
 
专
  
业
  
名
   
称：材料加工工程
 
论文答辩日期：
2005-06-06 
授予学位日期：
 
 
答辩委员会主席：姜启川
  
教授
 
论
  
文
  
评
  
阅
  
人：冯吉才
  
教授
 
       
孙大谦
  
教授
 
2005 
年 
4 
月
 
 吉林大学博士学位论文原创性声明
    本人郑重声明:所呈交学位论文，是本人在指导教师的指导
下，独立进行研究工作所取得的成果。除文中已经注明引用的内
容外，本论文不包含任何其他个人或集体已经发表或撰写过的作
品成果。对本文的研究做出重要贡献的个人和集体，均己在文中
以明确方式标明。本人完全意识到本声明的法律结果由本人承担。
学位论文作者签名枷06
日期:Ws年‘月t夕日
作者姓名  曹海鹏  论文分类号  TG453.9 
保密级别   研究生学号  2002431023 
学位类别  博  士  授予学位单位  吉 林 大 学 
专业名称  材料加工工程 
培养单位 
（院、所、中心）
材料科学与 
工程学院 
研究方向  焊接机电一体化  学习时间 
2002 年 4 月 
至 2005 年 5 月
论文中文题目  铝合金点焊工艺设计及质量控制智能化研究 
论文英文题目 
The Research on Intellectualized Process Design and 
Quality Control of Spot Welding of Aluminum Alloys
 
关键词(3-8 个) 铝合金电阻点焊；工艺设计；质量控制；人工智能 
姓   名  赵熹华  职称  教  授 
导师情况 
学历学位   工作单位  吉林大学 
论文提交日期  2005 年 4 月 25 日  答辩日期  20  年  月   日
是否基金资助项目  是  基金类别及编号
国家自然科学基金 
50175048 
如已经出版，请填写以下内容 
出版地（城市
名、省名） 
  出版者（机构）名称  
出版日期   出版者地址（包括邮编）   
  I
 
提
     
要
 
 
本文研制集散型智能系统进行铝合金电阻点焊过程智能控
制。在上位机系统中，设计了一个集成模糊神经网络、基于规则
的推理和基于事例的推理的新型铝合金电阻点焊工艺设计智能系
统。该系统将基于规则的推理和模糊神经网络深层次的结合，并
辅助以基于事例的推理进行铝合金电阻点焊工艺设计，工艺实例
验证表明这种点焊工艺参数的求解策略是成功的。 
在集散型铝合金电阻点焊智能控制系统的下位机系统中，为
提高铝合金电阻点焊过程控制精度，首次采用 DSP 芯片 TMS 320 
LF2407A 作为逆变电阻点焊智能控制器的主芯片，采用模糊控制技
术进行电阻点焊过程控制，并提出了结合焊接电流及电极电压相
结合的质量控制方法。 目
   
录
 
  I
 
目
   
录
 
第 
1 
章
  
绪
   
论 
.........................................................................................................1
 
1.1  
研究目的与意义 
............................................................................................1
 
1.2  
电阻点焊质量控制途径 
................................................................................2
 
1.2.1  
电参数质量控制方法 
.............................................................................2
 
1.2.2  
非电参数质量控制方法 
.........................................................................2
 
1.3 
人工智能技术在点焊中的应用 
.....................................................................4
 
1.3.1  
人工智能技术在点焊工艺设计中的应用 
.............................................4
 
1.3.2  
人工智能技术在点焊过程控制中的应用 
.............................................5
 
1.3.3  
人工智能技术在点焊质量评测中的应用 
.............................................7
 
1.4  
逆变焊接电源的发展状况 
............................................................................8
 
1.5 DSP 
的发展状况和性能特点 
.......................................................................10
 
1.6  
本文研究内容 
..............................................................................................12
 
第 
2 
章
  
系统总体设计 
...........................................................................................14
 
2.1  
总体概述 
......................................................................................................14
 
2.2  
铝合金点焊工艺设计智能系统 
..................................................................15
 
2.2.1  
设计思想 
...............................................................................................15
 
2.2.2  
系统总体分析 
.......................................................................................17
 
2.2.3  
系统的智能模型 
...................................................................................18
 
2.2.4  
系统总体流程 
.......................................................................................20
 
2.3  
铝合金点焊质量智能控制系统下位机总体设计 
......................................21
 
2.3.1  
控制参数的选择 
...................................................................................22
 
2.3.2  
电流采集方式 
.......................................................................................23
 
2.3.3  
控制算法的选择 
...................................................................................24
 
2.3.4  
系统总体结构 
.......................................................................................25
 
2.4  
本章小结 
......................................................................................................26
 吉林大学博士学位论文
 
  II
第 
3 
章
  
铝合金点焊工艺设计智能系统 
...............................................................27
 
3.1  
知识表示 
......................................................................................................27
 
3.1.1  
面向对象的知识表示 
...........................................................................27
 
3.1.2  
基于规则推理的知识表示 
...................................................................29
 
3.2  
基于事例推理的铝合金点焊工艺设计 
......................................................31
 
3.2.1  
基于事例推理在本系统中应用分析 
...................................................31
 
3.2.2  
检索机制的建立 
...................................................................................31
 
3.2.3  
修正 
.......................................................................................................35
 
3.2.4  
事例库的建立 
.......................................................................................43
 
3.3  
混合多种人工智能技术的铝合金电阻点焊工艺设计 
..............................44
 
3.3.1  
设计目标 
...............................................................................................44
 
3.3.2  
模块总体设计 
.......................................................................................45
 
3.3.3  
铝合金点焊工艺参数设计 
...................................................................46
 
3.3.4  
模糊神经网络 
.......................................................................................47
 
3.4  
数值模拟在 
FNN 
中的应用 
........................................................................59
 
3.5  
铝合金点焊工艺设计求解验证 
..................................................................59
 
3.6  
本章小结 
......................................................................................................63
 
第 
4 
章
  
基于 
DSP 
点焊智能控制器的硬件设计
..................................................65
 
4.1  
设计目标 
......................................................................................................65
 
4.1.1  
逆变频率的选择 
...................................................................................65
 
4.1.2  
系统需求分析 
.......................................................................................66
 
4.1.3  
控制系统的构成及功能 
.......................................................................66
 
4.2 DSP 
及其周边电路设计 
...............................................................................67
 
4.2.1 DSP 
芯片的选择 
....................................................................................68
 
4.2.2 
主控板的设计 
........................................................................................69
 
4.3  
显示模块的设计 
..........................................................................................71
 
4.3.1  
显示控制模块 
T6963C .........................................................................71
 
4.3.2  
液晶显示模块与 
DSP 
硬件接口形式 
..................................................72
 
4.4 IGBT 
驱动模块的设计 
.................................................................................74
 
4.4.1 LF2407A 
的 
PWM 
输出 
........................................................................74
 目
   
录
 
  III
4.4.2 IGBT 
驱动模块的选择与设计 
..............................................................75
 
4.5 
电流采样电路 
...............................................................................................77
 
4.6 
故障检测及保护功能 
...................................................................................77
 
4.7 
本章小结 
.......................................................................................................78
 
第 
5 
章
  
基于 
DSP 
点焊智能控制器的软件系统设计
..........................................79
 
5.1 
软件系统总体设计 
.......................................................................................79
 
5.1.1 
系统功能模块分析 
................................................................................79
 
5.1.2 
系统功能模块构成 
................................................................................80
 
5.1.3 
软件系统总体流程 
................................................................................81
 
5.2 
焊接程控程序 
...............................................................................................81
 
5.3  
人机交互系统的软件设计 
..........................................................................84
 
5.3.1  
消息机制 
...............................................................................................84
 
5.3.2  
用户输入模块 
.......................................................................................85
 
5.3.3  
液晶显示系统设计 
...............................................................................85
 
5.4  
故障检测及报警模块的软件设计 
..............................................................88
 
5.5  
模糊控制系统的设计 
..................................................................................88
 
5.5.1  
模糊控制器的组成 
...............................................................................89
 
5.5.2  
输入量维数的确定 
...............................................................................89
 
5.5.3  
输入输出参数的选择 
...........................................................................90
 
5.5.4  
论域等级的确定 
...................................................................................92
 
5.5.5  
隶属函数的确定 
...................................................................................94
 
5.5.6  
模糊控制规则的建立 
...........................................................................96
 
5.5.7  
模糊推理以及反模糊化 
.......................................................................97
 
5.6  
系统仿真 
......................................................................................................99
 
5.7  
铝合金电阻点焊过程智能控制算法 
........................................................103
 
5.8  
本章小结 
....................................................................................................103
 
第 
6 
章
  
结
   
论 
.....................................................................................................104
 
参考文献 
...............................................................................................................106
 
附
   
录 
...................................................................................................................114
 吉林大学博士学位论文
 
  IV
致
   
谢 
...................................................................................................................115
 
摘
   
要 
.......................................................................................................................I
 
ABSTRACT........................................................................................................... IV
 
 
 第 
1 
章
  
绪
      
论
 
  1
第 1 章 绪  论 
1.1  研究目的与意义
 
电阻点焊广泛应用于车辆制造、航空、航天、家用电器及电子工业等
[1]
。
点焊过程是一个高度非线性、有多变量耦合作用和大量随机不确定因素的过
程；同时点焊的形核过程处于封闭状态，无法观测，特征信号的提取比较困
难；形核过程的时间极短，焊接质量的监测和控制难度较大
[2][3][4]
。在经典控
制理论指导下，点焊过程控制方法大多数都是基于一定的假设条件下建立数
学模型，而实际焊接过程的复杂程度使得这些模型与实际对象间差异较大，
难以达到满意的适应效果，无法满足工业发展对电阻点焊质量提出的高可靠
性的要求。
 
以人工神经网络
(artificial  neural  net,  ANN)
技术、模糊逻辑控制
(fuzzy 
logical control, FLC)
、专家系统
(expert system, ES)
、智能主体为标志的人工智
能技术在解决高度非线性和严重不确定系统控制方面同经典控制方法相比较
具有巨大的优势和潜力，在信号处理、智能控制、模式识别、机器视觉、非
线性优化、自动目标识别、传感技术等方面取得了很大的进展
[5]~[12]
。模糊控
制是根据状态变量及操作者的经验或专家的分析进行模糊推理而确定控制系
统的输出，并不需要知道控制对象的精确数学模型，故适用于控制对象数学
模型复杂及系统动态变化剧烈的场合
(
例如非线性及多输入多输出控制对
象
)
。神经元网络被用于控制系统的原因可概括如下：利用神经元网络可以描
述任意的非线性函数；利用它可使系统具有自学习功能，适于非线性时变系
统；它所构成的学习方法简明单一；学习时并行使用各种数据
[13][14][15]
。多智
能主体是一个对复杂系统进行分析设计、构造的有力思想方法和工具。随着
人工智能技术的不断发展和成熟，其在电阻点焊过程中的应用也越来越广泛，
具有广阔的前景。电阻点焊过程的智能控制已经成为电阻点焊质量控制的一
个重要方向
[16]
。
 
铝及其合金具有比强度高、耐腐蚀、易加工成型、可以反复回收利用等吉林大学博士学位论文
 
  2
优点，是汽车工业和航空航天工业的重要材料。但由于铝合金熔点低，屈服
强度低，导电导热性能良好以及表面易形成致密氧化膜等特点，使得铝合金
的点焊必须采用大电流、短时间的焊接规范，而且其焊接质量随着焊接参数
的变化波动严重
[17][18]
。随着铝合金材料在上述工业中应用越来越广泛，铝合
金的点焊工艺设计及其质量控制也引起了更为广泛的关注。将计算机技术引
入铝合金点焊焊接工艺设计，改革传统的焊接工艺手工准备的落后模式，实
现焊接工艺设计智能化，不仅可以改造传统低效手工作业模式，提高工艺设
计水平，将焊接工艺人员从繁重的重复性劳动中解脱出来，而且可以实现专
家经验知识的继承和共享，避免重复工作造成的浪费，提高焊接生产企业的
劳动生产率，具有重大的技术、经济和社会意义。
 
随着微处理器计算速度的不断提高，使在线、实时、精确的铝合金点焊
过程进行控制成为可能。在逆变技术和高速微处理器的快速运算能力的基础
上，结合人工智能技术，对铝合金电阻点焊进行质量控制，提高铝合金电阻
点焊质量，具有重要的工程应用和理论研究意义。
 
1.2  电阻点焊质量控制途径
 
1.2.1  电参数质量控制方法
 
在点焊过程中，比较重要的参数有焊接电流、焊接时间、电极力、电极
间电压、焊接过程中的动态电阻
[19][20]
等。通过对上述一种或者多种参数进行
监测控制，进而对点焊熔核进行质量控制成为最有效的点焊质量控制方法。
 
焊接电流是电阻点焊过程中非常重要的参数，直接影响电阻点焊的质量。
恒流控制就是维持焊接电流有效值不变，以保持焊接区热输入量基本不变，
从而保证焊接熔核直径基本稳定。该控制方法特别是对电源电压容易波动的
场合具有明显的补偿效果，因此应用广泛
[21]
。
 
1.2.2  非电参数质量控制方法
 
在点焊过程中，金属因受热产生体积膨胀，从而推动电极产生位移，电第 
1 
章
  
绪
      
论
 
  3
极位移的大小是焊点金属熔化量多少的量度，能够反映点焊熔核的形成状况。
热膨胀电极位移监控法也正是基于这种体积变化的原理。由于这种现象对于
各种金属及其合金都普遍存在，所以它的应用范围也很普遍
[22]~[25]
。
Tsai 
等人
将有限元引入利用热膨胀电极位移进行点焊质量控制领域中，在相应的电阻
点焊有限元模型基础上，通过试验或有限元分析可得出合格焊点的参数匹配
范围。实际焊接时，在该范围内进行选择参数，用有限元分析计算模型，计
算点焊过程热膨胀，探讨利用热膨胀电极位移控制点焊过程与质量的方法
[26]
。但是，由于一般的热膨胀位移传感装置存在着固有的缺陷，在板材厚度
较小时和焊点位置靠近板材边缘时，热膨胀法存在着较大的偏差，又由于一
些点焊机机臂刚性不足等原因，使得热膨胀位移监控未能得到推广应用。一
般认为，单独采用热膨胀位移法对铝合金点焊质量控制作用有限。
 
超声波质量控制技术是根据超声波在金属介质中传播的特性，利用界面
反射（反射法）或利用穿透焊点熔核的声波衰减程度（透射法）来判断焊点
质量的一种技术。文献
[27]
提出了一种采用超声波进行点焊质量控制的方法，
也可适用于铝合金板材的点焊。其通过超声信号来表征点焊过程中熔核的生
长过程，进而可以计算熔核的尺寸并进行相应的控制。同超声波质量控制技
术类似，声学辐射、红外等的非电参数监控法也获得一定的应用。但是由于
这些方法复杂性高，代价昂贵，经常受点焊过程中相关因素的影响，其应用
受到了一定的限制。
 
铝合金的电阻点焊质量控制技术究其原理都是通过控制焊接诸参数以达
到控制熔核形成。在这一方面吉林大学的赵熹华教授提出了一条独辟蹊径的
方法，即采用孕育处理的方法影响熔核凝固过程，并实现对凝固组织稳定有
效的控制。目前的各种常用的点焊质量控制技术都是围绕如何保证熔核尺寸
稳定，是从“量”的角度实现的质量控制，而孕育处理力图从控制点焊熔核
凝固过程本身出发，即从“质”的方面改善和提高焊点质量。通过对 
LY12CZ
铝合金点焊熔核进行孕育处理，成功的将未经孕育处理时 
LY12CZ 
铝合金点
焊熔核内的“柱状晶
+
等轴晶”组织转变为完全等轴晶的组织并细化了晶粒，
使熔核中的薄弱面彻底消失，提高了力学性能，其拉剪载荷可提高 
1/3
，抗
疲劳循环次数可提高 
2 
倍以上
[28]
。
 
由于铝合金点焊过程的特殊性，单一的电参数，动态电阻、热膨胀位移
等质量控制方法效果并不明显，铝合金电阻点焊的质量控制将由传统的单一吉林大学博士学位论文
 
  4
控制模式发展为多种控制模式相结合的方式。其控制理念由传统的控制向智
能化、集成化发展，先进的控制技术、计算机技术、人工智能技术、电子技
术将会越来越广泛深入地应用到铝合金点焊质量控制领域，其应用范围也将
走出实验室向工程化、实用化发展。
 
1.3 人工智能技术在点焊中的应用
 
1.3.1  人工智能技术在点焊工艺设计中的应用
 
电阻点焊过程是一个高度非线性、多变量耦合作用的复杂过程。焊接工
艺集中体现了焊接技术本身的复杂性与经验性，是保证焊接质量的前提，因
而被视为焊接生产中最为关键的技术之一。电阻点焊工艺设计智能系统属于
设计型智能系统，具备一般工程设计的特点——高度智能、复杂、专家水平、
创造性。应用人工智能技术来进行电阻点焊工艺设计是解决这一问题的有效
途径
[29][30]
。
 
文献
[31]
提出一个集成专家系统技术、人工神经网络、模糊技术的电阻
点焊工艺参数选择人工智能系统。该系统采用专家系统技术和人工神经网络
技术进行电阻点焊工艺参数规划，通过集成多种人工智能技术建成一个智能
混合系统，充分利用多种人工智能技术的优势。系统使用模糊技术对电阻点
焊工艺参数进行优化，一般情况下经过几次优化后，就可以得到相应理想的
优化的点焊工艺参数。
 
文献
[32][33]
研究的电阻点焊工艺参数选择系统中，将神经网络和其他几
种知识表示形式集成在同一个系统中，以神经网络的表示形式为系统的核心，
利用神经网络的自学习功能，对大量现有事例进行学习，提取隐含的内在规
律，并转化为网络自身的结构；系统利用神经网络的非线性映射特性，能够
较完备表示点焊过程中工艺参数选择和焊点质量评测所需的专家知识；能够
迅速响应外部请求并作出判断，从而满足了点焊过程对实时性的要求；由传
统的知识表示形式为神经网络提供所需的预处理和知识解释，从而充分发挥
各自的优势，有效地解决神经网络存在的不精确和缺乏对推理过程的明显解
释等自身缺陷。
 第 
1 
章
  
绪
      
论
 
  5
电阻点焊工艺参数众多，参数之间一般情况下是一种离散的，病态的多
对多映射关系，在采用人工神经网络技术实现电阻点焊工艺参数规划时，在
较大范围内使用人工神经网络进行输入和输出之间的映射比较困难，如果样
本集数量同网络结构规模比例相差很大，则其泛化能力很差。
 
1.3.2  人工智能技术在点焊过程控制中的应用
 
电阻点焊过程是一个热、力、
电三者耦合的时变过程，而且具有
过程时间短，难以直接对焊接质量
进行检测等特点；点焊实施过程中
干扰因素较多（网压波动、电极磨
损、电流波动等），这些都使得点焊
过程难以建立精确的数学模型，用
传统的控制方法对电阻点焊质量进
行监控变得非常困难
[34][35][36]
，而采
用用人工智能技术替代传统的控制
方法对电阻点焊过程进行控制获得了较好的效果
[37]
。
 
文献
[38]
提出了一个智能点焊控制系统，采用模糊逻辑推理技术来补偿
在电阻点焊过程中工艺参数的偏差对点焊熔核形成过程的影响，采用模糊逻
辑控制来解决电阻点焊工艺过程中缺少精确的数学模型的缺陷。在点焊实时
控制中，采用电极位移量作为焊接熔核形成过程的表征信号，并以其作为调
节焊接过程参数的反馈参数来获得合适的电阻点焊熔核形成热量输入。在一
个较宽焊接工艺条件范围内，以大量实验数据为基础，提取出相关的电阻点
焊过程控制规则。采用人工神经网络来提供点焊过程中输入输出参数之间的
映射并调整相应的模糊规则。其控制总体示意图见图 
1-1
。该 
ANN(
结构为
4-7-1 
的网络
)
以实验数据离线训练成标准电极位移
(D)
和位移变化率
(V)
与加
热百分数
(H%)
和焊接时间
(t)
的模型，电阻点焊过程中，
ANN 
实时提供不同
焊接条件下的电极位移和位移变化率。模糊控制器输出晶闸管的控制角，以
调节焊接输入能量，使实际的电极位移曲线不断逼近标准电极位移曲线，达
到控制焊接质量的目的。其缺点是电极位移不能排除电阻焊设备自身特性对
图 
1-1 FLC 
算法框图
[38]
 
Fig 1-1 the block diagram of FLC algorithmn吉林大学博士学位论文
 
  6
其的影响，这对 
ANN 
的样本集提出很高的要求，在实际应用过程中较难实
现。
 
文献
  [39]
等提出一个电阻点焊模糊自适应控制系统，建立了一个电流
参考模型，根据动态电阻的划分提出了一种点焊质量的评估方法。首先根据
焊接电流和动态电阻，采用有限元法离线计算出焊接能量、焊接电流与熔核
尺寸间关系的参考模型。在实际的控制系统中将动态电阻分成 
4 
个不同的阶
段，根据实时检测出的焊接过程动态电阻值，通过电流参考模型得出过程的
参考参数，由模糊控制器发出自适应控制指令，完成点焊过程的自适应控制，
如图 
1-2 
所示。由于铝合金以及不锈钢在电阻点焊过程中，动态电阻曲线为
单调下降而不同于低碳钢动态电阻的变化，因此这种方法难以在铝合金、不
锈钢等材料上获得应用。
 
文献
[40]
研制了一个神经网络同模糊技术结合的点焊质量控制系统，采
用人工神经网络模块作为以时间为输入，以电极位移、电极位移速率作为输
出的映射；而以电极位移作为模糊控制器的模糊偏差输入量，以提供给熔核
的能量作为输出控制量。计算机模拟结果显示该系统抗干扰能力强，而且能
够对在线工艺扰动进行补偿，能够得到满意的点焊接头。文献
[41]
研制了一
个复杂的基于人工神经网络技术的点焊在线质量监控系统，包含的人工神经
网络不需要任何的材质、电极和焊机特性之间的规则说明，通过基于样本的
训练，系统可依据电流和电压测量值对焊点质量进行预测。由于神经网络能
够识别结果中的干扰，通过相应的训练，它可以自适应的识别电极磨损，电
极形状、工件厚度、以及分流等工艺参数的变化，并预测其对焊接质量的影
响。
 
传统的点焊电源控制器多采用 
PID 
控制方式，而模糊控制器与 
PID 
控制
图 
1-2  
模糊自适应控制框图
[39] 
Fig.1-2 the control diagram of adaptive Fuzzy
[39]
 第 
1 
章
  
绪
      
论
 
  7
器相比具有调节速度快、鲁棒性好等优点，现在采用模糊控制算法的点焊控
制器已越来越多
[42]~[46]
。文献
[47][48][49]
都开发了电阻点焊模糊控制器，工
艺试验表明其性能良好，具有较高的精度及稳定性。
 
近年来随着计算机网络技术的迅速发展，分布式人工智能技术已经成为
一个新的研究热点
[50]
。在分布式人工智能研究中，多智能主体（
multiple 
agents
）由于可以通过知识共享而相互交流交互，越来越引起众多学者的关
注
[51]
。一个智能主体在没有人进行干涉的情况下具有推理决策能力，具有较
高的智能性。文献
[52]
研究了一个应用多智能体系统来实现点焊机器人柔性
加工系统的协调控制。其系统针对点焊柔性加工系统的特点，构造了具有任
务管理智能体，通信管理智能体以及与物理设备相对应的多个节点智能体的
多智能体控制系统。该多智能体系统采用黑板结构，通过集中式的网络结构
以及协商的合作协调机制在系统中进行资源分配，规划生产任务，监视资源
运行，以便充分利用系统资源。
 
1.3.3  人工智能技术在点焊质量评测中的应用
 
文献
[53][54]
中用焊接电流有效值、每半个周波的动态电阻值、电极直径
及焊接热量作为 
BP 
网络的输入参数对焊点直径进行估测，根据焊点直径所
处区域来确定焊接电流的增加步长，这样既完成了对焊点质量的估测，又完
成了为补偿点焊电极磨损而对焊接电流增加步长的优化设定。将 
ANN 
模式
识别和映射能力与模糊逻辑控制处理不确定和非精确数据的能力相结合，建
立新的控制系统，可以克服现有控制系统在镀锌钢板焊接质量监控方面的不
足和局限性。
 
文献
[55]
提出用扫描声学显微镜结合人工神经网络技术来监控电阻点焊
焊点质量的方法。它采用数学形态学技术从焊点的扫描图像中可以得到点焊
熔核的几何尺寸参数等，并以这些参数作为人工神经网络的入口参数，而采
用点焊熔核的剥离试验及专家的评判作为神经网络的输出参数。采用 
JAVA
编程来实现扫描图像处理，人工神经网络学习等。通过神经网络的训练得到
输入输出参数之间的映射，结果表明其具有很高的辨识正确率。
   
文献
[56]
针对铝合金的电阻点焊，研究了人工神经网络在点焊质量评测
中的应用。以 
LD10CS 
铝合金为例，分析了铝合金焊接时动态电极电压的变吉林大学博士学位论文
 
  8
化，提出了以每周波动态电极电压为输入参数，以焊点强度和熔核直径为输
出参数的误差逆传播神经网络，对点焊质量进行评测的方法。由于电极间的
动态电压综合了动态电阻和焊接电流两方面的因素，可以较好地反映焊点的
状态，因此，将焊接过程每周波
(0.02s)
的动态平均电压 
U
di
(i=1,2,
…
,14)
表征
为网络的输入，而焊点的拉剪力、熔核直径作为网络的输出。根据网络的输
入输出矢量
,
构造了一个输入层单元数为 
14
，一个隐含层，一个输出层单元数
为 
2 
的 
BP 
网络，以试验提供的 
36 
组训练数据作为样本网络。实验结果表明
了该估测方法的可行，为铝合金点焊的在线质量估测奠定了良好基础。
 
文献
[57][58]
建立人工神经网络点焊质量预测与评估模型。利用 
ANN 
对
输入输出的映射，以动态电阻作为输入参数，焊点质量
(
如熔核尺寸、拉剪强
度等
)
作为输出参数，用实验数据作为训练样本对 
BP 
网络进行训练，训练后
的网络能自动完成从输入到输出的映射，从而能对电阻点焊熔核质量进行评
估。文献
[59]
研究了人工神经网络点焊质量预测模型中网络结构，样本集选
取以及作用函数等对神经网络训练及输出结果精度的影响。
 
文献
[60]
提出了一个采用神经网络同模糊算法相结合的电阻点焊智能质
量控制系统。以没有飞溅情况下的与点焊电极位移相关的电极位移及其变化
率等参变量和在产生飞溅条件下的不同焊接周波的动态电阻作为模糊逻辑的
输入参数，以点焊熔核的强度特性作为输出构造了一个模糊系统。采用神经
网络学习算法作为模糊输入的前处理，提高了系统的学习能力和智能性。模
糊推理采用 
Takagi-Sugeno 
为内核，实验结果反映出系统具有较小的预测误
差。
 
1.4  逆变焊接电源的发展状况
 
随着半导体、电力电子技术和计算机技术的快速发展以及大功率电子元
器件的出现，为弧焊电源技术提供了广阔的发展空间，特别引人瞩目的是具
有更新换代意义的高效节能、重量轻、体积小的逆变焊机。世界发达国家自
1978 
年研制第一台逆变焊机并使其商品化以来，该机便获得了高速发展，其
品种、规格和使用范围都在迅速地增加，并向多功能微机控制方向发展，已
成为高新技术的标志之一
[61][62]
。逆变焊机按开关器件来分有晶闸管式、晶体
管式、场效应管式和 
IGBT 
四种类型。其基本工作原理如下所示：单相或三第 
1 
章
  
绪
      
论
 
  9
相 
50/60Hz 
的交流网路电压经输入整流器整流，借助大功率电子开关
(
晶闸
管、晶体管、场效应管和 
IGBT 
管
)
的交替开关作用，又将直流变换成几千至
几万 
Hz 
的中频交流电；再分别经中频变压器、整流器和电抗器的降压、整
流 与 滤 波 就 得 到 所 需 的 焊 接 电 压 和 电 流 ， 输 出 电 流 可 以 是 直 流
（
AC-DC-AC-DC
）或交流。借助于大功率电子开关和闭环反馈电路，实现
对外特性和电弧电压、焊接电流的控制调节。这种电源基于变频原理，以小
巧的中频变压器取代了传统焊机中笨重的工频变压器，使工作在中频下的主
功率变压器和电抗器体积变小。铜、铁总量减少后，铜损、铁损也相应下降，
焊机效率可达 
80%
～
90%
。而且，由于惯性环节的减少及采用了电子电路，
可以非常方便地对电弧电流电压的静动态波形参数、特征进行微秒～毫秒级
的控制，因此，它的输出电流可以逼近焊接工艺所要求的理想状态。
 
现代逆变技术之所以得到如此广泛的应用，是因为其具有诸多优越性：
它能明显减小用电设备的体积和重量，节省材料；高效节能，减小功率损失，
并具有较大的功率因数；动态响应快，控制性能和电气性能好等优点
[63]
。其
良好的响应和控制性能为焊接过程控制提供了良好的基础。因而其具有巨大
的发展空间和市场潜力。作为逆变技术的先决条件，电力电子器件的快速发
展为现代逆变技术奠定了良好的基础，并为不同的逆变应用场合提供了不同
的元器件支持
[64]
。近年来，功率器件 
IGBT 
发展较快，它是 
MOSFET 
与 
GTR
的复合器件，既具有 
MOSFET 
的工作速度快、输入阻抗高、驱动电路简单的
优点，又包含了 
GTR 
的载流量大、阻断电压高等优点，其工作频率范围可以
从几 
K~
几十 
K
，所以，
IGBT 
很适合中等功率电源的应用，是作为焊机电源
的较好的开关器件。目前在各发达工业国家，逆变焊机已相当普遍，手工电
弧焊、
TIG 
焊、
MIG/MAG 
焊已广泛采用逆变电源。据有关资料统计报道，
美国整流焊机的 
16%
、日本气保焊机的 
41%
和整流焊机的 
32%
均已采用逆变
式焊机
[65]
。目前，美国的米勒、日本的松下、富士、芬兰的肯比等焊接设备
公司均能生产成熟的可供商业出售的 
IGBT 
焊机产品。
 
我国逆变焊机的研究开发起步于 
20 
世纪 
70 
年代末期。
1982 
年，成都电
焊机研究所开始研制晶闸管逆变式弧焊整流器，并于次年研制出我国第一台
商业化的 
ZX7-250 
逆变式弧焊电源，当年通过该项目的部级鉴定。
80 
年代末
期，各高等学校、科研院所、生产厂家先后生产了各种容量的晶体管逆变焊
机、场效应管逆变焊机、
IGBT 
逆变焊机等一系列产品。其中，不少乡镇企吉林大学博士学位论文
 
  10
业和民营企业也通过技术转让等方式参与其中
[66]
。从 
1994 
年起，全国范围
内掀起了新一轮的逆变焊机热潮，并取得了可喜的成果。经过几十年的技术
发展，我国逆变焊接电源的可靠性已经有了相当的保障，产品的性能也在不
断的提高，市场份额逐年增加。而我国的逆变焊机产品主要集中在弧焊领域，
产品种类大多局限于手工焊机与 
TIG 
焊机，焊机结构也相对简单，焊机潜力
也不能得到充分发挥，高端市场仍被国外产品所占领。
 
逆变技术在弧焊设备中的应用，为逆变阻焊电源提供技术参考，发展逆
变式点焊机的条件已日臻成熟。从国际范围看，逆变式点焊机出现于 
20 
世纪
80 
年代中期。之后，日本、美国等国家先后推出逆变式电阻焊机产品，并应
用于汽车、家电、电子行业，并建立了以逆变点焊机器人为主的汽车车身焊
装线，使逆变式电阻点焊机进入实际应用阶段。如韩国 
TAESUNG 
公司的系
列产品 
TST-105
、
TST-300 
和 
TST-5000 
及美国汉森（
HANSON
）公司生产的
IGBT 
逆变式（
170KVA
、
340KVA
）点焊
/
凸焊
/
缝焊三用焊机等。国内虽在逆
变弧焊领域比较成功，但在电阻焊领域，该项技术的优点还未得到发挥，仍
有待于进一步的研究与开发。在这方面国内研究工作开展较早的单位有华南
理工大学、上海交通大学、吉林工业大学和成都电焊机研究所等等，已经可
供应国内市场的有广州松兴电器有限公司生产的 
DB
－
6A/ DB
－
6T 
逆变式精
密点焊机、成都电焊机研究所研制的悬挂式逆变次级整流点焊机等
[67]~[73]
。
 
1.5 DSP 的发展状况和性能特点
 
DSP 
是数字信号处理（
digital  signal  processing
）或集成化的单片数字信
号处理器（
digital signal processor
）的英文缩写。
DSP 
技术是利用计算机或专
用处理设备，以数值计算法方法对信号进行采集、变换、综合、估算与识别
等加工处理借以达到提取信息和便于应用目的的一种技术
[74]~[77]
。
DSP 
技术
包括数字信号处理的理论和数字信号处理的实现。
 
数字信号处理是一门涉及许多学科而又广泛应用于许多领域的新兴学
科。在通常的实时信号处理中，它具有可程控、可预见性、精度高、稳定性
好、可靠性和可重复性好、易于实现自适应算法、大规模集成等优点，这都
是模拟系统所不及的。
 
在数字信号处理技术发展的初期（二十世纪 
50
～
60 
年代），人们只能在第 
1 
章
  
绪
      
论
 
  11
微处理器上完成数字信号的处理。直到 
70 
年代，有人才提出了 
DSP  
的理论
和算法基础。一般认为，世界上第一个单片 
DSP 
芯片应当是 
1978 
年 
AMI 
公
司发布的 
S2811
。
1979 
年美国 
Intel 
公司发布的商用可编程器件 
2920 
是 
DSP
芯片的一个主要里程碑。这两种芯片内部都没有现代 
DSP 
芯片所必须有的单
周期乘法器。
1980 
年，日本 
NEC 
公司推出的 
PD
７７２０是第一个具有硬件
乘法器的商用 
DSP 
芯片，从而被认为是第一块单片 
DSP 
器件。随着大规模
集成电路技术的发展，
1982 
年美国德州仪器公司推出世界上第一代 
DSP  
芯
片 
TMS32010 
及其系列产品，标志着实时数字信号处理领域的重大突破。同
通用微处理器相比，最新的数字信号处理器具有以下特点：
 
(1)   
采用哈佛结构而不是传统的冯·诺曼结构  传统的冯·诺曼结构的
数据总线和指令总线是公用的，因而在高速运算时在传输通道上会出现瓶颈
现象。而采用哈佛结构的 
DSP 
芯片片内至少有 
4 
套总线：程序的地址总线与
数据总线，数据的地址总线与数据总线。由于这种结构的程序总线和数据总
线分离，因而可以在一个机器周期内同时获取程序存储器内的指令字和数据
存储器内的操作数，从而提高了执行速度。
 
(2)   
采用硬件乘法器  数字信号处理中最基本的一个运算是乘法累加
运算，也是最重要和最耗时的运算，为了提高芯片的运算速度，必须大幅度
降低乘法运算的时间。于是在 
DSP 
芯片中设计了硬件乘法器，并且运算所需
时间最短，仅为一个机器周期。这种单周期的硬件乘法器是 
DSP 
芯片实现高
速运算的有力保证。现代高性能的 
DSP 
芯片数据字长从 
16 
位增加到 
32 
位，
具有两个或更多的硬件乘法器，以便提高运算速度。
 
(3)   
采用多个并行处理单元  
DSP 
内部一般都集成了多个处理单元，比
如 
MUL(
硬件乘法器
)
，
ACC(
累加器
)
，
ALU(
算术逻辑单元
)
，
ARAU(
辅助算
术单元
)
，
DMA 
控制器等。它们可在同一个周期内并行地执行不同的任务。
 
(4)   
采用了流水线技术  
DSP 
芯片的哈佛结构就是为实现流水线技术
而设计的。采用流水线技术可使 
DSP 
芯片单周期完成乘法累加运算，极大地
提高了运算速度。
 
(5)   
采用了大容量片内存储器  外部存储器一般不能适应高性能 
DSP
核的处理速度，因此在片内设置较大容量的程序
/
数据存储器以减少对外部存
储器的访问速度，充分发挥 
DSP 
核的高性能。
 
(6)   
设置了多种外设和接口  为了加强 
DSP 
芯片的通用性，
DSP 
芯片吉林大学博士学位论文
 
  12
上增加了许多外设。例如，多路 
DMA 
通道、外部主机接口、外部存储器接
口、芯片间高速接口、外部中断、串行口、定时器、可编程锁相环、
A/D 
转
换器和 
JTAG 
接口等。
 
(7)   
设置了特殊寻址模式  为了满足 
FFT 
积分数字信号处理的特殊要
求，
DSP 
芯片大多包含有专门的硬件地址发生器，用以实现循环寻址和位翻
转寻址，并在软件上设置了相应的指令。
 
(8)   
设置了零消耗循环控制  数字信号处理有一大特点：很多运算时间
都用于执行较小循环的少量核心代码上。大部分 
DSP 
芯片具有零消耗循环控
制的专门硬件，可以省去循环计数器的测试指令，提高了代码效率，减少了
执行时间。
 
(9)  
安排了 
JTAG 
接口  
DSP 
芯片的结构非常复杂，工作速度又非常高，
外部引脚也特别多，封装面积也非常小，引脚排列异常密集，对于此种情况
,
传统的并行仿真方式已不适合于 
DSP 
芯片。于是有关国际组织公布了 
JTAG
接口标准。在 
DSP 
芯片内部安排 
JTAG 
接口，为 
DSP 
芯片的测试和仿真提
供了很大的方便。
 
(10)  
程序的加载引导  
DSP 
芯片要执行的程序一般在 
EPROM/FLASH
存储器中。但是该存储器的访问速度较慢，虽然有一些高速 
EPROM/FLASH
存储器，但价格昂贵、容量有限，而高速大容量静态 
RAM 
的价格又在不断
下降。故采用程序的加载引导是一个性能价格比较好的方法。
DSP 
芯片在上
电复位后，执行一段引导程序，用于从端口
(
异步串行口、
I/O 
口、主机接口
)
或外部 
EPROM/FLASH 
存储器中加载程序至 
DSP 
芯片的高速 
RAM 
中运行。
 
在近 
20 
多年时间里，
DSP 
芯片的应用已经从军事、航空航天领域扩大
到信号处理、通信、雷达、消费等许多领域。主要应用有：信号处理、通信、
语音、图形图像、军事、仪器仪表、自动控制、医疗、家用电器等
[78]~[84]
。
 
1.6  本文研究内容
 
铝合金电阻点焊质量控制过程是个复杂的系统工程，从铝合金电阻点焊
工艺设计到电阻点焊过程控制等，很多因素、子系统都对铝合金电阻点焊质
量有着较大的影响。本文拟建立一个铝合金电阻点焊智能集散型控制系统，
以主控计算机为中心，管理、结合分散在工业控制用微处理器控制系统。主第 
1 
章
  
绪
      
论
 
  13
控计算机具有丰富的人机交互资源以及大量的存储空间，容易实现友好的人
机界面，控制管理功能较强。而下位工业微控制器直接面对工业测控对象，
执行底层控制以及数据采集功能。主控计算机和下位工业控制器既可以相互
独立工作，彼此又具有联系，二者集成一个铝合金电阻点焊智能控制系统。
其中主控计算机完成总体控制功能，包括铝合金电阻点焊工艺参数设计，模
块总体控制，对下位控制器采集的数据进行存储、分析等功能。下位机完成
铝合金电阻点焊过程实时控制，在线数据采集等功能。本文研究内容为上位
机软件控制系统中铝合金电阻点焊工艺设计智能系统及下位机铝合金电阻点
焊过程智能控制器，本文为国家自然科学基金支持项目“铝合金电阻点焊工
艺设计及质量控制智能化”的主要部分，项目编号为 
50175048
。
 
在上位机软件控制系统中，本文研制一种铝合金电阻点焊工艺设计智能
系统，其主要内容包括：
 
(1)  
建立合理的铝合金电阻点焊工艺设计智能模型，以利于实现基于规
则（
rule based reference, RBR
）的推理、基于事例的推理（
case based reference, 
CBR
）与 
FNN 
相结合。
 
(2)  
采用 
CBR
、
RBR 
和 
FNN 
等多种人工智能技术相结合的混合推理方
式，以克服单一推理方式所固有的不足，尽可能的贴近领域专家的思维方式
进行铝合金电阻点焊工艺设计。
 
(3)  
建立多途径知识学习方式，包括基于规则的学习，基于事例的学习，
基于 
ANN 
的学习，及系统自学习等学习方式。
 
对于铝合金电阻点焊过程智能控制器的研究包括：
 
(1)  
为提高铝合金电阻点焊过程控制精度，采用 
DSP 
芯片 
TMS LF2407A
作为逆变电阻点焊智能控制器的主芯片，设计相应的人机交互模块、
IGBT
驱动模块、故障检测以及保护等辅助功能模块的硬件组成，为进行铝合金电
阻点焊质量控制提供硬件条件。
 
(2)  
在分析控制器功能的基础上，进行软件系统各功能模块的设计。包
括人机交互子模块，故障诊断模块等。采用相应的人工智能技术进行电阻点
焊过程控制，并进行相应仿真，提高铝合金电阻点焊过程控制的质量。
 
      吉林大学博士学位论文
 
  14
第 2 章 系统总体设计 
2.1  总体概述
 
自 
70 
年代中期第一套集散控制系统（
distributed control system, DCS
）在
工业控制领域应用以来，随着电路技术、显示技术、软件技术以及其他新技
术的应用和发展，集散控制系统得到了飞速的发展，其主要特点为集中管理
和分散控制。随着计算机技术以及网络技术的不断发展，集散型系统不仅主
要用于分散控制而且向着集成管理的方向发展。集散型控制系统从系统结构
通讯层
 
 
铝合金电阻点焊智能控制系统下位机
总控制层
 
铝
合
金
电
阻
点
焊
工
艺
设
计
智
能
模
块
 
 
铝
合
金
电
阻
点
焊
质
量
预
测
模
块
 
 
铝
合
金
电
阻
点
焊
焊
接
参
数
记
录
及
存
储
铝合金电阻点焊智能控制系统上位机
图 
2-1 
铝合金电阻点焊集散型智能控制系统
 
Fig2-1 the DCS structure of AARSW intelligent control system 第 
2 
章
  
系统总体设计
 
  15
上分析，基本上都由三部份组成：分散过程控制装置部分、集中管理系统以
及相互之间通讯系统
[85]
。采用集散型智能控制系统可以提高铝合金电阻点焊
过程及质量可控性，提高系统的智能化水平，便于应用于大规模生产的质量
及过程控制，比较符合铝合金电阻点焊易于实现大规模生产以及机械化的特
点。铝合金电阻点焊集散型智能控制系统总体结构如图 
2-1 
所示。系统由铝
合金电阻点焊智能控制系统上位机、通讯层和铝合金电阻点焊智能控制系统
下位机组成。其中铝合金电阻点焊智能控制系统上位机完成系统总体管理控
制功能，其中包括铝合金电阻点焊工艺参数智能设计模块、铝合金电阻点焊
质量预测模块以及铝合金电阻点焊焊接参数记录及存储模块组成。铝合金电
阻点焊智能控制系统下位机完成焊接过程的实时控制，前端数据采集，接受
系统上位机指令等功能。二者通过通讯层连接实现两个系统之间的数据传输。
上位机同下位机之间彼此互相联系而又相互独立，从而可控性良好。本文主
要研究内容为上位机中的铝合金电阻点焊工艺设计智能模块以及下位机中铝
合金电阻点焊智能控制系统。
 
2.2  铝合金点焊工艺设计智能系统
 
2.2.1  设计思想
 
铝合金电阻点焊工艺设计智能系统属于设计型智能系统。焊接工艺设计
属于工程设计的范畴，具备一般工程设计的特点——高度智能、复杂、专家
水平、创造性。逻辑思维和形象思维相结合是设计思维活动的特征
[86][87][88]
。
形象思维很大成分与人类专家的经验有关，即对专家经验知识的依赖性较强；
逻辑思维则依靠一定的规则、定理，依靠推理来对问题进行求解。在人类的
智能活动中，两者互相渗透，共同完成求解过程。智能系统的求解应尽可能
模仿人类专家的思维过程。设计系统一般都是非确定系统。即它没有或者部
分没有确定的计算方式或数学模型，不能以纯逻辑思维的形式来求解，一般
都必须借助形象思维来求解，必须通过人的经验，通过学习、验证、再学习、
再验证的多次循环来接近所求证的目标状态。铝合金电阻点焊工艺设计无疑
也是非确定系统，而且是一个多输入多输出的病态的复杂求解过程，它是一吉林大学博士学位论文
 
  16
个在很大程度上依赖于专家知识、经验的问题求解过程，其中既有直觉的快
速类别的经验思维和形象思维，又有深层次的逻辑思维。系统中的许多参数
不可能一开始就取得，有些参数还需要通过再设计才能确定。如焊接工艺中
的焊机参数，本身是求解目标，但同时又是确定焊接参数所必须的约束条件。
由于设计系统的初始状态中包含部分未知状态参量，从而使设计系统成为局
部的闭环系统，而闭环系统必须通过反复设计才能求解。
 
由于铝合金电阻点焊工艺本身的复杂性，同一种材料可能根据不同的质
量要求可以有偏软、偏硬等多套合格的焊接规范，甚至可能随着具体的焊机
而变化，因此点焊工艺制定经常是通过大量工艺试验，对多种可行方案的择
优。这种情况使得如果单一使用传统的基于规则的专家系统技术，具体点焊
工艺设计知识的规则提取非常困难，几乎难以避免诸多规则间的矛盾和冲突，
从而引起规则推理过程中的组合爆炸和相互冲突等问题。人工神经网络研究
的兴起，使人工神经网络在很多领域都表现出强大的生命力。其从结构上模
仿人脑，具有强大的联想功能，对于没有学习的事例也可进行预测。而且，
知识获取较为容易，具有传统专家系统所不具备的优势。但其也有不足，如：
只适合小规模问题的泛化，否则精度下降；
  
需要一个齐全的训练样本集；
  
网
络结构的确定没有一致的解决办法；网络权值的训练比较费时；无法解释推
理依据或推理过程等
[89][90] [91]
。目前的研究显示，单一的智能方法都有着自身
的不足，而且铝合金电阻点焊工艺设计过程是个病态问题的求解过程，难以
用单一的智能方法进行较为理想的求解。
 
基于上述对设计系统特点的认识，铝合金电阻点焊工艺设计系统的关键
在于：根据系统的功能需求分析，充分考虑点焊领域专家在进行点焊工艺设
计时的思维活动过程，依据点焊工艺本身所具有的特征，并结合专家系统、
人工神经网络、模糊推理等人工智能的实现方法，建立相应的智能模型，并
由此得出系统的控制结构。然后根据控制结构，采用相应技术来设计智能系
统的各个部件，完成智能系统的设计工作。
 第 
2 
章
  
系统总体设计
 
  17
2.2.2  系统总体分析
 
2.2.2.1  
铝合金点焊工艺设计过程总体分析
 
铝合金电阻点焊工艺参数包括：材质参数，焊接参数，设备参数、接头
形式以及操作要求。其中材质参数包括材质类别、牌号、板材厚度以及材质
的物理性质参数（导电性、导热性、屈服强度等）；焊接参数包括：预热电流、
预热时间、焊接电流、焊接电流时间、后热电流、后热电流时间、预压力、
锻压力、锻压时间等等；而设备参数包括供电波形、设备容量、电极臂参数、
电极（材质、尺寸、类型等）；接头形式包括焊点间距、搭边尺寸等。一般情
况下，由已知材质参数和设备参数求解相应的焊接参数以及操作要求。在某
些情况下，设备参数同时也可作为未知参数，即为求解目标的一部分。通常
情况下，焊接领域专家在进行铝合金电阻点焊工艺设计过程时，首先回忆或
者查找以前曾经完成的铝合金点焊工艺事例，如果存在同当前待求解事例相
似的工艺事例，则提取出相似事例作为求解当前点焊工艺的蓝本，并对不同
之处予以修正，然后得出新的铝合金电阻点焊工艺参数。如果没有同当前待
求解的工艺要求相近似的工艺事例，则领域专家根据铝合金电阻点焊的工艺
规则，考虑铝合金电阻点焊的过程特征，根据相应的工艺要求制定其工艺参
数。
 
2.2.2.2  
系统功能分析
 
铝合金电阻点焊工艺设计过程是一个复杂的多参数的求解过程。分析铝
合金电阻点焊工艺设计过程，系统功能分析如下：
 
     (1)  
根据影响铝合金电阻点焊过程的本质因素，混合多种智能推理方法，
进行铝合金电阻点焊工艺参数的求解；
 
(2)  
能够就焊接工艺方面相关知识提供较为全面的咨询，包括电极选用，
材料焊接性，焊接缺陷等方面的知识、资料等；
 
(3)  
能够对系统所具有的知识进行更新，即具有学习能力；
 
(4)  
智能系统的知识表示，推理机应有较好的灵活性；
 吉林大学博士学位论文
 
  18
(5)  
具有良好的知识库接口，并提供控制推理过程的途径。
 
系统的功能结构如图 
2-2 
所示。点焊工艺设计智能系统由三个主要的功
能模块构成，即点焊工艺设计模块、机器学习模块以及咨询模块。在点焊工
艺设计模块中完成焊接初始条件的输入，设计点焊工艺规范和能对已制定的
工艺规范进行修改的功能。在机器学习模块中，包括事例库的维护、推理规
则的维护及神经网络的训练学习三个子模块。在咨询模块中，完成材质点焊
焊接性咨询，电极知识咨询和点焊缺陷分析等功能子模块。
 
 
图 
2-2   
铝合金点焊工艺设计智能系统功能结构图
 
Fig.2-2 the function structure of intelligent process design of  
aluminum alloys spot welding
（
AASW
）
 
2.2.3  系统的智能模型
 
工程设计系统的智能模型就是模拟设计思维方法的计算机模型，模型的
建立要有利于采用相应的人工智能技术。根据铝合金电阻点焊工艺设计的特
点，本系统采用了多种智能技术的混合模型。通过人机交互接口同总控层进
行信息交互。在总控制层中，采用专家系统技术对由用户提出的求解初始条
件进行解析，根据不同设计阶段的设计目标选择相应的智能求解技术。焊接
 
点焊工艺
 
设计智能
 
系
     
统
点焊工艺设计
机器学习
点焊知识咨询
输入点焊基本条件
 
制定点焊工艺规范
 
修改点焊工艺规范
 
事例库维护
 
推理规则维护
 
点焊性咨询
 
电极知识咨询
 
神经网络训练
 
点焊缺陷分析
 第 
2 
章
  
系统总体设计
 
  19
工艺参数的求解主要由基于事例的求解，基于模糊推理的求解以及基于神经
网络的求解三部分构成。这三部分是相互关联在一起更好的完成焊接工艺参
数求解的设计目标
  
。传统的专家系统技术比较适合处理符号文字的逻辑处
理，因此用作进行点焊工艺辅助知识的设计。系统总体控制模型见图 
2-3
。
 
建立铝合金点焊工艺设计智能系统的集成模型是设计整个系统的关键。系统
设计智能化的一个目标就是能够模拟焊接领域专家的思维特点，本系统使用
基于事例推理来实现焊接领域专家在工艺参数设计过程中利用先前设计经验
的类比思维，并且首次同模糊推理技术相结合从深层次上模拟设计过程的领
域专家的思维中的模糊性的特点，提高系统的智能化水平。
 
随着计算机技术的不断发展，铝合金点焊过程的数值模拟取得了很快的
发展
[92]~[95]
。点焊熔核形成过程的不可见性和焊接过程的瞬时性给试验研究
带来了很大的困难，数值模拟成为点焊机理研究的关键技术之一。建立点焊
工艺参数与焊点质量之间的关系是实现铝合金点焊过程控制智能化的基础，
也是制订焊接工艺方案的重要依据。本文引入数值模拟技术作为神经网络样
本集的一个有益补充。
 
图 
2-4 
为系统的集成模型。系统由铝合金电阻点焊工艺参数求解推理机
模块、机器学习模块和工艺参数辅助咨询模块组成。其中推理机模块主要由
带有模糊推理的基于事例的铝合金电阻点焊工艺参数求解和以 
FNN 
技术为
核心的工艺参数求解组成。基于数据库技术的基于事例学习和以模糊神经网
络训练学习构成了系统的知识学习模块，并采用数值模拟铝合金电阻点焊工
人机交互接口
专家系统总控层
基于模糊推理的
参数求解
 
基于神经网络的
参数求解
 
基于专家系统
的辅助工艺
 
基于事例的参数
求解
 
图 
2-3   
系统的总体控制模型
 
Fig.2-3 the general control model of the system 吉林大学博士学位论文
 
  20
艺过程，为 
FNN 
提供相应的网络训练基本数据。
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
Fig.2-4 the system model of the intelligent process design of 
aluminum alloys spot welding 
2.2.4  系统总体流程
 
系统总体运行流程见图 
2-5
。进入主菜单后，用户选择不同的功能，系
统则执行相应的功能模块。在点焊工艺参数设计模块中，首先进行基于事例
推理的铝合金电阻点焊工艺参数求解，充分模拟焊接领域专家的类比形象思
维。如果求解不成功则转入模糊神经网络的求解，然后输出点焊工艺参数。
在工艺知识咨询模块中，系统根据用户输入的咨询条件使用数据库技术进行
相应的检索，并输出检索结果。在机器学习功能模块中，采用多种学习方式，
系统分别更新各自的知识库，实现对知识的学习功能。
 
图 
2-4   
铝合金点焊工艺设计智能系统模型
 
B
A
铝合金电阻点焊工艺设计智能系统
 
推
  
理
  
机
 
 
机器学习
 
 
辅助咨询
 
基
于
事
例
推
理
的
求
解
模
糊
神
经
网
络
的
求
解
基
于
事
例
的
学
习
 
模
糊
神
经
网
络
的
学
习
工艺知识
  
数据库
 
模糊神经网络
节点知识库
事
  
例
  
库 
：
CBR
＋
RBR
＋模糊推理技术
 B
：
FNN 
求解技术
 A
数
   
值
模
  
拟 第 
2 
章
  
系统总体设计
 
  21
2.3  铝合金点焊质量智能控制系统下位机总体设计
 
铝合金电阻点焊自身的特点，对铝合金电阻点焊设备及其控制系统提出
了很高的要求。常用的铝合金电阻点焊焊接设备包括三相次级整流式点焊机、
直流冲击波点焊机，三相低频点焊机，以及逆变点焊机等。其中逆变焊接电
源由于主变压器体积小、重量轻，节约材料损耗，而且控制性能好，动态响
应快，易于实现焊接过程的实时控制，在性能上有着很大的优势。逆变电阻
点焊电源已经成为一个发展趋势。电力电子技术的不断发展，
IGBT 
等功率
返回主菜单
主 
      
菜 
      
单
数据库技术检索
输入检索条件
工艺知识输出
工艺知识咨询
教
授
式
学
习
 
基
于
事
例
库
学
习
F
N
N
网
络
学
习
更新知识库
 
机器学习
 
点焊工艺参数输出
 
是
否
 
输入初始条件
 
基于事例的求解
 
成功？
 
基于 
FNN 
求解
 
工艺参数设计
 
图 
2-5 
总体流程图
 
Fig.2-5 the total flow chart 吉林大学博士学位论文
 
  22
元件可靠性的逐步提高，以及微处理芯片业高速的发展，为提高铝合金电阻
点焊的质量控制水平和精度提供了很好的支持。本文为提高铝合金电阻点焊
质量智能控制精度与水平，研制了电阻点焊逆变焊接电源及其控制器，在此
硬件设备的基础上讨论铝合金电阻点焊智能质量控制算法的应用。
 
电阻点焊设备中的控制系统作为整个设备的控制核心，其控制算法的选
择、控制结构的设计、相应控制器各个参数的选择，对控制系统的精度，实
时性、可靠性有着重要的影响。在已经确定了焊机主电路采用了逆变形式后，
控制系统的硬件及软件总体设计是电阻点焊质量智能控制的核心部分。
 
2.3.1  控制参数的选择
 
电阻点焊过程是个复杂的多参数影响，多变量耦合时变的过程。影响电
阻点焊质量稳定的因素是多方面的。材质自身的物理性质（导电性、导热性、
热容性、导磁性等）、板厚、加工状态、表面状态等决定了焊接过程参数的选
择；供电过程中网压的波动，焊接过程中电流的波动；在加压机构方面，焊
接压力的波动，是否具有良好的随动性；在结构方面，已有焊点的分流、装
配间隙太小；在对铝合金电阻点焊的影响方面，电极的材质、形状、尺寸以
及磨损程度等对点焊质量的影响更为明显。在点焊工艺参数设计过程中包括：
电流、压力、通电时间、电极形状及尺寸，点距及边距等。
 
 
式中：
T
—温度；
 
       r
，
z
—坐标；
 
       ρ
T
—温度为 
T 
时电阻率；
 
         
—导温系数；
  
         
—热容
/
体积；
 
简化的电阻点焊热传导微分方程式见（
2-1
）
[96]
，其中包括一个内部热源
项（
       
）；热源强度取决于焊接区电流密度分布。内部热源可进一步写作：
 
v
T
C
j 
ρ
2
a
v
c
4
22
16
D
I
C
j
Q
T
v
T
T
ρ
π
ρ
==
v
T
C
j
r
T
rr
T
z
T
a
t
T 
ρ
2
2
2
2
2
)
1
( 
+
∂
∂
+
∂
∂
+
∂
∂
=
∂
∂
(2-1) 
(2-2) 第 
2 
章
  
系统总体设计
 
  23
从上式可以推导出：在其他条件稳定的情况下，对焊接区温度影响最大的是
电流通路的直径，其次是焊接电流，而后是电阻率。
 
电阻点焊熔核形成过程是一个热、电、机械力三者的耦合过程。很难直
接进行控制，一般情况下，只能通过调整焊接电流，电极压力，以及改变电
流通过时间等参数来对熔核的生长进行控制。
 
电阻点焊控制参数的选择要对电阻点焊熔核的形成具有重要的影响或者
能够反映熔核的形成以及生长。很多研究人员对电阻点焊过程控制方式作了
大量研究，焊接电流，电极间电压，电极位移，动态电阻等都可以作为电阻
点焊过程控制参数。电极位移能很好的反映点焊过程熔核的生长变化情况，
近来获得了很多研究人员的重视。但是薄板的电阻点焊过程电极位移参数不
够敏感，而且点焊机机臂本身刚性对电极位移有很大的影响；动态电阻曲线
特征控制方法大多适合在电阻点焊焊接过程中动态电阻曲线有着二次峰值的
材质，如低碳钢。而铝合金由于其动态电阻曲线经过最初的陡降后趋于平坦，
难以用于焊接过程控制；焊接电流由于直接影响点焊熔核的形核和生长过程，
是其热量的来源，而且采集方便，是电阻点焊过程质量控制应用最为广泛的
监测参数。焊接过程中，保持焊接电流的恒定对保证熔核尺寸有着重要的意
义。但是在焊接过程中由于网压波动，次级回路阻抗的变化，焊件表面状况
不均等情况，都会使稳定的焊接条件发生波动，直接影响焊接质量；点焊电
极间电压和电流这两个动态电参数间的拟合关系既可反映焊接输入能量的变
化特征，又可反映熔核形成过程中的物理变化特征。对电流与电压特征量的
综合处理，可以解决不同材料电阻点焊中诸如网压波动、分流、电极磨损、
铁磁性物质进入二次回路等影响因素对熔核形成过程的影响。因此，本系统
以电阻点焊过程中的电流作为主要控制参数，同时采集电极间电压参数作为
辅助监测参数，以此提高电阻点焊过程的质量控制精度。
 
2.3.2  电流采集方式
 
电流的检测涉及两个方面：电流信号的采集及电流有效值的计算。采集
电流最直接的方法是从二次侧采样，该方法的缺点在于二次电流值非常大，
对硬件要求高，线路复杂。本文采用高精度霍尔电流传感器采集逆变点焊机
一次侧电流，不仅能提高采样电流检测精度，而且可增强系统抗干扰能力。
 吉林大学博士学位论文
 
  24
电流有效值的计算采用离散化积分法。虽然离散化积分法会占用 
CPU 
较
多的计算时间，但该法不存在理论误差，同时使用高性能、运算速度快的
LF2407A 
可弥补其占用 
CPU 
时间长的不足，因此采用离散化积分法来计算
焊接电流有效值。
 
2.3.3  控制算法的选择
 
在电阻焊逆变设备中，逆变器、变压器都表现出非线性。在焊接模块中
的焊接区动态电阻是随焊接时间变化的函数，而且随着焊接电流、电极压力
大小而改变，是典型热、电、力三者耦合的时变过程的结果，这都导致了难
以对电阻点焊过程建立精确的数学模型。采用合适的智能控制方法是解决这
个问题的有效措施。
 
在智能控制方式中，人工神经网络技术在解决非线性控制问题过程中也
非常有效，有学者从事这方面的研究。但是人工神经网络的求解过程本质是
个并行的权重相乘然后求和的过程。其中权重大多数情况下都是浮点数，这
种浮点数的乘积运算对于以工业控制用的微处理器来说运算比较耗费时间，
实时性处理比较困难。
 
 
Fig.2-6 the basic schematic of fuzzy control 
 
模糊控制是以模糊集合论、模糊语言变量及模糊理辑推理为基础的计算
计算
 
控制
 
变量
 
模糊
量化
处理
模糊
控制
规则
模糊
决策
非模
 
糊化
 
处理
 
给定值
+ 
  
－
 
传感器 被控对象 执行机构
 
A/D  D/A 
图 
2-6  
模糊控制的基本原理框图第 
2 
章
  
系统总体设计
 
  25
机智能控制，其基本概念是由美国加利福尼亚大学著名教授查德
(L
．
A
．
Zadeh)
首先提出的，经过 
20 
多年的发展，在模糊控制理论和应用研究方面均取得重
大成功。模糊控制的基本原理框图如图 
2-6 
所示。实现一步模糊控制算法的
过程描述如下：微机经中断采样获取被控制量的精确值，然后将此量与给定
值比较得到误差信号，一般选误差信号作为模糊控制器的一个输入量。把误
差信号的精确量进行模糊化变成模糊量。误差模糊量可用相应的模糊语言表
示，得到误差模糊语言集合的一个子集，经由模糊控制规则
(
模糊算法
)
，根
据推理的合成规则进行模糊决策，得到模糊控制量。对于工业控制微处理器
来说，可以把模糊控制规则量化成模糊控制表，在实时控制过程中，通过检
索模糊控制表得到控制量，大大减少了在线计算时间，有利于实现在线控制。
 
2.3.4  系统总体结构
 
系统总体结构如图 
2-7 
所示，由逆变点焊机主电路及其控制器组成。主
电路采取逆变形式，为提高点焊过程质量控制精度作好准备；在变压器一次
侧采样焊接电流信号，在二次侧采样焊接电极间电压信号，送至以模糊控制
逆变点焊机控制器
整
流
滤
波
 
逆
变
器
 
变
压
器
整
 
 
流
 
焊
 
 
接
 
逆变点焊机主电路
模糊控制
 
电
流
 
电极间电压
PWM 
驱动
 
图 
2-7   
质量控制系统总体结构
Fig.2-7 the structure of quality control system 
～
380V 吉林大学博士学位论文
 
  26
为核心的点焊控制器，并输出 
PWM 
信号，对主电路逆变模块进行控制，从
而调节焊接过程的电流参数，实现电阻点焊过程的质量控制。
 
2.4  本章小结
 
本章首先阐述铝合金电阻点焊工艺设计智能系统的设计思想，在对铝合
金电阻点焊工艺设计过程、系统应该具有的功能以及各种人工智能技术具体
分析的基础上，结合对焊接领域专家的思维过程的充分模拟，设计系统的智
能集成模型及各主要模块功能，最后给出总体运行流程。
 
     
本章在深入分析铝合金电阻点焊过程的基础上，采用逆变电阻焊接电源
及其控制器作为铝合金电阻点焊质量控制的硬件载体，选择焊接电流与电极
间电压作为铝合金电阻点焊过程控制的监测参数，以恒流控制为系统控制的
主要质量控制方式。基于铝合金电阻点焊过程是典型的非线性控制过程，难
以建立精确的控制模型，本章采用模糊控制方法作为铝合金电阻点焊逆变电
源的控制器的主要控制算法，以此提高焊接电流的控制精度，并给出总体控
制框图。第 
3 
章
  
铝合金点焊工艺设计智能系统
 
  27
第 3 章 铝合金点焊工艺设计智能系统 
3.1  知识表示
 
铝合金电阻点焊工艺设计智能系统也可以称为一个混合了多种智能处理
技术的专家系统，即同样是基于知识的系统。系统的性能在很大程度上决定
于知识的存储、管理和控制，即决定于系统的知识库管理。系统知识库管理
的对象是知识，由于知识本身的复杂性以及人们对知识理解的多样性，而造
成对知识概念的某些不一致性，因而如何将知识有效的表示出就成为了一个
重要的问题。
 
知识表示是用计算机能够接受并进行处理的符号和方式来表示人类的知
识，它既涉及信息是以何种方式存放在人类大脑中的，更关心大量知识在符
号计算中应如何形式的描述。一般来说，知识表示包含两层含义：用给定的
知识结构，按一定的原则、组织表示知识；解释所表示知识的意义。就其形
式而言，知识表示就是用于组织求解某些问题所需的知识的数据结构。因而，
同一知识可以有不同的表现形式，但不同的表现形式可能产生不同的效果
[97]
。
 
本系统中主要采用了面向对象的知识表示方法、基于规则的知识表示方
法、基于神经网络的知识表示方法，以及数据库等。
 
3.1.1  面向对象的知识表示
 
典型的知识表示方法有：基于一阶谓词演算的逻辑型语言、产生式系统、
框架结构、语义网络、逻辑系统、面向对象的知识表示等等。
 
本系统是混合了多种智能技术的问题求解系统，同时也产生了多种知识
表示方式，但主体是以面向对象的知识表示作为框架，其中根据系统的性能
要求、以及组织形式具体应用具体的知识表示方式。
 
     
面向对象的知识表示，是指采用基于信息隐蔽和抽象数据类型概念的面
向对象方法来表示知识，它把所有的实体都描述成对象。每个对象都包括其吉林大学博士学位论文
 
  28
静态结构（属性）和一组操作（方法）。对象按“类”
  
、“子类”
  
、“超类”
构成偏序关系。上一层对象的属性可以有条件的被下一层对象所继承，对象
之间除了互相传递信息外，没有其他的联系。用户要完成的任务也是通过发
送消息来实现的。面向对象的知识表示方式封装性好、层次性强、模块化程
度高，有很强的表达能力，更能用于解决不确定的问题。
 
封装是指把数据和处理这些数据的函数结合成单独的实体，这个实体被
称为对象或者类。继承是面向对象技术最具有吸引力的地方。通过继承，可
以从一个现存类得到一个派生类，原有的类称为基类或父类；而新产生的类
称为子类或派生类。通过继承，子类可以拥有父类的属性或方法。而多态性
是指依据不同的类或对象，可以改变一个特定的函数如何操作，这称为多态
性。多态性是面向对象方法的另一个显著的特点。继承性和多态性的组合，
可以较为容易的生成一系列虽类似但却又独一无二的对象。由于继承性，这
些对象共享许多相似的特征；又由于多态性，同一方法（函数）对应于同一
对象有一种表现方式，而对另外的对象则有另一种表现方式。
 
点焊工艺设计是一个复杂的求解过程，其针对材质的差别、供电波形的
不同、板材厚度的差异来制定点焊工艺参数。其中充满了共性和个性的辨证
的哲学逻辑。而面向对象的知识表示和面向对象的程序设计方式所具有的封
装性、继承性和多态性的特征，所具有的表示客观世界的事物、行为的相似
性和差异性的能力正是解决上述问题的一个强有力的工具。
 
在面向对象的知识表示方法中，类的设计是关键环节，即如何定义类之间的
分类、继承关系，以及类本身的属性和处理方法。
 
铝合金类类为所有其不同铝合金类的父类，其派生类包括：防锈铝类、
硬铝类、锻铝类等。同样，这些派生类也继承了其基类的属性和方法，而同
时，这些派生类也具有自己独特的属性与方法。现举例说明如下：
 
铝合金金属类的定义如下：
 
           
金属类
   { 
                       
属性：
 
                             
板厚；
 
导电性；
 
            
导热性；
 
   
屈服强度；
 第 
3 
章
  
铝合金点焊工艺设计智能系统
 
  29
焊接工艺规范参数结构；
 
                       
方法：
 
求解工艺点距；
 
求解边距；
 
求解焊接参数；
 
                           
构造函数；
 
                           
析构函数；
 
                           
由用户输入获得材料性质；
 
          
设置缺省物理性质
 
}        
铝合金金属类作为其他所有类的基类，具有板厚和导电性、导热性、屈
服强度等物理特征的属性以及“由用户输入获得材料性质”
  
的方法，而这些
属性和方法被其所有派生类所继承，即其所有派生类也都具有这些属性和方
法。求解工艺点距，求解边距这两个方法由不同的铝合金派生类继承。不同
铝合金派生类的“设置缺省物理性质”的方法对材质的物理性质进行初始化，
给各项物理性质设定一个缺省的值。当由用户输入获得材料物理性质失败后，
可由缺省的物理性质（即系统设置的该类别典型的材质的物理特性）进行推
理求解，这样，在很大程度上增强了系统的灵活度，更加符合人类专家的思
维方式。点焊工艺设计智能系统采用面向对象的知识表示方法进行知识表示，
能够清楚的表现出点焊工艺设计知识的组织结构，具有良好的层次性，有利
于模拟人类专家的智能推理求解过程。而且，本系统的实现是采用 
VC++6.0
编程语言，
VC++
是一种典型面向对象的程序设计语言，采用面向对象的知
识表示方法也便于程序实现。
 
3.1.2  基于规则推理的知识表示
 
本系统采用的是多种智能推理方法，而基于规则的推理是本系统的一种
重要的推理技术，因而基于规则推理的知识表示也是系统采用的一种重要知
识表示方法。基于知识的表示方法可分为元知识和领域知识。元知识是管理
知识的知识。本系统中利用元知识来控制系统推理所用的模块，即利用元知
识来控制系统的推理过程。而领域知识是针对点焊工艺设计求解过程所需要吉林大学博士学位论文
 
  30
的专家知识。
 
1
．元知识及其表示
 
元知识就是关于怎样组织、管理、利用和获取领域知识的知识。在本系
统中，元知识被用来控制在问题求解的过程中，针对具体的求解目标，系统
应该使用哪些知识模块，即与系统的推理控制密切相关。把关于问题的求解
的控制知识从控制结构下分离出来，以元规则的形式表现出来。系统在求解
过程中，针对具体的求解目标，元规则控制系统调用相应的知识模块。
 
由于元知识库是从控制结构中分离出来，即元知识同领域知识一样，对
于用户来说是开放的，这样保证了系统的开放性。用户通过更新、修改元知
识库，即可对系统的控制结构进行更新、修改，增强了系统获取知识的能力，
提高了系统的灵活性。在实现方面，采用文本文件来实现元知识库，便于用
户查看与更新。
 
2
．领域知识表示
 
（
1
）一阶谓词逻辑法。
 
谓词是用来刻画个体关系的，个体是指可以独立存在的事物。如在本系
统中求解焊接电流的求解子神经网络的输入参数之一的焊接时间时，首先要
判别材料属性。对这一类知识，系统采用了一阶谓词逻辑法。如：材质类别：
防锈铝合金。一阶谓词逻辑法可以精确表示知识，其知识表示具有独立性。
当新知识被发现时，很容易添加到知识库中去，而不会影响到其他知识。
 
（
2
）产生式规则表示法
  
这是专家系统最常用的知识表示法。其表现形式为：
 
如果
   <
条件
>
，则
<
结论
> 
其含义为：如果条件被满足，那么结论成立。其中，条件和结论可以是
多个。
 
这种表示方法与专家在解决实际问题时所采用的“启发式”分析方法非
常相似，即在什么样的焊接条件下，相应的焊接工艺措施被采用。如下所示：
 
IF 
材质类别：防锈铝合金
 
AND IF 
板厚：
1.0 mm 
THEN 
焊接时间：
0.04s  
规则的内部表示应满足完备性、逻辑性、可拆装性等要求。
 第 
3 
章
  
铝合金点焊工艺设计智能系统
 
  31
3.2  基于事例推理的铝合金点焊工艺设计
 
3.2.1  基于事例推理在本系统中应用分析
 
基于事例的推理就是由目标事例的提示而获得记忆中的源事例并由源事
例来指导目标事例求解的一种策略，其核心在于用过去的事例和经验来解决
问题
[98]
。
 
因此，
CBR 
自九十年代以来受到充分重视，显示出远大的前景，其中
CBR 
与 
RBR 
的结合引起许多研究者的浓厚兴趣。
  
但是，
CBR 
的研究毕竟刚
刚开始，尚有许多未解决的问题。其运行中一些缺点，如维护事例一致性的
困难等等尚需在以后的研究工作中逐步加以克服。
 
点焊工艺制定经常是通过大量工艺试验，对多种可行方案的择优。这种
情况使得具体点焊工艺设计知识的规则化提取非常困难，几乎难以避免诸多
规则间的矛盾和冲突，从而引起规则推理过程中的组合爆炸和相互冲突等问
题。引入基于事例的推理，通过建立事例库，存储各种具体工况下的最优事
例，正好极为有效地解决了这些问题，对于点焊工艺设计问题无疑是非常合
适的。
 
3.2.2  检索机制的建立
 
3.2.2.1  
检索机制
 
基于事例的推理是通过检索与待求解问题相似的、已有的问题求解方案，
加以类比和联想来求解的过程。所以如何检索、如何确定相似性原则是一个
首先需要解决的问题。基于事例的推理的重要环节是建立事例的检索机制，
找出与当前任务最具相似性的事例。一个事例往往包含了丰富的信息，在这
些信息中并不是每一个细节都对事例的性质和特征有着等同的影响，考察那
些使事例区别于其它事例的属性将会有助于判别该事例与其它事例或当前的
设计要求是否相似。这类属性被称为特征属性。对于焊接工艺设计问题，可
以认为事例的设计目标、初始条件及约束条件等属于特征属性，它们构成了吉林大学博士学位论文
 
  32
整个事例的特征——实际上就是事例产生过程中所满足的设计任务。
 
在设计过程中，给定设计任务实际上就决定了将来产生的设计方案，即
事例的主要功能。因此，可以认为具有相似设计任务的事例是相似事例，而
从事例库中寻找最佳事例，也即寻找与输入情况最匹配或最有用的事例。由
以上可知，关于事例特征的提取是否恰当、合理的问题关键是检索机制建立
的是否恰当、合理。
 
3.2.2.2  
铝合金电阻点焊工艺特征分析
 
在铝合金点焊工艺设计求解过程中，一个工艺事例包含了丰富的信息，
在这些信息中并不是每一个细节都对事例的性质和特征有着等同的影响，考
察那些使事例区别于其它事例的属性将会有助于判别该事例与其它事例或当
前的设计要求是否相似。这类属性被称为铝合金点焊工艺特征属性。铝合金
点焊工艺设计是一个多层次、多任务、多目标的复杂设计问题，涉及的因素
面广，如母材规格、供电波形，焊机类型等等。因此，点焊工艺事例特征提
取也较为复杂。其特征层次如图 
3-1 
所示。
 
本系统依据点焊工艺的特殊的工艺过程，将点焊工艺特征分为两大类，
事例特征Ⅰ和事例特征Ⅱ。事例特征Ⅰ又分为焊机容量、供电波形和电极。
焊接电流波形是对铝合金电阻焊工艺过程影响较大的因素，很能表征金属材
料的工艺条件和所用设备的特点。而供电波形根据焊接电源的输出波形又可
分为工频交流、次级整流、直流冲击波、三项低频、逆变式及电容储能波形
等。选择不同的电流波形，就必须制定相应的工艺参数。而焊机容量则限制
点焊工艺电流的选取，在某些情况下，由于焊机容量不足，也可以采用相对
偏软的规范，延长焊接时间，相对降低焊接电流以及焊接压力，从而降低对
焊接电源容量的要求。电极形状以及尺寸对铝合金点焊质量也有着很大的影
响。在本系统中，事例特征Ⅰ是指对点焊工艺设计的限制和约束影响较大的
因素，其中所包含的特征，难以予以类比、修正，或者难以建立合适的模型
进行类比、修正处理。事例特征Ⅰ所包含的因素也是本系统在进行点焊工艺
设计过程中，大部分由用户输入的初始条件，即第Ⅰ类约束条件，如图 
3-2
所示。
 
事例特征Ⅱ包含板厚、电阻率、热导率以及屈服强度四种因素。事例特
 第 
3 
章
  
铝合金点焊工艺设计智能系统
 
  33
 
征Ⅱ是在事例特征Ⅰ所包含的因素的约束、限制下，对材质点焊工艺制定影
响较为重要的因素。材质的板厚不同，其点焊工艺参数就必须相应的进行调
整。在一般情况下，电阻率越小的材质，其点焊性则越差。点焊过程中，熔
核形成所需要的能量来源于焊接电流流经电极与板材，板材与板材之间的接
触电阻及板材本身的电阻所产生的电阻热。因此，材质的导电性是衡量其点
事例特征
 
事例特征Ⅱ事例特征Ⅰ
图 
3-1 
基于事例推理的事例特征
事例特征Ⅱ
板
    
厚 电阻率 热导率 屈服强度 
交
 
 
流
整
 
 
流
低
 
频
冲
击
波
电极形状
  
焊机容量
供电波形
锥
台
形
球
面
形
电
容
储
能
事例特征Ⅰ
逆
 
 
变
  Fig.3-1 the case characters of CBR 吉林大学博士学位论文
 
  34
焊性的一个重要因素。点焊工艺过程实质是电热的动态变化、平衡过程，材
质与电极的导热性对其温度场的形成有着非常重要的影响，直接影响着点焊
熔核的形状与尺寸，故材质的导热率也是必须考虑的一个重要因素。在第Ⅰ
类事例特征的约束情况下，材质的高温强度是制定点焊工艺参数之一的电极
压力时，需要考虑的另一个重要因素。将上述的四种因素归为第Ⅱ类事例特
征是因为：在第Ⅰ类事例特征的约束下，上述四种因素对点焊工艺参数制定
的影响，比较容易进行适当的类比，修正。
 
 
     
图 
3-2 
点焊参数输入窗口
 
Fig.3-2 the input window of spot welding process parameters 
3.2.2.3  
检索策略与运行流程
 
在基于事例推理的过程中，检索机制的建立是非常重要的一个环节。检
索的目的是找到以前相似的事例，对原有的经验进行总结，从而指导新事例
的求解。基于事例的推理是建立在检索到与待求事例具有充分相似性的已知
事例，从而进行类比、修正。检索的原则是：在已知事例与待求事例具有相
同的事例特征Ⅰ的约束下，搜索与待求事例的事例特征Ⅱ最相似的已知事例。
检索机制的建立应符合点焊工艺设计系统自身的特点，根据点焊工艺事例特
征的层次结构来建立检索的层次。事例特征中的约束因素又可分为两类：一
种是用户必须提供的条件；而另一种既可由用户输入又可由系统给出的。必第 
3 
章
  
铝合金点焊工艺设计智能系统
 
  35
须由用户提供的事例特征即系统进行点焊工艺参数设计求解的初始条件，也
就是已知条件。而既可由用户输入又可以由系统给出的事例特征则可以成为
初始已知条件，也可以为求解的一个中间目标。系统以第Ⅰ类事例特征为条
件进行点焊工艺事例库的检索，并建立一个临时数据库。如果事例库为空，
则提示用户没有满足相应条件的事例。如果事例库中的记录不为空，则查找
此种材质的电阻率，屈服强度等特征。如果找不到，则提示用户进行补充输
入。系统将在临时库中搜索材质电阻率、屈服强度及板厚最相似的点焊工艺
事例作为搜索到的事例。
 
3.2.3  修正
 
生产实际中，很难找到完全相同的两个点焊工艺事例。因此，基于事例
的推理机制的一个重要的研究方面应该是对于相似事例的修正，即充分模拟
人类专家类比、联想的思维方式。本系统采用的相似事例检索方式是在焊机
容量、供电波形及电极形状参数等（第Ⅰ类事例特征）的限制下，以材质的
电阻率和板厚作为事例是否相似的衡量依据。因此，本系统的基于事例的推
理的修正部分，就是围绕如何修正材质电阻率、板厚等（第Ⅱ类事例特征）
带来的偏差来考虑的。板厚是任何焊接工艺设计系统都要首先考虑的，一般
情况下，材质的板厚不同，其点焊工艺参数也就随之不同。而电阻率则是根
据点焊工艺特征而提取出的。材质的物理成分不同，其导电性随之带来差异；
物理成分相似的材质其电阻率也相近。从点焊工艺过程来看，熔核的形成所
需的能量，主要由待焊母材在焊机施加的电流流过时，其本身的电阻热所产
生的。在供电波形、压力、点焊电极等参数相同的情况下，其温度场的平衡、
变化的主要影响因素为材质的导电、导热性能。而材质电阻率与导热性基本
上呈现单调关系，因此本系统提取出材质的电阻率为表征其点焊性的一个重
要的事例特征。电极压力是铝合金电阻点焊的重要参数之一，当电极压力过
小时，由于焊接区金属的塑性变形范围及变形程度不足，造成因电流密度过
大而引起加热速度大于塑性环扩展速度，从而产生严重喷溅。而电极压力过
大将使焊接区接触面积增大，总电阻和电流密度减小，焊接区散热增加，因
此熔核尺寸下降，严重时会出现未焊透缺陷。电极压力的选择同焊接材质本
身的抗变形强度以及焊接规范强度有着直接的关系。在其他参数相同的条件吉林大学博士学位论文
 
  36
下，材质的抗变形强度是选择焊接压力时要考虑的非常重要的因素。本系统
选用材质的屈服强度作为焊接压力选择的一个重要表征。
 
     
材质的物理性质及板厚同电阻点焊工艺参数之间的关系是较为模糊的关
系，难以建立精确的电阻点焊的工艺参数对电阻点焊过程影响的数学模型。
在其他规范相似的情况下，板材厚的材质所需要的焊接电流、电极压力相应
也大；导电性好的铝合金材质其获得相应的点焊熔核所需要的焊接电流较大，
强度高的铝合金材质获得相似的点焊过程变形时所需要的压力也比较大。即
电阻率直接影响焊接电流参数的选择，屈服强度直接影响压力参数的选择。
本文采用模糊推理关系实现铝合金电阻点焊基于事例推理的修正。
 
在材质相似的情况下，板厚是影响焊接电流及电极压力的重要因素。本
文建立了板厚及其偏差对焊接电流及电极压力的模糊修正关系，如图 
3-3 
所
示。板厚及其偏差模糊空间划分为
{VS,S,MS,ML,L,VL}{NL,NS,Z,PS,PL}
，电
流偏差模糊空间划分为｛
-4,-3,-2,-1,0,1,2,3,4
｝；压力偏差模糊空间划分为｛
NB
，
NM
，
NL
，
Z
，
PL
，
PM
，
PB
｝；板厚及其偏差模糊划分见图 
3-4
、图 
3-5
；压
力偏差及电流偏差模糊划分见图 
3-6
、图 
3-7
。
 
 
 
 
图 
3-3 
板厚及偏差修正模糊关系
 
Fig.3-3 the fuzzy relationship of the plate thickness and its bias 第 
3 
章
  
铝合金点焊工艺设计智能系统
 
  37
 
图 
3-4 
板厚的模糊划分
 
Fig.3-4 the fuzzification of the plate thickness 
 
图 
3-5 
板厚偏差的模糊划分
 
Fig.3-5 the fuzzification of the plate thickness bias 
 
图 
3-6 
压力偏差的模糊划分
 
Fig.3-6 the fuzzification of the force bias 吉林大学博士学位论文
 
  38
 
图 
3-7 
电流偏差的模糊划分
 
Fig.3-7 the fuzzification of the current bias 
 
图 
3-8 
电流模糊推理关系
 
Fig. 3-8 the relationship of current fuzzy inference relationship
 
 
图 
3-9 
压力模糊推理关系
 
Fig.3-9 the relationgship of force fuzzy inference  
 第 
3 
章
  
铝合金点焊工艺设计智能系统
 
  39
 
图 
3-10 
电阻率模糊划分
 
Fig.3-10 the fuzzfication of resistivity 
在基于事例推理的铝合金电阻点焊工艺参数的求解中，电阻率以及屈服
强度的偏差是进行对搜索到的相似事例进行修正的重要因素。在板材厚度相
同的情况下，对焊接电流参数的模糊修正中其输入参数为相似材质电阻率、
电阻率偏差，而以相似焊接电流同待求焊接电流之间的偏差作为求解目标，
其模糊关系示意图见图 
3-8
。强度及其偏差对电极压力的模糊推理关系如图
3-9 
所示。
 
对电阻率及其偏差，屈服强度及其偏差进行相应的模糊划分：电阻率划
分为｛
VL, L, M, B, VB
｝；电阻率偏差划分为｛
NB
，
NM
，
NL
，
Z
，
PL
，
PM
，
PB
｝；强度及其偏差划分为｛
VL, L, M, B, VB
｝，｛
NB
，
NM
，
NL
，
Z
，
PL
，
PM
，
PB
｝；其中电阻率、电阻率偏差、屈服强度及其偏差、模糊划分分别见
图 
3-10~
图 
3-13 
所示。
 
 
图 
3-11 
电阻率偏差模糊划分
 
Fig.3-11 the fuzzification of resistivity bias 吉林大学博士学位论文
 
  40
 
图 
3-12 
屈服强度模糊划分
 
Fig.3-12 the fuzzification of yield strength 
 
图 
3-13 
屈服强度偏差模糊划分
 
Fig.3-13 the fuzzification of the yield strength bias 
模糊推理规则是建立在领域专家对铝合金电阻点焊过程的认知的基础
上，体现了较多的领域专家的经验，是一个逐步优化的过程。模糊规则的设
计中，确定模糊规则的基本原则是要符合模糊输入参数变量对模糊输出变量
的本质影响，即当电阻率比较小时，焊接电流应相应增加；板厚比较大时，
焊接电流也应该相应增加。板厚及其偏差对焊接电流、电极压力的模糊推理
规则见图 
3-14
。材质的强度比较大以及板厚比较大时，焊接压力也增加以获
得必要的变形，保证电流导通面积。电流及压力模糊修正规则见图 
3-15
、图
3-16
，其模糊推理曲面见图 
3-17
、图 
3-18
。
 第 
3 
章
  
铝合金点焊工艺设计智能系统
 
  41
 
图 
3-14 
板厚修正模糊推理规则
 
Fig.3-14 the fuzzy inference rules of amending the plate thickness 
 
图 
3-15 
电流模糊推理规则
 
Fig. 3-15 the rules of current fuzzy inference 
 
图 
3-16 
压力模糊推理规则
 
Fig.3-16 the rules of force fuzzy inference 吉林大学博士学位论文
 
  42
 
图 
3-17 
电流模糊推理曲面
 
Fig.3-17 the surface of current fuzzy inference  
系统将电阻率及其偏差、强度及其偏差进行模糊划分后，经过相应模糊
规则库，进行模糊推理后分别得到同电阻率偏差相对应的电流偏差 
1
，同板
厚及其偏差相对应的电流偏差 
2
，板厚偏差对应的压力偏差 
1 
以及强度偏差
对应的压力偏差 
2
，最终得到最后的电流偏差和压力偏差，从而对找到的相
似事例进行修正得到新的工艺参数。基于事例推理的模糊修正框图如图 
3-19
所示。
 
 
图 
3-18 
压力模糊推理曲面
 
Fig.3-18 the surface of current fuzzy inference 第 
3 
章
  
铝合金点焊工艺设计智能系统
 
  43
Fig.3-19 the block diagram of fuzzy amending 
3.2.4  事例库的建立
 
事例库是针对问题领域的当前己知事例的基于经验的重新整理。因此，
一个事例就是一个文档化的经验知识，按领域内容放置，它应该包括问题描
述、事例特征，该问题的解以及相应解的结果。本系统的数据库分为两部分，
一个表在事例组织结构上参考了系统运行输出结果的数据形式，使二者一致，
这样，新事例的记忆就变成了当前输出的直接复制，大大方便了事例库系统
的再学习，如表 
3-1 
所示；另一个用来描述在前一个表中所不包含的上一节
所提取出的点焊工艺事例特征，其中包括材质名称、电阻率、热导率及屈服
强度。
 
表 
3-1 
点焊规范参数事例表
 
Table 3-1 the case table of process parameters of spot welding  
字段名称
  
数据类型
 
材质类别
  
文本
 
A 
板名称
  
文本
 
A 
板厚度
(mm)  
数字
 
电阻率及其偏差
模糊化
 
板厚及其偏差模
糊化
 
强度及其偏差模
糊化
 
电流偏差 
1 
电流偏差 
2 
压力偏差 
1 
压力偏差 
2 
电流偏差
  
压力偏差
模糊规则库 
1 
规则库 
2  
规则库 
2 
模糊规则库 
3 
图 
3-19  
模糊修正框图吉林大学博士学位论文
 
  44
                                        
（续）
 
字段名称
  
数据类型
 
B 
板名称
  
文本
 
B 
板厚度
(mm)  
数字
 
焊前状态
  
文本
 
焊机型号
  
文本
 
最大电流
(A)  
数字
 
焊接时间
(s)  
数字
 
焊接电流
(A)  
数字
 
回火时间
(s)  
数字
 
回火电流
(A)  
数字
 
回火间隔时间
(s)  
数字
 
回火次数
  
数字
 
预压力
(KN)  
数字
 
锻压力
(KN)  
数字
 
锻压开始时间
(s)  
数字
 
电极压力
(KN)  
数字
 
电极端面直径
(mm)  
数字
 
球面电极半径
(mm)  
数字
 
操作要求
  
备注
 
3.3  混合多种人工智能技术的铝合金电阻点焊工艺设计
 
3.3.1  设计目标
 
传统的专家系统、模糊系统以及神经网络各有优势，将多种智能推理技
术结合起来，则可优势互补，各展所长，这也是新型专家系统的发展趋势
[99]~[105]
。因此本模块的设计思想是采用多种智能推理技术的混合系统，通过
专家系统技术，模糊技术和人工神经网络技术的结合，充分模拟领域专家的
思维过程，提高本系统的求解性能。
 第 
3 
章
  
铝合金点焊工艺设计智能系统
 
  45
本系统的设计目标为铝合金电阻点焊工艺设计智能系统，能够根据用户
输入信息搜索相应的点焊工艺设计特征信息；如果系统在数据库中找不到，
则提示用户再次输入；如果找到，则根据此信息进行点焊工艺设计的求解过
程。从而可以避免因为系统数据库没有此种铝合金材质牌号的原因导致求解
失败；并且能够根据铝合金电阻点焊工艺过程的本质特性，对不同类别的铝
合金材质甚至材质类别相同而物理性质不同而设计相应的点焊工艺规范，即
能够根据不同种类的材料本身的物理性质求解出相应焊接工艺规范参数。
 
Fig.3-20 the model of intelligent hybrid system 
3.3.2  模块总体设计
 
铝合金电阻点焊工艺设计是一个复杂的多输入、多输出的病态的问题求
解过程。分析铝合金电阻点焊工艺设计参数可分为工艺参数、焊机型号、接
头的点距和边距、电极特性以及操作要求等五种求解目标。其中焊机型号—
—焊接波形、焊机容量和电极特性——电极材料和电极形状的选取都对点焊
工艺参数的选取有着重要的影响。焊接工艺参数设计主要为焊接电流、焊接
智能混合系统
 
基于 
ES 
的技术
 
焊
 
机
 
型
 
号
 
 
电
 
极
 
特
 
性
 
 
操
 
作
 
要
 
求
 
 
基于 
FNN 
技术
 
点
 
距
 
与
 
边
 
距
 
 
点
焊
工
艺
参
数
 
 
图 
3-20  
智能混合系统模型吉林大学博士学位论文
 
  46
时间和电极压力。不同铝合金材质类别、材质名称，其点焊工艺参数则不同；
甚至同一材料，点焊工艺参数也有软硬之分，求解空间巨大，难以用恰当的
知识进行表示，或基于产生式的规则进行推理。而是一个相对独立的空间和
丰富的样本数据集，适合模糊处理技术和人工神经网络进行处理，而这一部
分正是传统专家系统的软肋所在。接头的点距和边距可根据材质的类别及板
厚不同可划分为不同的神经网络。其余的则以字符处理为主，或者有着相应
的经验处理公式，采用专家系统处理技术则较为容易。铝合金电阻点焊工艺
设计智能混合模型如图 
3-20 
所示。 
3.3.3  铝合金点焊工艺参数设计
 
焊接电流波形是对电阻焊工艺过程影响较大的因素，很能表征金属材料
的工艺条件和所用的设备的特点。而供电波形根据焊接电源的输出波形又可
分为逆变、工频交流、次级整流、直流冲击波、三项低频及电容储能波形
[18]
。
选择不同的电流波形，就必须制定相应的工艺规范。而焊机容量则限制点焊
工艺的软硬特性，在某些情况下，由于焊机容量不足，也可以采用偏软的规
范。
 
点焊电极的选用对点焊工艺过程也有着较大的影响。电极是焊接回路的
一个重要组成部分，正确的选用电极是获得点焊优质接头的重要手段。电极
材料是决定电极寿命和焊接质量的重要因素之一，焊接材料不同，材质的热
物理性质不同，则应该选用不同的电极材料。电极形式（锥台形电极、球面
形电极）和电极端面尺寸对点焊过程的热平衡以及工艺对中性都有着一定的
影响。
 
不同的铝合金材质类别、供电波形，点焊工艺参数的制定有很大的区别。
由于点焊母材的材质类别不同，导电性、导热性、塑性及热循环的敏感性等
等物理性质的不同，决定了不同类别材质的点焊性有很大的差异，不同类别
铝合金材质点焊工艺参数的制定也有很大的不同。一般情况下，材质可分为：
防锈铝合金、硬铝合金、锻铝合金、铸造铝合金、超硬铝合金等。
 
本模块的主要设计目的为：在供电波形、电极选用的限制条件下，结合
模糊推理技术和人工神经网络等多种人工智能技术，设计一个通用推理模块，
根据不同材料的不同的热物理特性，模拟人类专家的思维过程，求解出相应第 
3 
章
  
铝合金点焊工艺设计智能系统
 
  47
的工艺参数。
 
点焊工艺设计时，一般首先考虑的是材质的类别，材质的类别不同则考
虑不同的规范参数，这是基于一种经验式的思维方式。深入研究点焊的工艺
过程，其实质是点焊母材部分在高温下熔化成液态后，又结晶为点焊熔核的
过程。其能量的产生源于焊接电流通过焊接回路时的电阻热。点焊时的电阻
是产生内部热源——电阻热的基础，是形成焊接温度场的内在因素。点焊焊
接区的总电阻 
R
，由焊件间接触电阻 
R
e
、电极与焊件间接触电阻 
R
ew
以及焊
件本身的内部电阻 
R
w
共同组成
[18]
。即
 
R
＝
R
e
+2R
ew
＋
2R
w
              
（
3-1
）
 
其中，内部电阻 
2R
w
的析热量约占内部热源的 
90
～
95
％是形成熔核的热
量基础。而材料的电阻率是衡量 
R
w
的标志，故材料的电阻率是深入研究点焊
工艺参数的一个重要参数。
 
点焊工艺过程是一个动态的热平衡过程，其散热过程同样是影响熔核形
成的重要因素。点焊过程的热量散失主要有三种途径：通过电极热传导损失
的热量、通过焊件热传导损失的热量及通过对流、热辐射散失的热量。其中
主要是通过电极和焊件热传导而散失热量。母材的热导率λ是影响热散失的
一个重要因素，在一般情况下，材质的热导率同电阻率之间存在一定比例关
系，故本文只采用电阻率作为铝合金电阻点焊热平衡过程的表征。
 
3.3.4  模糊神经网络
 
模糊理论同人工神经网络结合有多种方式，本文在输入输出参数模糊化
的基础上通过人工神经网络的反向传播前向网络技术来丰富、提取输入输出
映射之间的推理规则。
 
3.3.4.1 FNN 
输入输出参数的确定
 
点焊工艺设计模块主要是应用 
FNN 
技术求解出材质的点焊工艺参数中
的焊接电流、焊接时间及电极压力三种重要工艺参数。随着网络规模的扩大，
训练样本的数量也就随之要求增加。而在工程实际应用中，训练样本增加的
代价很大，而且较为困难。在训练样本一定的情况下，网络规模的增大，其吉林大学博士学位论文
 
  48
泛化性则变差，出现过拟和，此时随着训练次数的增加虽然网络在训练集上
的误差继续下降，但在其他样本上的误差可能反而上升，即泛化能力下降。
 
由上所述，在样本集一定的情况下，网络规模应尽可能的减小，输入输
出参数个数应在满足需要的条件下，保持最小。在输入变量中，板厚是必不
可少的。而其他影响点焊工艺过程的母材物理性质因素则应尽可能的压缩。
 
在点焊工艺设计过程中，输出变量一般会考虑为焊接电流、焊接时间以
及电极压力。但是点焊过程是一个复杂的不良求解过程，即使是同一种材质，
同一板厚，其他限制条件相同，其点焊工艺也可根据焊接时间的不同分为软
硬不同的规范，即其映射对应方式并不是一对一的映射关系，而是一对多的
映射方式。在专家系统技术或者人工神经网络技术中，这种一对多的映射关
系实现起来比较困难。
 
焊接规范的软硬量度是以反映焊接区加热速度快慢为主要特征，大电流、
短时间参数的规范为硬规范，而小电流、长时间参数的规范为软规范。焊接
规范的相对软硬以焊接时间作为量度较为适当。焊接时间一般在秒的百分之
几到十分之几。本系统把焊接时间作为规范强度的表征引入输入变量空间，
这样焊接时间到焊接电流的映射就变为一对一映射，容易应用专家系统技术
或者模糊神经网络技术实现。而焊接时间的确定则可以通过建立一个数据库，
按照材质类别，名称进行索引从而得到。
FNN 
结构图见图 
3-21
。
 
Fig.3-21 the structure of FNN
 
 
导电性
 
板厚
 
规范强度
 
屈服强度
 
 
模
 
糊
 
化
 
 
网
 
络
 
层
 
 
解
 
模
 
糊
 
焊接电流
焊接压力
图 
3-21 FNN 
结构图第 
3 
章
  
铝合金点焊工艺设计智能系统
 
  49
3.3.4.2  
输入输出参数的模糊划分
 
电极形状和尺寸对铝合金电阻点焊焊接电流和电极压力的选取也有着很
重要的影响，球面电极半径增加，则电流密度下降，电极压力产生的变形减
少，但是由于电极对铝合金电阻点焊焊接参数的影响的样本集难以收集丰富，
点焊规范模糊神经网络的输出仅有焊接电流和电极压力。其中电极压力和焊
接电流、材质的热强度和规范敏感性有关。焊接规范软硬不同，材质的热强
度不同，热敏感性不同，其电极压力也就不同。但如果将电极压力和焊接电
流同时作为输出变量，由于电极压力的分布较为分散，网络构建时，训练较
为困难，而且网络的泛化性很差，联想推理结果不理想。本模块将这二者分
开，以焊接电流为输出参数，构建一个子网络求解焊接电流；以电极压力为
输出参数，构建一个子网络求解电极压力。因此在上面所示的输入参数中没
有包含电极参数的影响，在系统求得焊接电流和压力后，根据电极的变化进
行优化。
 
 
图 
3-22  
规范强度模糊划分
 
Fig.3-22 the fuzzification of process strength 
 
根据收集到铝合金电阻点焊工艺参数样本，将模糊神经网络的输入输出
参数进行模糊划分。规范强度模糊划分见图 
3-22
，板厚、电阻率和屈服强度
模糊划分见其模糊划分见图 
3-4
、图 
3-10 
及图 
3.12
。模糊神经网络的输出参
数电流及压力的模糊划分见图 
3-23
、图 
3-24
。
 
 吉林大学博士学位论文
 
  50
 
图 
3-23 
电流输出模糊划分
 
Fig.3-23 the fuzzification of the current output 
 
图 
3-24 
压力输出模糊划分
 
Fig.3-24 the fuzzification of the force output 
3.3.4.3 FNN 
结构
 
许多文献探讨了从神经元网络中提取规则的方法
[106]~[109]
，多层前向网络
是其中最常用的一种。它把神经元按层排列，每一层的神经元只与上一层和
下一层的神经元相连。它的一个突出特点是：它是一个通用的近似器，也就
是说，它可以按任何期望精度拟合任意连续实型函数。在理论上，它与以模
糊规则为核心构成的模糊系统是等价的。利用这种等价性，本文使用它来自
动生成系统的模糊规则。首先用样本数据训练神经元网络；再从训练后的神第 
3 
章
  
铝合金点焊工艺设计智能系统
 
  51
经元网络中提取模糊规则。
 
本节以电流求解 
FNN 
为例说明模糊神经网络的构造方法。首先把电阻
率、板厚、规范强度模糊化，得到： 
μ
i
，μ
i
＋1
：第 
i,i+1 
模糊区域的隶属度；
 
N
：模糊区域划分数目；
 
 
电 阻 率
 
规范强度
 
板 厚
 
电 流
 
 
网络层 解模糊模糊化
图 
3-25 
电流 
FNN 
结构图
 
Fig.3-25 the current FNN structure吉林大学博士学位论文
 
  52
N
P
j
＝
[0
，
0
，……，μ
i
，μ
i
＋1
P
，……，
j
：模糊神经网络输入，
j  
＝
 
 
 
1
，
2
，
3
。
 
经过模糊化的输入矢量，进入神经网络层得到焊接电流的模糊输出，在
经过反模糊化后得到精确论域的焊接电流输出。
 
 
 
 
μ
i
，μ
i
＋1
：第 
i,i+1 
模糊区域的隶属度；
 
M
：模糊区域划分数目；
 
T
：模糊神经网络输出。
 
电流求解模糊神经网络结构图如图 
3-25 
所示。压力求解模糊神经网络结构同
电流求解模糊神经网络结构相似，此处不予表示。
 
3.3.4.4  
神经网络的实现
 
Fig.3-26 the model of BP net 
 
迄今为止，有多种人工神经网络模型被开发和应用，其中反向传播网络
M
T
＝
[0
，
0
，……，μ
i
，μ
i
＋1
，……，
S
m
q
 Z
q
 T
X 
f (
·
)
f (
·
)
f (
·
)
f (
·
)
f (
·
)
f (
·
)
V
q
 
W
m
Y
q
 
图 
3-26 BP 
网络模型第 
3 
章
  
铝合金点焊工艺设计智能系统
 
  53
是应用最为广泛的神经网络模型。
BP 
网络最初由 
Werbos 
开发的反向传播训
练算法是一种迭代梯度算法，用于求解前馈网络的实际输出与期望输出间的
最小均方差值。
BP 
网是一种反向传递并能修正误差的多层映射网络。当参数
适当时，此网络能够收敛到较小的均方差。
BP 
网的短处是训练时间较长，且
易陷于局部极小。
 
BP 
应用最为广泛，它主要应用于模式识别和函数逼近。本系统中的神经
网络模型都采用 
BP 
网模型。
BP 
网络是一种具有三层或三层以上的阶层型神
经网络。上下层之间各种神经元实行全连接。最基本的 
BP 
网是三层前馈网
络，即：输入层、隐含层和输出层，如图 
3-26 
所示。对上述模型的描述如下：
T
ni
xxxx X 






= ΛΛ
21
, 
为网络的输入向量。
T
qiq
VVVVV 






= ΛΛ
21
, 
为隐含层的
权矩阵，其中 
V
i
为第 
i 
个隐层节点的权向量，
T
nii
vvvv V 






= ΛΛ
21
, 
。
T
qkq
tttt T 






= ΛΛ
21
, 
为隐含层的净输入，
T
qkq
zzzz Z 






= ΛΛ
21
, 
为隐含层的
输出，同时也作为下一层的输入。
T
mim
WWWWW 






= ΛΛ
21
, 
为输出层的权矩
阵，其中 
W
i
为第 
i 
个输出节点的权向量，
T
mii
wwww W 






= ΛΛ
21
, 
。
T
miq
ssss S 






= ΛΛ
21
, 
为隐含层的净输入，
T
miq
yyyy Y 






= ΛΛ
21
, 
为隐含层
的输出。
 
BP 
网络的学习过程是由模式的正向传播和误差的反向传播所组成的。在
正向传播过程中，输入信息经隐含单元逐层处理并传向输出层，如果输出层
不能得到期望的输出，则转入反向传播过程，将实际值与网络输出之间的误
差沿着原来的连通路径返回，通过修改各神经单元的权值使误差减少，然后
再转入正向传播过程，如此反复计算，直到误差小于设定值或达到预定义的
学习次数为止。目前，众多学者提出了许多改进的算法包括变学习率算法、吉林大学博士学位论文
 
  54
弹 性 （ 
resilient 
） 
BP 
算 法 、 共 扼 梯 度 算 法 、 准 牛 顿 共 扼 算 法 、
Levenberg-Marquardt 
等算法来提高 
BP 
算法的效率。一般情况下，在小规
模系统中，  Levenberg-Marquardt 
算法的收敛速度是最为迅速的，本文中采
用 
Levenberg-Marquardt 
算法。
 
3.3.4.5  
神经网络结构的确定
 
泛化能力是衡量一个网络结构确定是否合理的一个重要的因素，所谓泛
化能力是指经过训练后的网络对未在训练集中出现的（但来自同一分布的）
样本作出正确反映的能力。学习不是单纯的记忆已经学习过的输入，而是通
过训练样本学习到隐含在样本中的有关环境本身的内在的规律性，从而对未
出现的输入也能给出正确的输出。影响泛化能力的因素有三：训练样本的数
量和质量（当样本来源可靠时只与数量有关），网络结构以及问题本身的复杂
程度
[14]
。在训练样本时，精度和泛化能力是相互矛盾的，如果过分追求精度，
会出现过拟和现象，即网络对训练样本过度强化，而对训练样本以外的样本
却不能做出正确的输出。
 
表 
3-2 
求解电流 
FNN 
不同隐含层训练结果对比
 
Tab.3-2 the training comparison of different hide layers of current FNN 
隐含层数
  
方差
  
训练次数
 
21  7.93  500 
22  1.52  500 
23  0.20  500 
24  1.07  500 
 
网络结构的选择对网络的推广能力是一个关键性的问题，一般来说网络
结构一定时，其中待学习的参数是有限的，参数学习是在这个有限维空间中
的搜索。没有先验知识时，结构的搜索空间要大得多，而对应与每个结构又
有许多可能的参数组合，所以搜索空间很大。结构的设计比参数的学习要困
难，没有确定可循的方法。一个公认的指导原则是在没有其他先验知识的情
况下，能与给定样本符合一致的最简单（规模最小）的网络就是最好的选择，第 
3 
章
  
铝合金点焊工艺设计智能系统
 
  55
这相当于使样本点的偏差在允许范围条件下，用最平滑的函数去逼近未知的
非线性映射
[14]
。 
 
图 
3-27 
不同隐含层训练对比
 
Fig.3-27 the training comparison of different hide layers 
(a) the hidden layer is 10        (b) the hidden layer is 11 
(c) the hidden layer is 12        (d) the hidden layer is 13 
网络结构的选择对网络的推广能力是一个关键性的问题，一般来说网络
结构一定时，其中待学习的参数是有限的，参数学习是在这个有限维空间中
的搜索。没有先验知识时，结构的搜索空间要大得多，而对应与每个结构又
有许多可能的参数组合，所以搜索空间很大。结构的设计比参数的学习要困
难，没有确定可循的方法。一个公认的指导原则是在没有其他先验知识的情
况下，能与给定样本符合一致的最简单（规模最小）的网络就是最好的选择，吉林大学博士学位论文
 
  56
这相当于使样本点的偏差在允许范围条件下，用最平滑的函数去逼近未知的
非线性映射
[14]
。
 
 
图 
3-28 
电流 
FNN 
训练方差图
 
Fig.3-28 the err square of current FNN training 
根据 
Robert Hecht-Nielson 
的论证，一个 
BP 
三层网络可以实现任意精度
的逼近任何连续函数。故本模块所有的 
FNN 
网络层 
BP 
网络都采用三层结构。
其中隐含层选用 
sigmoid 
函数作为处理函数，而输出层选用线性函数作为处
理函数。
BP 
网络的隐含层单元的数目的确定如上所述，没有确定可循的方法。
只能在一定的训练次数条件下，在误差允许的情况下，求得模糊神经网络最
小的网络层隐层单元数。图 
3-27 
为点距神经网络结构训练对比，可以看出中
间层节点数为 
11 
时，网络的效果最好。表 
3-2 
为求解电流 
FNN 
不同中间层
节点训练方差对比，由表 
3-2 
可看出在隐含层节点数为 
23 
时候网络的效果最
好，其训练时方差曲线见图 
3-28
。
 
3.3.4.6  
程序的实现
 
本模块是以 
VC
＋＋
6.0 
为主体，以 
MATLAB 
为辅助实现的。程序的主
体部分采用 
VC
＋＋
6.0 
进行设计，而涉及人工神经网络的设计部分的程序设
计则由 
MATLAB 
来完成。
MATLAB 
是适用于科学和工程计算的数学软件系
 第 
3 
章
  
铝合金点焊工艺设计智能系统
 
  57
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
Fig.3-29 the flow chart of general control 
N
N
Y
Y
开始
用户输入
读取元规则
 
确定求解子模块
 
求解焊接时间
求解焊接电流
用户输入
焊机型号
电流符合
焊机型号
求解电极压力
求解工艺点距
求解边距
求解其余参数
结束
增加焊接时间
 
求解焊接电流
 
求解焊机型号
 
图 
3-29  
模块总控流程图吉林大学博士学位论文
 
  58
统。作为数值软件的 
MATLAB 
对计算数学领域的特定问题类型如数值线性
代数，数值逼近、最优化方法等，都给出了该类问题的高效率的算法。随着
MATLAB 
版本的不断推出，其功能不断的得到增强。现在，
MATLAB 
已经
成为集当今人类众多学科的先进技术于一体，成为科学计算和教学试验的强
大工具。在其附带的神经网络工具包中，提供了神经网络设计、训练、仿真
等丰富而强大的支持。
 
本模块的主体程序流程控制，数据读取等由 
VC
＋＋
6.0 
编程实现，充分发
挥其主流程序设计语言的优势；神经网络的设计和训练验证由 
MATLAB 
编
程实现。在 
MATLAB 
环境下神经网络设计训练结束后，将其节点权值矩阵
存储在数据文件中，而由 
VC
＋＋
6.0 
实现在需要的时候从数据文件中读取网
络权值，从而进行推理计算。
 
程序的总体流程如图 
3-29 
所示。在本模块中，由于采用了以焊接时间作
为求解焊接电流的输入参数之一，在输出焊接电流超出用户制定的焊机型号
的最大电流限制时，可以逐步增加焊接时间，以期减少焊接电流，从而符合
焊机型号的限制，给系统推理带来更多的灵活性。
 
3.3.4.7  
知识获取和机器学习
 
知识获取和机器学习是人工智能研究的核心，获取知识和学习能力是人
类智能的基本表现形式，也是系统具有智能的根本途径。知识获取是指把已
有的知识从人脑或书本中总结和抽取出来，并转换为某种表现形式，以及总
结已经获取的实例归纳新知识存入知识库，同时调试和精练知识库，使知识
库中的知识具有相容性和达到语义要求。机器学习是研究学习的计算理论，
建立学习的计算机模型，使计算机具有学习能力学科。机器学习是解决知识
自动获取的根本途径，主要采用归纳、综合，而不是演绎。
 
本系统所有的模糊神经子网络或者子神经网络采用的都是有师学习的
BP 
学习算法。在 
BP 
网络中，各种变量之间的数学关系不能显式给出，而只
能通过样本的训练才能得到。而且，它只能给出不超出样本范围的数据件的
依赖关系。神经网络的训练是通过样本的输入和期望输出来进行的。每个隐
层和输出层上的神经元通过对其输入加权求和，再经过一个转换函数（传递
函数）而得到结果。通过训练后，网络通过节点权值映射出输入与输出之间第 
3 
章
  
铝合金点焊工艺设计智能系统
 
  59
的关系。神经网络学习的结果是得到一系列权值矩阵，学习的知识就分布地
存储在这些权值矩阵中。这些分布存储的知识的运用是通过神经网络的前向
计算实现的。
 
神经网络的学习过程可用于系统的再学习或者系统的知识扩充。其中系
统再学习是指对于原先已有的知识进行更新和完善。其过程非常简单，因为
网络的算法和层次结构已经确定，只需在原训练好的样本集中加入新的样本
或是根据需要在原样本的基础上进行修改，然后重新训练神经网络，学习后
的新的知识通过修改过的网络权值矩阵重新分布在相应的子神经网络中。
 
3.4  数值模拟在 
FNN 中的应用
 
FNN 
神经网络的训练需要样本集合具有一定的分布性，即能够在较大范
围内覆盖从输入空间到输出空间的映射。通过焊接工艺试验来获得大量的数
据样本，可以用于 
FNN 
的示教学习。然而，焊接工艺试验要消耗大量的人力、
物力和财力，通过工艺试验的方法获得各种工艺条件下的相关数据，也不切
实际。但如果实验数据不够丰富，
FNN 
的泛化精度就不够理想。本文利用铝
合金点焊过程数值分析模型，以点焊过程的物理本质为基础，通过计算机模
拟与仿真，得出的各种工艺条件下焊接热过程基础数据，再配合以少量的工
艺试验数据，用这两类数据对神经网络进行示教学习，将大大减少试验工作
量，节省人力、物力。即通过铝合金数值模拟模型，得到从铝合金材质的物
理性质（电阻率、屈服强度）、板厚、以及焊接时间，通电波形，焊接电流、
电极压力作为输入空间到点焊
  
熔核直径作为输出空间的映射。将符合要求的
熔核直径的样本集作为 
FNN 
的样本集，丰富 
FNN 
的学习样本空间。具体铝
合金电阻点焊数值模拟模型请参见文献
[110]
。
 
3.5  铝合金点焊工艺设计求解验证
 
本文所研究的铝合金电阻点焊工艺设计智能系统进行学习时，将样本分
为学习训练样本和检验样本两类。学习训练样本用来学习铝合金电阻点焊工
艺知识，检验样本用来检验学习效果以及推理结果是否合理。
 
 吉林大学博士学位论文
 
  60
 
0
10000
20000
30000
40000
50000
60000
70000
0.4 0.5 0.6 0.8 1 1.2 1.6 2 2.5
板厚（mm）
焊
接
电
流
（
A
）
输出值
给定值
 
图 
3-30 
输出焊接电流同参考值比较
 
Fig.3-30 the comparison between the outputs of current and references 
 
图 
3-30
，
3-31 
为 
LF2 
电阻点焊焊接规范主要参数焊接电流、焊接压力的
输出对比。表 
3-3 
为 
LF2 
点焊主要工艺参数焊接电流、焊接压力输出值与给
定值的对比。从表 
3-3
、图 
3-32 
及图 
3-33 
中可以看出相对于板厚参数，系统
对经过学习训练过的样本有着较高的精度，系统输出工艺参数同给定工艺参
数最大偏差不超过 
4%
；而对于没有学习过的样本也可以给出较为接近的工
艺参数，偏差值也不超过 
6%
。对于学习样本中不包含的材料，系统的推理
输出见表 
3-4
。对表中 
LF3M
，
AA6111
－
T4 
经过工艺试验后得到优化后的工
艺参数及其拉剪载荷数据见表 
3-5
。
 
 
0
5000
10000
15000
20000
25000
0.4 0.5 0.6 0.8 1 1.2 1.6 2 2.5
板厚（mm）
焊
接
压
力
（
N
）
输出值
给定值
 
图 
3-31 
输出压力同参考值比较
 
Fig.3-31 the comparison between the outputs of force and references 
 第 
3 
章
  
铝合金点焊工艺设计智能系统
 
  61
 
表 
3-3  
焊接参数输出值与参考值的对比
 
Tab.3-3 the comparison between the outputs of welding parameters and references  
板厚（
mm
）
 
输出焊接电流
值（
A
）
 
给定电流参考
值（
A
）
 
输出焊接压力
（
N
）
 
给定压力参考
值（
N
）
 
0.4   19060  19000  4483  4413 
0.5  21580  21500  5159  5099 
0.6  23010
*
  24000  5907
*
  5590 
0.8  29100  29000  6654  6865 
1.0  32870  33000  8283  8238 
1.2  36230  37000  9501  9611 
1.6*  46050*  44000  13016*  12454 
2.0  50520  50000  16605  16475 
2.5  59050  58000  20273  20888 
注：
*
为检验样本
 
 
表 
3-4 
系统输出规范参数表
 
Tab.3-4 the table of output parameters of the system 
材质名称
 
电阻率
 
（nΩ·m）
 
板厚
（
mm
）
 
焊机类型
焊接时间
（
s
）
 
焊接电流
（
A
）
 
焊接压力
（
N
）
 
LF3M  51  1.5  
三相整流 
0.10  35600  3752 
AA6111
－
T4 
44  1.2  
三相整流 
0.10  28600  4016 
 
由表 
3.5 
对比可以得出，系统输出焊接规范参数同实际优化过的焊接工
艺参数较为接近。图 
3-32 
为铝合金电阻点焊工艺智能设计系统窗口之一，图
3-33 
为系统输出铝合金电阻点焊工艺参数卡。
 
 
 
 吉林大学博士学位论文
 
  62
表 
3-5 LF3M
、
AA6111
－
T4 
点焊工艺参数及其力学性能数据
 
Tab.3-5 the process parameters of RSW of LF3M and AA6111
－
T4 and their mechanical 
properties 
材质
  
试样号
  
焊接电流（
A
） 焊接时间（
s
） 电极压力（
N
）
  
拉剪载荷（
N
）
D
—
1  34300  3591 
D
—
2  34100  3334 
D
—
3  34100  3740 
D
—
4  34600  3517 
LF3M 
D
—
5  34400 
0.10  4000 
4032 
F
—
1  26900  2722 
F
—
2  26800  2810 
F
—
3  26800  2610 
AA6111
－
T4 
F
—
4  26700 
0.10  3800 
2796 
 
 
图 
3-32  
铝合金电阻点焊工艺智能设计系统窗口之一
 
Fig.3-32 one of the windows of intelligent process design of aluminum alloys spot welding 
 第 
3 
章
  
铝合金点焊工艺设计智能系统
 
  63
 
图 
3-33 
铝合金电阻点焊工艺规范输出
 
Fig.3-33 the output of process parameters of aluminum alloys resistance spot welding
 
3.6  本章小结
 
本章通过分析专家系统和模糊神经网络的各自特点，提出了将传统专家
系统与模糊神经网络技术相结合的思想用于点焊工艺设计智能系统中。并根
据点焊工艺参数的特点，将点焊工艺参数分解细化，把点焊工艺求解过程分
解为不同的求解子模块，并按照各模块的具体特点，具体应用相应的智能技吉林大学博士学位论文
 
  64
术。以焊接时间来表征规范强度，作为求解焊接电流的输入参数之一，充分
适应点焊工艺设计的复杂求解特征；并可根据焊机的容量限制来灵活的调整
焊接电流，使之适应用户指定的焊机，具有良好的优化性质。以材质的热物
理性质作为模糊神经网络输入参数，将材质的物理性质对点焊过程的影响引
入到焊接工艺规范的求解过程中，深层次模拟了人类专家在进行点焊工艺设
计中的思维过程，并以此作为材质的辨识特征，改变以往类似系统中以材料
库中材料名称来识别材质的方式，增加系统的推理灵活性。通过验证表明，
系统对经过学习训练过的样本有着较高的精度，系统输出工艺参数同给定工
艺参数最大偏差不超过 
4%
；而对于没有学习过的样本也可以给出较为接近
的工艺参数，偏差值也不超过 
6%
。本系统所设计的混合多种人工智能技术
的铝合金电阻点焊工艺参数的求解策略是成功的。 第 
4 
章
  
基于 
DSP 
点焊智能控制器的硬件设计
 
  65
第 4 章 基于 DSP 点焊智能控制器的硬件
设计 
     
本章主要研究内容为铝合金电阻点焊集散型智能控制系统下位机中铝合
金电阻点焊智能控制器。
 
随着现代工业自动化程度的提高和生产节拍的加快，对焊接结构件焊接
质量的要求越来越高，在批量生产的电阻点焊中尤为重要。但是在电阻点焊
过程中不可避免地存在网压波动、焊接回路阻抗变化，分流及电极磨损等干
扰因素，这些都会影响焊接质量。尤其在铝合金电阻点焊过程中，由于其熔
点低，导电导热性能良好以及表面易形成致密氧化膜等特点，使得铝合金的
点焊必须采用大电流、短时间的焊接规范，而且其焊接质量随着焊接参数的
变化波动严重。这就对电阻点焊电源控制器提出了更高的要求。采用 
DSP 
芯
片作为逆变点焊电源的主控芯片有助于提高焊接电源的控制精度，而且其高
速的处理速度和合理的内部设计结构，结合模糊控制等人工智能技术为电阻
点焊过程的智能控制提供了强大的支持。
 
4.1  设计目标
 
4.1.1  逆变频率的选择
 
点焊逆变器的逆变频率从理论研究和实际应用来看，常用在 
600
～
2000Hz
。随着逆变频率的提高变压器铁芯的截面积大大减少，但频率的进一
步提高并不能带来更大的效率。电阻焊机的最大特点是低电压大电流，其变
比及导线截面积都不可能太小，因此继续减少铁芯截面积的意义不大。本文
所研制的焊接电源的逆变频率为 
1000Hz
，既可以显著降低变压器铁芯体积，
同时可以获得良好的控制精度。
 吉林大学博士学位论文
 
  66
4.1.2  系统需求分析
 
电阻点焊过程控制系统要求实时检测逆变主电源的电流以及次级电极间
电压。由于铝合金电阻点焊过程多采用硬规范，大电流，同其他金属材料的
电阻点焊过程相比，焊接时间非常短，通常是 
0.02
～
0.20s
，而且本系统的控
制目标是中频电阻点焊逆变电源，这就对系统的实时控制性能提出了非常高
的要求。因此所设计的逆变点焊电源智能控制器应具有如下功能：
 
(1)  
核心控制芯片及其周边电路有较高的运行速度和并行处理能力
   
由
于是中频逆变焊接电源控制器，要求能在 
ms 
单位内完成对焊接信号的检测、
采集以及处理，并且完成相应的智能控制算法，同时要完成对主电路功率元
件的驱动以及点焊过程相关动力的驱动。
 
(2)  
具有较强的抗干扰能力
  
电阻点焊焊接电源工作在大电流的工作状
况，而且随着焊接电源频率的提高，系统的抗干扰要求也随着增高，加之焊
接场所多是环境条件差，外界干扰源多，这就要求系统必须采取有效的措施
保证整个系统的工作可靠性。
 
(3)  
故障检测与报警功能
   
逆变点焊电源主要功率元件 
IGBT 
工作在条
件比较恶劣的频繁开关状态。系统应该能对 
IGBT 
的过流，主变压器的过热，
以及用户不适当的选择进行保护、提示乃至报警。
 
(4)  
具备良好的人机交互界面
  
人机交互界面是用户同逆变点焊电源之
间的沟通桥梁，良好的人机交互提供给用户简洁的可操作性，同时也有利于
系统的故障检测与排除。
 
(5)  
同主控计算机的通讯能力
  
系统应该提供同主计算机的通讯功能，来
实现主计算机同控制系统之间的数据传输，这样用户可以将焊接过程中参数
记录在案，也有利于对焊接过程中的参数变化进行分析。
 
4.1.3  控制系统的构成及功能
   
     
系统采用模块化设计方法，各模块单独设计，单独调试，最后进行系统
集成。这使得系统的设计、调试和维护都十分方便。系统总体框图如图 
4-1
所示。
 第 
4 
章
  
基于 
DSP 
点焊智能控制器的硬件设计
 
  67
2407
电磁阀
人机交互
液晶显示
键盘
故障检测
电压检测电流检测
驱动
焊接
次级
整流
变压器
逆变
整流
滤波
通讯
图 
4-1   
基于 
DSP 
的逆变点焊电源控制系统框图
 
Fig.4-1 the block diagram of general control of the inverted spot welder based DSP 
 
电流检测模块从主电路的变压器一次侧完成焊接电流采样、滤波，并计
算其有效值后送至 
DSP 
主控模块进行处理。电压检测模块从次级点焊电极上
完成电压参数的采样、去噪后送至 
DSP 
主控模块。故障检测模块检测主电路
的 
IGBT 
功率元件以及主变压器等器件，如果发生过流、过热等异常行为，
则向主控模块提示并报警。
IGBT 
驱动模块执行 
DSP 
主控模块发出触发命令，
完成对主电路 
IGBT 
的触发与关断。电磁阀驱动模块完成点焊过程中对压力
的程序控制命令的执行，实现焊接过程中的预压、焊接、锻压等程序功能。
通讯模块完成 
DSP 
主控模块同计算机直接的数据传输，便于焊接过程参数的
记录以及分析。人机交互模块由薄膜键盘以及液晶显示模块组成，实现用户
对焊接参数的选择，功能模块的控制，完成用户与系统之间的交流通讯功能。
 
4.2 DSP 及其周边电路设计
 
 
 吉林大学博士学位论文
 
  68
 
 
图 
4-2 TMS320LF2407A 
体系结构
[111]
 
Fig.4-2 the system structure of   TMS320LF2407A
[111]
 
 
4.2.1 DSP 芯片的选择
 
在当前的 
DSP 
中，美国 
TI 
公司的 
TMS320 
系列以其优越的性能价格比
在国内外市场上占有重要地位，其中的 
TMS320LF2407A 
把一个高性能的
DSP 
内核和微处理器的片内外围设备集成为一个芯片，成为传统的微控制器
A(15~0) 
D(15~0) 
RAM2.5k W 
Boot  ROM
Flash 
32k W 
C2
ⅹⅹ DSP core
 
16 
位 
T 
寄存器
16
×
16 
乘法器
32 
位 
P 
寄存器
桶形移位器
 
32 
位
   ALU 
32 
位
  
累加器
 
8 
个辅助寄存器
 
2 
个状态寄存器
 
16 
位
 
移位
 
寄存
 
器
 
事件管理器
 
4 
个定时器
 
6 
个全比较单元
 
16 
个 
PWM 
输出
死区控制逻辑
 
6 
个输入捕捉
 
40 
路数字 
I/O 
看门狗定时器
 
SCI&SPI&CAN 
A/D 
转换器
 
8 
路 
10 
位 
ADC
8 
路 
10 
位 
ADC
 
 
 
 
 
 
 
 
 
外
设
总
线
程序
/
数据
/I/O 
总线
 第 
4 
章
  
基于 
DSP 
点焊智能控制器的硬件设计
 
  69
和昂贵的控制多片设计的一种廉价的替代产品，堪称业界最具竞争能力的数
字化控制器。此处理器是一种特殊用途的微处理器，其结构和指令集特别适
合于执行“信号处理”类算法，丰富的片内外围设备又使其适于控制应用。
TMS320LF2407A 
体系结构如图 
4-2 
所示
[111]
。
 
由图可见，
TMS320LF2407A 
的结构特点特别有利于在控制系统中应用。
改进的哈拂结构：具有分离的程序和数据总线，这种多总线结构允许同时取
指令和操作数，使得指令和数据能并行移动和同步执行，加快了执行速度。
流水线操作：流水线操作使取指、译码、取操作数和执行等操作可重叠执行。
流水线操作决定了的指令基本上都是单周期指令。采用硬件乘法器：
DSP 
的
硬件乘法器使得乘法运算可以在 
1 
个指令周期内完成，而单片机的乘法指令
实际上是由加法和移位以软件方式来实现，因此，实现乘法运算就比较慢。
快速的指令周期：
TMS320LF2407A 
的工作时钟频率很高，时钟频率达到
40MHz
，即指令周期为 
25ns
。
  
特殊的 
DSP 
指令：芯片的一个重要特征就是
有套专门为数字信号处理而设计的指令系统。
DSP 
的指令集简化了数字信号
处理过程。优化的事件管理模块和外围电路：从图 
4-2 
可见在芯片中集成了
转换、大容量存储器、定时器、比较单元、捕获单元、波形发生器、数字 
I/O
口、
SPI
、
SCI
、
CAN 
等，其中 
4 
个通用定时器和 
12 
个比较单元的结合能产
生多达 
16 
路的输出，足以满足 
IGBT 
主电路的驱动。此外，
TMS320LF2407A
具有快速的中断处理能力、数据指针的逆序寻址功能、硬件寻址控制以及多
种节电模式等特有的性能，这些特性有利于 
TMS320LF2407A 
在点焊逆变器
智能控制中的应用。综上所述，本系统选择 
TMS320LF2407A 
作为逆变点焊
电源的核心控制芯片。
 
4.2.2 主控板的设计
 
主控板是本系统的核心部分，由 
DSP  TMS320LF2407A
、存储器、
A/D
转换电路、键盘编码电路、显示接口电路、模拟电源、数字电源、以及 
IGBT
驱动输出接口电路等组成。电路框图见图 
4-3
。
 
存储设备采用 
CY7C1021CV33
，是高速 
CMOS 
静态 
RAM
，其存储容量达到
64Kword
，其工作电压为 
3.3V
，
8
～
12ns 
的存储速度，完全同 
TMS320LF2407
芯片相匹配，可以实现同 
CPU 
直接相接。本系统由两片 
CY7C1021CV33 
构吉林大学博士学位论文
 
  70
成了主控板的存储设备，其中一片作为数据存储器，而另一片作为程序存储
器。使用 
CY7C1021CV33 
作为程序存储器，便于系统开发过程中软件的维护
与更新。基于 
DSP 
的主控板见图 
4-4
。
 
 
图 
4-3 
基于 
DSP 
主控板框图
 
Fig.4-3 the block diagram of the main control panel based on DSP 
 
电
流
检
测
 
电
压
检
测
 
薄
膜
键
盘
 
液
晶
显
示
 
R
S
2
3
2
传
感
信
号
 
I
G
B
T
驱
动
 
LF2407A
接口电路
64K 
存储
64K 
存储
总
 
 
 
线
 
A
/
D
接
口
1
A
/
D
接
口
2
数
字
电
源
 
模
拟
电
源
 
键
盘
编
码
 
显
示
接
口
 
通
讯
接
口
 
故
障
检
测
 
电
平
转
换
 第 
4 
章
  
基于 
DSP 
点焊智能控制器的硬件设计
 
  71
 
图
4-4  
基于
DSP
的主控板图
 
Fig.4-4 the picture of the main control panel 
4.3  显示模块的设计
 
液晶显示器
(LCD)
具有功耗低、体积小、重量轻、超薄等诸多其它显示器
无法比拟的特点，被广泛应用于各种仪器和低功耗电子产品中。
LCD 
可分为
段位式 
LCD
，字符式 
LCD 
和点阵式 
LCD
，前两者只能显示有限种字符，而
点阵式 
LCD 
不仅能显示字符，还可以显示汉字及各种图形，并且可实现屏幕
的上下左右滚动显示，反转显示及显示闪烁等功能，用途十分广泛。为提高
系统人机交互的能力，提高系统的可控性与可视性，本系统采用点阵式液晶
显示模块 
FM240128B
，其点阵矩阵为 
240
×
128
。内集成 
T6963C 
液晶显示控
制模块及相应的显示存储器。
 
4.3.1  显示控制模块 
T6963C 吉林大学博士学位论文
 
  72
T6963C 
液晶显示控制器多用于中小规模的液晶显示器件，常被装配在图
形液晶显示模块上，以内藏控制器式图形液晶显示模块的形式出现。它具有
8 
位地址及数据总线接口，可以图形方式、字符方式及图形和字符合成方式
进行显示。它具有内部字符发生器 
CGRAM
，共 
128 
个字符。
T6963C 
可管理
64k RAM 
作为显示缓冲区及字符发生器 
CGRAM
，并可允许外部 
CPU 
随时访
问显示缓冲区，甚至可以进行位操作。
 
存储器中设置空间内的每一个
"
位
"
都
与液晶屏上的一个像素（点）相对应，而
"
位
"
的二值性就表示液晶屏上像素
是否
"
显现
"
。
T6963C 
则将存储器中设置区域的内容不断地、扫描式地送向液
晶屏，用户则通过显示模块对外的接口将需显示的
"
数据
"  
送入存储器中的设
置区域。其电路控制模块图见图 
4-5
。
 
图 
4-5   T6963C 
控制液晶显示模块图
 
Fig.4-5 the LCD model controlled by T6963C  
4.3.2  液晶显示模块与 
DSP 硬件接口形式
 
通常有两种液晶显示模块同 
TMS320LF2407A 
的接口方法。一种是将
LCD 
的数据线 
D0
～
D7 
通过锁存器同 
LF2407A 
的数据总线的低八位相接，
通过地址线同 
IS 
信号线作片选信号，将 
LCD 
映射到 
LF2407A 
的 
I/O 
空间中
控
制
总
线
 
控
制
总
线
 
240128LCD
T6963C
列驱动器
行
驱
动
器
 
32KRAM第 
4 
章
  
基于 
DSP 
点焊智能控制器的硬件设计
 
  73
的一定地址。这种连接方式的优点是不占用 
LF2407A 
的 
I/O 
端口，但是元件
较多，连接方式比较复杂，其时序控制多由硬件来实现。本文采取将 
LCD
的数据端口直接同 
LF 2407A 
的数字 
I/O 
端口相连接方式，电路元件少，稳定
性好，充分利用了 
LF2407A 
丰富的数字 
I/O 
资源而且其时序的配合完全由软
件完成。其电路原理图如图 
4-6 
所示。
 
FG
1
VSS
2
VDD
3
V0
4
WR
5
RD
6
CE
7
C/D
8
NC
9
RESET
10
DB0
11
DB1
12
DB2
13
DB3
14
DB4
15
DB5
16
DB6
17
DB7
18
FS
19
VOUT
20
A
21
K
22
LCD
DSP_DA4
DSP_DA5
DSP_DA6
DSP_DA7
DSP_DB0
DSP_DB1
DSP_DB2
DSP_DB3
DSP_DB4
DSP_DB5
DSP_DB6
DSP_DB7
10K
R1
5V
RESET
 
图 
4-6   LCD 
同 
LF2407A 
直接相连接方式
 
Fig.4-6 the direct connection between LCD and LF2407A 吉林大学博士学位论文
 
  74
4.4 IGBT 驱动模块的设计
 
4.4.1 LF2407A 的 
PWM 输出
 
计数周期计数周期
死区
PWM
X+1
    
 
(低)
PWM
X
      (高)
比较匹配发生点
计数器值
比较值
大于周期
 
图 
4-7   
非对称 
PWM 
波形产生示意图
[111] 
Fig.4-7 the sketch map of generating asymmetric PWM wave
[111]
 
图 
4-8   PWM 
输出驱动 
IGBT 
模块
 
Fig.4-8 the PWM output wave driving IGBT 
LF2407A  
包括
  2 
个事件管理模块
  EVA 
和 
EVB
，每个事件管理模块有
3 
个全比较单元，每个全比较单元带有可编程死区发生器，每个全比较单元
以定时器 
1
（
EVA 
模块）或者定时器 
3
（
EVB 
模块）为时基，可输出 
6 
路带
可编程死区控制的 
PWM 
脉冲。在每个 
PWM 
周期内可根据需要改变 
PWM
的占空比，通过设置定时器
  1 
或定时器 
3 
为不同计数模式，可选择全比较单
元输出非对称 
PWM 
波形、对称 
PWM  
波形或空间矢量 
PWM  
波形。当定时
IGBT 
驱动模块 
1
IGBT 
驱动模块 
2
IGBT 
驱动模块 
3
IGBT 
驱动模块 
4
L
F
2
4
0
7
A
P
W
M
输
出
电
平
转
换
功
率
驱
动第 
4 
章
  
基于 
DSP 
点焊智能控制器的硬件设计
 
  75
器
  1  
或定时器 
3 
工作在连续增计数模式可产生适用驱动逆变点焊电源控制
的非对称 
PWM  
波形，其原理示意图如图 
4-7 
所示。
PWM 
输出及驱动 
IGBT
的模块框图见图 
4-8
。
 
 
图 
4-9 PWM 
输出实测波形
 
Fig.4-9 the actual wave of PWM output 
     
图 
4-9 
为系统占空比为 
80
％时，本驱动模块的一路 
PWM 
输出实测波形，
图形所示为高有效 
PWM
。
 
4.4.2 IGBT 驱动模块的选择与设计
 
IGBT 
作为点焊逆变电源的主要功率转换元件，其是否能够正常的开通与
关断直接关系到焊接电源的工作是否正常。
IGBT 
的驱动及保护是逆变点焊
电源设计的关键。一个理想的 
IGBT 
驱动器应具有以下基本性能：动态驱动
能力强，能为 
IGBT 
栅极提供具有陡峭前后沿的驱动脉冲；能向 
IGBT 
提供
适当的正向栅压以及能向 
IGBT 
提供足够的反向栅压；有足够的输入输出电
隔离能力。
 吉林大学博士学位论文
 
  76
 
图 
4-10 M57962L 
内部原理图
[112]
 
Fig.4-10 the internal schematic diagram of M57962L
[112] 
1
2
3
DIGITAL POWER +5V
1
2
3
CONTORL SIGNAL IN
JP4
1
2
3
CONTORL SIGNAL OUT
JP6
1 2
3 4
5 6
CONTORL SIGNAL IN
JP5
D+5V
D+5V
PDPINTB
IGBT_DRIVE
PDPINTB PDPINTB
IGBT_DRIVE IGBT_DRIVE
1
1
2
2
3
3
4
4
5
5
6
6
7
7
8
8
9
9
10
10
11
11
12
12
13
13
14
14
M57962L
U2
SIGNAL IN 1
U1
ERA40
D3
30V
DZ3
25V
DZ2
25V
DZ1
47u F
C9
47u F
C10
DGND
DGND
DGNDDGND
IGBT1
IGBT2
IGBT3
IGBT1
IGBT2
IGBT3
4.7K
R3
3.3
R4
170
R2
330
R1
+15V
-10V
 
图 
4-11   IGBT 
驱动模块原理图
 
Fig.4-11 the schematic diagram of IGBT driver models 第 
4 
章
  
基于 
DSP 
点焊智能控制器的硬件设计
 
  77
本系统采用光耦隔离式
IGBT
驱动模块
M57962L
作为
IGBT
的驱动模块。
M57962L 
的内部电路原理图见图 
4-10
。
M57959
Ｌ则需双电源
(+15V
，
-10V)
供电。而 
M57959
Ｌ则可输出
-10V 
的偏压，能可靠地关断 
IGBT
。
M57959L
而且具有封闭性软关断功能，能够在 
IGBT 
短路时，软关断 
IGBT
，从而完成
对主电路的保护。
IGBT 
驱动电路原理图见图 
4-11
。
 
如图 
4-11 
所示，由端口 
13
、
14 
输入 
IGBT 
触发信号，
IGBT 
栅极获得相
应的触发脉冲，
IGBT 
导通。如果 
IGBT 
发生短路，则管脚 
8 
为低电平，光耦
U1 
导通，则 
PNPINTB 
端口由高电平变为低电平，
PWM 
输出停止，给主控
电路发出警报。 
4.5 电流采样电路
 
本系统电流采样方案中使用 
MAX314 
作为整流桥，把传感器输出的交流
电流信号转变为直流电压信号，然后经过放大、信号保护、滤波后送 
DSP 
采
样。由于滤波模块的存在使得电流传感器输出的信号中表达方向的部分被去
除而我们关心的电流大小的信息却被完好的保存了下来，这样做的好处是不
论电流的正负只要它们的大小一样就被表示成一个正电压，使后续的 
AD 
采
样部分和在 
DSP 
中的信号处理都得到了简化；并且由于采样窗口宽增加了采
样的精度。
MAX314 
是 
MAXIM 
公司的 
4
（
2 
常开，
2 
常闭）单刀单掷 
COMS
模拟开关，无电压死区，在±
15V 
供电时最大开
/
关时间小于 
300ns,
导通电阻
小于 
10
Ω，它的各个开关的开
/
关由各自的逻辑控制输入决定。经放大后的
信号经过信号线路保护器 
MAX4506
，可以防止电压过高和过低的信号进入
滤波器和 
AD 
转换器，引起器件故障。信号从 
MAX4506 
出来后经过 
10MHz
的 
RC 
低通滤波器后进入 
DSP 
的 
AD 
转换模块。
 
4.6 故障检测及保护功能
 
电源主电路中的 
IGBT 
及变压器的冷却非常重要，为避免由于温度过高
引起系统异常，本系统针对 
IGBT 
的过流、过热以及主变压器的过热设计了
故障检测及保护模块。
LF2407A 
为保障系统中功率转换电路和驱动电路的安
全可靠工作，提供了功率驱动保护中断输入引脚 
PDBINTA 
和 
PDBINTB
，利吉林大学博士学位论文
 
  78
用它们可以方便地实现各种保护功能，包括过电流和过热保护等。本系统将
PDINTB 
信号同 
IGBT 
过流、过热以及主变压器过热检测信号相连接，同时
将按照系统故障信号的分类不同 
LF2407A 
的数字 
I/O 
连接，用于判断故障产
生原因。一旦检测值超过给定值，保护电路发出 
2  
路信号：一路作为故障类
别信号将直接送入 
LF 2407A
，将 
PDBINTB 
变为低电平，
LF2407A 
随即停止
PWM 
输出，并产生中断；另一路则将检测信号送至
  LF2407 
的数字 
I/O 
端口。
系统在中断中对故障检测类别输入 
I/O 
进行判别，从而获得故障产生原因，
并对用户作出提示，其电路原理图如图 
4-12 
所示。
 
 
4.7 本章小结
 
为提高铝合金电阻点焊过程控制精度，首次采用 
DSP 
芯片 
TMS LF2407A
作为逆变电阻点焊智能控制器的主芯片，并设计了相应的人机交互模块、
IGBT 
驱动模块、故障检测以及保护等辅助功能模块的硬件组成，为进行铝
合金电阻点焊质量控制提供了硬件基础。
 
低电平
PDPINTB
IOPC1 
IOPC2 
IOPC7 
IOPA3 
或
非
门
 
IGBT  
过热
主变压器过热
 
IGBT  
过流
网压检测
 
T
M
S
3
2
0
L
F
2
4
0
7
A
图 
4-12  
故障检测及保护模块原理图
Fig.4-12 the schematic of faults detection and protection 第 
5 
章
  
基于 
DSP 
点焊智能控制器的软件系统设计
 
  79
第 5 章 基于 DSP 点焊智能控制器的软件
系统设计 
5.1 软件系统总体设计
 
软件系统是整个控制系统的灵魂，本章采用模块化的设计方法，分别设
计点焊智能控制器软件系统的各功能模块，然后总体进行调试。
 
5.1.1 系统功能模块分析
 
本软件系统为前面所介绍的基于 
DSP 
的逆变点焊电源智能控制器所设
计，因此首先要满足电阻点焊程序设定的要求；系统的控制目标是中频逆变
点焊电源，这就对系统的实时控制性能提出了非常高的要求；而且要能够实
现所采用的相应智能控制算法。应具有如下功能：
 
(1)  
电阻点焊焊接参数设定功能
  
系统应能够设定点焊焊接参数，包括：
预热电流、预热通电时间、预热间隔时间、焊接电流，焊接电流通电时间、
后热间隔时间、后热电流、后热电流通电时间，预压开始时间、锻压力施加
时间、压力保持时间等焊接参数。
 
(2)  
智能控制模块
  
这是本电阻点焊质量智能控制系统的核心模块，其应
能够实现核心的点焊过程智能控制算法，输出控制参量，完成智能化质量控
制。
 
(3)  
系统控制参数采集功能
  
系统应对传感器采集的变压器一次侧电流。
二次侧电极间电压参数进行转换，完成其有效值的计算，给控制模块提供可
以处理的数字变量。
 
(4)  
数字量输出转换模拟输出量模块（
D/A
）系统将智能控制模块的输出
由数字量转换为驱动 
IGBT 
开通和关断的模拟量。
 
(5)  
具备良好的人机交互界面
  
人机交互界面是用户同软件系统的沟通
桥梁，良好的人机交互提供给用户简洁的可操作性，同时也有利于系统的故吉林大学博士学位论文
 
  80
障检测与排除。
 
(6)  
故障诊断模块
  
能够对硬件系统产生的报警及故障诊断进行判别，进
而作出提示。
 
(7)  
同主控计算机的通讯能力
  
系统应该提供同主计算机的通讯功能，来
实现主计算机同控制系统之间的数据传输，这样用户可以将焊接过程中参数
记录在案，也有利于对焊接过程中的参数变化进行分析。
 
图 
5-1 
软件系统总体框图
 
Fig.5-1 the block diagram of the software 
5.1.2 系统功能模块构成
 
软件系统总体框图如图 
5-1 
所示。键盘输入模块完成用户输入，液晶显
示模块完成焊接相关信息的显示，二者共同完成人机交互功能；焊接程序设
定模块完成用户对焊接相关程序参数的设定，以及传送有关变量；故障诊断
模块完成故障信号来源判别，并作出相应提示；检测参数模块完成焊接电流
以及电极间电压信号的采集及转换；
PWM 
输出模块完成对输出控制量的 
D/A
转换；通讯模块完成控制器系统同工业控制计算机之间的数据通讯；智能控
制模块是控制器软件系统的心脏，完成对焊接过程的智能控制相关算法。
 
智 能
控 制
模
  
块
键
盘
输
入
模
块
 
液
晶
显
示
模
块
 
焊
接
程
序
设
定
 
P
W
M
输
出
模
块
 
通
讯
模
块
 
故
障
诊
断
模
块
 
检
测
参
数
A
/
D 
主控层
 第 
5 
章
  
基于 
DSP 
点焊智能控制器的软件系统设计
 
  81
焊接参数初始化
液晶初始化
键盘初始化
DSP
初始化
1
键盘是否
有按键
1
参数设定 
焊   接
焊接参数
是否设定
脚踏开关
是否按下
初始化
开   始
功能选择处理
 
图 
5-2 
软件系统总体流程图
 
Fig.5-2 the flow chart of the system soft ware 
5.1.3 软件系统总体流程
 
系统上电后，经过 
DSP 
相关内部寄存器设置初始化、液晶显示程序初始
化，键盘程序初始化以及焊接相关参数初始化后，进入液晶显示主界面。用
户可以通过键盘及液晶显示子系统进行焊接参数设置、同计算机进行数据传
输、以及开始焊接等功能。用户如果按下开始焊接脚踏开关，系统检测焊接
参数是否设置：如设置好，则关闭除焊接程序循环以外的中断设置，进入焊
接程序；如果没设置好，则给用户相应提示。系统进入等待状态，等待用户
下一步命令。软件系统总体流程参见图 
5-2
。
 
5.2 焊接程控程序
 
焊接程控程序主要完成焊接过程的时序控制，本系统设计的焊接过程时吉林大学博士学位论文
 
  82
序参见图 
5-3
。
 
I
t
1
1
2
t
2
1
I
3
t
3
4
4
t 
2
6
5
t
5
6
t
I
3
7
t
7
w
I
t
图 
5-3 
电阻点焊时序图
 
Fig.5-3 the time routine of resistance spot welding 
t
1
——焊接压力开始同预热开始之间间隔；
 
t
2
——预热电流通电时间；
 
t
3
——预热过程结束同主焊接电流开始间隔；
 
t
4
——焊接过程通电时间；
  
t
5
——焊接过程结束同焊接后热电流开始间隔；
  
t
6
——后热过程通电时间；
 
t
7
——压力保持周期。  
焊接时序控制参见流程图 
5-4
。
 
     
在点焊时序控制中，焊接程序（电流控制程序）是电阻点焊过程控制的
关键。点焊电流是通过 
DSP LF2407A 
的 
PWM 
输出控制 
IGBT 
的导通占空比，
从而控制次级焊接电流。本系统采用 
T1 
计时器设定计时时间，而将计时器
T3 
的周期设定为 
0.5ms
，即电阻点焊周期的一半。通过设定 
CMP4
，
CMP5
比较寄存器的值来设定 
PWM 
输出的占空比。系统利用 
T3 
计数器同 
CMP4
、
CMP5 
寄存器值比较而产生的中断来设定相应的 
PWM 
输出占空比。示意图第 
5 
章
  
基于 
DSP 
点焊智能控制器的软件系统设计
 
  83
见图 
5-5
。
 
 
图 
5-4  
焊接时序控制流程图
 
Fig.5-4 the flow chart of the control of welding time routine 
图 
5-5 PWM 
输出示意图
 
CMP4 
中断 
0  CMP4 
中断 
1  CMP4 
中断 
0 
中断 
0 CMP5 
中断 
1  CMP5 
中断 
0 CMP5
结
   
束
 
N 
N
N
Y
Y 
N 
Y
Y
计时 
t
4
 
延 
  
时
t
3
=0? 
执行焊接程序
t
5
=0? 
延
   
时
 
t
6
=0? 
执行后热程序
 
计时 
t
7
 
执行电极抬起
 
1 
1
开
   
始
 
计时 
t
1
 
延
   
时
 
执行加压程序
 
t
2
=0?
执行预热程序
 吉林大学博士学位论文
 
  84
Fig.5-5 the sketch of PWM output 
PWM 
输出控制如下所示：
 
(1)  
CMP5 
中断 
0
：空闲。
 
(2)  
CMP5 
中断 
1
：设置下一个 
CMP 5 
比较寄存器为 
0
，根据电流采样模糊推
理计算修正的占空比，写入下一个 
CMP 5 
寄存器，设置奇偶寄存器值为 
0
；
 
(3)  
CMP4 
中断 
1
：空闲。
 
(4)  
CMP4 
中断 
0
：设置下一个 
CMP 5 
比较寄存器为 
0
，根据电流采样模糊推
理计算修正的占空比，写入下一个 
CMP 5 
寄存器，设置奇偶寄存器值为 
0
。
 
5.3  人机交互系统的软件设计
 
人机交互系统是用户同控制系统进行交互沟通的桥梁，人机交互系统的
设计关系到系统控制功能的正常实现。人机交互系统分为用户键盘输入以及
液晶显示两部分。系统的设计应该具备模块化、易扩展性，而且人机交互系
统实质上是人机控制信息通信的接口，负责控制整个系统控制信息的流向。
为使系统具备良好的信息可控性，本系统设计了消息触发、消息响应机制负
责处理系统中控制信息的产生，流向控制以及处理。
 
5.3.1  消息机制
 
人机交互系统的消息有两大类，一类为显示消息类；另一类为键盘消息
类。其中，显示消息类中包括窗口消息、文本框消息、输入框消息、按钮框
消息；键盘消息由数字键消息、方向键消息、确认（
Click
）消息以及功能键
消息组成。
 
数字键消息类向系统发送数字键 
0
～
9 
按下的消息；方向键消息类在用户
按下“上”、“下”、“左”、“右”方向键向系统发送相应的消息码；确认（
Click
）
消息在用户按下确认键时产生；功能键消息完成功能模块的调用消息。
 
窗口消息负责处理用户选择不同的显示窗口时候的消息处理；文本框消
息处理方向键消息等；输入框消息处理数字键消息、方向键消息等；按钮框
消息处理方向键、确认键等消息，系统消息分类见图 
5-6
。
 第 
5 
章
  
基于 
DSP 
点焊智能控制器的软件系统设计
 
  85
图 
5-6  
人机交互系统消息分类
 
Fig.5-6 the message classification of man-machine interaction system
 
5.3.2  用户输入模块
 
用户输入软件模块建立在薄膜
键盘及键盘解码器基础上。键盘输
入采用中断方式，在用户输入模式
阶段中，如有用户按键发生，系统
产生相应中断，并对用户按键进行
识别，产生相应的按键消息，发送
给系统等待系统相应。经过系统相
应后，清除处理后的消息码，进入
下一个消息处理。程序处理流程图
见图 
5-7
。
 
5.3.3  液晶显示系统设计
 
本系统采用液晶显示模块作为
系统显示的硬件基础。采用液晶显
显 示
  
消
  
息
  
键 盘 消 息
窗
 
口
 
消
息
文
 
本
 
框
消
息
输
 
入
 
框
消
息
按
 
钮
 
框
消
息
数
 
字
 
键
消
息
方
 
向
 
键
消
息
确
认
︵
C
l
i
c
k
︶
消
息
功
 
能
 
键
消
息
Y 
N 
输入消息处理
 
开始
 
等待用户输入
 
有输入？
 
进入输入中断
 
产生输入消息
 
清除消息码
 
图 
5-7 
消息处理流程
 
Fig.5-7 the flow chart of message handle 吉林大学博士学位论文
 
  86
示模块，可以更加直观的反应用户对焊接相关参数的设定，控制功能的选择，
以及提供用户系统故障检测提示、报警等功能。
 
5.3.3.1  
液晶显示数据结构
 
图 
5-8   LCD 
显示驱动模块
 
Fig.5-8 the driven model of LCD display 
 
本显示系统采用四种显示类型，窗口，文本框，输入框，按钮框。不同
类型的控件存储在不同的区域，即 
ROM 
空间中开辟窗口数据区，文本框数
据区，按钮数据区，输入框数据区。每种显示类型设定了相应的检索 
ID 
及
相应的数据结构。检索 
ID 
一般结构如下所示，窗口 
ID
（
1 
字）：窗口号
(6Bit)
；
默认焦点控件
(4Bit)
；本控件的类型（
3Bit
）；下一控件的类型（
3Bit
）。其中：
文本框数据结构：文本框 
ID
（
1 
字）；起始横坐标，起始纵坐标，文本内容。
输入框数据结构：输入框 
ID
（
1 
字）；起始横坐标，起始纵坐标，显示内容，
左右上下方向键响应消息，
Click 
响应消息。按钮框数据结构：按钮框 
ID
（
1
字）；起始横坐标，起始纵坐标，显示内容，左右上下方向键响应消息，
Click
响应消息。
 
文字显示
LCD 
底
层驱动
程序
画横线
  
画竖线
 
文字反显
字库第 
5 
章
  
基于 
DSP 
点焊智能控制器的软件系统设计
 
  87
5.3.3.2  
液晶显示程序设计
 
系统经过初始化后，进入液晶显示程序，首先装载主窗口及其相应控件，
然后等待用户的消息输入，对消息进行解析处理后，调用相应的显示控件显
示程序。显示控件的显示程序以系统的 
LCD 
显示基本程序为底层，进行相应
显示元素的显示。
LCD 
显示基本程序结构见图 
5-8
。显示基本程序，以 
LCD
底层驱动程序为核心，由文字显示、反显、画横线及画竖线组成。系统为便
于系统信息显示，建立了自己的字库，为系统文字显示提供了支持。图 
5-9
、
5-10 
为液晶显示界面的部分显示图片。
 
 
图 
5-9 
液晶显示界面之 
1 
Fig.5-9 one of the interface of LCD display 
 
图 
5-10  
液晶显示界面之 
2 
Fig.5-10 the other one of the interface of LCD display 吉林大学博士学位论文
 
  88
5.4  故障检测及报警模块的软件设计
 
故障检测及报警模块实现对硬件系统的故障检测及报警信号的识别，向
用户作出提示以及停止有关焊接程序的运行，相关硬件电路参见 
4.6 
小节。
系统采用中断来处理故障诊断信号。处理程序流程见图 
5-11
。故障发生后，
产生故障报警信号，并触发 
LF2407A 
外部中断 
XINT1
。
XINT1 
中断为高级
别中断，其中断优先级高于系统其他工作中断。系统进入中断，停止 
PWM
输出，切断焊接电源，然后识别故障信号，判别出故障产生原因，对用户作
出提示，屏蔽相关工作中断后，退出中断，至此故障检测结束。
 
5.5  模糊控制系统的设计
 
     
模糊控制系统不依赖于系统精确的数
学模型，特别适宜于复杂系统
(
或过程
)
与
模糊性对象等采用，因为它们的精确数学
模型很难获得或者根本无法找到。模糊控
制中的知识表示、模糊规则和合成推理是
基于专家知识或熟练操作者的成熟经验，
并通过学习可不断更新，具有智能性和自
学习性。模糊控制系统的核心是模糊控制
器，而模糊控制器均以计算机
(
微机、单片
机等
)
为主体，因此它兼有计算机控制系统
的特点，如具有数字控制的精确性与软件
编程的柔软性等。在电阻点焊过程中不可
避免地存在网压波动、焊接回路阻抗变化，
分流及电极磨损等干扰因素，这些都会影
响焊接质量。为了补偿上述各种因素对焊
接质量的影响，要求采用更加精确的方法
来监测与控制点焊过程和质量。采用模糊
控制方法，它不要求建立系统的精确数学模型，将它与控制理论相结合，较
故障产生信号
 
故障中断发生
 
停 
PWM 
输出
 
识别故障信号
 
故障显示
 
屏蔽相应中断
 
返回主界面
 
图 
5-11  
故障检测流程
 
Fig.5-11 the flow chart of diagnosis 第 
5 
章
  
基于 
DSP 
点焊智能控制器的软件系统设计
 
  89
之传统的控制方法不仅可获得更高的控制精度，而且可提高点焊控制器的智
能化程度。本文采用模糊控制作为逆变点焊控制器的智能控制核心。
 
5.5.1  模糊控制器的组成
 
模糊控制器组成包括：输入量模糊化接口、数据库、规则库、推理机和
输出解模糊接口五个部分。模糊控制器的输入必须通过模糊化才能用于模糊
控制输出的求解，因此它实际上是模糊控制器的输入接口，主要作用是将真
实的确定量输入转换成一个模糊矢量。数据库所存放的是所有输入、输出变
量的全部模糊子集的隶属度矢量值
(
即经过论域等级的离散化以后对应值的
集合
)
，若论域为连续域，则为隶属度函数。在规则推理的模糊关系方程求解
过程中，向推理机提供数据。模糊控制器的规则是基于专家知识或手动操作
熟练人员长期积累的经验，它是按人的直觉推理的一种语言表示形式。模糊
规则通常由一系列的关系词连接而成，如 
IF
—
THEN
、
AND 
等。模糊规则库
是模糊控制的核心部分。推理是模糊控制器中，根据输入模糊量，由模糊控
制规则完成模糊推理来求解模糊关系方程，并获得模糊控制量的功能部分。
它通常是在模糊控制器设计过程中选定的推理算法软件逐步被应用。模糊推
理是模糊逻辑理论中最基本的问题。推理的结果经过输出解模糊接口，将输
出的模糊控制量的输出转化成精确的数字控制量。
  
5.5.2  输入量维数的确定
 
图 
5-12  
模糊控制器模式图
 
Fig.5-12 the pattern of fuzzy controller 
(a) one dimension FLC     (b) two dimension FLC      (c) three dimension FLC 
(a)
一维模糊控制器
  (b)
二维模糊控制
(c)
三维模糊控制
一维模糊
控制器
 
E  U 
EC
E 
dt
d
一维模糊
控制器
 
E 
U
ECC 
EC
一维模糊
 
控制器
 
dt
d
dt
d
E
E
U 吉林大学博士学位论文
 
  90
对于单变量模糊控制系统，通常有如图所示三种模式：一维模糊控制器，
如图 
5-12a 
所示。二维模糊控制器，如图 
5-12b 
所示。三维模糊控制器，如
图 
5-12c 
所示。一维模糊控制器的输入变量往往选择为受控变量和输入给定
的偏差量 
E
。由于仅仅采用偏差值，很难反映受控过程的动态特性品质，因
此，所能获得的系统动态性能是不能令入满意的。这种一维模糊控制器往往
被采用于一阶被控对象。二维模糊控制器的两个输入变量基本上都选用受控
变量和输入给定的偏差 
E 
和偏差变化 
EC
，由于它们能够较严格地反映受控
过程中输出变量的动态特性，因此在控制效果上要比一维模糊控制器好得多，
也是目前采用较广泛的一类模糊控制器。三维模糊控制器
  
的三个输入变量分
别为系统偏差量 
E
、偏差变化量 
EC 
和偏差变比的变化率 
ECC
。由于这类模
糊控制器结构较复杂，推理运算时间长，因此除非对动态特性的要求特别高
的场合，一般较少选用三维模糊控制器。综合考虑上述原因，本文采用二维
模糊控制器。
 
18 20 22 24 26 28 30 32 34 36 38
4000
5000
6000
7000
8000
9000
10000
11000
 
 
c
u
r
r
e
n
t
 
(
A
)
dutyratio (%)
 
图 
5-13   
焊接电流同 
IGBT 
占空比关系
 
Fig.5-13 the relation between welding current and the dutyratio of IGBT
 
5.5.3  输入输出参数的选择
 
输入参数即为系统的监测参数。本模糊控制系统的设计目标是保持焊接第 
5 
章
  
基于 
DSP 
点焊智能控制器的软件系统设计
 
  91
过程中焊接电流的恒定，因此采用焊接过程中电流参数为输入参数变量。在
全桥逆变点焊电源焊接过程中，焊接电流的大小近似的与 
IGBT 
导通时间的
占空比成比例关系，如图所示 
5-13
。图
  5-13 
为在稳定的情况下，焊接回路
次级电流同 
IGBT 
占空比之间的对应关系。因此，选取 
IGBT 
触发 
PWM 
波
形的占空比作为控制变量，也就是输出参数。通过调节 
IGBT 
单周期导通时
间的长短来调节焊接过程中焊接电流的变化。
 
在电阻点焊模糊控制的输入参数选择中，一般情况下是把经过 
A/D 
转换
过的电流有效值同设定电流值的偏差及偏差的变化率作为模糊控制器的输入
变量。在这种情况下，由于电阻点焊焊接过程的电流参数范围比较宽，通常
为几千安培到上万安培，这就给后面的模糊区域划分带来了困难。如果模糊
区域划分过宽，则系统的控制精度则会降低，如果模糊区域划分很细，则在
系统推理规则的制定，及系统推理方面过与复杂，不利于程序处理。
 
在本文所设计的模糊控制系统的输入参数选择中，采用检测电流有效值
同电流设定值的偏差同电流检测值的比值及其变化率作为模糊控制器的输入
参数。见下式：
 
⋅
%100
−
=
i
di
i
I
II
E 
            
（
5-1
）
 
−
1
−=
iii
EEC 
                
（
5-2
）
 
%
iii
U 
∇=δδ 
              
（
5-3
）
 
其中：
i
I 
—第 
i 
时刻的电流检测值；
 
  
d
I 
—电流设定值；
 
i
E 
—第 
i 
时刻的偏差百分比；
 
i
−
1
E 
—第 
i
－
1 
时刻的偏差百分比；
 
i
C 
—第 
i 
时刻的偏差变化百分比；
 
i
U 
—第 
i 
时刻的控制量输出；
 吉林大学博士学位论文
 
  92
i
∇δ 
—第 
i 
时刻 
IGBT 
导通时占空比增量；
 
i
δ 
—第 
i 
时刻 
IGBT 
导通时占空比。
 
采用 
E
i
，
C
i
作为输入参数，可以降低输入参数的范围，从而提高模糊划
分的控制精度。而且以 
IGBT 
导通时候的占空比增量百分比 
U
i
作为控制系统
的控制量，同输入参数的设定相适应。
U
i
以当前占空比为控制对比量，是动
态的控制量的输出，这样将提高系统的动态响应和控制精度。
 
本模糊系统输入输出参数见图 
5-14
。
 
5.5.4  论域等级的确定
 
模糊控制系统的控制变量（输入信号和输出信号）是有界的。在模糊控
制系统中，这个有限界一般称为该变量的基本论域，它是实际系统的变化范
围，基本论域都是精确量。输入变量的基本论域可以通过实验或理论指导来
确定，它在控制过程中往往是不变化的。本文中偏差百分比输入变量论域为
［－
15
，
15
］（百分比），则偏差变化率的论域为［－
30
，
30
］（百分比），输
出控制量的论域为［－
15
，
15
］（百分比）。在进行模糊推理之前，首先要把
输入变量、输出变量量化在论域范围内，即进行论域等级划分。电流偏差比
的论域 
E 
可表示为：
 
E
＝｛－
N
1
，－（
N
1
－
1
），
…
，－
1
，
0
，
1
，
…
，（
N
1
－
1
），
N
1
｝
 
偏差比变化率的论域可表示为：
 
C
=
｛－
N
2
，－（
N
2
－
1
），
…
，－
1
，
0
，
1
，
…
，（
N
2
－
1
），
N
2
｝
 
i
δ
图 
5-14  
模糊控制输入输出参数
%
ii
∇δδ
i
I
  
⋅
%100
−
=
i
di
i
I
II
E
−
1
−=
iii
EEC
 
模糊控制 驱动 
IGBT
Fig.5-14 the input and output parameters of fuzzy control 第 
5 
章
  
基于 
DSP 
点焊智能控制器的软件系统设计
 
  93
输出控制量的论域 
U 
可表示为：
 
U 
＝｛－
M
，—
(M
—
1)
，
…
，－
1
，
0
，
1
，
…
，
(M
—
1)
，
M
｝
 
论域的量化等级同模糊系统的控制精度有着直接的关系。图 
5-15 
所示为
将电流偏差变化率为 
7 
个等级的模糊划分；图 
5-16 
为其输出参数 
IGBT 
占空
比的量化模糊划分。而图 
5-17 
为给如上所述的模糊划分建立模型后，在有干
扰信号输入时候的输出曲线图。由图 
5-17 
可以看出，外加干扰信号幅值在［－
10
，
10
］区域时，控制系统的输出偏差较大，已经超过了 
2
％。
 
 
图 
5-15  
模糊变量 
E 
论域划分
 
Fig.5-15 the classification of fuzzy variable E in fuzzy field 
 
图 
5-16  
模糊变量 
C 
论域划分
 
Fig.5-16 the classification of fuzzy variable C in fuzzy field 吉林大学博士学位论文
 
  94
0 0.005 0.01 0.015 0.02 0.025 0.03
-10
-8
-6
-4
-2
0
2
4
6
8
10
time (s)
e
r
r
 
(%
)
输出信号
干扰信号
 
图 
5-17  
模糊控制输出曲线与目标曲线对比
 
Fig.5-17 the comparison between output curve of fuzzy control and target curve 
由此可见，如果量化等级较为粗糙，则系统控制精度随着下降。如果量
化等级过高，则将失去模糊控制模糊的含义，模糊推理规则难以建立，而且
占用大量的存储单元，使算法过于复杂化。经过优化，本系统所设计的量化
等级为 
N
1
＝
17
，
N
2
＝
16
，
M
＝
17
。
 
5.5.5  隶属函数的确定
 
隶属函数用来表示模糊论域中各点对模糊语言变量的隶属程度。隶属函
数在一般情况下，是根据经验给出的，尤其对于被控制对象不甚了解的模糊
控制器的设计来说，隶属函数的选择具有较大的主观性。一般来说隶属函数
的形状越陡峭，分辨率就越高，控制精度也较高；反之，如果隶属函数的变
化很缓慢，则控制特性也较为平缓，系统的稳定性也越好。
 
常见的隶属函数的形状有三角形、钟型、高斯型以及梯形等。本文采用
最常见的三角形隶属函数，可以使运算简单，便于处理。隶属度函数的选择
也要具有一定的噪声容忍度。在电阻点焊的过程中，要受到各种干扰因素的
影响，这就使数据的采集过程中含有一定量的噪声。本文中隶属度函数三角
形底边的宽度选取为 
2
％，既可以排除噪声的干扰，同时也保持了系统的灵第 
5 
章
  
基于 
DSP 
点焊智能控制器的软件系统设计
 
  95
敏性和控制精度。
 
 
 
图 
5-18  
电流偏差百分比的模糊划分
 
Fig.5-18 the fuzzification of the current error percentage 
 
图 
5-19  
电流偏差百分比变化率的模糊划分
 
Fig.5-19 the fuzzification of the gradient of current error percentage 
     
两个隶属度函数的交集体现了两个模糊字集之间的关系。当交集较小时
候，系统控制较为灵敏，反应速度比较快。但是当交集过小时候，系统则失
去了模糊性，控制动作难以连续，变化剧烈，系统不稳定。当交集较大时候，
系统具有较好的适应性，鲁棒性较好。但是当交集过大的时候，系统的控制
特性将会过于“模糊”，控制量也因此会变得很“模糊”，最终导致它们不同
语言值的隶属函数几乎相同。这意味着控制量无法传递多少有意义的信息，
最终导致控制品质的下降。而且当交集过大的时候，将容易引起模糊规则的吉林大学博士学位论文
 
  96
干涉性增强，影响系统的可控性。本系统的隶属度函数交互程度选择交点在
0.5 
处。输入参数 
E
、
C
，输出参数 
U 
的模糊划分见图 
5-18
、图 
5-19 
以及图
5-20
。 
 
图 
5-20 IGBT 
导通占空比百分比的模糊划分
 
Fig.5-20 the fuzzification of the dutyratio percentage of IGBT  
5.5.6  模糊控制规则的建立
 
     
模糊控制规则是模糊控制器的设计核心部分，是进行模糊求解的动力模
块。控制规则的完整性、干涉性和相容性关系到控制系统的可靠性和其鲁棒
性。控制规则的设计中，体现了较多的领域专家的经验，是一个逐步优化的
过程。确定模糊控制规则的基本原则是当电流偏差百分比比较大时，以消除
电流偏差为主要目标；当电流偏差百分比很小时候，以系统稳定，无振荡超
调为主要目标。即当偏差很大时，无论偏差变化如何，控制量取大值。
  
当偏
差为中等大小时，如果偏差变化很大，且向增大偏差的方向变化，控制量取
大值；如果偏差变化很大，且向减小偏差的方向变化，控制量取中等大小；
偏差变化中等大小，且向增大偏差的方向变化，控制量取大值；如果偏差变
化中等大小，且向减小偏差的方向变化，控制量取中等偏小。如果偏差变化
小，控制量取中等大小。
  
当偏差为小值时，但偏差变化很大，且向增大偏差
的方向变化，控制量取中等大小；当偏差变化很大，且向减小偏差的方向变
化时，控制量暂不变化。
 
依据以上原则，把焊接电流的偏差百分比 
E 
和偏差百分比的变化率作为第 
5 
章
  
基于 
DSP 
点焊智能控制器的软件系统设计
 
  97
输入量，
IGBT 
导通时候的占空比变化率为输出量，建立模糊控制系统的规
则。本系统一共建立 
272 
条规则，部分如下所示，其中的数字部分表示经过
量化后的模糊区域划分等级。
 
 
14.  if (
E
 is -8) and (
C
 is 6)   then   (dutyratio is 7) 
15.  if (
E
 is -8) and (
C
 is 7)   then   (dutyratio is 6) 
16.  if (
E
 is -8) and (
C
 is 8)   then   (dutyratio is 6) 
17.  if (
E
 is -8) and (
C
 is -8)   then   (dutyratio is 8) 
18.  if (
E
 is -8) and (
C
 is -7)   then   (dutyratio is 8) 
19.  if (
E
 is -8) and (
C
 is -6)   then   (dutyratio is 8) 
 
5.5.7  模糊推理以及反模糊化
 
模糊推理是模糊控制中根据输入模糊量，由模糊控制规则完成模糊推理
来求解模糊输出。本系统中规则模式如下：
 
if 
E 
为 
A
4
（电流偏差百分比为正中）
  and 
C 
为 
B
1
（偏差变化率为正较小），
 
Thenδ
为 
U
－
4
（
IGBT 
导通占空比变化为负中）；
 
if 
E 
为 
A
4
（电流偏差百分比为正中）
  and 
C 
为 
B
2
（偏差变化率为正小），
 
Thenδ
为 
U
－
5
（
IGBT 
导通占空比变化为负较大）；
 
本系统中模糊推理采用 
Mamdani 
法。如已知 
E
0
、
C
0
，则新的隶属度为：
 
)]([)]([)(
54
210
δµωδµωδµ
−−
∧∨∧=
UUU
                        
)()(
001
14
EE
BA
∧=µµω 
 
)()(
0220
4
EE
BA
∧=µµω 
 吉林大学博士学位论文
 
  98
 
图 
5-21  
模糊推理示意图
 
Fig.5-21 the sketch map of fuzzy inference 
 
图 
5-22  
模糊系统控制曲面图
 
Fig.5-22 the control surface of fuzzy system 
上述模糊推理结果是模糊值，不能直接用于控制被控对象，需要先转化
成一个执行机构可以执行的精确量。此过程为解模糊过程，或称为模糊判决，
它可以看作模糊空间到清晰空间的一种映射。解模糊的目的是根据模糊推理
的结果，求得最能反映控制量的真实分布。本系统采用重心法来实现从模糊
空间到清晰空间的映射。系统模糊推理、解模糊方式如图 
5-21 
所示。系统控第 
5 
章
  
基于 
DSP 
点焊智能控制器的软件系统设计
 
  99
制曲面如图 
5-22 
所示。
 
0 0.005 0.01 0.015 0.02 0.025 0.03
-15
-10
-5
0
5
10
15
time (s)
e
r
r
 
(
%
)
输出信号
干扰信号
 
图 
5-23  
模糊控制系统输出
 
Fig.5-23 the output curve of fuzzy control system 
5.6  系统仿真
 
应用 
Matlab7.0 
对本系统做仿真，以测试系统的性能。设定目标控制输出
为 
0
，干扰信号为 
50Hz 
的正弦曲线。系统的输出曲线如图 
5-23 
所示。
 
    
现对恒流智能控制系统控制性能进行计算机仿真，逆变电阻点焊模糊控制
仿真系统见图 
5-24
。逆变点焊控制器是通过调整 
IGBT 
导通占空比来改变变
压器初级的有效电压从而改变次级电压有效值，从而改变次级电流。对于次
级回路的简化电路来说，相当于一个压控电压源，对于本系统设计的逆变点
焊主电源次级回路来说，次级输出电压在 
7V 
左右，经过整流管压降，从电
阻焊接时的负载端看，前级系统相当于一个 
5V 
的电压源。因此，将负载前
系统在仿真设计中简化为 
5V 
压控电压源。
 
焊接区阻抗为动态电阻，随着焊接材料的动态电阻变化而变化。铝合金电
阻点焊过程的动态电阻变化如下：在焊接开始阶段经过急剧下降后，就趋于
平缓。其动态电阻图如图 
5-25 
所示。电阻点焊电源次级回路阻抗经过计算后
 吉林大学博士学位论文
 
  100
subtract
dynamic R
10000
current set
-K-
Gain
Fuzzy Logic 
Controller
Divide
du/dt
Derivative
i
+
-
Current Measurement
s -
+
5 V
-K-
  
 
图 
5-24  
逆变点焊模糊控制仿真系统图
 
Fig.5-24 the simulation system of the fuzzy control of spot welding inverter 
  
 
 
约在 
300
μΩ左右，故总焊接区动
态电阻变化如图 
5-26 
所示。
 
回路电流经过传感器采样后同
电流设定值进行比较，产生的电流
差 值 同 电 流 设 定 值 相 除 后 乘 以
100
，得到电流偏差百分比，经过微
分后，将偏差百分比同其微分（偏
差变化率）送入模糊控制器，输出
IGBT 
导通占空比调整百分比，从
而调整电压源电压。进而调整回路
电流，保持电流恒定。
 
图 
5-25 
电阻点焊过程动态电阻
 
Fig.5-25 the dynamic resistance in 
the process of RSW 第 
5 
章
  
基于 
DSP 
点焊智能控制器的软件系统设计
 
  101
0 0.005 0.01 0.015 0.02 0.025 0.03 0.035 0.04
300
320
340
360
380
400
420
440
time  (s)
R
 
(
µ
Ω
)
 
5-26  
铝合金逆变点焊焊接回路电阻
 
Fig.5-26 the resistance of secondary circuit of AARSAW inverter 
0 0.005 0.01 0.015 0.02 0.025 0.03 0.035 0.04
3
3.5
4
4.5
5
time (s)
v
o
l
t
a
g
e
 
(V
)
 
图 
5-27  
次级电压输出图
 
Fig.5-27 the output of the voltage of secondary circuit 吉林大学博士学位论文
 
  102
0 0.005 0.01 0.015 0.02 0.025 0.03 0.035 0.04
0
2000
4000
6000
8000
10000
12000
time (s)
c
u
r
r
e
n
t
 
(A
)
 
图 
5-28  
电流输出波形
 
Fig.5-28 the output current curve
 
从图 
5-28 
可以看出在电流经过初始的过渡阶段后，趋于稳定，而且电流
变化范围在电流设定值 
10000A 
附近波动。在电流开始阶段的急速上升以及
下降为电流开始的冲击，在实际焊接时候，由于次级回路为感性电路，电流
需要 
4
～
5 
个周期（周期为 
0.001s
）才能上升到电流设定值，因此在实际焊接
过程中，并不出现这个冲击过程。在排除初始冲击电流后，得到控制电流的
输出平均值为 
I
o
=10072A
，而电流设定值为 
10000A
，控制偏差为 
0.72
％。
模糊推理
'
Ig
Ig
模糊化
e
ec计算
电压比对
U
电流反馈
反模糊化 焊接系统
电压检测
 
图 
5-29  
铝合金点焊过程智能控制框图
 
Fig.5-29 the block of the intelligent control of process control of AARAW 第 
5 
章
  
基于 
DSP 
点焊智能控制器的软件系统设计
 
  103
5.7  铝合金电阻点焊过程智能控制算法
 
系统通过对多次正常情况下焊接过程中电压参数的采集，将采集数据经
由通讯模块传输到主计算机中，对电压参数进行分析，得到相应正常范围的
焊接过程电压数据，即为过程电压参照。在其后的焊接过程中，在每半个周
波内进行电极间电压测量值同标准值的比对，根据其偏差对焊接设定电流 
I
g
进行调整从而产生 
I
g
′
作为焊接电流智能控制的参照。通过对电极间电压参数
的监测可以弥补焊接区由于分流产生的热量产生不足。系统总体控制框图见
图 
5-29
。
 
5.8  本章小结
 
软件系统是逆变电阻点焊电源智能控制器的核心，本章在分析控制器功
能的基础上，进行软件系统各功能模块的设计。采用消息产生与响应机制处
理用户输入与响应，使人机交互更加灵活。设计了完整的故障诊断与报警机
制，使系统工作更加稳定，可靠。采用模糊控制技术进行电阻点焊过程控制，
对控制参量焊接电流及其变化率提出了相应的模糊划分及模糊控制规则，并
提出了结合焊接电流及电极电压相结合的质量控制方法，提高了电阻点焊过
程控制的质量。系统仿真结果表明本智能控制系统可以提高铝合金电阻点焊
质量控制精度。吉林大学博士学位论文
 
  104
第 6 章 结  论 
1.  
建立了铝合金电阻点焊集散型智能控制系统。在上位机中，结合生产实际，
广泛收集和整理有关点焊的工艺资料，设计了一个集成模糊神经网络、基于
规则的推理和基于事例的推理的新型铝合金电阻点焊工艺设计智能系统。该
系统能够模仿人类专家的点焊工艺设计求解模式，根据点焊材料的物理特征，
进行点焊工艺智能设计；在下位机中，首次采用 
DSP 
芯片 
TMS LF2407A 
作
为主芯片，研制了逆变电阻点焊智能控制器，采用模糊算法，进行铝合金点
焊过程智能控制。
 
2.  
在上位机铝合金点焊工艺设计智能系统中，提出了混合 
CBR
、
FNN 
等多
种人工智能技术的推理机制。在基于事例的推理模块中，首次深入的分析了
点焊工艺的事例特征，并抽取材料的热物理性质——电阻率、以及板材厚度
作为在同一供电波形限制下的搜索点焊工艺相似事例的索引，以此设计了搜
索算法。以领域专家进行工艺设计的过程为依据，以材质自身的热物理性质
——电阻率、屈服强度为输入，以材质的点焊工艺参数中的焊接电流、焊接
压力为输出，设计了相应的模糊修正算法，使基于事例的推理更加符合铝合
金电阻点焊过程的本质特征；在基于模糊神经网络的专家系统模块中，首先
根据点焊工艺参数的特点，将点焊工艺参数的求解过程分成数个不同的求解
子目标，在各个子模块中，根据点焊工艺参数的不同参数，制定不同的求解
策略。引入材质电阻率，作为衡量材料点焊工艺的重要参数；通过点焊性参
数的引入，避免了简单的以材质类别作为点焊工艺问题求解的出发点，而更
加符合焊接领域专家的思维过程。
 
3.  
首次提出将焊接时间作为求解焊接电流的输入参变量之一，以焊接时间来
表征点焊规范强度，可以充分体现点焊工艺的复杂性，使系统的推理更加灵
活，更加符合实际情况。
 
4.  
首次将 
FNN 
引入点焊工艺智能设计领域，将基于 
RBR 
和 
FNN 
深层次的
结合，并辅助以基于事例的推理进行铝合金电阻点焊工艺设计，系统对经过
学习训练过的样本有着较高的精度，系统输出工艺参数同给定工艺参数最大
偏差不超过 
4%
；而对于没有学习过的样本也可以给出较为接近的工艺参数，第 
6 
章
  
结
        
论
 
  105
偏差值也不超过 
6%
。工艺实例验证表明这种点焊工艺参数的求解策略是成
功的。
 
5
．在集散型铝合金电阻点焊智能控制系统的下位机硬件设计中，为提高铝合
金电阻点焊过程控制精度，首次采用 
DSP 
芯片 
TMS LF2407A 
作为逆变电阻
点焊智能控制器的主芯片，并设计了相应的人机交互模块、
IGBT 
驱动模块、
故障检测以及保护等辅助功能模块的硬件组成。硬件设计表明：选用 
DSP 
芯
片 
LF2407A 
有利于提高铝合金点焊的实施控制精度，为进行铝合金点焊质量
控制提供了良好的硬件基础。
 
6.  
在集散型铝合金电阻点焊智能控制系统的下位机软件设计中，采用消息产
生与响应机制处理用户输入与响应，是人机交互更加灵活；设计了完整的故
障诊断与报警机制，使系统工作更加稳定、可靠；采用模糊控制技术进行电
阻点焊过程控制，对控制参量焊接电流及其变化率提出了相应的模糊划分及
模糊控制规则，并提出了结合焊接电流及电极电压相结合的质量控制方法，
提高了电阻点焊过程控制的质量。系统仿真结果表明本智能控制系统可以提
高铝合金电阻点焊质量控制精度。吉林大学博士学位论文
 
  106
参考文献 
[1]  Y Cho, Y Kim and S Rhee.Development of a quality estimation model using 
multivariate analysis during resistance spot welding, Proc Instn Mech Engrs, 
2001 Vol 215,1525~1538 
[2]  Hao M.Osman K A.et al. Developments in characterization of resistance spot 
welding of aluminum. Welding Journal 1996(4) 
[3]  
尹孝辉
,  
张忠典
,  
赵洪运
,  
闫丽红
,  
点焊质量监控技术的发展与现状
,  
焊
接
  2002(2):5
～
9 
[4]  
马宏泽
,  
蒋力培
.  
点焊质量优化控制数学模型
.  
焊接学报
. 1997(4):18~21 
[5]  
冯纯伯等
.
神经网络控制的现状及问题
[J].
控制理论与应用
,1994(1):103
～
106 
[6]  Tao, C.W., Taur, J.S. Robust fuzzy control for a plant with fuzzy linear model,
 
Transactions on
 
Fuzzy
 
Systems. 2005(2):30~41 
[7]  Zhou, Chanqiu, Yang, Yan Sheng, International Conference on Fuzzy Systems, 
2002(3):1471~1474 
[8]  Ying,  Hao.  A  novel  method  for  discovering  fuzzy  sequential  patterns  using 
the  simple  fuzzy  partition  method,  International  Journal  of  Intelligent 
Systems, 2005(1):103~125 
[9]  Jiang,Y.C., Xia, Z.Y, Zhong, Y.P. An adaptive adjusting mechanism for agent 
distributed  blackboard  architecture.  Microprocessors  and  Microsystems, 
2005(2):9~20 
[10]  Chaub-Draa,  B.Diqnum.F.,  Trends  in  agent  communication  language
, 
Computational Intelligence, v 18, 2002(5):89~101 
[11]  Restrepo  J.A.,  Milan  A.J,  Harley  R.G.,  Habetler,  T.G.  COT-ANN-PWM 
single-phase  synchronous  rectifiers  without  line-voltage  sensors,
  
Annual 
Power  Electronics  Specialists  Conference,  v  5,  2004  IEEE  35th  Annual 
Power Electronics Specialists Conference, 2004(4),3859~3864 
[12]  Tian  Guo-Fu,  Zhang  guozhong,  Sun  shuhui  etc.  ANN  aided 参
  
考
  
文
  
献
 
  107
automotive-transmission  design
,  
Dongbei  Daxue  Xuebao/Journal  of 
Northeastern University, v 23, 2002(9):903~906 
[13]  
焦李成
.
神经网络的应用与实现
.
西安电子科技大学出版社
.1996. 
[14]  
李士勇
.
神经控制和智能控制论
.
哈尔滨工业大学出版社
.1996. 
[15]  Fogel.An  Introduction  to  Simulated  Evolution.Optimization.IEEE  Trans.on 
Neural Network. 1994,(1):3~14. 
[16]  
方平
,  
黄石生
,  
林一松
,  
吴祥淼
.  
电阻点焊过程智能控制的研究
,  
中国机
械工程
,Vol13.2002(3):441
～
445 
[17]  L.  F.
蒙多尔福著
,  
王祝堂，张振录，郑漩译
.
铝合金的组织与性能
.
冶金工
业出版社
. 1988. 
[18]  
赵熹华
.
压力焊
.
机械工业出版社，
1988. 
[19]  Livshits A G. Universal quality assurance method for resistance spot welding 
based on dynamical resistance. Welding Journal, 1997 (9):76~85 
[20]  
李桂中
.
低碳钢点焊动态过程的模型化控制
  
焊接学报
  1995(2) 16 
[21]  
中国机械工程学会焊接学会
.  
电阻焊理论与实践电阻焊，北京：机械工业
出版社
. 1994.1
第
1
版
  
[22]  
刘效方
.  
点焊质量电极位移法控制的模型设计
.  
焊接
  1983(2) 
[23]  Beatson.E.V  etc.  Resistance  Welding  Control  and  Monitoring.  The  British 
Welding Institute, 1977. 
[24]  
扬剑秋
,  
姜以宏
.  
监控电阻焊的新方法。焊接技术
.1987(4):24~26 
[25]  
翼殿英等
.
热膨胀监控微机控制点焊过程研究
.
电焊机
,  1986(2,3):7~12, 
18~22 
[26]  C.L.  Tsai  et  al.  Analysis  and  Development  of  a  Real-Time  Control 
Methodology  in  Resistance  Spot  Welding,  Welding  Journal,  December 
1991,pp. 339s- 351s 
[27]  Waschkies,  Eckhard.  Testing  the  Resistance  Spot-Welding  Process  with 
Ultrasonics. Welding & Cutting, vol.49, no.1, pp.E5-E7. 1997 
[28]  
赵熹华，徐国成等
. LY12CZ
铝合金点焊熔核孕育处理研究
.  
第十次全国焊
接会议论文集
. 
[29]  Commission  
Ⅲ 
  resistance  welding  and  allied  joining:  Documents  of 
1996-1997. welding in the world, 1999(4) 43 吉林大学博士学位论文
 
  108
[30]  
方平等
.
人工神经网络在焊接质量控制中的应用与展望
[J].
南昌航空工业
学院学报
,1998(1) 
[31]  
赵熹华
,
王宸煜
,
张若冰
,
严庆光
.  
点焊工艺设计智能混合系统的研究
[J]
，焊
接
2000(3):11~14. 
[32]  
陈益平
,
胡德安
,
陈鹏展
,
李唐柏
.
智能点焊专家系统集成策略的研究
.
机械工
程学报
, 2001(7):61~64. 
[33]  
赵熹华
,
王宸煜
,
张若冰等
.
汽车点焊工艺参数选择及接头质量预测人工智
能化研究
.
汽车技术
,1998(8):26
－
29. 
[34]  
吴林
,
陈善本
.
智能化焊接技术
.
国防工业出版社
.2000. 
[35]  C.L.Tsai,  O.A.Jammal,  J.C.Papritan.  Modeling  of  Resistance  Spot  Weld 
Nugget Growth. Welding joumal, 1992(2):47s-54s. 
[36]  C.L.Tsai WL.Dai, D.W., Dickinson, J.C.Papritan. Analysis and Development 
of  a  Real-Time  Control  Methodology  in  Resistance  Spot  Welding.  Welding 
Journal, 1991(12):339~351. 
[37]  
方平等
.
人工神经网络在焊接质量控制中的应用与展望
.
南昌航空工业学
院学报
, 1998(1) 
[38]  Messler  RWJ,  Jou  Min,  James  LC.  An  Intelligent  Control  System  for 
Resistance  Spot  Welding  Using  a  Neural  Network  and  Fuzzy  Logic. 
Conference Record-IAS Annual Meeting, 1995:1757~1763. 
[39]  Chen  Xingqiao,  Araki  Kenji.  Fuzzy  Adaptive  Process  Control  of  Resistance 
Spot  Welding  with  a  Current  Reference  Model.  Proceedings  of  the  IEEE 
International  Conference  on  Intelligent  Processing  Systems, 
China,1997:190~194. 
[40]  Jou,  Min.  An  Intelligent  Control  System  for  Resistance  Spot  Welding  Using 
Fuzzy  Logic  and  Neural  Network(Tuning).1994,  Rensselaer  Polytechnic 
Institute 
[41]  Dilthey, Bohlmann  Neuronde  Netze  zur  Qualitassicherung  beim  Wider 
standsprunktsch weissen der praktiker[J], 2000(8): 305
－
311 
[42]  
于有生  张旭明  陈明清  郭建江
,  
基于模糊逻辑的电阻点焊微机控制
器的研究，武汉理工大学学报
2002(3):350
～
353 
[43]  Hao M.Osman K A.et al. Developments in characterization of resistance spot 参
  
考
  
文
  
献
 
  109
welding of aluminum. Welding Journal 1996.75 
[44]  
方平
,  
黄石生
,  
林一松等
.
电阻点焊过程智能控制的研究
,  
中国机械工程
2002(5)
年
3
月
 
[45]  Weber  Gert.  Electrode  Wear  Assessment  of  Spot  Welding  by  Fuzzy 
Classification. 51
st
 Annual Asssembly of IIW, Hamburg, Germany, 1998. 
[46]  Weber  Gert.  Non-linear  Methods  in  Resistance  Welding  the  Dynamic 
Weldability  Lobe  and  Fuzzy  Classification.  52st  Annual  Asssembly  of  IIW, 
Lisbon, Portugal, 1999. 
[47]  
姜 孝 华 
. 
电 焊 机 的 单 片 微 机 专 家 智 能 控 制 
. 
西 南 交 通 大 学 学 报 
, 
1994,(5):472
～
476 
[48]  
吴祥淼
,  
黄石生
,  
王志强
,  
薛家祥
,  
方平
.  
逆变式点焊电源恒流系统的智
能控制
.
焊接
,2001(3):19~22 
[49]  
杜全营
,
陈善本
,
于有生
.
基于模糊逻辑的电阻点焊恒流控制系统
.
焊接
, 
2003(6):17~21 
[50]  BOND  A  H.  GASSWE  L.  An  analysis  of  problems  and  research  in  DAI. 
Reading  in  Distributed  Artificial  Intelligence.  Dan  Mateo.  CA:  Morgan 
kaufmann. 1988 
[51]  KENDALL  E.A.  MALKOUN  M.T.  JIANG  C.H.,  A  methodology  for 
developing  agent  based  systems.  Lecture  notes  in  artificial  intelligence. 
Computer. 1995(2):84 
[52]  
朴永杰
,
朱振友
,
丘涛
,
陈善本
.  
点焊柔性加工系统多智能体的协调控制
.
焊
接学报
, 2003(5):17~20 
[53]  Brown  JD,  Jobling  CP.  Optimization  of  Signal  In-puts  to  a  Neural  Network 
for Modeling Spot Welding of Zinc Coated Steels. 51
st
 Annual Asssembly of 
IIW, Hamburg, Germany, 1998. 
[54]  Brown  JD,  Rodd  MG.  Application  of  Artificial  Intelligence  Techniques  to 
Resistance  Spot  Welding[J].  Iron  making  and  Steel  making, 
1998,25(3):199~204. 
[55]  Hsu-Tung Lee, Michael Wang, Roman Maev, Elena Maeva. Study on Using 
Scanning Acoustic Microscopy and Neural Network Techniques to Evaluate 
the Quality of Resistance Spot Welding[J], Int J Adv Manuf Technol (2003) 吉林大学博士学位论文
 
  110
22: 727~732. 
[56]  
饶德林
,
陈立功
,
倪纯珍
.  LD10CS
铝合金点焊的神经网络质量估测
[J],  
上
海交通大学学报
  2003(2):167~170. 
[57]  Yongjoon  Cho,  Sehun  Rhee.
  
New  technology  for  measuring  dynamic 
resistance  and  estimating  strength  in  resistance  spot  welding,  Meas.  Sci. 
Technol. 2000(11): 1173~1178. 
[58]  Zhang Zhongdian, Li Dongqing, Zhao hongyun, Yu Yan. Effects of modeling 
means  on  properties  of  monitoring  models  of  spot  welding  quality,  CHINA 
WELDING. 2002(11):119~123. 
[59]  
张忠典
.  
建立点焊质量神经网络监测模型时作用函数的选取
.
焊接学报
, 
2002(3):59~63 
[60]  Lee SR, Choo YJ, Lee TY, Kim MH, Choi SK. A quality assurance technique 
for  resistance  spot  welding  using  a  neuro-fuzzy  algorithm,  JOURNAL  OF 
MANUFACTURING SYSTEMS 2001 (5): 320~328 
[61]  
方平
.  
基于
DSP
的电阻点焊智能控制系统研究
.  
华南理工大学博士学位
论文
, 2002(5) 
[62]  
罗震
.  
铝合金电阻点焊过程质量检测及控制方法的研究
.
天津大学博士学
位论文
2002(12) 
[63]  T.Shibata,T.Fukuda, K.Kosuge and F.Arai, Skill based control by using fuzzy 
neural  network  for  hierarchical  intelligent  control,  Proc.IJCNN’  92(1992)
Ⅱ
-81~86 
[64]  H.  Takagi  and  I.Haysshi,  NN-driven  fuzzy  reasoning,  Internat.J.  Approx. 
Reasoning 5(1991) 191~212 
[65]  T.Takagi  and  M.Sugeno,  Derrivation  of  fuzzy  control  rules  from  human 
operator’s  control  actions,  Proc.IFAC  Symp.  On  Fuzzy  Information, 
Knowledge Representation and Decision Analysis.1983:55~60 
[66]  L.  F.
蒙多尔福著
,  
王祝堂，张振录，郑漩译
.  
铝合金的组织与性能
.
北京
:
冶金工业出版社，
1988. 
[67]  
赵熹华
.
压力焊
.
北京
:
机械工业出版社，
1988. 
[68]  
吴祥淼
,
黄石生
,
方平
,
王振民
,
邓永翔
.  
逆变式电阻焊机的研究进展
.
电焊机
, 
2000(12):7
～
11 参
  
考
  
文
  
献
 
  111
[69]  
黄石生
,
逆变理论与弧焊逆变器
,  
北京
:
机械工业出版社
,1995 
[70]  
李建国
,  
郭晓敏
,  
刘竹
.  
我国逆变焊机发展浅析
.
电焊机
.1998(1):1~5 
[71]  
李爱文
,  
张承慧
.  
现代逆变技术及其应用
.  
北京：科学出版社
, 2000 
[72]  
张青云
.
电力电子器件的应用及发展
.  
现代电子技术
,
总第
120
期
:37~38 
[73]  
卢薇
,
李之中
,
马新国
.  
逆变焊机的研究与探讨
.  
山西机械
. 2001(6):54~58 
[74]  
方平
,
唐国保
,
黄石生
,
吴祥淼
.  
逆变技术在电阻焊中应用研究
,  
南昌航空工
业学院学报
, 2001(3):16~19 
[75]  
张义
.
逆变式次级整流阻焊电源的研究
.  
电力电子技术
,1995(5)15~17 
[76]  
牛云峰
.IGBT
电阻缝焊电源
,
天津理工学院学报
,1998(3):31~34 
[77]  
华学明 
.IGBT
逆变微型点焊电源的保护分析 
, 
上海工程技术大学学报 
, 
1997(4):43~47 
[78]  
曹彪
.  
逆变式电阻点焊机
8098
单片机控制系统
.  
焊接学报
.1997(2):3841 
[79]  
杨思乾
,
点焊逆变电源网压补偿的数学模型及网压自动补偿电路
,
西北工
业大学学报
,1999 (2):230~235 
[80]  
张 宏 杰 
. 
逆 变 电 阻 焊 机 主 电 路 设 计 与 仿 真 
.  
吉 林 大 学 硕 士 学 位 论
文
,2004.06 
[81]  
张军
,  
赵静
. DSP
芯片的特点及其应用
.  
现代电子技术
.2001(11):79~81 
[82]  Texas Instrument. TMS320LF2407 Digital signal Processors.1996 
[83]  
张雄伟
,
曹铁勇
.DSP
芯片的原理与开发应用
.
北京
:
电子工业出版社
,2000 
[84]  
许伟
.DSP
应用的结构和发展
.
电子技术应用
,1999,4:20~22 
[85]  
刘红梅
.  
彭疆南
.
基于
DSP
的远程通信系统设计与实现
,
  
电子技术
,2001(5): 
30~32 
[86]  
吴东晖
,
田元
,
叶秀清
,  
基于双
DSP
的实时图像处理系统
,
  
电子技术应用
 
2001(10):66~68 
[87]  
胡辉 
  
等 
. 
基于 
TMS320C80 
的 
FFT 
算法的并行实现 
. 
哈尔滨工业大学学
报
.1999(3):86~90 
[88]  
霍修坤 
, 
宋伟 
, 
刘政 
.DSP 
芯片 
TMS320C31 
特点及应用 
. 
国外电子元器
件
,1999(4):43~46 
[89]  
王洪升
,
田蔚风
,
金志华
.
  
基于
DSP
的移动机器人的设计与实现
.  
电子工程
师
.2004(01):56~58 
[90]  
高瑞昌
,
孙昌国
. DSP
在电机测速中的应用
,
  
今日电子
,2004(2):31~33 吉林大学博士学位论文
 
  112
[91]  
林苏斌
.  
缪希仁
.  
张培铭
,
  
基于
DSP
与可视化技术的接触器动态测试装置
研究
.
福州大学学报
(
自然科学版
) 2004(1):39~42 
[92]  
王常力等
.
散型控制系统的选型与应用
.
清华大学出版社
.96(6) 
[93]  
李桂青，罗持久．工程设计专家系统的原理与程序设计方法，气象出版
社，
1991 
[94]  JL,  Alty  and  M.J
．
  coombs,  expert  systems  concepts  and  examples.  Ncc 
publication ,England, 1984 
[95]  
吴慧中，陈宝方，万耀表．机械设计专家系统研究与实践，中国铁道出
版社，
1994 
[96]  
张立明．人工神经网络的模型及其应用
.  
复旦大学出版社，
1993 
[97]  Zadeh  LA.  Towards  a  Theory  of  Fuzzy  System  in  Aspects  of  Networks  and 
System Theory.New York,1971 
[98]  
王士同
.
模糊系统、模糊神经网络用应用程序设计
.
上海科学技术文献出版
社
,1998 
[99]  Shi Q Y
，
Lu A L
，
Zhao H Y
，
etal. Development and application of adaptive 
mesh  technique  in  three  dimensional  numerical  simulation  of  welding 
process[J].Acta Metallurgica Sinica(English letter)
，
2000
，
13(1)
：
33-39. 
[100]  Zhao  H  Y
，
  Shi  Q  Y
，
Lu  A  L
，
  etal.  Simulation  of  welding  process  of 
T-joints[J].Acta Metallurgica Sinica(English letter)
，
2000
，
13(1)
：
205-212. 
[101] Lijun Xu
，
Jamil A.Khan.   Numerical study of thermal modeling of resistance 
spot  welding  utilizing  coupled  thermal-electrical-mechanical  analysis[A]. 
The  1999  ASME  International  Mechanical  Engineering  Congress  and 
Exposition
，
2000
，
395-402. 
[102] X.Sun and P.Dong. Analysis of aluminum resistance spot welding processing 
using  coupled  finite  element  procedures.  Welding  Journal
，
2001
，
43(8)
：
215-221. 
[103] 
张贵锋
,
包亚峰
,
张建勋
.  
点焊控制方法的发展与动向
.  
电焊机
,1999(2):1~6 
[104] 
陆汝钤
.  
人工智能（下册）．北京：科学出版社，
1996 
[105] Philip, W.G., et al
．
  Fault Diagnosis for Industrial Printers Using Case-Based 
Reasoning . Engng . Applic. Artif . Intell. 1996,9(2):163~172 
[106] 
傅积和、孙玉林．焊接数据资料手册．机械工业出版社，
1999 参
  
考
  
文
  
献
 
  113
[107] Fu, L.M. Rule Learning by Searching on Adapted Nets. In Proceeding of the 
Ninth National Conference on Artificial Intelligence. 1991:590~595. 
[108] Setiono  R.  Extracting  Rules  from  Neural  networks  by  Pruning  and 
Hidden-unit Splitting. Neural Computation,1997(1):205~225 
[109] Craven  M,  Shavlik  J.  Extracting  Tree-Structured  Representations  of  Trained 
Networks. In: Touretzky D,Mozer M, Hasselmo M, etc., Advances in Neural 
Information  Processing  Systems,  The  MIT  Press,  Cambridge,  MA,  1996, 
24~30 
[110] 
杨黎峰
.
铝合金电阻点焊熔核形成过程的数值模拟
.  
吉林大学硕士学位论
文
. 2005.06 
[111] 
刘和平
.TMS320LF240X  DSP
结构、原理及应用
.
北京
:
北京航空航天大学
出版社
,2002 
[112] 
熊腊森
,  
刘长友
.  IGBT
驱动保护电路
EXB841
与
M57959L
的研究
.  
电焊机
, 
2000(11):29
～
31 附
        
录
 
  114
附  录 
 
参与研究的科研课题：
 
 
1.   
国家自然科学基金资助项目“铝合金电阻点焊工艺设计及质量控制的研
究”，
No.50175048
；
 
2.   
通用公司（
GM
，美国）资助项目“铝合金电阻点焊熔核孕育处理研究”；
 
3.  
通用公司（
GM
，美国）资助项目“激光焊与电阻缝焊复合焊接方法研究”
 
 
发表的主要论文：
 
1.
  
曹海鹏
,  
赵熹华等，基于事例推理的点焊工艺参数选择智能化，焊接学
报
,2003(6)
。
  EI
（
04158112739
）
 
2.  
曹海鹏
,  
赵熹华等，铝合金电阻点焊焊接参数选择的智能化，吉林大学学报
(
工学版
)
，
2004(2) 
3.  
曹海鹏
,  
赵熹华等，人工智能在电阻点焊过程的应用与发展，吉林大学学报
(
工学版
), 2004(4) 
4.  
曹海鹏 
,  
赵熹华等，铝合金点焊工艺设计及质量控制的智能化研究，
ICFDM’04,
西安
,2004:146 
5.  
曹海鹏、赵熹华
＊
、赵贺，铝合金电阻点焊工艺设计智能化，焊接学报，
Vol.26 
No.2
，
2005 
6.  
曹海鹏、赵熹华
＊
、赵贺，人工神经网络在电阻点焊工艺设计中的应用，第
十一届全国焊接会议论文集，
H-5-004-2005
，
2005
年
5
月，上海
 
7.  
赵熹华，曹海鹏，赵贺，激光焊－电阻缝焊复合焊接方法的研究，第十一
届全国焊接会议论文集，
H-6-004-2005
，
2005
年
5
月，上海致
         
谢
 
  115
致  谢 
本论文的研究工作是在导师赵熹华教授的悉心指导和关怀下完成的。导师
严谨求实的科研态度、渊博的知识使我在知识的探索、运用以及对科学问题的
求解过程中深深受益，而且导师朴素、坦诚的生活作风也令我十分敬佩。在过
去三年的学习、工作生活中，导师在学习、工作和生活中都给了我无微不至的
关怀和帮助。值此论文完成之际，谨向导师致以衷心的感谢和致意。
 
在论文工作中，得到了教研室元哲石副教授、殷世强工程师等老师的帮助
和指导；本专业张宏杰、李永强等硕士研究生给予我工作很大的支持。在此，
向众位老师、同学表示衷心的感谢。
 
感谢所有帮助我、支持我完成学业的朋友们，祝他们顺利。
 
深深的感谢我的父母和妻子对我学业的支持与精神上的鼓励。摘
        
要
 
  I
摘  要 
题目：铝合金点焊工艺设计及质量控制智能化研究
 
专业：材料加工工程
 
导师：赵熹华
   
教授
 
 
铝合金点焊在汽车工业和航空航天工业中获得很广泛的应用，但是由于铝
合金自身物理性质的特点，其电阻点焊焊接性很差，其电阻点焊质量控制极为
困难，且焊接质量随着焊接参数的变化波动严重。铝合金电阻点焊工艺设计及
质量控制过程是一个复杂的多输入、多输出的病态的问题求解过程，具有典型
的非线性特点。应用人工智能技术来进行电阻点焊工艺参数规划及其质量的智
能控制是解决这一问题的有效途径。数字信号处理技术是利用计算机或专用处
理设备，以数值计算法方法对信号进行采集、变换、综合、估算与识别等加工
处理借以达到提取信息和便于应用目的的一种技术。
DSP 
芯片由于具有运算
速度极快，精度高，接口方便，特别适合处理复杂的数字信号处理算法，获得
了广泛的应用。
 
铝合金电阻点焊质量控制过程是个复杂的系统工程，从铝合金电阻点焊工
艺设计到电阻点焊过程控制等，很多因素、子系统都对铝合金电阻点焊质量有
着较大的影响。本文建立一个铝合金电阻点焊智能集散型系统，以主控计算机
为中心，管理、结合分散在工业控制用微控制系统。主控计算机具有丰富的人
机交互资源以及大量的存储空间，容易实现友好的人机界面，控制管理功能较
强。而下位工业微控制器直接面对工业测控对象，执行底层控制以及数据采集
功能。主控计算机和下位工业控制器既可以相互独立工作，彼此又具有联系，
二者集成一个铝合金电阻点焊智能控制系统。其中主控计算机完成总体控制功
能，包括铝合金电阻点焊工艺参数设计，模块总体控制，对下位控制器采集的
数据进行存储、分析等功能。下位机完成铝合金电阻点焊过程实时控制，在线
数据采集等功能。本文研究内容为上位机软件控制系统中铝合金电阻点焊工艺
设计智能系统及下位机铝合金电阻点焊过程智能控制器，为国家自然科学基金
支持项目，项目编号为 
50175048
。
 吉林大学博士学位论文
 
  II
铝合金电阻点焊工艺设计智能系统由点焊工艺设计、机器学习以及点焊知
识咨询三个模块组成。点焊工艺设计模块负责根据用户的输入制定和修改点焊
工艺规范；机器学习模块完成事例库的维护、推理规则的维护以及神经网络训
练等任务；点焊知识咨询模块对用户提供材质点焊焊接性、电极知识和点焊缺
陷分析等知识咨询。在点焊工艺设计模块中，采用基于事例的推理、基于规则
的推理以及模糊神经网络等多种推理方法，来充分模拟人类领域专家的思维方
式进行铝合金电阻点焊工艺规范的求解。在基于事例的推理子模块中，本系统
结合点焊工艺的特殊性，重点分析了点焊工艺参数的事例特征，参照提取出的
事例特征和点焊工艺的独特性，提出了点焊工艺事例的检索以及修正策略。本
文深入研究了点焊工艺的内在特性，制定了在第Ⅰ类事例特征的约束下，以材
质的厚度和其热物理性质作为检索的首要条件，更加符合人类领域专家的基于
经验的思维方式，使得推理过程更加灵活。在搜索到相似事例后，系统以领域
专家进行工艺设计的过程为依据，以材质自身的热物理性质——电阻率、屈服
强度为输入，以材质的点焊工艺参数中的焊接电流、焊接压力为输出，设计了
相应的模糊修正算法，使基于事例的推理更加符合铝合金电阻点焊过程的本质
特征。
 
基于模糊神经网络的推理模块设计思想是采用基于模糊神经网络的新型
专家系统，通过模糊神经网络技术和专家系统技术的结合，充分模拟人类专家
的思维过程，提高本系统的求解性能。本模块的主要设计目的为：在供电波形、
电极选用的限制条件下，结合专家系统和模糊神经网络技术，设计一个通用推
理模块，根据不同铝合金材料的不同的热物理特性，求解出相应的工艺规范参
数。通过分析专家系统和模糊神经网络的各自特点，将传统专家系统与模糊神
经网络技术相结合的思想用于点焊工艺设计智能系统中。并根据点焊工艺参数
的特点，将点焊工艺参数分解细化，把点焊工艺求解过程分解为不同的求解子
模块，并按照各模块的具体特点，具体应用相应的智能技术。在点焊工艺主要
参数的求解子模块中，以焊接时间来表征规范强度，作为求解焊接电流的模糊
神经子网络的输入参数之一，充分适应点焊工艺设计的复杂求解特征。并可根
据焊机的容量限制来灵活的调整焊接电流，使之适应用户指定的焊机，具有良
好的优化性质。以材质热物理特征作为神经网络输入参数将材质的物理性质对
点焊过程的影响引入到焊接工艺规范的求解过程中，深层次模拟了人类专家在
进行点焊工艺设计中的思维过程，并以此作为材质的辨识特征，改变了以往类摘
        
要
 
  III
似系统中以材料库中材料名称来识别材质的方式，增加了系统的推理灵活性。
 
在集散型铝合金电阻点焊智能控制系统的下位机系统中，为提高铝合金电
阻点焊过程控制精度，首次采用 
DSP 
芯片 
TMS LF2407A 
作为逆变电阻点焊智
能控制器的主芯片，并设计了相应的人机交互模块、
IGBT 
驱动模块、故障检
测以及保护等辅助功能模块的硬件组成，为进行铝合金电阻点焊质量控制提供
了硬件基础。人机交互模块由薄膜键盘以及液晶显示模块组成，实现用户对焊
接参数的选择，功能模块的控制，完成用户与系统之间的交流通讯功能。
IGBT
作为电阻点焊逆变电源的主要功率转换元件，其是否能够正常的开通与关断直
接关系到焊接电源的工作是否正常工作。
IGBT 
的驱动及保护是点焊逆变电源
设计的关键。本系统采用光耦隔离式而且具有封闭性软关断功能，能够在 
IGBT
短路时，软关断 
IGBT
，从而完成对主电路的保护。
 
软件系统是逆变电阻点焊电源智能控制器的核心，本文在分析控制器功
能的基础上，进行软件系统各功能模块的设计。采用消息产生与响应机制处
理用户输入与响应，是人机交互更加灵活。设计了完整的故障诊断与报警机
制，使系统工作更加稳定，可靠。对控制参量焊接电流及其变化率提出了相
应的模糊划分及模糊控制规则，采用模糊控制技术进行电阻点焊过程控制。
采用仿真对模糊控制规则划分提取进行优化，提高了模糊控制的精度及其鲁
棒性。提出了结合焊接电流及电极电压相结合的质量控制方法，系统仿真结
果表明本智能控制系统可以提高铝合金电阻点焊质量控制精度。
 
本研究能显著提高铝合金电阻点焊工艺设计水平及质量控制精度，为智
能工程在焊接领域的应用提供了一条全新的途径，具有重要的理论研究意义
和工程实际应用价值。
 
关键词：铝合金电阻点焊；工艺设计；质量控制；人工智能
  吉林大学博士学位论文
 
  IV
ABSTRACT 
The spot welding of aluminum alloys has gained more and more application in 
automobile,  airline  and  spaceflight  industries.  For  its  physical  characteristics, 
aluminum alloys have bad weldability and quality controlability and the quality of 
nugget  fluctuates  according  to  the  process  parameters.  The  design  of  process 
parameters and quality control of its resistance spot welding is a ill structural task 
with  multi-inputs  and  multi-outputs,  which  shows  typical  non-linearity.  It  is  a 
effective way to employ AI to design the parameters and control the process quality. 
Digital  Signal  Processing  is  a  new  technology  that  employs  numerical 
implementation  to  gathering  signals,  translating,  synthesizing,  evaluating  and 
identification  to  obtain  information  with  computers  or  special  processing  devices. 
For  the  high  speed  and  precision  and  convenient  interfaces,  DSP  is  fit  to  handle 
complex signal processing algorithm and obtain broad application.   
As  the  quality  control  of  aluminum  alloys  resistance  spot  welding  is  a 
complicated systems engineering, many factors and sub-systems including process 
parameters design of aluminum alloys resistance spot welding system and process 
control  of  resistance  spot  welding  system  exert  an  influence  on  quality  of 
aluminum  alloy  resistance  spot  welding.  This  paper  developed  a  intelligent 
distributed  controlling  system  of  aluminum  alloys  which,  depending  on  the 
supervisor  CPU,  managed  and  controlled  the  distributed  micro-controllers  in 
process.  With  powerful  ability  of  man-machine  interaction  and  great  capacity  for 
RAM/ROM, it is convenient to build a man-machine interaction system and carry 
out  the  main  control  functions.  on  the  other  side,  the  micro-controller  directly 
controls  the  objects  on  the  line  and  carry  out  the  functions  of  bottom  control  and 
data  aquisitioon.  The  supervisor  and  lower  CPU  can  work  independently,  while 
they  can  work  together,  both  them  constitute  the  intelligent  system  of  aluminum 
alloys resistance spot welding. The supervisor CPU carries out the general control 
functions,  which  include  process  parameters  design,  general  control  and  store  and ABSTRACT 
  V
analyze  the  data  from  the  lower  CPU.  The  lower  CPU  completes  the  data 
acquisition  and  process  control  on  line.  This  paper  focuses  on  the  intelligent 
process  parameters  design  system  (IPPDS)  of  aluminum  alloys  resistance  spot 
welding(AARSW)  in  the  supervisor  and  the  intelligent  process  control  of 
aluminum  alloys  resistance  spot  welding  in  the  lower  CPU,  supported  by  NSFC, 
the number is 50175048.. 
  The  IPPDS  of  aluminum  alloys  resistance  spot  welding   consists  of  three 
parts, process parameters design, machine learning and spot welding reference .The 
task  completed  in  process  parameters  design  module  comprises  user  input, 
designing and amending spot welding parameters; And that completed in machine 
learning module consists of maintaining databases and rules databases and training 
FNN.  In  spot  welding  reference  module,  it  is  supplied  that  the  help  of  relative 
knowledge  of  spot  welding  including  material  weldability,  electrode  and  analysis 
on  flaws.  In  process  parameters  design  module,  various  reasoning  methods 
including  case  based  reasoning  (CBR),  rule  base  reasoning  and  fuzzy  neural 
networks (FNN) are applied to intimate fully the ways that people experts in fields 
try to design spot welding parameters.In the CBR sub-module, the case characters 
are analyzed in details according to AARSW process particularity, and by referring 
to  which  the  strategies  of  searching  and  amending  are  established.  In  this  paper, 
interior of AARSW process was revealed deeply. Under the limit of the first class 
of characters, thickness and thermal physical properties of materials were selected 
as  initial  indexes,  which  increased  the  flexibility  of  reasoning  process  and  was 
more similar to the way based on experiences that people experts thought. A fuzzy 
inference  amending  algorithm  was  proposed,  in  which  electricresistivity  and  yield 
strength  are  used  as  inputs  and  welding  current  and  electrode  force  as  outputs, 
furthermore  which  meets  interior  behavior  of  AARSW  process.  All  of  that 
increased the flexibility and accuracy of CBR. 
The  design  conception  of  reasoning  module  under  the  idea  of  new  experts 
system  based  on  FNN,  tried  to  intimate  the  thinking  way  of  people  experts  and 
improve  reasoning  capability  of  the  system  by  integrating  FNN  and  ES.  This 
module,  under  the  limit  of  current  waves  and  electrode  styles,  aimed  to  set  up  a 吉林大学博士学位论文
 
  VI
general  reasoning  module  which  was  able  to  determine  corresponding  AARSW 
process parameters in terms of various thermal physical properties of various kinds 
of  aluminum  alloys.  By  analyzing  FNN  and ES, the idea of integrating traditional 
ES  and  FNN  was  applied  to  IPPDS  of  AARSW.   According  to  prosperities  of 
AARSW parameters, the process of reasoning was divided into several modules by 
classifying process parameters and relative intelligent techniques were adopted for 
different  modules.  In  the  subsystem  for  main  parameters  solution,  welding  cycles 
were used as one of inputs in sub-networks, sign of strength of welding process, to 
attain the value of welding current. That applied to complex characters of solution 
to IPPDS of AARSW well. Output value of welding current was able to be adjusted 
in  the  range  of  current  that  power  can  supply  to  fit  the  given  power,  which  can 
optimize  outputs.  The  influence  of  material  physical  prosperities  on  welding 
process  was  added  to  solution  to  welding  procedure  parameters  by  material 
weldability  was  served  as  one  of  inputs,  so  it  was  possible  to  intimate  deeply  the 
way  of  people  experts  thinking.  And  that  as  material  distinguishability  took  place 
of the way to distinguish materials by name in similar system before and increased 
reasoning flexibility. 
TMS LF2407A was used as the chief core of the intelligent controller of RSW 
inverter  for  the  first  time  to  improve  the  control  precision  in  the  lower  system  of 
the distributed intelligent control system of AARSW, and the hardware sub-system 
which  comprised  man-machine  interaction  module,  IGBT  driver  module  and 
failure  diagnosis  and  protection  module  etc.  was  developed.  The  man-machine 
interaction  module  consists  of  LCD  display  module  and  membrane  keyboard 
carries out the functions of process parameters setup, shift of control modules, as a 
whole , it is the communication module between users and system. The driver and 
protection  module  of  IGBT  is  the  key  factor  of  designing  RSW  inverter,  for 
whether  RSW  inverter  does  work  or  not  directly  depends  on  the  work  status  of 
IGBT,  which  is  the  main  power  translated  component.  This  device  operates  as  an 
isolation amplifier for these modules and provides the required electrical isolation 
between  the  input  and  output  with  an  opto-coupler.  Short  circuit  protection  is 
provided by a built in desaturation detector. A fault signal is provided if the short ABSTRACT 
  VII
circuit protection is activated. 
The software is the kernel of the intelligent controller of RSW inverter. Based 
on  the  function  analysis,  the  functional  modules  were  developed.  The  message 
triggering  and  responding  operates  inputs  and  responses,  that  increase  the 
flexibility  of  communication  between  users  and  system.  The  diagnosis  and 
detection module improve the stability. The controlling parameter, welding current, 
and its gradient were fuzzified and the rule of fuzzy inference were built, the fuzzy 
controller of RSW was developed. The precision and robust of fuzzy controller was 
improved by optimizing fuzzy rules and fuzzification with the simulation tool. the 
Both  the  current  and  voltage  between  electrode  tips  were  used  as  monitoring 
parameters and the results of simulation and experiments proved that improved the 
precision of quality control of AARSW.  
This research improves markedly the design of process parameters and quality 
control of its resistance spot welding and set up a new way to the application of AI 
in  welding  field,  which  Obtains  not  only  the  high  academic  value  but  also  the 
significant engineering application value.  
 
Keyword: AARSW; Process Design; Quality Control; Artificial Intelligence  